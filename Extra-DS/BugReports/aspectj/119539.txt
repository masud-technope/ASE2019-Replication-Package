generic pertypewithin advice fails to match though pointcut does
Get compiler xlint adviceDidNotMatch when using parameterized type to specify type pattern for pertypewithin clause. Parameterized type works in pointcuts, and the pointcut matches staticly (with deow). Same result for before or around advice. Also, the permitted uses for the type parameter of a parameterized aspect in the adk15notebook section on point. Resolutions could be: - not a bug b/c the code below is wrong - not permitted to use type parameter in pertypewithin; doc updated - permitted, fixed ... AspectJ version 1.5.0.20051206103951, via AJDT ----------------------------------------- sample package bugs; public class GenericPerTypeWithin { public static void main(String[] args) { new C(); // fyi, compiler does nothing absent this call? } public static abstract aspect Singleton<Target> pertypewithin(Target) { pointcut creation() : execution(Target+.new()) ; // adviceDoesNotMatch - same for before advice Target around() : creation() { return proceed(); } // picks out constructor-execution below declare warning : creation() : "Singleton.creation()"; } static class C { C(){} } static aspect A extends Singleton<C> {} }