copyright xerox corporation palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj internal tools ant taskdefs java buffered input stream bufferedinputstream java buffered output stream bufferedoutputstream java byte array output stream bytearrayoutputstream java file java file input stream fileinputstream java file output stream fileoutputstream java ioexception java input stream inputstream org apache tools ant build exception buildexception org apache tools ant directory scanner directoryscanner org apache tools ant taskdefs matching task matchingtask strip non body html stripnonbodyhtml matching task matchingtask file src dir srcdir file dest dir destdir set srcdir setsrcdir file src dir srcdir src dir srcdir src dir srcdir set destdir setdestdir file dest dir destdir dest dir destdir dest dir destdir execute build exception buildexception src dir srcdir build exception buildexception srcdir attribute src dir srcdir exists build exception buildexception srcdir exist src dir srcdir is directory isdirectory build exception buildexception srcdir directory dest dir destdir dest dir destdir exists build exception buildexception destdir exist dest dir destdir is directory isdirectory build exception buildexception destdir directory directory scanner directoryscanner get directory scanner getdirectoryscanner src dir srcdir string files get included files getincludedfiles log stripping files length files stripped len files length len process file processfile files stripped log files stripped log stripped files stripped process file processfile string filename build exception buildexception file src file srcfile file src dir srcdir filename file dest file destfile dest dir destdir dest file destfile src file srcfile dest file destfile file dest dir destdir filename dest file destfile get parent file getparentfile mkdirs strip src file srcfile dest file destfile ioexception build exception buildexception strip file file ioexception buffered input stream bufferedinputstream buffered input stream bufferedinputstream file input stream fileinputstream string read to string readtostring close write body to writebodyto byte array output stream bytearrayoutputstream temp byte array output stream bytearrayoutputstream buf string read to string readtostring input stream inputstream ioexception byte array output stream bytearrayoutputstream temp temp buf buf string read buf temp write buf temp to string tostring temp reset write body to writebodyto string file ioexception start start find start findstart find end findend start parse exception parseexception process body processbody buffered output stream bufferedoutputstream buffered output stream bufferedoutputstream file output stream fileoutputstream write get bytes getbytes close process body implemenation strips text start strip strip inclusive string process body processbody string body file file body body string start start strip string strip strip tags striptags body file to string tostring start strip substrings input start param input string strip param source source logging purposes param start starting tag sensitive param tag sensitive string strip tags striptags string input string source string start string input input string buffer stringbuffer buffer string buffer stringbuffer input length string result input cur loc curloc start loc startloc input index of indexof start cur loc curloc start loc startloc buffer append input substring cur loc curloc result buffer to string tostring valid exit end loc endloc input index of indexof start loc startloc end loc endloc log source strip tags striptags tag start loc startloc start loc startloc invalid exit end loc endloc start loc startloc log source strip tags striptags impossible start loc startloc start loc startloc end loc endloc end loc endloc invalid exit buffer append input substring cur loc curloc start loc startloc cur loc curloc end loc endloc length result find start findstart string parse exception parseexception len length start start index of indexof body start start start index of indexof body start start barf start start start len barf char at charat start start character is whitespace iswhitespace start index of indexof start start start find end findend string start parse exception parseexception index of indexof body start index of indexof body start barf parse exception parseexception exception serial version uid serialversionuid parse exception parseexception barf parse exception parseexception