copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors parc initial implementation org aspectj weaver bcel java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java data output stream dataoutputstream java ioexception java lang reflect modifier java util array list arraylist java util collections java util hashtable java util list org aspectj apache bcel constants org aspectj apache bcel classfile class parser classparser org aspectj apache bcel classfile java class javaclass org aspectj apache bcel classfile method org aspectj apache bcel classfile annotation array element value arrayelementvalue org aspectj apache bcel classfile annotation element name value pair elementnamevaluepair org aspectj apache bcel classfile annotation element value elementvalue org aspectj apache bcel classfile annotation simple element value simpleelementvalue org aspectj apache bcel array type arraytype org aspectj apache bcel bipush org aspectj apache bcel basic type basictype org aspectj apache bcel branch instruction branchinstruction org aspectj apache bcel constant push instruction constantpushinstruction org aspectj apache bcel org aspectj apache bcel instruction org aspectj apache bcel instruction constants instructionconstants org aspectj apache bcel instruction factory instructionfactory org aspectj apache bcel instruction handle instructionhandle org aspectj apache bcel instruction list instructionlist org aspectj apache bcel instruction targeter instructiontargeter org aspectj apache bcel ldc org aspectj apache bcel line number tag linenumbertag org aspectj apache bcel object type objecttype org aspectj apache bcel reference type referencetype org aspectj apache bcel sipush org aspectj apache bcel org aspectj apache bcel select org aspectj apache bcel target lost exception targetlostexception org aspectj apache bcel type org aspectj bridge isource location isourcelocation org aspectj weaver annotation x annotationx org aspectj weaver bcexception org aspectj weaver lint org aspectj weaver member org aspectj weaver resolved type resolvedtype org aspectj weaver unresolved type unresolvedtype utility utility ensure report nice source location source info missing binary weave string beautify location beautifylocation isource location isourcelocation isl string buffer stringbuffer nice string buffer stringbuffer isl isl get source file getsourcefile isl get source file getsourcefile get name getname index of indexof debug info nice append debug info file get name getname fails linux box encounters path created windows vice versa take from takefrom isl get source file getsourcefile get path getpath last index of lastindexof take from takefrom take from takefrom isl get source file getsourcefile get path getpath last index of lastindexof nice append isl get source file getsourcefile get path getpath substring take from takefrom isl get line getline nice append append isl get line getline nice to string tostring instruction create super invoke createsuperinvoke instruction factory instructionfactory fact bcel world bcelworld member signature kind signature is interface isinterface runtime exception runtimeexception bad signature is private isprivate signature get name getname equals init runtime exception runtimeexception unimplemented bad signature is static isstatic runtime exception runtimeexception bad kind constants invokespecial fact create invoke createinvoke signature get declaring type getdeclaringtype get name getname signature get name getname bcel world bcelworld make bcel type makebceltype signature get return type getreturntype bcel world bcelworld make bcel types makebceltypes signature get parameter types getparametertypes kind instruction create invoke createinvoke instruction factory instructionfactory fact bcel world bcelworld member signature kind signature is interface isinterface kind constants invokeinterface signature is static isstatic kind constants invokestatic signature is private isprivate signature get name getname equals init kind constants invokespecial kind constants invokevirtual unresolved type unresolvedtype target type targettype signature get declaring type getdeclaringtype target type targettype is parameterized type isparameterizedtype target type targettype target type targettype resolve get generic type getgenerictype fact create invoke createinvoke target type targettype get name getname signature get name getname bcel world bcelworld make bcel type makebceltype signature get return type getreturntype bcel world bcelworld make bcel types makebceltypes signature get parameter types getparametertypes kind instruction create get createget instruction factory instructionfactory fact member signature kind signature is static isstatic kind constants getstatic kind constants getfield fact create field access createfieldaccess signature get declaring type getdeclaringtype get name getname signature get name getname bcel world bcelworld make bcel type makebceltype signature get return type getreturntype kind creae field instruction param fact param signature param declaring type declaringtype instruction create get on creategeton instruction factory instructionfactory fact member signature unresolved type unresolvedtype declaring type declaringtype kind signature is static isstatic kind constants getstatic kind constants getfield fact create field access createfieldaccess declaring type declaringtype get name getname signature get name getname bcel world bcelworld make bcel type makebceltype signature get return type getreturntype kind instruction create set createset instruction factory instructionfactory fact member signature kind signature is static isstatic kind constants putstatic kind constants putfield fact create field access createfieldaccess signature get declaring type getdeclaringtype get name getname signature get name getname bcel world bcelworld make bcel type makebceltype signature get return type getreturntype kind instruction create invoke createinvoke instruction factory instructionfactory fact java class javaclass declaring class declaringclass method new method newmethod kind new method newmethod is interface isinterface kind constants invokeinterface new method newmethod is static isstatic kind constants invokestatic new method newmethod is private isprivate new method newmethod get name getname equals init kind constants invokespecial kind constants invokevirtual fact create invoke createinvoke declaring class declaringclass get class name getclassname new method newmethod get name getname type get return type getreturntype new method newmethod get signature getsignature type get argument types getargumenttypes new method newmethod get signature getsignature kind string to utf stringtoutf string byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream data output stream dataoutputstream data output stream dataoutputstream write utf writeutf to byte array tobytearray ioexception runtime exception runtimeexception sanity check instruction create instanceof createinstanceof instruction factory instructionfactory fact reference type referencetype cpool entry cpoolentry array type arraytype fact get constant pool getconstantpool add array class addarrayclass array type arraytype fact get constant pool getconstantpool add class addclass object type objecttype cpool entry cpoolentry instruction create invoke createinvoke instruction factory instructionfactory fact lazy method gen lazymethodgen kind get enclosing class getenclosingclass is interface isinterface kind constants invokeinterface is static isstatic kind constants invokestatic is private isprivate get name getname equals init kind constants invokespecial kind constants invokevirtual fact create invoke createinvoke get class name getclassname get name getname get return type getreturntype get argument types getargumenttypes kind create invoke instruction param fact param kind invokeinterface invokevirtual param member instruction create invoke createinvoke instruction factory instructionfactory fact kind member member fact create invoke createinvoke member get declaring type getdeclaringtype get name getname member get name getname bcel world bcelworld make bcel type makebceltype member get return type getreturntype bcel world bcelworld make bcel types makebceltypes member get parameter types getparametertypes kind cached remember profile problem string make arg names makeargnames string ret string ret arg ret lookup table converting pairs types method conversions hashtable valid boxing validboxing hashtable valid boxing validboxing ljava lang byte object byteobject valid boxing validboxing ljava lang character char object charobject valid boxing validboxing ljava lang double object doubleobject valid boxing validboxing ljava lang float object floatobject valid boxing validboxing ljava lang integer int object intobject valid boxing validboxing ljava lang long object longobject valid boxing validboxing ljava lang short object shortobject valid boxing validboxing ljava lang boolean object booleanobject valid boxing validboxing bljava lang byte value bytevalue valid boxing validboxing cljava lang character char value charvalue valid boxing validboxing dljava lang double value doublevalue valid boxing validboxing fljava lang float value floatvalue valid boxing validboxing iljava lang integer int value intvalue valid boxing validboxing jljava lang long value longvalue valid boxing validboxing sljava lang short value shortvalue valid boxing validboxing zljava lang boolean value booleanvalue append conversion appendconversion instruction list instructionlist instruction factory instructionfactory fact resolved type resolvedtype from type fromtype resolved type resolvedtype to type totype to type totype is convertable from isconvertablefrom from type fromtype from type fromtype is convertable from isconvertablefrom to type totype bcexception convert from type fromtype to type totype xxx test simpler brain hurts works to type totype get world getworld is in java isinjava mode to type totype needs no conversion from needsnoconversionfrom from type fromtype to type totype needs no conversion from needsnoconversionfrom from type fromtype to type totype is primitive type isprimitivetype from type fromtype is primitive type isprimitivetype to type totype equals resolved type resolvedtype from type fromtype equals unresolved type unresolvedtype object append instruction factory instructionfactory create pop createpop from type fromtype get size getsize from type fromtype equals resolved type resolvedtype to type totype equals unresolved type unresolvedtype object append instruction factory instructionfactory create null createnull type object from type fromtype equals unresolved type unresolvedtype object type bcel world bcelworld make bcel type makebceltype to type totype to type totype is primitive type isprimitivetype string to type totype to string tostring append fact create invoke createinvoke org aspectj runtime internal conversions type type object constants invokestatic append fact create check cast createcheckcast reference type referencetype to type totype equals unresolved type unresolvedtype object from type fromtype is primitive isprimitive type bcel world bcelworld make bcel type makebceltype from type fromtype string from type fromtype to string tostring object append fact create invoke createinvoke org aspectj runtime internal conversions type object type constants invokestatic to type totype get world getworld is in java isinjava mode valid boxing validboxing to type totype get signature getsignature from type fromtype get signature getsignature xxx optimize java boxing code call type bcel world bcelworld make bcel type makebceltype from type fromtype type bcel world bcelworld make bcel type makebceltype to type totype string string valid boxing validboxing to type totype get signature getsignature from type fromtype get signature getsignature to type totype is primitive type isprimitivetype append fact create invoke createinvoke org aspectj runtime internal conversions type type object constants invokestatic append fact create invoke createinvoke org aspectj runtime internal conversions type object type constants invokestatic append fact create check cast createcheckcast reference type referencetype from type fromtype is primitive type isprimitivetype to type totype is primitive isprimitive type bcel world bcelworld make bcel type makebceltype from type fromtype type bcel world bcelworld make bcel type makebceltype to type totype append fact create cast createcast runtime exception runtimeexception append fact create cast createcast type append fact create cast createcast type type bcel world bcelworld make bcel type makebceltype to type totype from type fromtype is primitive isprimitive to type totype is primitive isprimitive append fact create check cast createcheckcast reference type referencetype instruction list instructionlist create conversion createconversion instruction factory instructionfactory factory type from type fromtype type to type totype create conversion createconversion factory from type fromtype to type totype instruction list instructionlist create conversion createconversion instruction factory instructionfactory fact type from type fromtype type to type totype allow autoboxing allowautoboxing system println to type totype instruction list instructionlist instruction list instructionlist from type fromtype equals type from type fromtype equals type from type fromtype equals type to type totype equals type from type fromtype equals to type totype to type totype equals type append instruction factory instructionfactory create pop createpop from type fromtype get size getsize from type fromtype equals type to type totype basic type basictype bcexception attempting basic type append instruction factory instructionfactory create null createnull type object from type fromtype equals type object to type totype basic type basictype string to type totype to string tostring append fact create invoke createinvoke org aspectj runtime internal conversions to type totype type type object constants invokestatic to type totype equals type object from type fromtype basic type basictype string from type fromtype to string tostring object append fact create invoke createinvoke org aspectj runtime internal conversions type object type from type fromtype constants invokestatic from type fromtype reference type referencetype runtime exception runtimeexception from type fromtype reference type referencetype reference type referencetype from type fromtype is assignment compatible with isassignmentcompatiblewith to type totype allow autoboxing allowautoboxing to type totype basic type basictype from type fromtype reference type referencetype unboxing string to type totype to string tostring append fact create invoke createinvoke org aspectj runtime internal conversions to type totype type type object constants invokestatic from type fromtype basic type basictype to type totype reference type referencetype boxing string from type fromtype to string tostring object append fact create invoke createinvoke org aspectj runtime internal conversions type object type from type fromtype constants invokestatic append fact create cast createcast type object to type totype append fact create cast createcast from type fromtype to type totype instruction create constant createconstant instruction factory instructionfactory fact instruction inst inst instruction constants instructionconstants iconst inst instruction constants instructionconstants iconst inst instruction constants instructionconstants iconst inst instruction constants instructionconstants iconst inst instruction constants instructionconstants iconst inst instruction constants instructionconstants iconst inst instruction constants instructionconstants iconst max min inst bipush max min inst sipush inst ldc fact get class gen getclassgen get constant pool getconstantpool add integer addinteger inst java class javaclass make java class makejavaclass string filename bytes class parser classparser parser class parser classparser byte array input stream bytearrayinputstream bytes filename parser parse ioexception bcexception malformed file string array to string arraytostring len length len string buffer stringbuffer buf string buffer stringbuffer buf append len buf append buf append buf append buf to string tostring replace instruction handle instruction branch instruction param instruction handle replace param branch instruction branchinstruction branch instruction replace param enclosing method enclosingmethod find instruction list replace instruction replaceinstruction instruction handle instructionhandle branch instruction branchinstruction branch instruction branchinstruction lazy method gen lazymethodgen enclosing method enclosingmethod instruction list instructionlist enclosing method enclosingmethod get body getbody instruction handle instructionhandle fresh append branch instruction branchinstruction delete instruction deleteinstruction fresh enclosing method enclosingmethod delete instruction handle retarget targeters deleted instruction instruction delete control transfer instruction param instruction handle delete param enclosing method enclosingmethod find instruction list delete instruction deleteinstruction instruction handle instructionhandle lazy method gen lazymethodgen enclosing method enclosingmethod delete instruction deleteinstruction get next getnext enclosing method enclosingmethod delete instruction handle retarget targeters deleted instruction target param instruction handle delete param retarget to retargetto instruction handle retarget targeters param enclosing method enclosingmethod find instruction list delete instruction deleteinstruction instruction handle instructionhandle instruction handle instructionhandle retarget to retargetto lazy method gen lazymethodgen enclosing method enclosingmethod instruction list instructionlist enclosing method enclosingmethod get body getbody instruction targeter instructiontargeter targeters get targeters gettargeters targeters targeters length instruction targeter instructiontargeter targeter targeters targeter update target updatetarget retarget to retargetto remove all targeters removealltargeters delete target lost exception targetlostexception bcexception happen bugzilla patch contributed andy clement manually copy select instructions rely fresh object created copy instruction handle instructionhandle array targets select object deep copied modifying targets fresh modify original select bug bcel cloning select objects pre declare error call instruction copy org aspectj weaver withincode utility copy instruction copyinstruction instruction utility copy instruction copyinstruction work bug select copy pre instruction copy instruction copyinstruction instruction select select fresh select freshselect select create targets array existing instruction handle instructionhandle targets instruction handle instructionhandle fresh select freshselect get targets gettargets length targets length targets fresh select freshselect get targets gettargets create select statement targets array switch statement switchstatement fresh select freshselect get matchs getmatchs targets fresh select freshselect get target gettarget select switch statement switchstatement get instruction getinstruction clone shallow copy copy returns source attribute naive version overruns jvm stack size java understood tail recursion get source line getsourceline instruction handle instructionhandle instruction targeter instructiontargeter get targeters gettargeters length instruction targeter instructiontargeter line number tag linenumbertag line number tag linenumbertag get line number getlinenumber get source line getsourceline get next getnext goforwards get source line getsourceline goforwards instruction handle instructionhandle lookahead arbitrary rule lookahead instructions lookahead instruction targeter instructiontargeter get targeters gettargeters length instruction targeter instructiontargeter line number tag linenumbertag line number tag linenumbertag get line number getlinenumber goforwards get next getnext get prev getprev system err println get source line getsourceline instruction handle instructionhandle get source line getsourceline assumes extant source tag set source line setsourceline instruction handle instructionhandle line number linenumber add targeter addtargeter line number tag linenumbertag line number linenumber make public makepublic modifier modifier modifier make private makeprivate modifier modifier modifier bcel var bcelvar push and return array of vars pushandreturnarrayofvars resolved type resolvedtype proceed param types proceedparamtypes instruction list instructionlist instruction factory instructionfactory fact lazy method gen lazymethodgen enclosing method enclosingmethod len proceed param types proceedparamtypes length bcel var bcelvar ret bcel var bcelvar len len resolved type resolvedtype type x typex proceed param types proceedparamtypes type type bcel world bcelworld make bcel type makebceltype type x typex local enclosing method enclosingmethod allocate local allocatelocal type append instruction factory instructionfactory create store createstore type local ret bcel var bcelvar type x typex local ret is constant push instruction isconstantpushinstruction instruction constant push instruction constantpushinstruction ldc check annotations suppress aj warnings suppressajwarnings annotation annotation specifies lint message identified key is suppressing issuppressing annotation x annotationx anns string lintkey anns suppressed annotation types advice suppressed anns length check suppress aj warnings suppressajwarnings annotation unresolved type unresolvedtype suppress warnings get signature getsignature equals anns get bcel annotation getbcelannotation get type signature gettypesignature possibilities values suppress aj warnings suppressajwarnings values suppress aj warnings suppressajwarnings suppress aj warnings suppressajwarnings list vals anns get bcel annotation getbcelannotation get values getvalues vals vals size suppressed array array element value arrayelementvalue array array element value arrayelementvalue element name value pair elementnamevaluepair vals get value getvalue element value elementvalue values array get element values array getelementvaluesarray values length values array strings simple element value simpleelementvalue simple element value simpleelementvalue values get value string getvaluestring equals lintkey suppressed suppressed list get suppressed warnings getsuppressedwarnings lint kind annotation x annotationx anns lint lint anns collections empty list annotation types list suppressed warnings suppressedwarnings array list arraylist anns length check suppress aj warnings suppressajwarnings annotation unresolved type unresolvedtype suppress warnings get signature getsignature equals anns get bcel annotation getbcelannotation get type signature gettypesignature possibilities values suppress aj warnings suppressajwarnings values suppress aj warnings suppressajwarnings suppress aj warnings suppressajwarnings list vals anns get bcel annotation getbcelannotation get values getvalues vals vals size suppressed warnings suppressedwarnings add all addall lint all kinds allkinds array array element value arrayelementvalue array array element value arrayelementvalue element name value pair elementnamevaluepair vals get value getvalue element value elementvalue values array get element values array getelementvaluesarray values length values array strings simple element value simpleelementvalue simple element value simpleelementvalue values lint kind lint kind lintkind lint get lint kind getlintkind get value string getvaluestring lint kind lintkind suppressed warnings suppressedwarnings add lint kind lintkind suppressed warnings suppressedwarnings