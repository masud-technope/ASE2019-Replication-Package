copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj internal tools ant taskdefs java buffered reader bufferedreader java file java file reader filereader java file writer filewriter java ioexception java print stream printstream java print writer printwriter java util array list arraylist java util collections java util hashtable java util iterator java util list java util map org apache tools ant build exception buildexception org apache tools ant project org apache tools ant taskdefs matching task matchingtask org apache tools ant types path org apache tools ant types reference check included java files license copyright strings mpl apache cpl list list license variants license copyright holder copyrightholder todo reimplement regexp jdiff file line fileline utilities checklics matching task matchingtask enforce copyrights correct current exist behavior requires mpl permits xerox parc copyright holders valid year string mpl tag mpl string apache tag apache string cpl ibm parc tag cpl ibm parc string cpl ibm tag cpl ibm string mpl xerox parc tag mpl parc xerox string mpl tag mpl string mpl parc tag mpl parc string parc copyright tag parc copy string cpl ibm parc xerox tag cpl ibm parc xerox string cpl ibm parc xerox tag cpl ibm parc xerox string epl cpl ibm parc xerox tag epl cpl ibm parc xerox string epl cpl ibm parc xerox tag unmodifiable map map licenses string contributors contributors string xerox xerox string parc palo alto center string apache apache software foundation string ibm ibm string ibm international business machines string lic apl apache software foundation http apache org string lic mpl http aspectj org mpl string lic cpl common license string lic ecpl license license apl license apache tag lic apl apache license mpl license mpl tag lic mpl xerox license mpl xerox parc license lic mpl xerox parc license cpl ibm parc license cpl ibm parc tag lic cpl string ibm ibm parc license cpl ibm parc xerox license cpl ibm parc xerox tag lic cpl string ibm ibm parc xerox license cpl ibm parc xerox license cpl ibm parc xerox tag lic cpl string ibm ibm parc xerox contributors license epl cpl ibm parc xerox license epl cpl ibm parc xerox tag lic ecpl string ibm ibm parc xerox contributors license cpl ibm license cpl ibm tag lic cpl ibm ibm license mpl license mpl tag lic mpl license mpl parc license mpl parc tag lic mpl parc license parc copyright license parc copyright tag parc licenses hashtable licenses apl tag apl licenses mpl tag mpl licenses mpl parc tag mpl parc licenses mpl xerox parc tag mpl xerox parc licenses cpl ibm parc tag cpl ibm parc licenses mpl tag mpl licenses cpl ibm tag cpl ibm licenses parc copyright tag parc copyright licenses cpl ibm parc xerox tag cpl ibm parc xerox licenses cpl ibm parc xerox tag cpl ibm parc xerox licenses epl cpl ibm parc xerox tag epl cpl ibm parc xerox param args string sourcepath license tag licensetag main string args args length run direct rundirect args run direct rundirect args args string options replace headers years list license tag licensetag system err println java sourcepath options license check param sourcepaths string paths source directories param license string tag license param failonerror flag pass checklics illegal argument exception illegalargumentexception sourcepaths empty total number failed licenses run direct rundirect string sourcepath string license failonerror sourcepath sourcepath length illegal argument exception illegalargumentexception bad sourcepath sourcepath checklics checklics project project set name setname direct checklics set basedir setbasedir set project setproject set fail on error setfailonerror failonerror set sourcepath setsourcepath path sourcepath license replace headers equals license set replaceheaders setreplaceheaders years equals license set get years setgetyears list equals license set list setlist set license setlicense license execute failed path sourcepath license license list string stream tag streamtag fail on error failonerror get years getyears replace headers replaceheaders failed passed print directories printdirectories param list don list license tags set list setlist list list list set print directories setprintdirectories print print directories printdirectories print fail on error failonerror file failed build exception buildexception listing number files file failed pass license check param fail report errors throwing build exception buildexception set fail on error setfailonerror fail fail on error failonerror fail param mpl apache cpl set license setlicense string license input license licenses input build exception buildexception license license input set sourcepath setsourcepath path path sourcepath sourcepath path sourcepath append path path create sourcepath createsourcepath sourcepath sourcepath path project sourcepath create path createpath set sourcepath ref setsourcepathref reference create sourcepath createsourcepath set refid setrefid param err set output stream setoutputstream string stream tag streamtag set replaceheaders setreplaceheaders replace headers replaceheaders replace headers replaceheaders replace headers replaceheaders set get years setgetyears get years getyears get years getyears get years getyears list licenses check source tree execute build exception buildexception list list replace headers replaceheaders replace headers replaceheaders get years getyears get years getyears check licenses checklicenses print stream printstream get out getout err equals stream tag streamtag system err system file visitor filevisitor visit file file visit java files directories visit all visitall file visitor filevisitor visitor list filelist array list arraylist string dirs sourcepath list dirs length file dir project resolve file resolvefile dirs string files get directory scanner getdirectoryscanner dir get included files getincludedfiles files length file file file dir files string path file get path getpath path ends with endswith java visitor visit file replace headers replaceheaders year visitor yearvisitor file visitor filevisitor visit file file header info headerinfo info header check file checkfile file header replace header replaceheader file info build exception buildexception failed replace header file info visit all visitall year visitor yearvisitor get years getyears print stream printstream get out getout year visitor yearvisitor file visitor filevisitor visit file file header info headerinfo info header check file checkfile file println info to string tostring visit all visitall year visitor yearvisitor check licenses checklicenses build exception buildexception license set license setlicense paranoid license license license license build exception buildexception license print stream printstream get out getout visitor file visitor filevisitor failed passed visit file file license check file checkfile file passed failed string path file get path getpath license found license foundlicense println license tag license fail path license found copyright foundcopyright println license tag copyright fail path visitor visitor visitor visit all visitall visitor failed visitor failed passed visitor passed visitor failed get out getout println total passed visitor passed visitor failed failed visitor failed fail on error failonerror build exception buildexception failed files failed license check list iterator enu licenses key set keyset iterator string buffer stringbuffer string buffer stringbuffer append license enu has next hasnext append enu get out getout println to string tostring encapsulate license copyright specifications check files hokey string matching license acceptable years copyright prefix company append string remove older license xfer years string string tag string license string copyright got license gotlicense got copyright gotcopyright license string tag string license tag license string license string tag string license string copyright tag license string copyright license string tag string license string copyright string alt copyright altcopyright tag license string copyright alt copyright altcopyright license string tag string license string copyright tag tag tag tag length illegal argument exception illegalargumentexception tag license license copyright copyright got valid file gotvalidfile found license foundlicense found copyright foundcopyright license sought license found license foundlicense license got license gotlicense copyright sought copyright found copyright foundcopyright copyright got copyright gotcopyright check file checkfile file file clear result buffered reader bufferedreader input line num linenum input buffered reader bufferedreader file reader filereader file string got valid file gotvalidfile input read line readline line num linenum check line checkline ioexception system err println reading line num linenum file print stack trace printstacktrace system err input input close ioexception got valid file gotvalidfile string to string tostring tag check line checkline string length got license gotlicense license index of indexof license got license gotlicense got copyright gotcopyright copyright loc got copyright gotcopyright years length loc index of indexof years loc years length string after loc afterloc substring loc trim got copyright gotcopyright copyright length after loc afterloc index of indexof copyright got copyright gotcopyright clear got license gotlicense got license gotlicense got copyright gotcopyright got copyright gotcopyright license header info headerinfo file info file file unmodifiable list string years list years license last line lastline license has license haslicense header info headerinfo file file last line lastline list years has license haslicense last line lastline last line lastline file file has license haslicense has license haslicense list new years newyears array list arraylist new years newyears add all addall years collections sort new years newyears years collections unmodifiable list unmodifiablelist new years newyears file file can write canwrite illegal argument exception illegalargumentexception bad file has license haslicense last line lastline last line lastline illegal argument exception illegalargumentexception bad years years size illegal argument exception illegalargumentexception years last line lastline last line lastline illegal argument exception illegalargumentexception bad string to string tostring file get path getpath last line lastline years write header writeheader print writer printwriter writer has license haslicense writer println top writer println parc write rest writerest writer size years size size error years to string tostring string string years string string years size last is lastis equals string xlast last is lastis parc xlast string size years size xerox implies xerox equals xlast equals xlast xlast string xyears xlast equals xyears writer println top last is lastis xerox writer println xerox prefix xyears xerox suffix size parc writer println parc xerox parc writer println xerox prefix xyears xerox suffix writer println parc write rest writerest writer write rest writerest print writer printwriter writer writer println rights reserved writer println program accompanying materials writer println terms common license writer println accompanies distribution writer println http eclipse org legal cpl html writer println writer println contributors writer println xerox parc initial implementation writer println writer println string top string parc palo alto center incorporated parc string parc copyright palo alto center incorporated parc string xerox prefix copyright string xerox suffix xerox corporation copyright xerox corporation palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation header search replace hokey string matching header replace header file replace header replaceheader file file header info headerinfo info array list arraylist years array list arraylist end line endline buffered reader bufferedreader input print writer printwriter output file writer filewriter out writer outwriter line num linenum result file in file infile file file get path getpath tmp file out file outfile file file get path getpath file rename to renameto in file infile in file infile can read canread error unable rename file in file infile out writer outwriter file writer filewriter out file outfile input buffered reader bufferedreader file reader filereader in file infile output print writer printwriter out writer outwriter info write header writeheader output string input read line readline line num linenum line num linenum info last line lastline output println ioexception system err println writing line num linenum file print stack trace printstacktrace system err result input input close ioexception result out writer outwriter out writer outwriter close ioexception result result in file infile delete result header info headerinfo check file checkfile file file array list arraylist years array list arraylist end line endline buffered reader bufferedreader input line num linenum input buffered reader bufferedreader file reader filereader file string input read line readline line num linenum string trim starts with startswith starts with startswith ignore imports check line checkline years end line endline line num linenum ioexception system err println reading line num linenum file print stack trace printstacktrace system err input input close ioexception ignore header info headerinfo file end line endline years end line endline add years string years comment comment check line checkline string array list arraylist years length loc start loc index of indexof start loc index of indexof start char at charat loc years add substring loc loc start loc index of indexof header