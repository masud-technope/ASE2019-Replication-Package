copyright xerox corporation palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj testing harness bridge java file java util array list arraylist java util iterator java util list org aspectj bridge imessage handler imessagehandler org aspectj bridge message util messageutil org aspectj testing util test util testutil org aspectj testing xml ixml writable ixmlwritable org aspectj testing xml xmlwriter org aspectj util file util fileutil org aspectj util lang util langutil calculate directory tree specification styles files removed updated component check existing files expected directory complete checks files expected directory matched actual files dissassembled comparison usage expected expected directory file checker start issues messages removed files represent error expected operations change directory issues messages files removed updated checker checker messages matching updated files comparing directories ignores paths cvs dir changes dirchanges string delay dir delay delay delay delay get long getlong delay long value longvalue delay delay delay throwable delay delay exists spec spec start time milliseconds valid start start time starttime base directory actual files valid start file base dir basedir existing files updated lists affect expected directory comparison ifile checker ifilechecker file checker filechecker handler valid start start methods imessage handler imessagehandler handler constructor dir changes dirchanges dir changes dirchanges spec spec lang util langutil throw iax if null throwiaxifnull spec spec spec spec inspect base dir issue messages removed files param base dir basedir file readable directory started sending messages removed files start imessage handler imessagehandler handler file base dir basedir file util fileutil throw iax unless can read dir throwiaxunlesscanreaddir base dir basedir base dir basedir imessage handler imessagehandler old handler oldhandler handler handler handler base dir basedir base dir basedir start time starttime do compare docompare result exists start expect file exist exists spec do compare docompare result exists start expected unchanged file exist exists spec unchanged do compare docompare result exists start expected updated file exist exists spec updated do compare docompare result exists start expected removed file exist exists spec removed do compare docompare start time starttime system current time millis currenttimemillis ensure tests don complete confuse fast machines thread sleep interrupted exception interruptedexception print stack trace printstacktrace handler old handler oldhandler result inspect base dir issue messages files files updated files removed compare expected actual files updated sleeps checking delay milliseconds start illegal state exception illegalstateexception called start imessage handler imessagehandler handler file src base dir srcbasedir file util fileutil throw iax unless can read dir throwiaxunlesscanreaddir base dir basedir base dir basedir start time starttime illegal state exception illegalstateexception called start target time targettime start time starttime spec delay in milliseconds delayinmilliseconds cur time curtime system current time millis currenttimemillis cur time curtime target time targettime thread sleep target time targettime cur time curtime interrupted exception interruptedexception imessage handler imessagehandler old handler oldhandler handler handler handler variant check files deferring comparison do compare docompare file checker filechecker fast fail fastfail spec fast fail fastfail result exists expected file exists spec do compare docompare result fast fail fastfail result exists expected file unchanged exists spec unchanged do compare docompare result fast fail fastfail result exists expected file updated exists spec updated do compare docompare result fast fail fastfail result exists file exists removed exists spec removed do compare docompare variant compare expected directory result fast fail fastfail result compare dir comparedir src base dir srcbasedir result handler old handler oldhandler base dir basedir start time starttime verify files expected directory matching files base directory putting messages handler spec fast fail param src base dir srcbasedir file base directory test sources expected dir relative directory compare dir comparedir file src base dir srcbasedir spec exp dir expdir file exp dir expdir file src base dir srcbasedir spec exp dir expdir file act dir actdir base dir basedir system err println xxx comparing act dir actdir act dir actdir exp dir expdir exp dir expdir test util testutil same directory contents samedirectorycontents handler exp dir expdir act dir actdir spec fast fail fastfail param comp file message comparer filemessagecomparer matching messages compare set file comparer setfilecomparer ifile checker ifilechecker comp file checker filechecker comp signal fail files exist mod time start time starttime param handler imessage handler imessagehandler sink messages param label string infix fail message param exists file exist modified start time file exist modified start time param path list pathlist list path spec default suffix defaultsuffix file spec base dir basedir find exists exists string label exists list path list pathlist do compare docompare expect start earlier expectstartearlier exists label exists path list pathlist do compare docompare exists string label exists list path list pathlist do compare docompare expect start earlier expectstartearlier result lang util langutil is empty isempty path list pathlist file base dir basedir spec exp dir expdir iterator iter path list pathlist iterator iter has next hasnext string entry string iter string path entry spec default suffix defaultsuffix equals spec default suffix defaultsuffix path path replace path path spec default suffix defaultsuffix file actual file actualfile file base dir basedir path exists actual file actualfile can read canread actual file actualfile is file isfile expect start earlier expectstartearlier start time starttime actual file actualfile last modified lastmodified start time starttime actual file actualfile last modified lastmodified fail message failmessage handler exists label path actual file actualfile result result exists do compare docompare file checker filechecker file checker filechecker check file checkfile handler path actual file actualfile result result result generate fail message expected label file path base dir basedir param handler imessage handler imessagehandler sink param label string message infix param path path file fail message failmessage imessage handler imessagehandler handler exists string label string path file file message util messageutil fail handler label path base dir basedir check actual file path diff expected actual contents ifile checker ifilechecker check file path implementations adding fail worse message handler param handler imessage handler imessagehandler sink messages esp fail param path string normalized path portion actual file actualfile get path getpath param actual file actualfile file file check failed messages handler check file checkfile imessage handler imessagehandler handler string path file actual file actualfile specification file removed updated directory directory base tree expected files default suffix defaultsuffix entries directory tree verify files expected process completes spec ixml writable ixmlwritable xml element string xmlname dir symbolic base directory xxx string dir token dirtoken append paths seeking files string default suffix defaultsuffix relative path dir expected files comparison string exp dir expdir delay in milliseconds delayinmilliseconds delay fail mis match fast fail fastfail relative paths string expected files array list arraylist relative paths string expected files removed deleted array list arraylist removed relative paths string expected files updated changed array list arraylist updated relative paths string expected files removed changed xxx unchanged unimplemented array list arraylist unchanged spec array list arraylist removed array list arraylist updated array list arraylist unchanged array list arraylist param dir token dirtoken symbol base directory classes set dir token setdirtoken string dir token dirtoken dir token dirtoken dir token dirtoken directory expected files param expected dir relative path expecteddirrelativepath path relative test base directory expected output dir set exp dir setexpdir string expected dir relative path expecteddirrelativepath exp dir expdir expected dir relative path expecteddirrelativepath set delay setdelay string delay delay number format exception numberformatexception propogate delay in milliseconds delayinmilliseconds parse long parselong delay delay in milliseconds delayinmilliseconds delay in milliseconds delayinmilliseconds param clip suffix clipsuffix string suffix clip automatically set default suffix setdefaultsuffix string default suffix defaultsuffix default suffix defaultsuffix default suffix defaultsuffix set added setadded string items xmlwriter add flattened items addflatteneditems items set removed setremoved string items xmlwriter add flattened items addflatteneditems removed items set updated setupdated string items xmlwriter add flattened items addflatteneditems updated items set unchanged setunchanged string items xmlwriter add flattened items addflatteneditems unchanged items set fastfail setfastfail fast fail fastfail fast fail fastfail fast fail fastfail list has file list hasfilelist lang util langutil is empty isempty lang util langutil is empty isempty removed lang util langutil is empty isempty updated lang util langutil is empty isempty unchanged emit specification xml form empty writes expected dir removed changed fast fail fastfail written write xml writexml xmlwriter has file list hasfilelist lang util langutil is empty isempty exp dir expdir xxx permit defaults start element startelement xmlname lang util langutil is empty isempty dir token dirtoken print attribute printattribute dir token dirtoken dir token dirtoken trim lang util langutil is empty isempty default suffix defaultsuffix print attribute printattribute default suffix defaultsuffix default suffix defaultsuffix trim lang util langutil is empty isempty exp dir expdir print attribute printattribute exp dir expdir exp dir expdir trim lang util langutil is empty isempty print attribute printattribute xmlwriter flatten list flattenlist lang util langutil is empty isempty removed print attribute printattribute removed xmlwriter flatten list flattenlist removed lang util langutil is empty isempty updated print attribute printattribute updated xmlwriter flatten list flattenlist updated lang util langutil is empty isempty unchanged print attribute printattribute unchanged xmlwriter flatten list flattenlist unchanged fast fail fastfail print attribute printattribute fast fail fastfail end element endelement xmlname write list elements xmlwriter param xmlwriter output sink param dir changes dirchanges list dir changes dirchanges spec write write xml writexml xmlwriter list dir changes dirchanges lang util langutil is empty isempty dir changes dirchanges lang util langutil throw iax if null throwiaxifnull iterator iter dir changes dirchanges iterator iter has next hasnext dir changes dirchanges spec spec dir changes dirchanges spec iter spec spec write xml writexml spec