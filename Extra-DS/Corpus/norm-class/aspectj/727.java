copyright contributors rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors andy clement initial implementation org aspectj systemtest incremental tools java file java ioexception java util array list arraylist java util hashtable java util iterator java util list java util map java util junit framework assertion failed error assertionfailederror junit framework test case testcase org aspectj ajde ajde org aspectj ajde build options adapter buildoptionsadapter org aspectj ajde build progress monitor buildprogressmonitor org aspectj ajde error handler errorhandler org aspectj ajde project properties adapter projectpropertiesadapter org aspectj ajde task list manager tasklistmanager org aspectj ajdt internal core builder abstract state listener abstractstatelistener org aspectj ajdt internal core builder aj state ajstate org aspectj ajdt internal core builder incremental state manager incrementalstatemanager org aspectj asm asm manager asmmanager org aspectj bridge imessage org aspectj bridge isource location isourcelocation org aspectj bridge imessage kind ajde ide ajdt build driven build project name projectname config file configfile build configured methods configure happened build accessible print methods methods multiple listeners communicate info ajde implemented task tagged doessomething ajde interaction testbed ajdeinteractiontestbed test case testcase gory details verbose string testdata src dir testdatasrcdir tests multi incremental multiincremental file sandbox dir sandboxdir string sandbox ajc sandbox ajcsandbox build model buildmodel methods configuring build configure build structure model configurebuildstructuremodel build model buildmodel configure new project dependency configurenewprojectdependency string from project fromproject string project it depends on projectitdependson my project properties adapter myprojectpropertiesadapter add dependancy adddependancy from project fromproject project it depends on projectitdependson configure non standard compile options configurenonstandardcompileoptions string options my build options adapter mybuildoptionsadapter set non standard options setnonstandardoptions options configure aspect path configureaspectpath aspectpath my project properties adapter myprojectpropertiesadapter set aspectpath setaspectpath aspectpath methods configuring build file get working dir getworkingdir sandbox dir sandboxdir set up setup exception set up setup aj state ajstate state listener statelistener aj state ajstate state listener statelistener my state listener mystatelistener get instance getinstance my state listener mystatelistener reset my build progress monitor mybuildprogressmonitor reset my task list manager mytasklistmanager reset my project properties adapter myprojectpropertiesadapter reset create sandbox work create empty sandbox createemptysandbox tear down teardown exception tear down teardown aj state ajstate state listener statelistener drives build build string project name projectname string config file configfile ajde manager ajdemanager build project name projectname config file configfile full build fullbuild string project name projectname string config file configfile ajde manager ajdemanager full build fullbuild project name projectname config file configfile communicating singleton ajde instance ajde manager ajdemanager ajde init my task list manager mytasklistmanager get instance getinstance my build progress monitor mybuildprogressmonitor get instance getinstance my project properties adapter myprojectpropertiesadapter get instance getinstance my build options adapter mybuildoptionsadapter get instance getinstance my error handler myerrorhandler get instance getinstance my state listener mystatelistener my state listener mystatelistener get instance getinstance aj state ajstate state listener statelistener builds project config file subsequent calls build project result incremental builds build string project name projectname string config file configfile delay previous runs build stamps pause lognoln building project project name projectname ajde get default getdefault enable logging enablelogging system ajde get default getdefault get build manager getbuildmanager set report info messages setreportinfomessages configure providers listeners compile my build progress monitor mybuildprogressmonitor reset my task list manager mytasklistmanager reset my state listener mystatelistener reset my build options adapter mybuildoptionsadapter reset manually resetting test my project properties adapter myprojectpropertiesadapter set active project setactiveproject project name projectname asm manager asmmanager attempt incremental model repairs attemptincrementalmodelrepairs incremental state manager incrementalstatemanager record incremental states recordincrementalstates ajde get default getdefault get build manager getbuildmanager set build model mode setbuildmodelmode build model buildmodel compile ajde get default getdefault get build manager getbuildmanager build get file getfile project name projectname config file configfile wait complete my build progress monitor mybuildprogressmonitor has finished hasfinished lognoln pause log happened my task list manager mytasklistmanager has error messages haserrormessages system err println build errors iterator iter my task list manager mytasklistmanager get error messages geterrormessages iterator iter has next hasnext imessage element imessage iter system err println element system err println log build finished time my build progress monitor mybuildprogressmonitor get time taken gettimetaken full build fullbuild string project name projectname string config file configfile delay previous runs build stamps pause lognoln building project project name projectname ajde get default getdefault enable logging enablelogging system ajde get default getdefault get build manager getbuildmanager set report info messages setreportinfomessages configure providers listeners compile my build progress monitor mybuildprogressmonitor reset my task list manager mytasklistmanager reset my state listener mystatelistener reset my project properties adapter myprojectpropertiesadapter set active project setactiveproject project name projectname asm manager asmmanager attempt incremental model repairs attemptincrementalmodelrepairs incremental state manager incrementalstatemanager record incremental states recordincrementalstates ajde get default getdefault get build manager getbuildmanager set build model mode setbuildmodelmode build model buildmodel compile ajde get default getdefault get build manager getbuildmanager build fresh buildfresh get file getfile project name projectname config file configfile wait complete my build progress monitor mybuildprogressmonitor has finished hasfinished lognoln pause log happened my task list manager mytasklistmanager has error messages haserrormessages system err println build errors iterator iter my task list manager mytasklistmanager get error messages geterrormessages iterator iter has next hasnext imessage element imessage iter system err println element system err println log build finished time my build progress monitor mybuildprogressmonitor get time taken gettimetaken pause millis thread sleep millis interrupted exception interruptedexception last compile defaulted to batch lastcompiledefaultedtobatch my task list manager mytasklistmanager defaulted to batch defaultedtobatch methods querying happened build accessing build helper method dumping info files compiled woven build string print compiled and woven files printcompiledandwovenfiles string buffer stringbuffer string buffer stringbuffer get compiled files getcompiledfiles size get woven classes getwovenclasses size append files compiled woven iterator iter get compiled files getcompiledfiles iterator iter has next hasnext object element object iter append compiled element iterator iter get woven classes getwovenclasses iterator iter has next hasnext object element object iter append woven element to string tostring summary report happened build print build report printbuildreport system println build report system println build get time taken for build gettimetakenforbuild list compiled get compiled files getcompiledfiles system println compiled compiled size files iterator iter compiled iterator iter has next hasnext system println iter list woven get woven classes getwovenclasses system println wove woven size files iterator iter woven iterator iter has next hasnext system println iter was full build wasfullbuild system println batch full build system println was full build wasfullbuild my state listener mystatelistener was full build wasfullbuild get time taken for build gettimetakenforbuild my build progress monitor mybuildprogressmonitor get time taken gettimetaken list get compiled files getcompiledfiles my build progress monitor mybuildprogressmonitor get compiled files getcompiledfiles list get woven classes getwovenclasses my build progress monitor mybuildprogressmonitor get woven classes getwovenclasses infrastructure create empty sandbox createemptysandbox string system get property getproperty file temp dir tempdir documents settings failed test starts with startswith windows alex ntfs fat leads failure temp dir tempdir file temp temp dir tempdir exists temp dir tempdir file temp temp dir tempdir exists temp dir tempdir mkdir temp dir tempdir file tmp file sandbox root sandboxroot file temp dir tempdir sandbox sandbox root sandboxroot exists sandbox root sandboxroot mkdir org aspectj util file util fileutil delete contents deletecontents sandbox root sandboxroot sandbox dir sandboxdir file create temp file createtempfile ajc test ajctest tmp sandbox root sandboxroot sandbox dir sandboxdir delete sandbox dir sandboxdir mkdir ioexception io ex ioex assertion failed error assertionfailederror unable create sandbox directory test log string msg verbose system println msg lognoln string msg verbose system print msg full path file relative project dir string get file getfile string project name projectname string path file sandbox dir sandboxdir project name projectname file separator char separatorchar path get absolute path getabsolutepath my error handler myerrorhandler error handler errorhandler my error handler myerrorhandler instance my error handler myerrorhandler list error messages errormessages array list arraylist my error handler myerrorhandler error handler errorhandler get instance getinstance instance handle warning handlewarning string message log error handler errorhandler handle warning handlewarning message handle error handleerror string message log error handler errorhandler handle warning handlewarning message error messages errormessages add message handle error handleerror string message throwable log error handler errorhandler handle error handleerror message verbose print stack trace printstacktrace error messages errormessages add message string list get error messages geterrormessages instance error messages errormessages my project properties adapter myprojectpropertiesadapter project properties adapter projectpropertiesadapter verbose my project properties adapter myprojectpropertiesadapter instance my project properties adapter myprojectpropertiesadapter my project properties adapter myprojectpropertiesadapter project properties adapter projectpropertiesadapter get instance getinstance instance reset instance aspect path aspectpath string project name projectname string class path classpath aspect path aspectpath set active project setactiveproject string instance project name projectname hashtable dependants hashtable add dependancy adddependancy string project string project it depends on projectitdependson list list dependants project list array list arraylist add project it depends on projectitdependson dependants project add project it depends on projectitdependson set classpath setclasspath string path class path classpath path set aspectpath setaspectpath path instance aspect path aspectpath path impl doessomething string get project name getprojectname log my project properties myprojectproperties get project name getprojectname returning project name projectname project name projectname doessomething string get root project dir getrootprojectdir string dir testdata src dir testdatasrcdir file separator char separatorchar project name projectname log my project properties myprojectproperties get root project dir getrootprojectdir returning dir dir list get build config files getbuildconfigfiles log my project properties myprojectproperties get build config files getbuildconfigfiles string get default build config file getdefaultbuildconfigfile log my project properties myprojectproperties get default build config file getdefaultbuildconfigfile string get last active build config file getlastactivebuildconfigfile log my project properties myprojectproperties get last active build config file getlastactivebuildconfigfile list get project source files getprojectsourcefiles log my project properties myprojectproperties get project source files getprojectsourcefiles string get project source path getprojectsourcepath log my project properties myprojectproperties get project source path getprojectsourcepath doessomething string get classpath getclasspath log my project properties myprojectproperties get classpath getclasspath string file testdata src dir testdatasrcdir file path separator pathseparator system get property getproperty sun boot path file path separator pathseparator runtime bin file path separator pathseparator class path classpath file path separator pathseparator system get property getproperty aspectjrt path file path separator pathseparator lib junit junit jar batik batik lib batik util jar batik batik lib batik awt util jar batik batik lib batik dom jar batik batik lib batik svggen jar file path separator pathseparator file separator lib file separator test file separator aspectjrt jar dependant projects list projects list dependants project name projectname projects iterator iter projects iterator iter has next hasnext get file getfile string iter bin file path separator pathseparator system err println project project name projectname get classpath getclasspath returning string get output path getoutputpath string dir get file getfile project name projectname bin log my project properties myprojectproperties get output path getoutputpath returning dir dir string get boot classpath getbootclasspath log my project properties myprojectproperties get boot classpath getbootclasspath string get class to execute getclasstoexecute log my project properties myprojectproperties get class to execute getclasstoexecute string get execution args getexecutionargs log my project properties myprojectproperties get execution args getexecutionargs string get vm args getvmargs log my project properties myprojectproperties get vm args getvmargs get in jars getinjars log my project properties myprojectproperties get in jars getinjars get inpath getinpath log my project properties myprojectproperties get in path getinpath map get source path resources getsourcepathresources log my project properties myprojectproperties get source path resources getsourcepathresources string get out jar getoutjar log my project properties myprojectproperties get out jar getoutjar get source roots getsourceroots log my project properties myprojectproperties get source roots getsourceroots get aspect path getaspectpath log my project properties myprojectproperties get aspect path getaspectpath aspect path aspectpath aspect path aspectpath log string verbose system println my build progress monitor mybuildprogressmonitor build progress monitor buildprogressmonitor verbose my build progress monitor mybuildprogressmonitor instance my build progress monitor mybuildprogressmonitor my build progress monitor mybuildprogressmonitor list compiled files compiledfiles array list arraylist list woven classes wovenclasses array list arraylist build progress monitor buildprogressmonitor get instance getinstance instance reset instance finished instance compiled files compiledfiles clear instance woven classes wovenclasses clear has finished hasfinished instance finished list get compiled files getcompiledfiles instance compiled files compiledfiles list get woven classes getwovenclasses instance woven classes wovenclasses starttime totaltimetaken finished start string config file configfile starttime system current time millis currenttimemillis log build progress monitor buildprogressmonitor start config file configfile set progress text setprogresstext string text log build progress monitor buildprogressmonitor set progress text setprogresstext text text starts with startswith compiled compiled files compiledfiles add text substring text starts with startswith woven woven classes wovenclasses add text substring text starts with startswith woven aspect woven classes wovenclasses add text substring set progress bar val setprogressbarval new val newval log build progress monitor buildprogressmonitor set progress bar val setprogressbarval new val newval increment progress bar val incrementprogressbarval log build progress monitor buildprogressmonitor increment progress bar val incrementprogressbarval set progress bar max setprogressbarmax max val maxval log build progress monitor buildprogressmonitor set progress bar max setprogressbarmax max val maxval get progress bar max getprogressbarmax log build progress monitor buildprogressmonitor get progress bar max getprogressbarmax returns finish log build progress monitor buildprogressmonitor finish instance finished instance totaltimetaken system current time millis currenttimemillis starttime get time taken gettimetaken instance totaltimetaken log string verbose system println my task list manager mytasklistmanager task list manager tasklistmanager string build incremental indication unable perform incremental build string batch build indication performing batch build config verbose my task list manager mytasklistmanager instance my task list manager mytasklistmanager my task list manager mytasklistmanager received non incremental build message receivednonincrementalbuildmessage received batch build message receivedbatchbuildmessage list error messages errormessages array list arraylist list warning messages warningmessages array list arraylist list weaving messages weavingmessages array list arraylist reset instance received non incremental build message receivednonincrementalbuildmessage instance received batch build message receivedbatchbuildmessage instance error messages errormessages clear instance warning messages warningmessages clear instance weaving messages weavingmessages clear defaulted to batch defaultedtobatch instance received non incremental build message receivednonincrementalbuildmessage did batch build didbatchbuild instance received batch build message receivedbatchbuildmessage has error messages haserrormessages instance error messages errormessages is empty isempty imessage list get error messages geterrormessages instance error messages errormessages imessage list get warning messages getwarningmessages instance warning messages warningmessages imessage list get weaving messages getweavingmessages instance weaving messages weavingmessages task list manager tasklistmanager get instance getinstance instance add sourceline task addsourcelinetask string message isource location isourcelocation source location sourcelocation kind kind log task list manager tasklistmanager add sourceline task addsourcelinetask message source location sourcelocation kind doessomething add sourceline task addsourcelinetask imessage message message get kind getkind imessage error error messages errormessages add message message get kind getkind imessage warning warning messages warningmessages add message message get kind getkind imessage weaveinfo weaving messages weavingmessages add message log task list manager tasklistmanager add sourceline task addsourcelinetask message has warning haswarning log task list manager tasklistmanager has warning haswarning returning warning messages warningmessages size warning messages warningmessages size add project task addprojecttask string message kind kind log task list manager tasklistmanager add project task addprojecttask message kind clear tasks cleartasks log task list manager tasklistmanager clear tasks cleartasks log string verbose system println my build options adapter mybuildoptionsadapter build options adapter buildoptionsadapter my build options adapter mybuildoptionsadapter instance my build options adapter mybuildoptionsadapter my build options adapter mybuildoptionsadapter set non standard options setnonstandardoptions string options instance nonstandardoptions options string nonstandardoptions reset instance nonstandardoptions build options adapter buildoptionsadapter get instance getinstance instance map get java options map getjavaoptionsmap hashtable hashtable org eclipse jdt core compiler compliance org eclipse jdt core compiler codegen target platform targetplatform get use javac mode getusejavacmode string get working output path getworkingoutputpath get preprocess mode getpreprocessmode string get character encoding getcharacterencoding get source one point four mode getsourceonepointfourmode doessomething get incremental mode getincrementalmode get lenient spec mode getlenientspecmode get strict spec mode getstrictspecmode get porting mode getportingmode string get non standard options getnonstandardoptions nonstandardoptions string get compliance level getcompliancelevel string get source compatibility level getsourcecompatibilitylevel get warnings getwarnings get debug level getdebuglevel get no import error getnoimporterror get preserve all locals getpreservealllocals my state listener mystatelistener abstract state listener abstractstatelistener my state listener mystatelistener instance my state listener mystatelistener my state listener mystatelistener reset my state listener mystatelistener get instance getinstance instance informed about kind of build informedaboutkindofbuild full build occurred fullbuildoccurred list detected deletions detecteddeletions array list arraylist string buffer stringbuffer decisions string buffer stringbuffer reset informed about kind of build informedaboutkindofbuild decisions string buffer stringbuffer full build occurred fullbuildoccurred detected deletions detecteddeletions detected deletions detecteddeletions clear path change pathchange path change detected pathchangedetected path change pathchange about to compare classpaths abouttocompareclasspaths list old classpath oldclasspath list new classpath newclasspath detected class change in this dir detectedclasschangeinthisdir file detected aspect deleted detectedaspectdeleted file detected deletions detecteddeletions add to string tostring build successful buildsuccessful was full build wasfullbuild informed about kind of build informedaboutkindofbuild full build occurred fullbuildoccurred was full build wasfullbuild string get decisions getdecisions decisions to string tostring was full build wasfullbuild informed about kind of build informedaboutkindofbuild runtime exception runtimeexception heard kind build full build occurred fullbuildoccurred needed record information recordinformation string decisions append append record decision recorddecision string decisions append append