copyright ibm corporation rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors andy clement initial implementation org aspectj weaver patterns java util array list arraylist java util list junit framework test case testcase org aspectj bridge abort exception abortexception org aspectj bridge imessage org aspectj bridge imessage handler imessagehandler org aspectj bridge imessage kind org aspectj util lang util langutil org aspectj weaver bcweaver tests bcweavertests org aspectj weaver resolved member resolvedmember org aspectj weaver resolved type resolvedtype org aspectj weaver bcel bcel world bcelworld sample types program simple annotation simpleannotation simple annotation simpleannotation annotated class annotatedclass simple annotation simpleannotation simple annotation simpleannotation simple annotation simpleannotation defined java lang annotation retention retention policy retentionpolicy runtime simple annotation simpleannotation string fruit bananas note note note note note note note rebuild test data code ant build xml testdata directory annotation pattern matching test case annotationpatternmatchingtestcase test case testcase bcel world bcelworld annotation type pattern annotationtypepattern foo tp footp simple annotation tp simpleannotationtp resolved type resolvedtype load type loadtype string bcel world bcelworld bcweaver tests bcweavertests testdata path testcode jar set behave in java setbehaveinjava resolve init annotation type patterns initannotationtypepatterns pattern parser patternparser pattern parser patternparser foo foo tp footp maybe parse annotation pattern maybeparseannotationpattern foo tp footp foo tp footp resolve bindings resolvebindings make simple scope makesimplescope bindings pattern parser patternparser simple annotation simpleannotation simple annotation tp simpleannotationtp maybe parse annotation pattern maybeparseannotationpattern simple annotation tp simpleannotationtp simple annotation tp simpleannotationtp resolve bindings resolvebindings make simple scope makesimplescope bindings test annotation pattern matching on types testannotationpatternmatchingontypes lang util langutil vmor greater vmorgreater resolved type resolvedtype rtx load type loadtype annotated class annotatedclass init annotation type patterns initannotationtypepatterns match assert true asserttrue foo match annotated class annotatedclass foo tp footp matches rtx always false alwaysfalse assert true asserttrue simple annotation simpleannotation match annotated class annotatedclass simple annotation tp simpleannotationtp matches rtx always true alwaystrue my message handler mymessagehandler imessage handler imessagehandler list messages array list arraylist handle message handlemessage imessage message abort exception abortexception messages add message is ignoring isignoring kind kind dont ignore dontignore imessage kind kind test reference to non annotation type testreferencetononannotationtype inits resolved type resolvedtype rtx load type loadtype annotated class annotatedclass pattern parser patternparser pattern parser patternparser java lang string my message handler mymessagehandler my message handler mymessagehandler set message handler setmessagehandler annotation type pattern annotationtypepattern atp maybe parse annotation pattern maybeparseannotationpattern atp atp resolve bindings resolvebindings make simple scope makesimplescope bindings assert true asserttrue expected error message messages size messages size string expected type referred annotation type string msg imessage messages to string tostring assert true asserttrue expected expected msg msg index of indexof expected test reference via formal to non annotation type testreferenceviaformaltononannotationtype inits resolved type resolvedtype rtx load type loadtype annotated class annotatedclass pattern parser patternparser pattern parser patternparser my message handler mymessagehandler my message handler mymessagehandler set message handler setmessagehandler annotation type pattern annotationtypepattern atp parse annotation name or var type pattern parseannotationnameorvartypepattern atp atp resolve bindings resolvebindings make simple scope makesimplescope bindings assert true asserttrue expected error messages messages size messages size string expected type referred annotation type string msg imessage messages to string tostring assert true asserttrue expected expected msg msg index of indexof expected expected binding supported pcds limitation msg imessage messages to string tostring assert true asserttrue expected expected msg msg index of indexof expected test scope testscope make simple scope makesimplescope test scope testscope string java lang string string test unresolved annotation types testunresolvedannotationtypes resolved type resolvedtype rtx load type loadtype annotated class annotatedclass pattern parser patternparser pattern parser patternparser foo annotation type pattern annotationtypepattern foo tp footp maybe parse annotation pattern maybeparseannotationpattern foo tp footp matches rtx fail failed illegal exception foo tp footp resolved illegal state exception illegalstateexception ise test annotation pattern matching on methods testannotationpatternmatchingonmethods lang util langutil vmor greater vmorgreater resolved type resolvedtype rtx load type loadtype annotated class annotatedclass resolved member resolvedmember a method amethod rtx get declared methods getdeclaredmethods assert true asserttrue haven method a method amethod get name getname a method amethod get name getname equals init annotation type patterns initannotationtypepatterns match assert true asserttrue foo match annotated class annotatedclass method foo tp footp matches a method amethod always false alwaysfalse assert true asserttrue simple annotation simpleannotation match annotated class annotatedclass method simple annotation tp simpleannotationtp matches a method amethod always true alwaystrue test annotation pattern matching on fields testannotationpatternmatchingonfields lang util langutil vmor greater vmorgreater resolved type resolvedtype rtx load type loadtype annotated class annotatedclass resolved member resolvedmember a field afield rtx get declared fields getdeclaredfields assert true asserttrue haven field a field afield get name getname a field afield get name getname equals init annotation type patterns initannotationtypepatterns match assert true asserttrue foo match annotated class annotatedclass field foo tp footp matches a field afield always false alwaysfalse assert true asserttrue simple annotation simpleannotation match annotated class annotatedclass field simple annotation tp simpleannotationtp matches a field afield always true alwaystrue test annotation type resolution on types testannotationtyperesolutionontypes resolved type resolvedtype rtx load type loadtype annotated class annotatedclass resolved type resolvedtype types rtx get annotation types getannotationtypes assert true asserttrue expect types assert true asserttrue expected entry types length types length assert true asserttrue simple annotation simpleannotation types types equals resolve simple annotation simpleannotation test annotation type resolution on methods testannotationtyperesolutiononmethods resolved type resolvedtype rtx load type loadtype annotated class annotatedclass resolved member resolvedmember a method amethod rtx get declared methods getdeclaredmethods assert true asserttrue haven method a method amethod get name getname a method amethod get name getname equals resolved type resolvedtype types a method amethod get annotation types getannotationtypes assert true asserttrue expect types assert true asserttrue expected entry types length types length assert true asserttrue simple annotation simpleannotation types types equals resolve simple annotation simpleannotation test annotation type resolution on fields testannotationtyperesolutiononfields resolved type resolvedtype rtx load type loadtype annotated class annotatedclass resolved member resolvedmember a field afield rtx get declared fields getdeclaredfields assert true asserttrue haven field a field afield get name getname a field afield get name getname equals resolved type resolvedtype types a field afield get annotation types getannotationtypes assert true asserttrue expect types assert true asserttrue expected entry types length types length assert true asserttrue simple annotation simpleannotation types types equals resolve simple annotation simpleannotation test wild pattern matching on types testwildpatternmatchingontypes resolved type resolvedtype rtx load type loadtype annotated class annotatedclass init annotation type patterns initannotationtypepatterns create wild pattern parser patternparser pattern parser patternparser foo boo annotation type pattern annotationtypepattern maybe parse annotation pattern maybeparseannotationpattern resolve bindings resolvebindings make simple scope makesimplescope bindings assert true asserttrue shouldnt match type annotated class annotatedclass matches rtx always false alwaysfalse pattern parser patternparser simple annotation simpleannotation boo maybe parse annotation pattern maybeparseannotationpattern resolve bindings resolvebindings make simple scope makesimplescope bindings assert true asserttrue match type annotated class annotatedclass matches rtx always true alwaystrue