copyright xerox corporation palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj internal tools ant taskdefs java buffered reader bufferedreader java file java file output stream fileoutputstream java file reader filereader java ioexception java print stream printstream org apache tools ant build exception buildexception org apache tools ant task org apache tools ant taskdefs mkdir copy and inline stylesheet copyandinlinestylesheet task file file set file setfile string file file project resolve file resolvefile file file todir set todir settodir string todir todir project resolve file resolvefile todir execute build exception buildexception todir build exception buildexception todir attribute file build exception buildexception file attribute log copying html file todir get absolute path getabsolutepath file to file tofile file todir file get name getname mkdir mkdir mkdir project create task createtask mkdir mkdir set dir setdir todir mkdir execute buffered reader bufferedreader buffered reader bufferedreader file reader filereader file print stream printstream print stream printstream file output stream fileoutputstream to file tofile string read line readline is style sheet isstylesheet do style sheet dostylesheet file string read line readline println println close close ioexception build exception buildexception get message getmessage do style sheet dostylesheet string print stream printstream file file ioexception src index srcindex index of indexof href start quot index startquotindex index of indexof src index srcindex end quot index endquotindex index of indexof start quot index startquotindex string stylesheet location stylesheetlocation substring start quot index startquotindex end quot index endquotindex file style sheet file stylesheetfile file file get parent getparent stylesheet location stylesheetlocation println style type text css println buffered reader bufferedreader in style instyle buffered reader bufferedreader file reader filereader style sheet file stylesheetfile string in style instyle read line readline println in style instyle close println println style is style sheet isstylesheet string ioexception to lower case tolowercase len length len character is whitespace iswhitespace char at charat starts with startswith link