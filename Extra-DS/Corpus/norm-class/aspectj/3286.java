copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors parc initial implementation org aspectj ajdt internal core builder java file java file output stream fileoutputstream java ioexception java print writer printwriter junit framework test case testcase org aspectj ajdt ajc org aspectj ajdt ajc build arg parser buildargparser org aspectj asm asm manager asmmanager org aspectj bridge imessage org aspectj bridge message handler messagehandler org aspectj bridge message writer messagewriter org aspectj util stream print writer streamprintwriter aj build manager test ajbuildmanagertest test case testcase stream print writer streamprintwriter output writer outputwriter stream print writer streamprintwriter print writer printwriter system message writer messagewriter message writer messagewriter message writer messagewriter output writer outputwriter file source file ajdt ajc tests ajdtajctests testdata dir src java file source file ajdt ajc tests ajdtajctests testdata dir src java file source file ajdt ajc tests ajdtajctests testdata dir src java assertion failed error assertionfailederror handler messages worse warning message warning aspectjrt jar assert compile messages valid assertcompilemessagesvalid message handler messagehandler handler assert true asserttrue handler handler num messages nummessages handler num messages nummessages imessage warning num messages nummessages permit aspectjrt jar warning imessage handler get messages getmessages imessage warning is warning iswarning get message getmessage index of indexof aspectjrt jar assert true asserttrue handler to string tostring num messages nummessages assert true asserttrue handler to string tostring aj build manager test ajbuildmanagertest string test simple structure testsimplestructure ioexception core exception coreexception aj build manager ajbuildmanager manager aj build manager ajbuildmanager message writer messagewriter build arg parser buildargparser parser build arg parser buildargparser message writer messagewriter string java class path javaclasspath system get property getproperty java path aj build config ajbuildconfig build config buildconfig parser gen build config genbuildconfig string classpath java class path javaclasspath ajdt ajc tests ajdtajctests testdata path src java string err parser get other messages getothermessages assert true asserttrue err err manager set structure model setstructuremodel asm manager asmmanager get default getdefault get hierarchy gethierarchy message handler messagehandler handler message handler messagehandler manager batch build batchbuild build config buildconfig handler assert compile messages valid assertcompilemessagesvalid handler system println model structure model manager structuremodelmanager instance get structure model getstructuremodel get root getroot to long string tolongstring system println children structure node structurenode structure model manager structuremodelmanager instance get structure model getstructuremodel get root getroot get children getchildren get children getchildren xxx add test resource deltas test update build config testupdatebuildconfig file file file testdata testclasses temp java file file file testdata testclasses temp java file file file testdata testclasses temp java list files array list arraylist files add file files add file aj build manager ajbuildmanager manager aj build manager ajbuildmanager message writer messagewriter aj build config ajbuildconfig build config buildconfig aj build config ajbuildconfig manager build config buildconfig build config buildconfig build config buildconfig set files setfiles files manager update build config updatebuildconfig build config buildconfig assert true asserttrue change manager deleted files deletedfiles is empty isempty aj build config ajbuildconfig new config newconfig aj build config ajbuildconfig new config newconfig get files getfiles add file new config newconfig get files getfiles add file new config newconfig get files getfiles add file manager update build config updatebuildconfig new config newconfig assert true asserttrue file manager deleted files deletedfiles is empty isempty assert true asserttrue manager added files addedfiles size assert true asserttrue manager added files addedfiles file new config newconfig aj build config ajbuildconfig new config newconfig get files getfiles add file manager update build config updatebuildconfig new config newconfig assert true asserttrue deleted files manager added files addedfiles is empty isempty assert true asserttrue manager deleted files deletedfiles size assert true asserttrue manager deleted files deletedfiles file new config newconfig aj build config ajbuildconfig new config newconfig get files getfiles add file manager update build config updatebuildconfig new config newconfig assert true asserttrue file manager added files addedfiles size assert true asserttrue deleted file manager deleted files deletedfiles size assert true asserttrue manager deleted files deletedfiles size assert true asserttrue manager added files addedfiles file assert true asserttrue manager deleted files deletedfiles file pretends files modified waits tests change file removed file xxx test modified test get modified files testgetmodifiedfiles ioexception interrupted exception interruptedexception file temp file testdata testclasses temp changed tempchanged java file exists file testdata testclasses foo java file file testdata testclasses temp new tempnew java delete touch temp list files array list arraylist files add temp files add exists assert true asserttrue input files temp exists exists exists assert true asserttrue file exists thread sleep last build time lastbuildtime system current time millis currenttimemillis aj build manager ajbuildmanager manager aj build manager ajbuildmanager message writer messagewriter manager build config buildconfig aj build config ajbuildconfig manager build config buildconfig set files setfiles files collection changed files changedfiles manager get modified files getmodifiedfiles last build time lastbuildtime assert true asserttrue changed changed files changedfiles changed files changedfiles is empty isempty last build time lastbuildtime system current time millis currenttimemillis thread sleep touch create new file createnewfile files add changed files changedfiles manager get modified files getmodifiedfiles last build time lastbuildtime assert true asserttrue file changed files changedfiles changed files changedfiles last build time lastbuildtime system current time millis currenttimemillis thread sleep files remove changed files changedfiles manager get modified files getmodifiedfiles last build time lastbuildtime assert true asserttrue changed changed files changedfiles is empty isempty last build time lastbuildtime system current time millis currenttimemillis thread sleep touch temp changed files changedfiles manager get modified files getmodifiedfiles last build time lastbuildtime assert true asserttrue touched file changed files changedfiles changed files changedfiles temp last build time lastbuildtime system current time millis currenttimemillis thread sleep files remove changed files changedfiles manager get modified files getmodifiedfiles last build time lastbuildtime assert true asserttrue changed changed files changedfiles is empty isempty temp delete delete don delta test make deltas testmakedeltas ioexception interrupted exception interruptedexception aj build manager ajbuildmanager manager aj build manager ajbuildmanager message writer messagewriter manager build config buildconfig aj build config ajbuildconfig list source roots sourceroots array list arraylist source roots sourceroots add file manager build config buildconfig set source roots setsourceroots source roots sourceroots assert true asserttrue manager test init testinit message writer messagewriter list modified arrays as list aslist file file java file java list deleted arrays as list aslist file file java simple lookup table simplelookuptable deltas simple lookup table simplelookuptable manager make deltas makedeltas deltas modified deleted file manager build config buildconfig get source roots getsourceroots get path getpath resource delta resourcedelta resource delta resourcedelta deltas manager get java builder getjavabuilder current project currentproject assert not null assertnotnull assert equals assertequals get affected children getaffectedchildren length xxx testing children xxx working test delete real files testdeleterealfiles core exception coreexception ioexception aj build manager ajbuildmanager manager aj build manager ajbuildmanager message writer messagewriter manager build config buildconfig aj build config ajbuildconfig list source roots sourceroots array list arraylist source roots sourceroots add file testdata src manager build config buildconfig set source roots setsourceroots source roots sourceroots manager build config buildconfig set output dir setoutputdir file assert true asserttrue manager test init testinit message writer messagewriter file real class file realclassfile file touch real class file realclassfile assert true asserttrue real class file realclassfile exists ifile classfile manager class file cache classfilecache get file getfile path classfile create file util fileutil get stream from zip getstreamfromzip testdata testclasses jar assert true asserttrue classfile exists manager add aspect class files to weaver addaspectclassfilestoweaver classfile delete assert true asserttrue real class file realclassfile exists manager add aspect class files to weaver addaspectclassfilestoweaver assert true asserttrue real class file realclassfile exists test incremental compiler call testincrementalcompilercall ioexception interrupted exception interruptedexception core exception coreexception aj build manager ajbuildmanager manager aj build manager ajbuildmanager message writer messagewriter manager build config buildconfig aj build config ajbuildconfig list roots array list arraylist roots add file testdata src manager test init testinit message writer messagewriter manager build config buildconfig set source roots setsourceroots roots assert true asserttrue manager test init testinit message writer messagewriter list modified arrays as list aslist file source source list deleted arrays as list aslist file source simple lookup table simplelookuptable deltas simple lookup table simplelookuptable manager make deltas makedeltas deltas modified deleted file manager build config buildconfig get source roots getsourceroots get absolute path getabsolutepath java builder javabuilder jbuilder manager get java builder getjavabuilder jbuilder last state laststate jbuilder jbuilder binary locations per project binarylocationsperproject simple lookup table simplelookuptable aj build manager ajbuildmanager incremental builder incrementalbuilder builder manager get incremental builder getincrementalbuilder message writer messagewriter xxx trap errors test notifier testnotifier test notifier testnotifier test notifier testnotifier builder jbuilder current project currentproject jbuilder notifier test notifier testnotifier icontainer source folders sourcefolders icontainer filesystem folder filesystemfolder file manager build config buildconfig get source roots getsourceroots get absolute path getabsolutepath builder set source folders setsourcefolders source folders sourcefolders test notifier testnotifier builder builder ifile classfile manager class file cache classfilecache get file getfile path classfile create byte array input stream bytearrayinputstream assert true asserttrue classfile exists manager test set handler testsethandler message writer messagewriter succeeded builder build deltas non local exit nonlocalexit nle assert equals assertequals nle get exit code getexitcode manager test set handler testsethandler assert true asserttrue classfile exists test notifier testnotifier build notifier buildnotifier aj build manager ajbuildmanager incremental builder incrementalbuilder builder test notifier testnotifier aj build manager ajbuildmanager incremental builder incrementalbuilder builder iproject project project builder builder update progress delta updateprogressdelta percent worked percentworked check initial config checkinitialconfig check binary resources checkbinaryresources check affected files checkaffectedfiles check binary resources checkbinaryresources check initial config checkinitialconfig collection files builder get locations getlocations system println initial files check affected files checkaffectedfiles collection files builder get locations getlocations test util testutil assert set equals assertsetequals arrays as list aslist string source get absolute path getabsolutepath replace file separator char separatorchar source get absolute path getabsolutepath replace file separator char separatorchar files non local exit nonlocalexit touch file file is append isappend ioexception file output stream fileoutputstream file output stream fileoutputstream file get absolute path getabsolutepath is append isappend write close jar directory source directory container test make classpath locations testmakeclasspathlocations list classpath array list arraylist classpath add aj build config ajbuildconfig config aj build config ajbuildconfig config set classpath setclasspath test classpath location testclasspathlocation string loca