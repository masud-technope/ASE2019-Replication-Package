copyright xerox corporation palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj ajde internal java java util org aspectj ajde org aspectj ajde org aspectj bridge org aspectj util config parser configparser org aspectj util file util fileutil author mik kersten lst build config manager lstbuildconfigmanager build config manager buildconfigmanager list config files configfiles array list arraylist list listeners array list arraylist lst build config file updater lstbuildconfigfileupdater file updater fileupdater lst build config file updater lstbuildconfigfileupdater string curr config file path currconfigfilepath filename filter filenamefilter source file filter filename filter filenamefilter accept file dir string file util fileutil has source suffix hassourcesuffix ends with endswith lst file filter filefilter dir filter file filter filefilter accept file file file is directory isdirectory build config model buildconfigmodel build model buildmodel string config file path configfilepath file config file configfile file config file path configfilepath string root path rootpath config file configfile get parent getparent string config file name configfilename config file configfile get name getname build config model buildconfigmodel model build config model buildconfigmodel config file path configfilepath list config files configfiles array list arraylist list imported files importedfiles array list arraylist list bad entries badentries lst build config file parser lstbuildconfigfileparser config parser configparser lst build config file parser lstbuildconfigfileparser config file path configfilepath config parser configparser parse config file parseconfigfile file config file path configfilepath config files configfiles config parser configparser get files getfiles imported files importedfiles config parser configparser get imported files getimportedfiles bad entries badentries config parser configparser get problem entries getproblementries config parser configparser parse exception parseexception imessage message message get message getmessage imessage error source location sourcelocation get file getfile get line getline ajde get default getdefault get task list manager gettasklistmanager add sourceline task addsourcelinetask message list relative paths relativepaths relativize file paths relativizefilepaths config files configfiles root path rootpath build config node buildconfignode root build config node buildconfignode config file name configfilename build config node buildconfignode kind file lst root path rootpath build dir tree builddirtree root root path rootpath imported files importedfiles config file name configfilename model set root setroot root add files to dir tree addfilestodirtree model relative paths relativepaths bad entries badentries prune empty dirs pruneemptydirs root sort model sortmodel build config node buildconfignode model get root getroot alphabetical comparator add imported files to dir tree addimportedfilestodirtree model imported files importedfiles add problem entries addproblementries root bad entries badentries model add problem entries addproblementries build config node buildconfignode root list bad entries badentries iterator bad entries badentries iterator has next hasnext root add child addchild build config node buildconfignode to string tostring build config node buildconfignode kind error write model writemodel build config model buildconfigmodel model list paths array list arraylist structure walker structurewalker walker structure walker structurewalker post process postprocess structure node structurenode node build config node buildconfignode config node confignode build config node buildconfignode node config node confignode is active isactive config node confignode is valid resource isvalidresource paths add config node confignode get resource path getresourcepath model get root getroot walk walker list active source files activesourcefiles model get active nodes getactivenodes build config node buildconfignode kind file aspectj active source files activesourcefiles add all addall model get active nodes getactivenodes build config node buildconfignode kind file java list active imported files activeimportedfiles model get active nodes getactivenodes build config node buildconfignode kind file lst file updater fileupdater write config file writeconfigfile model get source file getsourcefile active source files activesourcefiles active imported files activeimportedfiles write paths writepaths string config file path configfilepath list files file updater fileupdater write config file writeconfigfile config file path configfilepath files add files to config addfilestoconfig string config file path configfilepath list paths remove files from config removefilesfromconfig string config file path configfilepath list files list relativize file paths relativizefilepaths list config files configfiles string root path rootpath list relative paths list relativepathslist array list arraylist iterator config files configfiles iterator has next hasnext file file file relative paths list relativepathslist add file updater fileupdater relativize path relativizepath file get path getpath root path rootpath relative paths list relativepathslist string relativize path relativizepath string path string root path rootpath path path replace root path rootpath root path rootpath replace path index pathindex path index of indexof root path rootpath path index pathindex path substring path index pathindex root path rootpath length path build dir tree builddirtree build config node buildconfignode node string root path rootpath list imported files importedfiles string config file name configfilename file dirs file node get resource path getresourcepath list files listfiles dir filter dirs dirs length build config node buildconfignode dir build config node buildconfignode dirs get name getname build config node buildconfignode kind directory dirs get path getpath file files dirs list files listfiles source file filter files length files get name getname ends with endswith lst files string file path filepath file updater fileupdater relativize path relativizepath files get path getpath root path rootpath build config node buildconfignode kind kind build config node buildconfignode kind file java files get name getname ends with endswith lst kind build config node buildconfignode kind file lst build config node buildconfignode file build config node buildconfignode files get name getname kind file path filepath file set active setactive dir add child addchild file node add child addchild dir found match foundmatch iterator imported files importedfiles iterator has next hasnext file imported file importedfile file imported file importedfile get parent file getparentfile get absolute path getabsolutepath equals dirs get absolute path getabsolutepath found match foundmatch build config node buildconfignode imported file node importedfilenode build config node buildconfignode imported file importedfile get name getname build config node buildconfignode kind file lst file updater fileupdater relativize path relativizepath imported file importedfile get path getpath root path rootpath imported file node importedfilenode set active setactive dir get children getchildren clear iterator dir get children getchildren iterator has next hasnext build config node buildconfignode get name getname equals imported file importedfile get name getname dir add child addchild imported file node importedfilenode found match foundmatch build dir tree builddirtree dir root path rootpath imported files importedfiles config file name configfilename node get name getname ends with endswith lst file files file root path rootpath list files listfiles source file filter files files length files get name getname ends with endswith lst files files get name getname equals config file name configfilename build config node buildconfignode kind kind build config node buildconfignode kind file java files get name getname ends with endswith lst kind build config node buildconfignode kind file lst build config node buildconfignode file build config node buildconfignode files get name getname kind files get name getname file set active setactive node add child addchild file add files to dir tree addfilestodirtree build config model buildconfigmodel model list config files configfiles list bad entries badentries iterator config files configfiles iterator has next hasnext string path string path starts with startswith file file file path build config node buildconfignode node build config node buildconfignode file get name getname build config node buildconfignode kind file java path build config node buildconfignode up path uppath model get node for path getnodeforpath file get parent file getparentfile get path getpath up path uppath model get root getroot up path uppath build config node buildconfignode file get parent file getparentfile get path getpath build config node buildconfignode kind directory file get parent file getparentfile get absolute path getabsolutepath model get root getroot add child addchild up path uppath node set active setactive up path uppath add child addchild node file path is absolute isabsolute string file path get name getname build config node buildconfignode existing node existingnode model get node for path getnodeforpath path existing node existingnode set active setactive bad entries badentries add relative paths omitting path prune empty dirs pruneemptydirs build config node buildconfignode node list nodes to remove nodestoremove array list arraylist iterator node get children getchildren iterator has next hasnext build config node buildconfignode curr node currnode build config node buildconfignode has valid children hasvalidchildren prune empty dirs pruneemptydirs curr node currnode curr node currnode is valid resource isvalidresource has valid children hasvalidchildren nodes to remove nodestoremove add curr node currnode iterator nodes to remove nodestoremove iterator has next hasnext build config node buildconfignode curr node currnode build config node buildconfignode node remove child removechild curr node currnode node get children getchildren size string get active config file getactiveconfigfile curr config file path currconfigfilepath curr config file path currconfigfilepath equals config label get default config file getdefaultconfigfile ajde get default getdefault get project properties getprojectproperties get default build config file getdefaultbuildconfigfile curr config file path currconfigfilepath set active config file setactiveconfigfile string curr config file path currconfigfilepath curr config file path currconfigfilepath equals config label get default config file getdefaultconfigfile curr config file path currconfigfilepath ajde get default getdefault get project properties getprojectproperties get default build config file getdefaultbuildconfigfile curr config file path currconfigfilepath curr config file path currconfigfilepath notify config changed notifyconfigchanged add listener addlistener build config listener buildconfiglistener configuration listener configurationlistener listeners add configuration listener configurationlistener remove listener removelistener build config listener buildconfiglistener configuration listener configurationlistener listeners remove configuration listener configurationlistener notify config changed notifyconfigchanged iterator listeners iterator has next hasnext build config listener buildconfiglistener curr config changed currconfigchanged curr config file path currconfigfilepath notify configs list updated notifyconfigslistupdated iterator listeners iterator has next hasnext build config listener buildconfiglistener configs list updated configslistupdated config files configfiles sort model sortmodel build config node buildconfignode node comparator comparator node node get children getchildren collections sort node get children getchildren comparator iterator node get children getchildren iterator has next hasnext build config node buildconfignode next node nextnode build config node buildconfignode next node nextnode sort model sortmodel next node nextnode comparator comparator alphabetical comparator comparator compare object object build config node buildconfignode build config node buildconfignode build config node buildconfignode build config node buildconfignode get name getname compare to compareto get name getname