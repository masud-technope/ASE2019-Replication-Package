copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors parc initial implementation org aspectj ajdt internal compiler ast java lang reflect modifier java util array list arraylist java util hash map hashmap java util iterator java util list java util map org aspectj ajdt internal compiler lookup eclipse factory eclipsefactory org aspectj ajdt internal compiler lookup eclipse scope eclipsescope org aspectj ajdt internal compiler lookup eclipse source type eclipsesourcetype org aspectj ajdt internal compiler lookup eclipse type munger eclipsetypemunger org aspectj ajdt internal compiler lookup helper interface binding helperinterfacebinding org aspectj ajdt internal compiler lookup inline access field binding inlineaccessfieldbinding org aspectj ajdt internal compiler lookup privileged handler privilegedhandler org aspectj org eclipse jdt core compiler char operation charoperation org aspectj org eclipse jdt internal compiler class file classfile org aspectj org eclipse jdt internal compiler compilation result compilationresult org aspectj org eclipse jdt internal compiler ast annotation org aspectj org eclipse jdt internal compiler ast clinit org aspectj org eclipse jdt internal compiler ast method declaration methoddeclaration org aspectj org eclipse jdt internal compiler ast type declaration typedeclaration org aspectj org eclipse jdt internal compiler codegen code stream codestream org aspectj org eclipse jdt internal compiler codegen exception label exceptionlabel org aspectj org eclipse jdt internal compiler codegen label org aspectj org eclipse jdt internal compiler env igeneric type igenerictype org aspectj org eclipse jdt internal compiler lookup base types basetypes org aspectj org eclipse jdt internal compiler lookup binary type binding binarytypebinding org aspectj org eclipse jdt internal compiler lookup binding org aspectj org eclipse jdt internal compiler lookup class scope classscope org aspectj org eclipse jdt internal compiler lookup field binding fieldbinding org aspectj org eclipse jdt internal compiler lookup invocation site invocationsite org aspectj org eclipse jdt internal compiler lookup method binding methodbinding org aspectj org eclipse jdt internal compiler lookup parameterized type binding parameterizedtypebinding org aspectj org eclipse jdt internal compiler lookup reference binding referencebinding org aspectj org eclipse jdt internal compiler lookup scope org aspectj org eclipse jdt internal compiler lookup source type binding sourcetypebinding org aspectj org eclipse jdt internal compiler lookup type binding typebinding org aspectj weaver aj attribute ajattribute org aspectj weaver ajc member maker ajcmembermaker org aspectj weaver name mangler namemangler org aspectj weaver reference type referencetype org aspectj weaver resolved member resolvedmember org aspectj weaver resolved type resolvedtype org aspectj weaver shadow org aspectj weaver unresolved type unresolvedtype org aspectj weaver patterns declare org aspectj weaver patterns formal binding formalbinding org aspectj weaver patterns per clause perclause org aspectj weaver patterns per from super perfromsuper org aspectj weaver patterns per singleton persingleton org aspectj weaver patterns type pattern typepattern switched member type declaration membertypedeclaration type declaration typedeclaration aspect declaration aspectdeclaration type declaration typedeclaration iaj declaration iajdeclaration aj declarations ajdeclarations aj attribute ajattribute aspect aspect attribute aspectattribute per clause perclause per clause perclause resolved member resolvedmember aspect of method aspectofmethod resolved member resolvedmember ptw get within type method ptwgetwithintypemethod resolved member resolvedmember has aspect method hasaspectmethod map access for inline accessforinline hash map hashmap map super access for inline superaccessforinline hash map hashmap is privileged isprivileged declared modifiers declaredmodifiers eclipse source type eclipsesourcetype concrete name concretename reference type referencetype type x typex consistently eclipse factory eclipsefactory factory generated advice methods advice counter advicecounter generated methods representing declares declare counter declarecounter error messages transition type pattern typepattern dominates pattern dominatespattern aspect declaration aspectdeclaration compilation result compilationresult compilation result compilationresult compilation result compilationresult per clause perclause per singleton persingleton is abstract isabstract modifiers acc abstract accabstract resolve remember modifiers generate code generatecode declared modifiers declaredmodifiers modifiers binding ignore further investigation ignorefurtherinvestigation resolve check spec checkspec class scope classscope scope ignore further investigation ignorefurtherinvestigation dominates pattern dominatespattern scope problem reporter problemreporter signal error signalerror dominates pattern dominatespattern get start getstart dominates pattern dominatespattern get end getend dominates changed declare precedence string dominates pattern dominatespattern to string tostring body aspect is abstract isabstract method binding methodbinding methods binding methods len methods length len method binding methodbinding methods is constructor isconstructor constructors aspects invisible uncallable xxx works aspects source methods method binding methodbinding binding can be seen by canbeseenby invocation site invocationsite invocation site invocationsite scope scope parameters parameters length scope problem reporter problemreporter signal error signalerror source start sourcestart source end sourceend argument constructors allowed concrete aspect check aspect declared aspects type params type parameters typeparameters type parameters typeparameters length scope problem reporter problemreporter signal error signalerror source start sourcestart source end sourceend aspects type parameters enclosing type enclosingtype modifier is static isstatic modifiers scope problem reporter problemreporter signal error signalerror source start sourcestart source end sourceend aspects ignore further investigation ignorefurtherinvestigation eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope resolved type resolvedtype my type mytype type x typex my type mytype system err println bad my type mytype resolved type resolvedtype super type supertype my type mytype get superclass getsuperclass serializable cloneable xserializable aspects xserializableaspects is xserializable aspects isxserializableaspects get world getworld get core type getcoretype unresolved type unresolvedtype serializable is assignable from isassignablefrom my type mytype scope problem reporter problemreporter signal error signalerror source start sourcestart source end sourceend aspects implement serializable ignore further investigation ignorefurtherinvestigation get world getworld get core type getcoretype unresolved type unresolvedtype cloneable is assignable from isassignablefrom my type mytype scope problem reporter problemreporter signal error signalerror source start sourcestart source end sourceend aspects implement cloneable ignore further investigation ignorefurtherinvestigation super type supertype is aspect isaspect super type supertype is abstract isabstract scope problem reporter problemreporter signal error signalerror source start sourcestart source end sourceend extend concrete aspect ignore further investigation ignorefurtherinvestigation type check fully parameterized super type supertype is raw type israwtype scope problem reporter problemreporter signal error signalerror source start sourcestart source end sourceend aspect fully parameterized clause ignore further investigation ignorefurtherinvestigation field binding fieldbinding init failure field initfailurefield amc method called at aspect jvisitor ataspectjvisitor before compilation beforecompilation processing aj compiler ajcompiler adapter hook add aspect j aspectj annotations add at aspect jannotations addataspectjannotations annotation at aspect annotation ataspectannotation at aspect jannotation factory ataspectjannotationfactory create aspect annotation createaspectannotation per clause perclause to declaration string todeclarationstring declaration source start declarationsourcestart annotation privileged annotation privilegedannotation is privileged isprivileged privileged annotation privilegedannotation at aspect jannotation factory ataspectjannotationfactory create privileged annotation createprivilegedannotation declaration source start declarationsourcestart annotation to add toadd annotation is privileged isprivileged to add toadd at aspect annotation ataspectannotation is privileged isprivileged to add toadd privileged annotation privilegedannotation annotations annotations to add toadd annotation annotations annotations annotation annotations length to add toadd length system arraycopy annotations length system arraycopy to add toadd annotations length to add toadd length generate code generatecode class file classfile enclosing class file enclosingclassfile ignore further investigation ignorefurtherinvestigation binding class file classfile create problem type createproblemtype scope reference compilation unit referencecompilationunit compilation result compilationresult binding modifiers ast util astutil make public makepublic modifiers binding modifiers ast util astutil make public makepublic binding modifiers is abstract isabstract init failure field initfailurefield factory make field binding makefieldbinding ajc member maker ajcmembermaker init failure cause field initfailurecausefield type x typex binding add field addfield init failure field initfailurefield per clause perclause produced error per clause perclause get kind getkind per clause perclause singleton binding add field addfield factory make field binding makefieldbinding ajc member maker ajcmembermaker per singleton field persingletonfield type x typex methods aspect clinit aspectclinit clinit methods compilation result compilationresult init failure field initfailurefield per clause perclause get kind getkind per clause perclause percflow binding add field addfield factory make field binding makefieldbinding ajc member maker ajcmembermaker per cflow field percflowfield type x typex methods aspect clinit aspectclinit clinit methods compilation result compilationresult per clause perclause get kind getkind per clause perclause perobject binding add field addfield make field binding makefieldbinding ajc member maker ajcmembermaker per cflow field percflowfield type x typex per clause perclause get kind getkind per clause perclause pertypewithin ptwimpl add field storing typename aspect aspect instance exists binding add field addfield factory make field binding makefieldbinding ajc member maker ajcmembermaker per type within within type field pertypewithinwithintypefield type x typex type x typex runtime exception runtimeexception unimplemented eclipse factory eclipsefactory debug system println to string tostring generate code generatecode enclosing class file enclosingclassfile need class init method needclassinitmethod generate attributes generateattributes class file classfile class file classfile is abstract isabstract generate per support members generatepersupportmembers class file classfile generate inline access members generateinlineaccessmembers class file classfile add version attribute if necessary addversionattributeifnecessary class file classfile class file classfile extra attributes extraattributes add eclipse attribute adapter eclipseattributeadapter aj attribute ajattribute aspect per clause perclause binding privileged handler privilegedhandler resolved member resolvedmember members privileged handler privilegedhandler binding privileged handler privilegedhandler get members getmembers class file classfile extra attributes extraattributes add eclipse attribute adapter eclipseattributeadapter aj attribute ajattribute privileged attribute privilegedattribute members xxx attribute pointcut good errors class file classfile extra attributes extraattributes add eclipse attribute adapter eclipseattributeadapter aj attribute ajattribute source context attribute sourcecontextattribute string compilation result compilationresult get file name getfilename compilation result compilationresult line separator positions lineseparatorpositions generate attributes generateattributes class file classfile pointcut attribute add add version attribute if necessary addversionattributeifnecessary class file classfile class file classfile iterator iter class file classfile extra attributes extraattributes iterator iter has next hasnext eclipse attribute adapter eclipseattributeadapter element eclipse attribute adapter eclipseattributeadapter iter char operation charoperation equals element get name chars getnamechars weaver version chars weaverversionchars class file classfile extra attributes extraattributes add eclipse attribute adapter eclipseattributeadapter aj attribute ajattribute weaver version info weaverversioninfo weaver version chars weaverversionchars org aspectj weaver weaver version weaverversion to char array tochararray generate inline access members generateinlineaccessmembers class file classfile class file classfile iterator super access for inline superaccessforinline values iterator has next hasnext access for inline visitor accessforinlinevisitor super access method pair superaccessmethodpair pair access for inline visitor accessforinlinevisitor super access method pair superaccessmethodpair generate super access method generatesuperaccessmethod class file classfile pair access method accessmethod pair original method originalmethod iterator access for inline accessforinline entry set entryset iterator has next hasnext map entry map entry generate inline access method generateinlineaccessmethod class file classfile binding get value getvalue resolved member resolvedmember get key getkey generate per support members generatepersupportmembers class file classfile class file classfile is abstract isabstract xxx error handling aspect of method aspectofmethod per clause perclause system err println per clause perclause eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope per clause perclause get kind getkind per clause perclause singleton generate per singleton aspect of method generatepersingletonaspectofmethod class file classfile generate per singleton has aspect method generatepersingletonhasaspectmethod class file classfile generate per singleton ajc clinit method generatepersingletonajcclinitmethod class file classfile per clause perclause get kind getkind per clause perclause percflow generate per cflow aspect of method generatepercflowaspectofmethod class file classfile generate per cflow has aspect method generatepercflowhasaspectmethod class file classfile generate per cflow push method generatepercflowpushmethod class file classfile generate per cflow ajc clinit method generatepercflowajcclinitmethod class file classfile per clause perclause get kind getkind per clause perclause perobject type binding typebinding interface type interfacetype generate per object interface generateperobjectinterface class file classfile add type binding addtypebinding interface type interfacetype generate per object aspect of method generateperobjectaspectofmethod class file classfile interface type interfacetype generate per object has aspect method generateperobjecthasaspectmethod class file classfile interface type interfacetype generate per object bind method generateperobjectbindmethod class file classfile interface type interfacetype per clause perclause get kind getkind per clause perclause pertypewithin ptwimpl generate methods required aspect aspecttype aspect of aspectof java lang generate per type within aspect of method generatepertypewithinaspectofmethod class file classfile aspecttype ajc get instance getinstance exception generate per type within get instance method generatepertypewithingetinstancemethod class file classfile generate per type within has aspect method generatepertypewithinhasaspectmethod class file classfile generate ajc create aspect instance createaspectinstance for class forclass generate per type within create aspect instance method generatepertypewithincreateaspectinstancemethod class file classfile ptwimpl get within type getwithintype generate per type within get within type method generatepertypewithingetwithintypemethod class file classfile generate get within type getwithintype runtime exception runtimeexception unimplemented body generator bodygenerator generate code stream codestream code stream codestream generate method generatemethod class file classfile class file classfile resolved member resolvedmember member body generator bodygenerator gen eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile make method binding makemethodbinding member gen generate method generatemethod class file classfile class file classfile method binding methodbinding method binding methodbinding body generator bodygenerator gen generate method generatemethod class file classfile method binding methodbinding gen list make effective signature attribute makeeffectivesignatureattribute resolved member resolvedmember sig shadow kind kind weave body weavebody list array list arraylist add eclipse attribute adapter eclipseattributeadapter aj attribute ajattribute effective signature attribute effectivesignatureattribute sig kind weave body weavebody additional attributes additionalattributes pass optional attributes attach method generate inline accessor methods generated field references method calls inlined cases optional attribute effective signature attribute calls methods masquerade join point field field method call effective signature attribute unwrapped bcel class weaver bcelclassweaver match invoke instruction matchinvokeinstruction generate method generatemethod class file classfile class file classfile method binding methodbinding method binding methodbinding list additional attributes additionalattributes resolved member resolvedmember real member realmember body generator bodygenerator gen eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope class file classfile generate method info header generatemethodinfoheader method binding methodbinding method attribute offset methodattributeoffset class file classfile contents offset contentsoffset attribute number attributenumber mini optimization additional attributes additionalattributes list attrs array list arraylist attrs add all addall ast util astutil get aj synthetic attribute getajsyntheticattribute attrs add all addall additional attributes additionalattributes attribute number attributenumber class file classfile generate method info attribute generatemethodinfoattribute method binding methodbinding attrs attribute number attributenumber class file classfile generate method info attribute generatemethodinfoattribute method binding methodbinding ast util astutil get aj synthetic attribute getajsyntheticattribute code attribute offset codeattributeoffset class file classfile contents offset contentsoffset class file classfile generate code attribute header generatecodeattributeheader code stream codestream code stream codestream class file classfile code stream codestream reset init xxx scope reset happy initializer scope initializerscope works code stream codestream init class file classfile code stream codestream initialize max locals initializemaxlocals method binding methodbinding method declaration methoddeclaration ast util astutil make method declaration makemethoddeclaration method binding methodbinding scope initializer scope initializerscope code stream codestream reset class file classfile body starts gen generate code stream codestream body ends class file classfile complete code attribute completecodeattribute code attribute offset codeattributeoffset attribute number attributenumber class file classfile complete method info completemethodinfo method attribute offset methodattributeoffset attribute number attributenumber generate per cflow aspect of method generatepercflowaspectofmethod class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile aspect of method aspectofmethod body generator bodygenerator generate code stream codestream code stream codestream body starts code stream codestream getstatic make field binding makefieldbinding ajc member maker ajcmembermaker per cflow field percflowfield type x typex code stream codestream invokevirtual make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker cflow stack peek instance cflowstackpeekinstance code stream codestream checkcast binding code stream codestream areturn body ends generate per cflow has aspect method generatepercflowhasaspectmethod class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile has aspect method hasaspectmethod body generator bodygenerator generate code stream codestream code stream codestream body starts code stream codestream getstatic make field binding makefieldbinding ajc member maker ajcmembermaker per cflow field percflowfield type x typex code stream codestream invokevirtual make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker cflow stack is valid cflowstackisvalid code stream codestream ireturn body ends generate per cflow push method generatepercflowpushmethod class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile make method binding makemethodbinding ajc member maker ajcmembermaker per cflow push percflowpush factory from binding frombinding binding body generator bodygenerator generate code stream codestream code stream codestream body starts code stream codestream getstatic make field binding makefieldbinding ajc member maker ajcmembermaker per cflow field percflowfield type x typex code stream codestream binding code stream codestream dup code stream codestream invokespecial method binding methodbinding init to char array tochararray base types basetypes void binding voidbinding type binding typebinding reference binding referencebinding binding code stream codestream invokevirtual make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker cflow stack push instance cflowstackpushinstance code stream codestream body ends generate per cflow ajc clinit method generatepercflowajcclinitmethod class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile make method binding makemethodbinding ajc member maker ajcmembermaker ajc pre clinit method ajcpreclinitmethod from binding frombinding binding body generator bodygenerator generate code stream codestream code stream codestream body starts code stream codestream make type binding maketypebinding ajc member maker ajcmembermaker cflow stack type code stream codestream dup code stream codestream invokespecial make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker cflow stack init cflowstackinit code stream codestream putstatic make field binding makefieldbinding ajc member maker ajcmembermaker per cflow field percflowfield type x typex code stream codestream body ends type binding typebinding generate per object interface generateperobjectinterface class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope unresolved type unresolvedtype interface type x interfacetypex ajc member maker ajcmembermaker per object interface type perobjectinterfacetype type x typex helper interface binding helperinterfacebinding interface type interfacetype helper interface binding helperinterfacebinding binding interface type x interfacetypex add type binding addtypebinding interface type interfacetype interface type interfacetype add method addmethod ajc member maker ajcmembermaker per object interface get perobjectinterfaceget type x typex interface type interfacetype add method addmethod ajc member maker ajcmembermaker per object interface set perobjectinterfaceset type x typex interface type interfacetype generate class generateclass compilation result compilationresult class file classfile interface type interfacetype generate per type within get within type method generatepertypewithingetwithintypemethod class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile ptw get within type method ptwgetwithintypemethod body generator bodygenerator generate code stream codestream code stream codestream code stream codestream aload code stream codestream getfield make field binding makefieldbinding ajc member maker ajcmembermaker per type within within type field pertypewithinwithintypefield type x typex type x typex code stream codestream areturn ptwimpl generate aspect of aspectof method generate per type within aspect of method generatepertypewithinaspectofmethod class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile aspect of method aspectofmethod body generator bodygenerator generate code stream codestream code stream codestream label instance found instancefound label code stream codestream exception label exceptionlabel anything goes wrong anythinggoeswrong exception label exceptionlabel code stream codestream make type binding maketypebinding unresolved type unresolvedtype java lang exception code stream codestream aload code stream codestream invokestatic make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker per type within get instance pertypewithingetinstance type x typex code stream codestream astore code stream codestream aload code stream codestream ifnonnull instance found instancefound code stream codestream make type binding maketypebinding ajc member maker ajcmembermaker aspect bound exception code stream codestream dup code stream codestream ldc type x typex get name getname code stream codestream aconst code stream codestream invokespecial make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker no aspect bound exception init noaspectboundexceptioninit code stream codestream athrow instance found instancefound place code stream codestream aload code stream codestream areturn anything goes wrong anythinggoeswrong place end placeend anything goes wrong anythinggoeswrong place code stream codestream astore code stream codestream make type binding maketypebinding ajc member maker ajcmembermaker aspect bound exception code stream codestream dup simple ctor nabe code stream codestream invokespecial make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker no aspect bound exception init noaspectboundexceptioninit code stream codestream athrow generate per object aspect of method generateperobjectaspectofmethod class file classfile class file classfile type binding typebinding interface type interfacetype eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile aspect of method aspectofmethod body generator bodygenerator generate code stream codestream code stream codestream body starts label wrong type wrongtype label code stream codestream label pop wrong type popwrongtype label code stream codestream code stream codestream aload code stream codestream instance interface type interfacetype code stream codestream ifeq wrong type wrongtype code stream codestream aload code stream codestream checkcast interface type interfacetype code stream codestream invokeinterface make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker per object interface get perobjectinterfaceget type x typex code stream codestream dup code stream codestream ifnull pop wrong type popwrongtype code stream codestream areturn pop wrong type popwrongtype place code stream codestream pop wrong type wrongtype place code stream codestream make type binding maketypebinding ajc member maker ajcmembermaker aspect bound exception code stream codestream dup code stream codestream invokespecial make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker no aspect bound exception init noaspectboundexceptioninit code stream codestream athrow body ends generate per object has aspect method generateperobjecthasaspectmethod class file classfile class file classfile type binding typebinding interface type interfacetype eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile has aspect method hasaspectmethod body generator bodygenerator generate code stream codestream code stream codestream body starts label wrong type wrongtype label code stream codestream code stream codestream aload code stream codestream instance interface type interfacetype code stream codestream ifeq wrong type wrongtype code stream codestream aload code stream codestream checkcast interface type interfacetype code stream codestream invokeinterface make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker per object interface get perobjectinterfaceget type x typex code stream codestream ifnull wrong type wrongtype code stream codestream iconst code stream codestream ireturn wrong type wrongtype place code stream codestream iconst code stream codestream ireturn body ends ptwimpl generate has aspect hasaspect method generate per type within has aspect method generatepertypewithinhasaspectmethod class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile has aspect method hasaspectmethod body generator bodygenerator generate code stream codestream code stream codestream exception label exceptionlabel gone bang gonebang exception label exceptionlabel code stream codestream make type binding maketypebinding unresolved type unresolvedtype java lang exception label no instance exists noinstanceexists label code stream codestream label leave label code stream codestream gone bang gonebang place start placestart code stream codestream aload code stream codestream invokestatic make method binding makemethodbinding ajc member maker ajcmembermaker per type within get instance pertypewithingetinstance type x typex code stream codestream ifnull no instance exists noinstanceexists code stream codestream iconst code stream codestream leave no instance exists noinstanceexists place code stream codestream iconst leave place gone bang gonebang place end placeend code stream codestream ireturn gone bang gonebang place code stream codestream astore code stream codestream iconst code stream codestream ireturn generate per object bind method generateperobjectbindmethod class file classfile class file classfile type binding typebinding interface type interfacetype eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile ajc member maker ajcmembermaker per object bind perobjectbind from binding frombinding binding body generator bodygenerator generate code stream codestream code stream codestream body starts label wrong type wrongtype label code stream codestream code stream codestream aload code stream codestream instance interface type interfacetype xxx call screaming code stream codestream ifeq wrong type wrongtype code stream codestream aload code stream codestream checkcast interface type interfacetype code stream codestream invokeinterface make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker per object interface get perobjectinterfaceget type x typex xxx check no aspect bound noaspectbound code stream codestream ifnonnull wrong type wrongtype code stream codestream aload code stream codestream checkcast interface type interfacetype code stream codestream binding code stream codestream dup code stream codestream invokespecial method binding methodbinding init to char array tochararray base types basetypes void binding voidbinding type binding typebinding reference binding referencebinding binding code stream codestream invokeinterface make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker per object interface set perobjectinterfaceset type x typex wrong type wrongtype place code stream codestream body ends ptwimpl generate get instance getinstance method generate per type within get instance method generatepertypewithingetinstancemethod class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile ajc member maker ajcmembermaker per type within get instance pertypewithingetinstance from binding frombinding binding body generator bodygenerator generate code stream codestream code stream codestream exception label exceptionlabel exc exception label exceptionlabel code stream codestream make type binding maketypebinding unresolved type unresolvedtype java lang exception exc place start placestart code stream codestream aload code stream codestream ldc name mangler namemangler per type within local aspect of pertypewithinlocalaspectof type x typex code stream codestream aconst code stream codestream invokevirtual method binding methodbinding get declared method getdeclaredmethod to char array tochararray make type binding maketypebinding type unresolved type unresolvedtype for signature forsignature type ljava lang reflect method type binding typebinding make type binding maketypebinding unresolved type unresolvedtype for signature forsignature ljava lang string make type binding maketypebinding unresolved type unresolvedtype for signature forsignature ljava lang reference binding referencebinding reference binding referencebinding make type binding maketypebinding unresolved type unresolvedtype java lang code stream codestream astore code stream codestream aload code stream codestream aconst code stream codestream aconst code stream codestream invokevirtual method binding methodbinding invoke to char array tochararray make type binding maketypebinding unresolved type unresolvedtype object type binding typebinding make type binding maketypebinding unresolved type unresolvedtype object make type binding maketypebinding unresolved type unresolvedtype for signature forsignature ljava lang object reference binding referencebinding reference binding referencebinding make type binding maketypebinding unresolved type unresolvedtype java lang reflect method code stream codestream checkcast make type binding maketypebinding type x typex code stream codestream astore code stream codestream aload exc place end placeend code stream codestream areturn exc place code stream codestream astore returns version caught exception code stream codestream aconst code stream codestream areturn generate per type within create aspect instance method generatepertypewithincreateaspectinstancemethod class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile ajc member maker ajcmembermaker per type within create aspect instance pertypewithincreateaspectinstance from binding frombinding binding body generator bodygenerator generate code stream codestream code stream codestream code stream codestream make type binding maketypebinding type x typex code stream codestream dup code stream codestream invokespecial method binding methodbinding init to char array tochararray base types basetypes void binding voidbinding type binding typebinding reference binding referencebinding binding code stream codestream astore code stream codestream aload code stream codestream aload code stream codestream putfield make field binding makefieldbinding ajc member maker ajcmembermaker per type within within type field pertypewithinwithintypefield type x typex type x typex code stream codestream aload code stream codestream areturn generate per singleton aspect of method generatepersingletonaspectofmethod class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile aspect of method aspectofmethod body generator bodygenerator generate code stream codestream code stream codestream style aspect of aspectof method confused decompilers body starts code stream codestream getstatic make field binding makefieldbinding ajc member maker ajcmembermaker per singleton field persingletonfield type x typex label is null isnull label code stream codestream code stream codestream dup code stream codestream ifnull is null isnull code stream codestream areturn is null isnull place code stream codestream incr stack size incrstacksize dup trick confuses stack counter code stream codestream make type binding maketypebinding ajc member maker ajcmembermaker aspect bound exception code stream codestream dup code stream codestream ldc type x typex get name as identifier getnameasidentifier code stream codestream getstatic init failure field initfailurefield code stream codestream invokespecial make method binding for call makemethodbindingforcall ajc member maker ajcmembermaker no aspect bound exception init with cause noaspectboundexceptioninitwithcause code stream codestream athrow body ends stuff generates code ajc per singleton instance persingletoninstance no aspect bound exception noaspectboundexception ajc init failure cause initfailurecause ajc per singleton instance persingletoninstance body starts field binding fieldbinding make field binding makefieldbinding ajc member maker ajcmembermaker per singleton field persingletonfield type x typex getstatic code stream codestream getstatic label is non null isnonnull label code stream codestream ifnonnull code stream codestream ifnonnull is non null isnonnull code stream codestream make type binding maketypebinding ajc member maker ajcmembermaker aspect bound exception dup code stream codestream dup ldc code stream codestream ldc type x typex get name as identifier getnameasidentifier getstatic code stream codestream getstatic init failure field initfailurefield code stream codestream invokespecial make method binding for call makemethodbindingforcall invokespecial ajc member maker ajcmembermaker no aspect bound exception init with cause noaspectboundexceptioninitwithcause athrow code stream codestream athrow is non null isnonnull place getstatic code stream codestream getstatic areturn code stream codestream areturn body ends generate per singleton has aspect method generatepersingletonhasaspectmethod class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile has aspect method hasaspectmethod body generator bodygenerator generate code stream codestream code stream codestream body starts code stream codestream getstatic make field binding makefieldbinding ajc member maker ajcmembermaker per singleton field persingletonfield type x typex label is null isnull label code stream codestream code stream codestream ifnull is null isnull code stream codestream iconst code stream codestream ireturn is null isnull place code stream codestream iconst code stream codestream ireturn body ends generate per singleton ajc clinit method generatepersingletonajcclinitmethod class file classfile class file classfile eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope generate method generatemethod class file classfile make method binding makemethodbinding ajc member maker ajcmembermaker ajc post clinit method ajcpostclinitmethod from binding frombinding binding body generator bodygenerator generate code stream codestream code stream codestream body starts code stream codestream binding code stream codestream dup code stream codestream invokespecial method binding methodbinding init to char array tochararray base types basetypes void binding voidbinding type binding typebinding reference binding referencebinding binding code stream codestream putstatic make field binding makefieldbinding ajc member maker ajcmembermaker per singleton field persingletonfield type x typex code stream codestream body ends generate super access method generatesuperaccessmethod class file classfile class file classfile method binding methodbinding access method accessmethod resolved member resolvedmember method generate method generatemethod class file classfile access method accessmethod body generator bodygenerator generate code stream codestream code stream codestream body starts code stream codestream aload ast util astutil generate parameter loads generateparameterloads access method accessmethod parameters code stream codestream code stream codestream invokespecial factory make method binding makemethodbinding method ast util astutil generate return generatereturn access method accessmethod return type returntype code stream codestream body ends generate inline access method generateinlineaccessmethod class file classfile class file classfile binding binding resolved member resolvedmember member binding inline access field binding inlineaccessfieldbinding generate inline accessors generateinlineaccessors class file classfile inline access field binding inlineaccessfieldbinding binding member generate inline access method generateinlineaccessmethod class file classfile method binding methodbinding binding member generate inline accessors generateinlineaccessors class file classfile class file classfile inline access field binding inlineaccessfieldbinding access field accessfield resolved member resolvedmember field field binding fieldbinding field binding fieldbinding factory make field binding makefieldbinding field generate method generatemethod class file classfile access field accessfield reader make effective signature attribute makeeffectivesignatureattribute field shadow field get fieldget body generator bodygenerator generate code stream codestream code stream codestream body starts field is static isstatic code stream codestream getstatic field binding fieldbinding code stream codestream aload code stream codestream getfield field binding fieldbinding ast util astutil generate return generatereturn access field accessfield reader return type returntype code stream codestream body ends generate method generatemethod class file classfile access field accessfield writer make effective signature attribute makeeffectivesignatureattribute field shadow field set fieldset body generator bodygenerator generate code stream codestream code stream codestream body starts field is static isstatic code stream codestream load field binding fieldbinding type code stream codestream putstatic field binding fieldbinding code stream codestream aload code stream codestream load field binding fieldbinding type code stream codestream putfield field binding fieldbinding code stream codestream body ends generate inline access method generateinlineaccessmethod class file classfile class file classfile method binding methodbinding access method accessmethod resolved member resolvedmember method generate method generatemethod class file classfile access method accessmethod make effective signature attribute makeeffectivesignatureattribute method shadow method call methodcall body generator bodygenerator generate code stream codestream code stream codestream body starts ast util astutil generate parameter loads generateparameterloads access method accessmethod parameters code stream codestream method is static isstatic code stream codestream invokestatic factory make method binding makemethodbinding method code stream codestream invokevirtual factory make method binding makemethodbinding method ast util astutil generate return generatereturn access method accessmethod return type returntype code stream codestream body ends per clause perclause kind lookup per clause kind lookupperclausekind reference binding referencebinding binding per clause perclause per clause perclause binding binary type binding binarytypebinding resolved type resolvedtype super type x supertypex factory from eclipse fromeclipse binding per clause perclause super type x supertypex get per clause getperclause binding source type binding sourcetypebinding source type binding sourcetypebinding source sc sourcesc source type binding sourcetypebinding binding source sc sourcesc scope reference context referencecontext aspect declaration aspectdeclaration per clause perclause aspect declaration aspectdeclaration source sc sourcesc scope reference context referencecontext per clause perclause binding parameterized type binding parameterizedtypebinding parameterized type binding parameterizedtypebinding p binding pbinding parameterized type binding parameterizedtypebinding binding p binding pbinding type source type binding sourcetypebinding source type binding sourcetypebinding source sc sourcesc source type binding sourcetypebinding p binding pbinding type source sc sourcesc scope source sc sourcesc scope reference context referencecontext aspect declaration aspectdeclaration per clause perclause aspect declaration aspectdeclaration source sc sourcesc scope reference context referencecontext per clause perclause per clause perclause xxx handle per clause perclause lookup per clause kind lookupperclausekind binding superclass per clause perclause get kind getkind build per clause buildperclause class scope classscope scope eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope per clause perclause per clause perclause kind kind lookup per clause kind lookupperclausekind binding superclass kind per clause perclause per singleton persingleton per clause perclause per from super perfromsuper kind aspect attribute aspectattribute aj attribute ajattribute aspect per clause perclause ignore further investigation ignorefurtherinvestigation is abstract isabstract per clause perclause get kind getkind per clause perclause singleton aspect of method aspectofmethod ajc member maker ajcmembermaker per singleton aspect of method persingletonaspectofmethod type x typex has aspect method hasaspectmethod ajc member maker ajcmembermaker per singleton has aspect method persingletonhasaspectmethod type x typex per clause perclause get kind getkind per clause perclause percflow aspect of method aspectofmethod ajc member maker ajcmembermaker per cflow aspect of method percflowaspectofmethod type x typex has aspect method hasaspectmethod ajc member maker ajcmembermaker per cflow has aspect method percflowhasaspectmethod type x typex per clause perclause get kind getkind per clause perclause perobject aspect of method aspectofmethod ajc member maker ajcmembermaker per object aspect of method perobjectaspectofmethod type x typex has aspect method hasaspectmethod ajc member maker ajcmembermaker per object has aspect method perobjecthasaspectmethod type x typex per clause perclause get kind getkind per clause perclause pertypewithin ptwimpl variants aspect of aspectof has aspect hasaspect aspect of method aspectofmethod ajc member maker ajcmembermaker per type within aspect of method pertypewithinaspectofmethod type x typex get world getworld is in java isinjava mode has aspect method hasaspectmethod ajc member maker ajcmembermaker per type within has aspect method pertypewithinhasaspectmethod type x typex get world getworld is in java isinjava mode ptw get within type method ptwgetwithintypemethod ajc member maker ajcmembermaker per type within get within type method pertypewithingetwithintypemethod type x typex get world getworld is in java isinjava mode binding add method addmethod make method binding makemethodbinding ptw get within type method ptwgetwithintypemethod runtime exception runtimeexception bad clause per clause perclause binding add method addmethod make method binding makemethodbinding aspect of method aspectofmethod binding add method addmethod make method binding makemethodbinding has aspect method hasaspectmethod xxx error checking resolve per clause resolveperclause per clause perclause resolve per clause resolveperclause eclipse scope eclipsescope iscope eclipse scope eclipsescope formal binding formalbinding scope per clause perclause resolve iscope per clause perclause build inter type and per clause buildintertypeandperclause class scope classscope class scope classscope factory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment scope is privileged isprivileged binding privileged handler privilegedhandler privileged handler privilegedhandler check spec checkspec class scope classscope ignore further investigation ignorefurtherinvestigation build per clause buildperclause scope methods methods length methods inter type declaration intertypedeclaration eclipse type munger eclipsetypemunger inter type declaration intertypedeclaration methods build class scope classscope concrete name concretename type mungers typemungers add methods declare declaration declaredeclaration declare declare declaration declaredeclaration methods build class scope classscope concrete name concretename declares add concrete name concretename get declared pointcuts getdeclaredpointcuts string to string tostring tab tab string tabstring tab to string header tostringheader to string body tostringbody tab string to string body tostringbody tab string nls member types membertypes member types membertypes length member types membertypes member types membertypes to string tostring tab nls fields field i fieldi field i fieldi fields length field i fieldi fields field i fieldi fields field i fieldi to string tostring tab nls fields field i fieldi is field isfield nls methods methods length methods methods to string tostring tab nls tab string tabstring tab nls nls string buffer stringbuffer print header printheader indent string buffer stringbuffer output aspects print modifiers supplied original source code print modifiers printmodifiers declared modifiers declaredmodifiers output output append aspect output append superclass nls output append superclass print output super interfaces superinterfaces super interfaces superinterfaces length nls nls output append kind igeneric type igenerictype decl super interfaces superinterfaces length nls output append nls super interfaces superinterfaces print output output xxx append clause aspects type checking generating code advice called method returns modifiers original source code declaration structure model sees get declared modifiers getdeclaredmodifiers declared modifiers declaredmodifiers