copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors parc initial implementation org aspectj weaver bcel org aspectj apache bcel branch instruction branchinstruction org aspectj apache bcel indexed instruction indexedinstruction org aspectj apache bcel instruction org aspectj apache bcel instruction factory instructionfactory org aspectj apache bcel instruction handle instructionhandle org aspectj apache bcel instruction list instructionlist org aspectj apache bcel instruction targeter instructiontargeter org aspectj apache bcel local variable instruction localvariableinstruction org aspectj apache bcel local variable tag localvariabletag org aspectj apache bcel ret org aspectj apache bcel select org aspectj apache bcel target lost exception targetlostexception org aspectj weaver bcexception org aspectj weaver int map intmap org aspectj weaver shadow shadow range shadowrange range bcel shadow bcelshadow shadow constructor called range situated link associate with targets associatewithtargets link associate with shadow associatewithshadow called shadow range shadowrange instruction list instructionlist body body associate with targets associatewithtargets instruction handle instructionhandle start instruction handle instructionhandle body start body start start start add targeter addtargeter add targeter addtargeter associate with shadow associatewithshadow bcel shadow bcelshadow shadow shadow shadow shadow set range setrange shadow kind get kind getkind shadow get kind getkind string to string tostring shadow to string tostring extract instructions into extractinstructionsinto lazy method gen lazymethodgen fresh method freshmethod int map intmap remap add return addreturn lazy method gen lazymethodgen assert good body assertgoodbody get body getbody to string tostring fresh method freshmethod assert good body assertgoodbody instruction list instructionlist fresh body freshbody fresh method freshmethod get body getbody instruction handle instructionhandle old ih oldih start get next getnext old ih oldih old ih oldih old ih oldih get next getnext copy instruction instruction old i oldi old ih oldih get instruction getinstruction instruction fresh i freshi old i oldi rangeinstruction old i oldi utility copy instruction copyinstruction old i oldi add instruction list instruction handle instructionhandle fresh ih freshih fresh i freshi branch instruction branchinstruction targeting instruction update target point copy copy branch instruction branchinstruction old branch oldbranch branch instruction branchinstruction old i oldi branch instruction branchinstruction fresh branch freshbranch branch instruction branchinstruction fresh i freshi instruction handle instructionhandle old target oldtarget old branch oldbranch get target gettarget old target oldtarget remove targeter removetargeter old branch oldbranch old target oldtarget add targeter addtargeter fresh branch freshbranch fresh branch freshbranch select select old select oldselect select old i oldi select fresh select freshselect select fresh i freshi instruction handle instructionhandle old targets oldtargets fresh select freshselect get targets gettargets old targets oldtargets length old targets oldtargets remove targeter removetargeter old select oldselect old targets oldtargets add targeter addtargeter fresh select freshselect fresh ih freshih fresh body freshbody append fresh branch freshbranch fresh ih freshih fresh body freshbody append fresh i freshi source target source target process target remove targeter removetargeter source target add targeter addtargeter sourcecopy source sourcecopy target process sourcecopy update target updatetarget target targetcopy source target sourcecopy targetcopy target source target source process source update target updatetarget target targetcopy target targetcopy source process targetcopy remove targeter removetargeter source targetcopy add targeter addtargeter sourcecopy target source targetcopy sourcecopy deal instruction targeters update point instruction update target updatetarget goal remove targeters guy delete instruction targeter instructiontargeter sources old ih oldih get targeters gettargeters sources sources length instruction targeter instructiontargeter source sources source local variable tag localvariabletag shadow kind kind get kind getkind kind shadow advice execution adviceexecution kind shadow constructor execution constructorexecution kind shadow method execution methodexecution kind shadow pre initialization preinitialization kind shadow initialization kind shadow static initialization staticinitialization extracting block source update target updatetarget old ih oldih fresh ih freshih xxx destroying local variable info call join point big deal source update target updatetarget old ih oldih source range exceptions shadows moved range source update target updatetarget old ih oldih fresh ih freshih fresh body freshbody numbers shared branches copied source update target updatetarget old ih oldih fresh ih freshih wides location hold wide fresh i freshi local variable instruction localvariableinstruction fresh i freshi ret indexed instruction indexedinstruction indexed i indexedi indexed instruction indexedinstruction fresh i freshi old index oldindex indexed i indexedi get index getindex fresh index freshindex remap has key haskey old index oldindex fresh index freshindex fresh method freshmethod allocate local allocatelocal remap old index oldindex fresh index freshindex fresh index freshindex remap old index oldindex indexed i indexedi set index setindex fresh index freshindex system err println copied old ih oldih get instruction getinstruction to string tostring fresh method freshmethod get enclosing class getenclosingclass get constant pool gen getconstantpoolgen get constant pool getconstantpool fresh ih freshih get instruction getinstruction to string tostring fresh method freshmethod get enclosing class getenclosingclass get constant pool gen getconstantpoolgen get constant pool getconstantpool remapping instruction handle instructionhandle new ih newih fresh body freshbody get start getstart new ih newih fresh body freshbody get end getend new ih newih new ih newih get next getnext instruction targeter instructiontargeter sources new ih newih get targeters gettargeters sources sources length sources local variable tag localvariabletag local variable tag localvariabletag lvt local variable tag localvariabletag sources lvt is remapped isremapped remap has key haskey lvt get slot getslot lvt update slot updateslot remap lvt get slot getslot targets target lost exception targetlostexception checked stuff instruction handle instructionhandle old ih oldih start get next getnext old ih oldih instruction handle instructionhandle old ih oldih get next getnext body delete old ih oldih old ih oldih target lost exception targetlostexception bcexception shouldn target lost add warranted instruction handle instructionhandle ret add return addreturn pull ret fresh body freshbody append instruction factory instructionfactory create return createreturn fresh method freshmethod get return type getreturntype remap targeters handle range instruction targeter instructiontargeter get targeters gettargeters shouldn test paranoia length instruction targeter instructiontargeter add return addreturn bcexception range target adding update target updatetarget ret lazy method gen lazymethodgen assert good body assertgoodbody get body getbody to string tostring fresh method freshmethod assert good body assertgoodbody bcel shadow bcelshadow get shadow getshadow shadow