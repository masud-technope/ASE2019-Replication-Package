copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors parc initial implementation org aspectj ajdt internal core builder java file java file filter filefilter java filename filter filenamefilter java ioexception java util array list arraylist java util collection java util hash map hashmap java util hash set hashset java util hashtable java util iterator java util linked list linkedlist java util list java util map java util org aspectj ajdt internal compiler interim compilation result interimcompilationresult org aspectj asm ihierarchy org aspectj asm irelationship map irelationshipmap org aspectj bridge imessage org aspectj bridge message org aspectj bridge source location sourcelocation org aspectj org eclipse jdt core compiler char operation charoperation org aspectj org eclipse jdt internal compiler compilation result compilationresult org aspectj org eclipse jdt internal compiler classfmt class file reader classfilereader org aspectj org eclipse jdt internal compiler classfmt class format exception classformatexception org aspectj org eclipse jdt internal compiler env ibinary field ibinaryfield org aspectj org eclipse jdt internal compiler env ibinary method ibinarymethod org aspectj org eclipse jdt internal compiler lookup compiler modifiers compilermodifiers org aspectj org eclipse jdt internal core builder reference collection referencecollection org aspectj org eclipse jdt internal core builder string set stringset org aspectj util file util fileutil org aspectj weaver bcexception org aspectj weaver iweaver org aspectj weaver reference type referencetype org aspectj weaver resolved member resolvedmember org aspectj weaver resolved type resolvedtype org aspectj weaver unresolved type unresolvedtype org aspectj weaver bcel bcel weaver bcelweaver org aspectj weaver bcel bcel world bcelworld org aspectj weaver bcel unwoven class file unwovenclassfile holds needed incremental compilation aj state ajstate aj build manager ajbuildmanager build manager buildmanager could be subsequent incremental build couldbesubsequentincrementalbuild secretapi beware multi threading bugs istate listener istatelistener state listener statelistener force incremental testing ihierarchy structure model structuremodel irelationship map irelationshipmap relmap last successful full build time lastsuccessfulfullbuildtime hashtable file structural changes since last full build structuralchangessincelastfullbuild hashtable last successful build time lastsuccessfulbuildtime current build time currentbuildtime aj build config ajbuildconfig build config buildconfig batch build required this time batchbuildrequiredthistime list fqn filename pairs class file classfile objects types compilation file note class file classfile objects code simply filename typename pair populated note result noteresult add dependents of adddependentsof file amc refactoring file list class file classfile map fully qualified type names resulting from compilation unit fullyqualifiedtypenamesresultingfromcompilationunit hash map hashmap source files defining aspects populated note result noteresult process deleted files processdeletedfiles amc refactoring file source files defining aspects sourcefilesdefiningaspects hash set hashset populated note result noteresult record types recompiled file modified deleted refered add affected source files addaffectedsourcefiles calculating incremental compilation file reference collection referencecollection map references hash map hashmap holds unwoven class files unwovenclassfiles originating file source jar file directory individual file expensive map cleared batch build cheaper input class files by source inputclassfilesbysource map processing subsequent incremental builds populated aj build manager ajbuildmanager init bcel world initbcelworld passed aj compiler ajcompiler adapter binary input files reweave weaver determines full weave required cleared init bcel world initbcelworld prior repopulation file deleted incremental compilation delete files output directory weaving file get binary files to compile getbinaryfilestocompile compiling incrementally determine files recompiled input file changed file list unwoven class file unwovenclassfile map binary source files binarysourcefiles hash map hashmap initially duplicate held binary source files binarysourcefiles key difference values class files classfiles type file unwoven class files unwovenclassfiles code batch build binary source files binarysourcefiles cleared leaving lighter weight map processing subsequent incremental builds file list class file classfile map input class files by source inputclassfilesbysource hash map hashmap holds structure types build nice rid easy fqn compact structure representation compactstructurerepresentation map resolved type structures from last build resolvedtypestructuresfromlastbuild hash map hashmap populated note result noteresult record unwoven class files unwovenclassfiles intermediate originated compilation fully qualified remove all results of last build removeallresultsoflastbuild remove files output directory passed stateful name environment statefulnameenvironment incremental compilation support find type findtype lookups string file map classes from name classesfromname hash map hashmap list file compiled source files compiledsourcefiles array list arraylist list string resources array list arraylist list string aspect names aspectnames array list arraylist string qualified strings qualifiedstrings array list arraylist string simple strings simplestrings added files addedfiles deleted files deletedfiles binary source file binarysourcefile added binary files addedbinaryfiles binary source file binarysourcefile deleted binary files deletedbinaryfiles bcel weaver bcelweaver weaver bcel world bcelworld aj state ajstate aj build manager ajbuildmanager build manager buildmanager build manager buildmanager build manager buildmanager set could be subsequent incremental build setcouldbesubsequentincrementalbuild yes there could yestherecould could be subsequent incremental build couldbesubsequentincrementalbuild yes there could yestherecould successful compile successfulcompile aj build config ajbuildconfig config was full build wasfullbuild build config buildconfig config last successful build time lastsuccessfulbuildtime current build time currentbuildtime state listener statelistener state listener statelistener build successful buildsuccessful was full build wasfullbuild was full build wasfullbuild last successful full build time lastsuccessfulfullbuildtime current build time currentbuildtime returns batch build needed prepare for next build preparefornextbuild aj build config ajbuildconfig new build config newbuildconfig current build time currentbuildtime system current time millis currenttimemillis maybe incremental maybeincremental listener defined listenerdefined get listener getlistener record decision recorddecision preparing build incremental ajdt incremental deactivated batch build required this time batchbuildrequiredthistime batch build required this time batchbuildrequiredthistime listener defined listenerdefined get listener getlistener record decision recorddecision preparing build incremental time batch build explicitly forced last successful build time lastsuccessfulbuildtime build config buildconfig structural changes since last full build structuralchangessincelastfullbuild clear listener defined listenerdefined get listener getlistener record decision recorddecision preparing build incremental successful previous full build don support incremental outjar new build config newbuildconfig get output jar getoutputjar structural changes since last full build structuralchangessincelastfullbuild clear listener defined listenerdefined get listener getlistener record decision recorddecision preparing build incremental outjar changed jar path modified path change pathchange build config buildconfig new build config newbuildconfig time built files resource files jars inpath copied output directory deleted preparation clean build coming file deleted inpath jar build deleted output directory remove all results of last build removeallresultsoflastbuild state listener statelistener state listener statelistener path change detected pathchangedetected structural changes since last full build structuralchangessincelastfullbuild clear listener defined listenerdefined get listener getlistener record decision recorddecision preparing build incremental path change detected classpath aspectpath inpath injars simple strings simplestrings array list arraylist qualified strings qualifiedstrings array list arraylist old files oldfiles hash set hashset build config buildconfig get files getfiles new files newfiles hash set hashset new build config newbuildconfig get files getfiles added files addedfiles hash set hashset new files newfiles added files addedfiles remove all removeall old files oldfiles deleted files deletedfiles hash set hashset old files oldfiles deleted files deletedfiles remove all removeall new files newfiles old binary files oldbinaryfiles hash set hashset build config buildconfig get binary files getbinaryfiles new binary files newbinaryfiles hash set hashset new build config newbuildconfig get binary files getbinaryfiles added binary files addedbinaryfiles hash set hashset new binary files newbinaryfiles added binary files addedbinaryfiles remove all removeall old binary files oldbinaryfiles deleted binary files deletedbinaryfiles hash set hashset old binary files oldbinaryfiles deleted binary files deletedbinaryfiles remove all removeall new binary files newbinaryfiles could still be incremental couldstillbeincremental process deleted files processdeletedfiles deleted files deletedfiles could still be incremental couldstillbeincremental listener defined listenerdefined get listener getlistener record decision recorddecision preparing build incremental aspect deleted listener defined listenerdefined get listener getlistener record decision recorddecision preparing build planning incremental build checks files passed aspect declaration start process batch building remove build call registered listener happened discovered aspect declaration process deleted files processdeletedfiles deleted files deletedfiles iterator iter deleted files deletedfiles iterator iter has next hasnext file a deleted file adeletedfile file iter source files defining aspects sourcefilesdefiningaspects a deleted file adeletedfile remove all results of last build removeallresultsoflastbuild state listener statelistener state listener statelistener detected aspect deleted detectedaspectdeleted a deleted file adeletedfile collection get modified files getmodifiedfiles get modified files getmodifiedfiles last successful build time lastsuccessfulbuildtime collection get modified files getmodifiedfiles last build time lastbuildtime list ret array list arraylist job account deleted files iterator build config buildconfig get files getfiles iterator has next hasnext file file file file exists mod time modtime file last modified lastmodified add last mod time lastmodtime accurate platforms mod time modtime last build time lastbuildtime ret add file ret collection get modified binary files getmodifiedbinaryfiles get modified binary files getmodifiedbinaryfiles last successful build time lastsuccessfulbuildtime collection get modified binary files getmodifiedbinaryfiles last build time lastbuildtime list ret array list arraylist job account deleted files iterator build config buildconfig get binary files getbinaryfiles iterator has next hasnext aj build config ajbuildconfig binary source file binarysourcefile bsfile aj build config ajbuildconfig binary source file binarysourcefile file file bsfile bin src binsrc file exists mod time modtime file last modified lastmodified add last mod time lastmodtime accurate platforms mod time modtime last build time lastbuildtime ret add bsfile ret class file changed in dir since last build classfilechangedindirsincelastbuild file dir process building directory aj state ajstate incremental state manager incrementalstatemanager find state managing output location findstatemanagingoutputlocation dir file class files classfiles file util fileutil list files listfiles dir file filter filefilter accept file pathname pathname get name getname ends with endswith class files classfiles length mod time modtime class files classfiles last modified lastmodified mod time modtime last successful build time lastsuccessfulbuildtime structurally changed real change realchange has structural changed since hasstructuralchangedsince class files classfiles last successful build time lastsuccessfulbuildtime real change realchange object changed determine file changed time local recorded structural data structure file file wondering last sbt lastsbt build time question has structural changed since hasstructuralchangedsince file file last successful build time lastsuccessfulbuildtime last mod time lastmodtime file last modified lastmodified structural changes since last full build structuralchangessincelastfullbuild file get absolute path getabsolutepath struc mod time strucmodtime struc mod time strucmodtime long value longvalue struc mod time strucmodtime last successful full build time lastsuccessfulfullbuildtime struc mod time strucmodtime time structurally changed struc mod time strucmodtime last successful build time lastsuccessfulbuildtime path change pathchange aj build config ajbuildconfig old config oldconfig aj build config ajbuildconfig new config newconfig changed list old classpath oldclasspath old config oldconfig get classpath getclasspath list new classpath newclasspath new config newconfig get classpath getclasspath state listener statelistener state listener statelistener about to compare classpaths abouttocompareclasspaths old classpath oldclasspath new classpath newclasspath changed old classpath oldclasspath new classpath newclasspath old config oldconfig get output dir getoutputdir list old aspectpath oldaspectpath old config oldconfig get aspectpath getaspectpath list new aspectpath newaspectpath new config newconfig get aspectpath getaspectpath changed old aspectpath oldaspectpath new aspectpath newaspectpath old config oldconfig get output dir getoutputdir list old in jars oldinjars old config oldconfig get in jars getinjars list new in jars newinjars new config newconfig get in jars getinjars changed old in jars oldinjars new in jars newinjars old config oldconfig get output dir getoutputdir list old in path oldinpath old config oldconfig get inpath getinpath list new in path newinpath new config newconfig get inpath getinpath changed old in path oldinpath new in path newinpath old config oldconfig get output dir getoutputdir changed changed list old path oldpath list new path newpath check class files checkclassfiles file old output location oldoutputlocation old path oldpath old path oldpath array list arraylist new path newpath new path newpath array list arraylist old output location oldoutputlocation old output location oldoutputlocation old output location oldoutputlocation get canonical file getcanonicalfile ioexception old path oldpath size new path newpath size old path oldpath size old path oldpath equals new path newpath string classpath file paths object old path oldpath file string file string file exists is directory isdirectory last modified lastmodified last successful build time lastsuccessfulbuildtime exists is directory isdirectory check class files checkclassfiles equals old output location oldoutputlocation class file changed in dir since last build classfilechangedindirsincelastbuild state listener statelistener state listener statelistener detected class change in this dir detectedclasschangeinthisdir list get files to compile getfilestocompile first pass firstpass list this time thistime array list arraylist first pass firstpass compiled source files compiledsourcefiles array list arraylist collection modified files modifiedfiles get modified files getmodifiedfiles system println modified modified files modifiedfiles this time thistime add all addall modified files modifiedfiles eclipse incremental image builder incrementalimagebuilder appears iterator modified files modifiedfiles iterator has next hasnext file file file add dependents of adddependentsof file this time thistime add all addall added files addedfiles delete class files deleteclassfiles delete resources deleteresources add affected source files addaffectedsourcefiles this time thistime this time thistime add affected source files addaffectedsourcefiles this time thistime compiled source files compiledsourcefiles compiled source files compiledsourcefiles this time thistime this time thistime maybe incremental maybeincremental force incremental testing could be subsequent incremental build couldbesubsequentincrementalbuild map get binary files to compile getbinaryfilestocompile string list ucf first time firsttime last successful build time lastsuccessfulbuildtime build config buildconfig maybe incremental maybeincremental binary source files binarysourcefiles incremental map to weave toweave hash map hashmap first time firsttime list added or modified addedormodified array list arraylist added or modified addedormodified add all addall added binary files addedbinaryfiles added or modified addedormodified add all addall get modified binary files getmodifiedbinaryfiles iterator iter added or modified addedormodified iterator iter has next hasnext aj build config ajbuildconfig binary source file binarysourcefile bsf aj build config ajbuildconfig binary source file binarysourcefile iter unwoven class file unwovenclassfile ucf create unwoven class file createunwovenclassfile bsf ucf list ucfs array list arraylist ucfs add ucf add dependents of adddependentsof ucf get class name getclassname binary source files binarysourcefiles bsf bin src binsrc get path getpath ucfs list cfs array list arraylist cfs add get class file for getclassfilefor ucf input class files by source inputclassfilesbysource bsf bin src binsrc get path getpath cfs to weave toweave bsf bin src binsrc get path getpath ucfs delete binary class files deletebinaryclassfiles empty bit to weave toweave called path change trigger full build haven cleaned incremental build remove all results of last build removeallresultsoflastbuild remove binary source files binarysourcefiles classes from name classesfromname iterator iter input class files by source inputclassfilesbysource values iterator iter has next hasnext list cfs list iter iterator iterator cfs iterator iterator has next hasnext class file classfile class file classfile iterator delete from file system deletefromfilesystem iterator iterator classes from name classesfromname values iterator iterator has next hasnext file file iterator class file classfile delete from file system deletefromfilesystem iterator iter resources iterator iter has next hasnext string resource string iter file build config buildconfig get output dir getoutputdir resource delete delete class files deleteclassfiles iterator deleted files deletedfiles iterator has next hasnext file deleted file deletedfile file add dependents of adddependentsof deleted file deletedfile list cfs list fully qualified type names resulting from compilation unit fullyqualifiedtypenamesresultingfromcompilationunit deleted file deletedfile fully qualified type names resulting from compilation unit fullyqualifiedtypenamesresultingfromcompilationunit remove deleted file deletedfile cfs iterator iter cfs iterator iter has next hasnext class file classfile class file classfile iter delete class file deleteclassfile delete binary class files deletebinaryclassfiles range bsf ucfs domain files jars inpath jars iterator iter deleted binary files deletedbinaryfiles iterator iter has next hasnext aj build config ajbuildconfig binary source file binarysourcefile deleted file deletedfile aj build config ajbuildconfig binary source file binarysourcefile iter list cfs list input class files by source inputclassfilesbysource deleted file deletedfile bin src binsrc get path getpath iterator iterator cfs iterator iterator has next hasnext delete class file deleteclassfile class file classfile iterator input class files by source inputclassfilesbysource remove deleted file deletedfile bin src binsrc get path getpath delete resources deleteresources list old resources oldresources array list arraylist old resources oldresources add all addall resources incremental compilation iterator build config buildconfig get inpath getinpath iterator has next hasnext file in path element inpathelement file in path element inpathelement is directory isdirectory aj build manager ajbuildmanager copy inpath dir resources delete resources from directory deleteresourcesfromdirectory in path element inpathelement old resources oldresources build config buildconfig get source path resources getsourcepathresources iterator build config buildconfig get source path resources getsourcepathresources key set keyset iterator has next hasnext string resource string maybe delete resource maybedeleteresource resource old resources oldresources old resources oldresources deleted iterator iter old resources oldresources iterator iter has next hasnext string victim string iter file file build config buildconfig get output dir getoutputdir victim exists delete resources remove victim maybe delete resource maybedeleteresource string res name resname list old resources oldresources resources res name resname old resources oldresources remove res name resname file source file build config buildconfig get output dir getoutputdir res name resname source source exists source last modified lastmodified last successful build time lastsuccessfulbuildtime ensure copied resources remove res name resname delete resources from directory deleteresourcesfromdirectory file dir list old resources oldresources file files file util fileutil list files listfiles dir file filter filefilter accept file accept is directory isdirectory get name getname ends with endswith accept file add real file resource files length files get absolute path getabsolutepath starts with startswith in file infile get absolute path getabsolutepath trouble string filename files get absolute path getabsolutepath substring dir get absolute path getabsolutepath length maybe delete resource maybedeleteresource filename old resources oldresources delete class file deleteclassfile class file classfile classes from name classesfromname remove fully qualified type name fullyqualifiedtypename weaver delete class file deleteclassfile fully qualified type name fullyqualifiedtypename delete from file system deletefromfilesystem unwoven class file unwovenclassfile create unwoven class file createunwovenclassfile aj build config ajbuildconfig binary source file binarysourcefile bsf unwoven class file unwovenclassfile ucf ucf weaver add class file addclassfile bsf bin src binsrc bsf from in path directory frominpathdirectory build config buildconfig get output dir getoutputdir ioexception imessage msg message read file bsf bin src binsrc get path getpath source location sourcelocation bsf bin src binsrc build manager buildmanager handler handle message handlemessage msg ucf note result noteresult interim compilation result interimcompilationresult result maybe incremental maybeincremental file source file sourcefile file result file name filename compilation result compilationresult result result result references source file sourcefile reference collection referencecollection qualified references qualifiedreferences simple name references simplenamereferences unwoven class file unwovenclassfile unwoven class files unwovenclassfiles result unwoven class files unwovenclassfiles unwoven class files unwovenclassfiles length file last time round lasttimeround file classes from name classesfromname unwoven class files unwovenclassfiles get class name getclassname record class file recordclassfile unwoven class files unwovenclassfiles last time round lasttimeround classes from name classesfromname unwoven class files unwovenclassfiles get class name getclassname file unwoven class files unwovenclassfiles get filename getfilename types deleted record whether compilation unit defined aspect recordwhethercompilationunitdefinedaspect source file sourcefile delete types that were in this compilation unit last time round but have been deleted in this increment deletetypesthatwereinthiscompilationunitlasttimeroundbuthavebeendeletedinthisincrement source file sourcefile unwoven class files unwovenclassfiles record fqns resulting from compilation unit recordfqnsresultingfromcompilationunit source file sourcefile result unused ditch classes from name classesfromname note result noteresult param file unwoven class file unwovenclassfile maybe get existing class file for maybegetexistingclassfilefor unwoven class file unwovenclassfile class file classfile file existing file class file classfile get filename getfilename existing exists unwoven class file unwovenclassfile class file classfile get filename getfilename file util fileutil read as byte array readasbytearray existing ioexception illegal state exception illegalstateexception unable read contents class file classfile get filename getfilename compile cycle param source file sourcefile param unwoven class files unwovenclassfiles delete types that were in this compilation unit last time round but have been deleted in this increment deletetypesthatwereinthiscompilationunitlasttimeroundbuthavebeendeletedinthisincrement file source file sourcefile unwoven class file unwovenclassfile unwoven class files unwovenclassfiles list class files classfiles list fully qualified type names resulting from compilation unit fullyqualifiedtypenamesresultingfromcompilationunit source file sourcefile class files classfiles unwoven class files unwovenclassfiles length deleting deletes types weaver don time remove from class files if present removefromclassfilesifpresent unwoven class files unwovenclassfiles get class name getclassname class files classfiles iterator iter class files classfiles iterator iter has next hasnext class file classfile class file classfile iter delete class file deleteclassfile remove from class files if present removefromclassfilesifpresent string class name classname list class files classfiles class file classfile victim iterator iter class files classfiles iterator iter has next hasnext class file classfile class file classfile iter fully qualified type name fullyqualifiedtypename equals class name classname victim victim class files classfiles remove victim record fully qualified names types declared source file param source file sourcefile compilation unit param icr compilation result compilationresult compiling record fqns resulting from compilation unit recordfqnsresultingfromcompilationunit file source file sourcefile interim compilation result interimcompilationresult icr list class files classfiles array list arraylist unwoven class file unwovenclassfile types icr unwoven class files unwovenclassfiles types length class files classfiles add class file classfile types get class name getclassname file types get filename getfilename fully qualified type names resulting from compilation unit fullyqualifiedtypenamesresultingfromcompilationunit source file sourcefile class files classfiles compilation unit defined aspect modified increment param source file sourcefile param record whether compilation unit defined aspect recordwhethercompilationunitdefinedaspect file source file sourcefile compilation result compilationresult source files defining aspects sourcefilesdefiningaspects remove source file sourcefile map compiled types compiledtypes compiled types compiledtypes compiled types compiledtypes iterator iterator compiled types compiledtypes key set keyset iterator iterator has next hasnext class name classname iterator string type name typename string class name classname replace type name typename index of indexof iweaver synthetic postfix resolved type resolvedtype resolve type name typename is missing ismissing illegal state exception illegalstateexception type get signature getsignature is aspect isaspect source files defining aspects sourcefilesdefiningaspects add source file sourcefile unwoven class file unwovenclassfile remove from previous if present removefrompreviousifpresent unwoven class file unwovenclassfile interim compilation result interimcompilationresult previous previous unwoven class file unwovenclassfile unwoven class files unwovenclassfiles previous unwoven class files unwovenclassfiles unwoven class files unwovenclassfiles length unwoven class file unwovenclassfile candidate unwoven class files unwovenclassfiles candidate candidate get filename getfilename equals get filename getfilename unwoven class files unwovenclassfiles candidate record class file recordclassfile unwoven class file unwovenclassfile this time thistime file last time lasttime simple strings simplestrings batch build record resolved type structural comparisions increments records reference structure held memory resolved type resolvedtype r type rtype resolve this time thistime get class name getclassname r type rtype is missing ismissing class file reader classfilereader reader class file reader classfilereader this time thistime get bytes getbytes resolved type structures from last build resolvedtypestructuresfromlastbuild this time thistime get class name getclassname compact structure representation compactstructurerepresentation reader class format exception classformatexception cfe bcexception unexpected problem processing cfe compact structure representation compactstructurerepresentation existing structure existingstructure compact structure representation compactstructurerepresentation resolved type structures from last build resolvedtypestructuresfromlastbuild this time thistime get class name getclassname reference type referencetype new resolved type newresolvedtype reference type referencetype resolve this time thistime get class name getclassname new resolved type newresolvedtype is missing ismissing class file reader classfilereader reader class file reader classfilereader this time thistime get bytes getbytes resolved type structures from last build resolvedtypestructuresfromlastbuild this time thistime get class name getclassname compact structure representation compactstructurerepresentation reader class format exception classformatexception cfe bcexception unexpected problem processing cfe last time lasttime add dependents of adddependentsof this time thistime get class name getclassname new resolved type newresolvedtype is missing ismissing ensure advanced configuration processed ensureadvancedconfigurationprocessed new bytes newbytes this time thistime get bytes getbytes class file reader classfilereader reader class file reader classfilereader new bytes newbytes last time lasttime get absolute path getabsolutepath to char array tochararray ignore local types visible single method reader is local islocal reader is anonymous isanonymous has structural changes hasstructuralchanges reader existing structure existingstructure for debug fordebug structural changes code structuralchangescode system err println detected structural change this time thistime get filename getfilename structural changes since last full build structuralchangessincelastfullbuild this time thistime get filename getfilename current build time currentbuildtime add dependents of adddependentsof string reader get name getname replace class format exception classformatexception add dependents of adddependentsof this time thistime get class name getclassname empty array bracket compare structure intermediate unwoven existing resolved type existingresolvedtype structural differences ignoring members weaving notes andy lot problems eventually resolved building compactstructure based classfilereader resolved type resolvedtype accessors types funky fields compiler creates support language types mangles ctors prefixed instance surrounding type warning boring method implementation param reader param existing type existingtype has structural changes hasstructuralchanges class file reader classfilereader reader compact structure representation compactstructurerepresentation existing type existingtype existing type existingtype modifiers modifiers equal modifiersequal reader get modifiers getmodifiers existing type existingtype modifiers signature char operation charoperation equals reader get generic signature getgenericsignature existing type existingtype generic signature genericsignature superclass char operation charoperation equals reader get superclass name getsuperclassname existing type existingtype superclass name superclassname interfaces existing ifs existingifs existing type existingtype interfaces new ifs as chars newifsaschars reader get interface names getinterfacenames damn lazy new ifs as chars newifsaschars new ifs as chars newifsaschars empty array existing ifs existingifs existing ifs existingifs empty array existing ifs existingifs length new ifs as chars newifsaschars length loop new ifs as chars newifsaschars length existing ifs existingifs length char operation charoperation equals existing ifs existingifs new ifs as chars newifsaschars loop fields member structure memberstructure existing fields existingfields existing type existingtype fields ibinary field ibinaryfield new fields newfields reader get fields getfields new fields newfields new fields newfields ibinary field ibinaryfield new fields newfields length existing fields existingfields length field loop new fields newfields length ibinary field ibinaryfield field new fields newfields field name fieldname field get name getname existing fields existingfields length char operation charoperation equals existing fields existingfields field name fieldname modifiers equal modifiersequal field get modifiers getmodifiers existing fields existingfields modifiers char operation charoperation equals existing fields existingfields signature field get type name gettypename field loop methods member structure memberstructure existing methods existingmethods existing type existingtype methods ibinary method ibinarymethod new methods newmethods reader get methods getmethods new methods newmethods new methods newmethods ibinary method ibinarymethod new methods newmethods length existing methods existingmethods length method loop new methods newmethods length ibinary method ibinarymethod method new methods newmethods method name methodname method get selector getselector existing methods existingmethods length char operation charoperation equals existing methods existingmethods method name methodname candidate match char operation charoperation equals method get method descriptor getmethoddescriptor existing methods existingmethods signature overloading matching sigs modifiers equal modifiersequal method get modifiers getmodifiers existing methods existingmethods modifiers method loop match modifiers equal modifiersequal eclipse modifiers eclipsemodifiers resolved type modifiers resolvedtypemodifiers resolved type modifiers resolvedtypemodifiers resolved type modifiers resolvedtypemodifiers compiler modifiers compilermodifiers acc just flag accjustflag eclipse modifiers eclipsemodifiers eclipse modifiers eclipsemodifiers compiler modifiers compilermodifiers acc just flag accjustflag eclipse modifiers eclipsemodifiers resolved type modifiers resolvedtypemodifiers string set stringset make string set makestringset list strings string set stringset ret string set stringset strings size iterator iter strings iterator iter has next hasnext string element string iter ret add element ret string stringify list stringifylist list string buffer stringbuffer string buffer stringbuffer append iterator iter iterator iter has next hasnext object object iter append iter has next hasnext append append to string tostring add affected source files addaffectedsourcefiles list add to addto list last time sources lasttimesources qualified strings qualifiedstrings is empty isempty simple strings simplestrings is empty isempty listener defined listenerdefined get listener getlistener record decision recorddecision examining files compilation based compiling stringify list stringifylist last time sources lasttimesources qualified strings qualifiedstrings form simple strings simplestrings qualified names qualifiednames reference collection referencecollection intern qualified names internqualifiednames make string set makestringset qualified strings qualifiedstrings qualified skip qualified names qualifiednames length qualified strings qualifiedstrings size qualified names qualifiednames simple names simplenames reference collection referencecollection intern simple names internsimplenames make string set makestringset simple strings simplestrings skip simple names simplenames length simple strings simplestrings size simple names simplenames iterator references entry set entryset iterator has next hasnext map entry entry map entry reference collection referencecollection reference collection referencecollection entry get value getvalue includes qualified names qualifiednames simple names simplenames file file file entry get key getkey file exists last time sources lasttimesources file listener defined listenerdefined get listener getlistener record decision recorddecision recompile file get name getname to string tostring add to addto add file xxx promote add to addto don rubbish ordered add to addto size iterator iter last time sources lasttimesources iterator iter has next hasnext object element object iter add to addto element add to addto add element qualified strings qualifiedstrings clear simple strings simplestrings clear add dependents of adddependentsof string qualified type name qualifiedtypename last dot lastdot qualified type name qualifiedtypename last index of lastindexof string type name typename last dot lastdot string package name packagename qualified type name qualifiedtypename substring last dot lastdot replace qualified strings qualifiedstrings package name packagename qualified strings qualifiedstrings add package name packagename type name typename qualified type name qualifiedtypename substring last dot lastdot qualified strings qualifiedstrings add type name typename qualified type name qualifiedtypename member index memberindex type name typename index of indexof member index memberindex type name typename type name typename substring member index memberindex simple strings simplestrings type name typename simple strings simplestrings add type name typename system err println adding qualified type name qualifiedtypename add dependents of adddependentsof file source file sourcefile list cfs list fully qualified type names resulting from compilation unit fullyqualifiedtypenamesresultingfromcompilationunit source file sourcefile cfs iterator iter cfs iterator iter has next hasnext class file classfile class file classfile iter add dependents of adddependentsof fully qualified type name fullyqualifiedtypename set structure model setstructuremodel ihierarchy model structure model structuremodel model ihierarchy get structure model getstructuremodel structure model structuremodel set weaver setweaver bcel weaver bcelweaver weaver bcel weaver bcelweaver get weaver getweaver weaver set world setworld bcel world bcelworld bcel world bcelworld get bcel world getbcelworld set relationship map setrelationshipmap irelationship map irelationshipmap irm relmap irm irelationship map irelationshipmap get relationship map getrelationshipmap relmap get number of structural changes since last full build getnumberofstructuralchangessincelastfullbuild structural changes since last full build structuralchangessincelastfullbuild size returns time full incremental build get last build time getlastbuildtime last successful build time lastsuccessfulbuildtime returns time full build get last full build time getlastfullbuildtime last successful full build time lastsuccessfulfullbuildtime returns build config buildconfig aj build config ajbuildconfig get build config getbuildconfig build config buildconfig clear binary source files clearbinarysourcefiles binary source files binarysourcefiles hash map hashmap record binary source recordbinarysource string from path name frompathname list unwoven class files unwovenclassfiles binary source files binarysourcefiles from path name frompathname unwoven class files unwovenclassfiles maybe incremental maybeincremental list simple class files simpleclassfiles linked list linkedlist iterator iter unwoven class files unwovenclassfiles iterator iter has next hasnext unwoven class file unwovenclassfile ucf unwoven class file unwovenclassfile iter class file classfile get class file for getclassfilefor ucf simple class files simpleclassfiles add input class files by source inputclassfilesbysource from path name frompathname simple class files simpleclassfiles param ucf class file classfile get class file for getclassfilefor unwoven class file unwovenclassfile ucf class file classfile ucf get class name getclassname file ucf get filename getfilename map get binary source map getbinarysourcemap binary source files binarysourcefiles map get class name to file map getclassnametofilemap classes from name classesfromname has resource hasresource string resource name resourcename resources resource name resourcename record resource recordresource string resource name resourcename resources add resource name resourcename returns added files addedfiles get added files getaddedfiles added files addedfiles returns deleted files deletedfiles get deleted files getdeletedfiles deleted files deletedfiles force batch build next time around forcebatchbuildnexttimearound batch build required this time batchbuildrequiredthistime requires full batch build requiresfullbatchbuild batch build required this time batchbuildrequiredthistime class file classfile string fully qualified type name fullyqualifiedtypename file location on disk locationondisk class file classfile string fqn file location fully qualified type name fullyqualifiedtypename fqn location on disk locationondisk location delete from file system deletefromfilesystem string name prefix nameprefix location on disk locationondisk get name getname name prefix nameprefix name prefix nameprefix substring name prefix nameprefix last index of lastindexof string target prefix targetprefix name prefix nameprefix iweaver closure prefix file dir location on disk locationondisk get parent file getparentfile dir file weaver generated weavergenerated dir list files listfiles filename filter filenamefilter accept file dir string starts with startswith target prefix targetprefix weaver generated weavergenerated weaver generated weavergenerated length weaver generated weavergenerated delete location on disk locationondisk delete compact structure representation compactstructurerepresentation class name classname modifiers generic signature genericsignature superclass name superclassname interfaces member structure memberstructure fields member structure memberstructure methods compact structure representation compactstructurerepresentation class file reader classfilereader cfr slashes class name classname cfr get name getname modifiers cfr get modifiers getmodifiers generic signature genericsignature cfr get generic signature getgenericsignature generic signature genericsignature length generic signature genericsignature slashes superclass name superclassname cfr get superclass name getsuperclassname interfaces cfr get interface names getinterfacenames ibinary field ibinaryfield r fields rfields cfr get fields getfields fields member structure memberstructure r fields rfields r fields rfields length r fields rfields r fields rfields length fields member structure memberstructure fields r fields rfields get name getname fields modifiers r fields rfields get modifiers getmodifiers fields signature r fields rfields get type name gettypename ibinary method ibinarymethod r methods rmethods cfr get methods getmethods methods member structure memberstructure r methods rmethods r methods rmethods length r methods rmethods r methods rmethods length methods member structure memberstructure methods r methods rmethods get selector getselector methods modifiers r methods rmethods get modifiers getmodifiers string buffer stringbuffer sig string buffer stringbuffer sig append unresolved type unresolvedtype p types ptypes r methods rmethods get method descriptor getmethoddescriptor p types ptypes length sig append p types ptypes get signature getsignature sig append sig append r methods rmethods get return type getreturntype get signature getsignature sig to string tostring to char array tochararray methods signature r methods rmethods get method descriptor getmethoddescriptor compact structure representation compactstructurerepresentation resolved type resolvedtype for type fortype class name classname for type fortype get name getname replace to char array tochararray modifiers for type fortype get modifiers getmodifiers generic signature genericsignature for type fortype get generic signature getgenericsignature to char array tochararray generic signature genericsignature length generic signature genericsignature superclass name superclassname for type fortype get superclass getsuperclass get name getname replace to char array tochararray resolved type resolvedtype r types rtypes for type fortype get declared interfaces getdeclaredinterfaces interfaces r types rtypes length r types rtypes length interfaces r types rtypes get name getname replace to char array tochararray resolved member resolvedmember r fields rfields for type fortype get declared fields getdeclaredfields fields member structure memberstructure r fields rfields length r fields rfields length fields member structure memberstructure fields r fields rfields get name getname to char array tochararray fields modifiers r fields rfields get modifiers getmodifiers fields signature r fields rfields get return type getreturntype get signature getsignature to char array tochararray resolved member resolvedmember r methods rmethods for type fortype get declared methods getdeclaredmethods methods member structure memberstructure r methods rmethods length r methods rmethods length methods member structure memberstructure methods r methods rmethods get name getname to char array tochararray methods modifiers r methods rmethods get modifiers getmodifiers string buffer stringbuffer sig string buffer stringbuffer sig append unresolved type unresolvedtype p types ptypes r methods rmethods get parameter types getparametertypes p types ptypes length sig append p types ptypes get signature getsignature sig append sig append r methods rmethods get return type getreturntype get signature getsignature methods signature sig to string tostring to char array tochararray member structure memberstructure modifiers signature wipe all knowledge wipeallknowledge build manager buildmanager build manager buildmanager set structure model setstructuremodel list get aspect names getaspectnames aspect names aspectnames initialize aspect names list initializeaspectnameslist aspect names aspectnames linked list linkedlist record decisions incremental processing aid debugging listener defined listenerdefined state listener statelistener istate listener istatelistener get listener getlistener state listener statelistener