copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj testing harness bridge java file java util array list arraylist java util arrays java util collection java util iterator java util list iterator listiterator java util stack org aspectj bridge abort exception abortexception org aspectj bridge imessage org aspectj bridge imessage handler imessagehandler org aspectj bridge message util messageutil org aspectj util file util fileutil org aspectj util lang util langutil check input implement defaults handles failure messaging collecting temp directories cleanup behavior send fail message message handler clients toggle abort on exception abortonexception abort exception abortexception failure push message handler redirect messages pop remove pushed subclass reimplement code fail string code component validation change reporting scheme established caller caller lock unlock error handling policy policy locked silently ignores attempts toggle exceptions delete temporary files xxx callers prevent pushing error handlers validator stack handlers stack handlers list file registered deletion demand delete temp files deletetempfiles requires list iterator listiterator remove array list arraylist temp files tempfiles list sandboxes registered cleanup demand array list arraylist sandboxes abort exception abortexception failure abort on failure abortonfailure object prevents error handling policy object locker validator imessage handler imessagehandler handler temp files tempfiles array list arraylist sandboxes array list arraylist handlers stack push handler pushhandler handler push imessage handler imessagehandler stack push pop param handler push handler pushhandler imessage handler imessagehandler handler lang util langutil throw iax if null throwiaxifnull handler handler handlers push handler illegal state exception illegalstateexception handler top pop handler pophandler imessage handler imessagehandler handler lang util langutil throw iax if null throwiaxifnull handler handler handler handlers peek illegal state exception illegalstateexception current handler handlers pop requestor locked error handling policy lock object requestor locker locker requestor locker requestor error handling policy unlocked unlock object requestor requestor locker locker locker set abort on failure setabortonfailure abort on failure abortonfailure locker abort on failure abortonfailure abort on failure abortonfailure abort on failure abortonfailure abort on failure abortonfailure fail messages check array check message nullcheck object string message nullcheck object message array nullcheck arrays as list aslist message nullcheck collection message adding upper bound param at least atleast fail list size smaller param at most atmost fail list size greater nullcheck collection list at least atleast at most atmost string message nullcheck list message size list size size at least atleast fail message size at least atleast size at most atmost fail message size at most atmost fail messages check list check message nullcheck collection list string message nullcheck object list message list iterator iter list iterator iter has next hasnext nullcheck iter message fail message message def ault object nulldefault object string message object def def nullcheck message fail message message nullcheck object string message message message object fail message verify paths readable relative base dir basedir fail message read file can read canread file base dir basedir string paths string message can read canread base dir basedir base dir basedir message nullcheck paths paths message string dir path dirpath base dir basedir get path getpath file files file util fileutil get base dir files getbasedirfiles base dir basedir paths files length can read canread files dir path dirpath files verify paths readable relative base dir basedir fail message read file can read canread file files string message nullcheck files message files length can read canread files files get path getpath fail message read file can read canread file file string message nullcheck file message file can read canread fail read file fail message write file can write canwrite file file string message nullcheck file message file can read canread fail write file fail message directory file can read dir canreaddir file file string message can read canread file message file is directory isdirectory fail directory file fail message directory file can write dir canwritedir file file string message can write canwrite file message file is directory isdirectory fail directory file fail messages check dir array file file can read canread message can read files canreadfiles object dirs string message nullcheck object dirs message dir array can read files canreadfiles arrays as list aslist dirs message fail messages check files file file can read canread message can read files canreadfiles collection dirs string message nullcheck object dirs message files iterator iter dirs iterator iter has next hasnext object iter file fail file can read canread file message fail messages check dir array file file can read dir canreaddir message can read dirs canreaddirs object dirs string message nullcheck object dirs message dir array can read dirs canreaddirs arrays as list aslist dirs message fail messages check dirs file file can read dir canreaddir message can read dirs canreaddirs collection dirs string message nullcheck object dirs message dirs iterator iter dirs iterator iter has next hasnext object iter file fail file can read dir canreaddir file message fail messages check dir array file file can write canwrite message can write files canwritefiles object dirs string message nullcheck object dirs message dir array can write files canwritefiles arrays as list aslist dirs message fail messages check files file file can write canwrite message can write files canwritefiles collection dirs string message nullcheck object dirs message files iterator iter dirs iterator iter has next hasnext object iter file fail file can write canwrite file message fail messages check dir array file file can write dir canwritedir message can write dirs canwritedirs object dirs string message nullcheck object dirs message dir array can write dirs canwritedirs arrays as list aslist dirs message fail messages check dirs file file can write dir canwritedir message can write dirs canwritedirs collection dirs string message nullcheck object dirs message dirs iterator iter dirs iterator iter has next hasnext object iter file fail file can write dir canwritedir file message send info message underlying handler param message info string message message imessage handler imessagehandler handler get handler gethandler message util messageutil info handler message fail message abort exception abortexception fail string message fail message throwable fail message abort exception abortexception failure messages subclasses override control failure handling fail string message throwable thrown message thrown message validator message imessage message util messageutil fail message thrown abort on failure abortonfailure abort exception abortexception imessage handler imessagehandler handler get handler gethandler handler handle message handlemessage register file temporary deleted completion file exist duplicate existing files registered register temp file registertempfile file file file temp files tempfiles add file writable empty directory input dir create temporary directory input dir create exist temporary directory validator delete contents deletecontents delete existing contents unable delete contents input directory empty temporary directory register directory returned saved deletion code delete temp dirs deletetempdirs code including input directory unable create result fail message failmessage fail returns file get writable dir getwritabledir file dir string delete contents deletecontents register string fail message failmessage check dir dir validator dir file util fileutil get temp dir gettempdir dir exists dir mkdirs fail dir dir exists fail message failmessage fail fail message failmessage unable parent dir file util fileutil make new child dir makenewchilddir dir delete contents deletecontents file util fileutil delete contents deletecontents dir register temp files tempfiles add dir dir delete temp sandboxes files directories saved optionally reporting failures normal failure policy unlocked delete temp files deletetempfiles report failures reportfailures locker list iterator listiterator iter temp files tempfiles list iterator listiterator iter has next hasnext delete file deletefile file iter report failures reportfailures iter remove list iterator listiterator iter sandboxes list iterator listiterator iter has next hasnext sandbox sandbox sandbox iter xxx assumes dirs sandbox dir sandboxdir delete file deletefile sandbox sandbox dir sandboxdir report failures reportfailures iter remove manage temp files directories registered sandboxes note sandbox register initialized save reference param sandbox uninitialized sandbox track register sandbox registersandbox sandbox sandbox sandboxes add sandbox delete file deletefile file file report failures reportfailures file report failures reportfailures fail unable delete file file skip file util fileutil delete contents deletecontents file file exists file delete file exists report failures reportfailures fail unable delete file illegal state exception illegalstateexception handler imessage handler imessagehandler get handler gethandler imessage handler imessagehandler handler imessage handler imessagehandler handlers peek handler illegal state exception illegalstateexception handler handler validator