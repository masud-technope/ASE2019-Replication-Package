copyright xerox corporation palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj util java awt event invocation event invocationevent java java file java ioexception java print writer printwriter java string writer stringwriter java lang reflect array java lang reflect invocation target exception invocationtargetexception java security privileged action exception privilegedactionexception java sql sqlexception java util array list arraylist java util arrays java util bit set bitset java util collection java util collections java util hash map hashmap java util iterator java util linked list linkedlist java util list java util map java util string tokenizer stringtokenizer lang util langutil map string version string implemented version map classes string eol string writer stringwriter buf string writer stringwriter print writer printwriter writer print writer printwriter buf writer println string eol buf close string buffer stringbuffer buf get buffer getbuffer length eol buf to string tostring throwable eol eol hash map hashmap map hash map hashmap map java lang reference map java lang reflect proxy map java nio buffer map java lang annotation annotation classes collections unmodifiable map unmodifiablemap map detect java version supported param version string running supports version illegal argument exception illegalargumentexception version supports java supportsjava string version lang util langutil throw iax if null throwiaxifnull version version string class name classname string classes version class name classname illegal argument exception illegalargumentexception unknown version version for name forname class name classname throwable vmor greater vmorgreater vmor greater vmorgreater vmor greater vmorgreater jls string system get property getproperty java version system get property getproperty java runtime version system get property getproperty java version starts with startswith vmor greater vmorgreater starts with startswith vmor greater vmorgreater vmor greater vmorgreater vmor greater vmorgreater vmor greater vmorgreater vmor greater vmorgreater vmor greater vmorgreater vmor greater vmorgreater shorthand illegal argument exception illegalargumentexception illegal argument exception illegalargumentexception throw iax if null throwiaxifnull object string string message input illegal argument exception illegalargumentexception message shorthand assignable illegal argument exception illegalargumentexception param check ignore type check illegal argument exception illegalargumentexception throw iax if not assignable throwiaxifnotassignable object string throw iax if null throwiaxifnull string label input length string label illegal argument exception illegalargumentexception actual class actualclass get class getclass is assignable from isassignablefrom actual class actualclass string message label assignable get name getname illegal argument exception illegalargumentexception message shorthand assignable illegal argument exception illegalargumentexception illegal argument exception illegalargumentexception throw iax if not assignable throwiaxifnotassignable object string throw iax if null throwiaxifnull actual class actualclass get class getclass is assignable from isassignablefrom actual class actualclass string message assignable get name getname illegal argument exception illegalargumentexception message shorthand assignable illegal argument exception illegalargumentexception illegal argument exception illegalargumentexception assignable throw iax if not all assignable throwiaxifnotallassignable collection collection string throw iax if null throwiaxifnull collection iterator iter collection iterator iter has next hasnext throw iax if not assignable throwiaxifnotassignable iter shorthand illegal argument exception illegalargumentexception illegal argument exception illegalargumentexception message test throw iax if false throwiaxiffalse test string message test illegal argument exception illegalargumentexception message trim length is empty trimmed isemptytrimmed string length trim length length is empty isempty string length length is empty isempty object length collection collection size is empty isempty collection collection collection collection size splits code text code whitespace param text code string code split string split string text string strings text to array toarray string splits code input code commas trimming white space param input code string code split list string elements list comma split commasplit string input any split anysplit input split string classpath delimited file path separator pathseparator entries trimmed empty entries param classpath string split empty string classpath entries string split classpath splitclasspath string classpath lang util langutil is empty isempty classpath string string tokenizer stringtokenizer string tokenizer stringtokenizer classpath file path separator pathseparator array list arraylist result array list arraylist count tokens counttokens has more tokens hasmoretokens string entry next token nexttoken lang util langutil is empty isempty entry result add entry string result to array toarray string system property system property get boolean getboolean string property name propertyname default value defaultvalue property name propertyname string system get property getproperty property name propertyname value of valueof boolean value booleanvalue throwable default value defaultvalue splits code input code removing delimiter trimming white space returns empty collection input delimiter empty input delimiters input returned trimming white space param input code string code split param delim code string code separators input list string elements list any split anysplit string input string delim input collections empty list array list arraylist result array list arraylist lang util langutil is empty isempty delim input index of indexof delim result add input trim string tokenizer stringtokenizer string tokenizer stringtokenizer input delim has more tokens hasmoretokens result add next token nexttoken trim result splits strings code list code code string tokenizer stringtokenizer code param text code string code split list strings string text lang util langutil is empty isempty text collections empty list list strings array list arraylist string tokenizer stringtokenizer tok string tokenizer stringtokenizer text tok has more tokens hasmoretokens strings add tok next token nexttoken strings unmodifiable list list safe list safelist list list list collections empty list collections unmodifiable list unmodifiablelist list select input string based suffix matching param inputs string input param suffixes string suffix selectors param ignore case ignorecase ignore string input input string ends with endswith string inputs string suffixes ignore case ignorecase lang util langutil is empty isempty inputs lang util langutil is empty isempty suffixes string ignore case ignorecase string temp string suffixes length temp length string suff suffixes temp suff suff to lower case tolowercase suffixes temp array list arraylist result array list arraylist inputs length string input inputs input ignore case ignorecase input input to lower case tolowercase suffixes length string suffix suffixes suffix input ends with endswith suffix result add input string result to array toarray string select input string readable directories param inputs string input param base dir basedir base directory input string input input string select directories selectdirectories string inputs file base dir basedir lang util langutil is empty isempty inputs string array list arraylist result array list arraylist inputs length string input inputs input file input file inputfile file base dir basedir input input file inputfile can read canread input file inputfile is directory isdirectory result add input string result to array toarray string copy dimensional string extract options extractoptions string string string copy strings copystrings string string string length length string length system arraycopy length extract options arguments input option list returning remainder input options nullified pre string options string string verbose string classpath string args extract options extractoptions args options verbose options classpath options pre param args string input options param options string options find input args string component subcomponent option string subcomponent additional argument string args remaining extracting options extracted string extract options extractoptions string args string options lang util langutil is empty isempty args lang util langutil is empty isempty options args bit set bitset found set foundset bit set bitset string result string args length result index resultindex args length options length string option options lang util langutil throw iax if false throwiaxiffalse lang util langutil is empty isempty option options string sought option sought equals args found set foundset do more domore option length do more domore max do more domore max args length string expecting do more domore args illegal argument exception illegalargumentexception args option length option args result result index resultindex args unset options length found set foundset options fixup remainder result index resultindex args length string temp string result index resultindex system arraycopy result temp result index resultindex args temp args extract options arguments input parameter list returning remainder param args string input options param valid options validoptions string options find input args param option args optionargs number arguments option valid options validoptions arguments option param extracted list matched options string args remaining extracting options extracted string extract options extractoptions string args string valid options validoptions option args optionargs list extracted lang util langutil is empty isempty args lang util langutil is empty isempty valid options validoptions args option args optionargs option args optionargs length valid options validoptions length illegal argument exception illegalargumentexception args match options string result string args length result index resultindex args length valid options validoptions length string sought valid options validoptions do more domore option args optionargs option args optionargs lang util langutil is empty isempty sought sought equals args extracted extracted add sought do more domore max do more domore max args length string expecting do more domore args illegal argument exception illegalargumentexception args extracted max extracted add args max result result index resultindex args result index resultindex args length string temp string result index resultindex system arraycopy result temp result index resultindex args temp args string entries valid options validoptions args string select options selectoptions string args string valid options validoptions lang util langutil is empty isempty args lang util langutil is empty isempty valid options validoptions string array list arraylist result array list arraylist valid options validoptions length string sought valid options validoptions lang util langutil is empty isempty sought args length sought equals args result add sought string result to array toarray string string entries valid options validoptions args string select options selectoptions list args string valid options validoptions lang util langutil is empty isempty args lang util langutil is empty isempty valid options validoptions string array list arraylist result array list arraylist valid options validoptions length string sought valid options validoptions lang util langutil is empty isempty sought iterator iter args iterator iter has next hasnext string arg string iter sought equals arg result add sought string result to array toarray string generate variants string options creating extra option ends array equal code string options code returned ends sets returned sets string option illegal argument exception illegalargumentexception option empty string option variants optionvariants string options options options length string string nice don stomp input string temp string options length system arraycopy options temp temp length options temp dup options length num dups numdups options length string option options lang util langutil is empty isempty option illegal argument exception illegalargumentexception empty option option ends with endswith options option substring option length dup num dups numdups string string variants exp num dups numdups string result string variants variant bitmap wrt extra dup variant variant variants variant array list arraylist array list arraylist next option nextoption options length dup variant next option nextoption add options result variant string to array toarray result exp base power math power illegal argument exception illegalargumentexception negative power power result power result base result copy array array component type source elements illegal argument exception illegalargumentexception source object copy object source lang util langutil throw iax if null throwiaxifnull source source source get class getclass get component type getcomponenttype object result object array new instance newinstance source length system arraycopy source result result length result convert arrays safely number elements result smaller element assignable sink size result component type sink array component type sink assignable elements source order illegal argument exception illegalargumentexception object safe copy safecopy object source object sink sink type sinktype sink object sink get class getclass get component type getcomponenttype source length sourcelength source source length sink length sinklength sink sink length result size resultsize array list arraylist result source length sourcelength result size resultsize result array list arraylist source length sourcelength source length sourcelength source sink type sinktype is assignable from isassignablefrom source get class getclass result add source result size resultsize result size result size resultsize sink length sinklength sink object array new instance newinstance sink type sinktype result size result size resultsize sink result to array toarray sink sink string unqualified string unqualified class name unqualifiedclassname string get name getname loc last index of lastindexof loc substring loc string unqualified object string unqualified class name unqualifiedclassname object lang util langutil unqualified class name unqualifiedclassname get class getclass inefficient replace instances sought replace string replace string string sought string replace lang util langutil is empty isempty lang util langutil is empty isempty sought string buffer stringbuffer result string buffer stringbuffer len sought length start loc loc index of indexof sought start result append substring start loc lang util langutil is empty isempty replace result append substring start loc start loc len result append substring start result to string tostring render justified width string to sized string tosizedstring width string result size result length width size string pad pad length padlength pad length width pad length padlength width pad length padlength topad width size result pad substring topad result result clip string buffer stringbuffer maximum number lines string clip buffer clipbuffer string buffer stringbuffer buffer max lines maxlines buffer buffer length string buffer stringbuffer result string buffer stringbuffer max max lines maxlines buffer length src begin srcbegin max src begin srcbegin todo replace string variant chars src end srcend src begin srcbegin chars length src end srcend src end srcend src begin srcbegin src end srcend log src begin srcbegin src begin srcbegin src end srcend src end srcend buffer get chars getchars src begin srcbegin src end srcend chars src end srcend src begin srcbegin chars length chars result append chars throwable result to string tostring unqualified exception class unqualifiedexceptionclass message string render exception short renderexceptionshort throwable throwable lang util langutil unqualified class name unqualifiedclassname get message getmessage renders exception code code unwrapping eliding test packages param code throwable code print max stack trace maxstacktrace string render exception renderexception throwable render exception renderexception renders exception code code unwrapping optionally eliding limiting total number lines param code throwable code print param elide limit lines elide test packages string checker stringchecker test packages string render exception renderexception throwable elide throwable unwrap exception unwrapexception string buffer stringbuffer stack stack to string stacktostring elide elide ending lines elideendinglines string checker stringchecker test packages stack stack to string tostring trim lines string buffer stringbuffer clipping max lines maxlines removing number trailing lines accepted checker param checker returns trailing elided param stack string buffer stringbuffer lines elide param max lines maxlines maximum number lines elide ending lines elideendinglines string checker stringchecker checker string buffer stringbuffer stack max lines maxlines checker stack stack length linked list linkedlist lines linked list linkedlist string tokenizer stringtokenizer string tokenizer stringtokenizer stack to string tostring has more tokens hasmoretokens max lines maxlines lines add next token nexttoken string elided lines is empty isempty string lines get last getlast checker accept string acceptstring elided lines remove last removelast elided max lines maxlines eol len eol length total length totallength lines is empty isempty total length totallength eol len string lines get first getfirst length lines remove first removefirst stack length total length totallength stack set length setlength total length totallength elided stack append elided lines dump message stack string buffer stringbuffer string buffer stringbuffer stack to string stacktostring throwable throwable skip message skipmessage throwable string buffer stringbuffer string writer stringwriter buf string writer stringwriter print writer printwriter writer print writer printwriter buf skip message skipmessage writer println throwable get message getmessage throwable print stack trace printstacktrace writer buf close ioexception ioe buf get buffer getbuffer throwable input tail wrapped exception chain throwable unwrap exception unwrapexception throwable throwable current throwable current java exceptions carry exceptions current invocation target exception invocationtargetexception invocation target exception invocationtargetexception current get target exception gettargetexception current class not found exception classnotfoundexception class not found exception classnotfoundexception current get exception getexception current exception in initializer error exceptionininitializererror exception in initializer error exceptionininitializererror current get exception getexception current privileged action exception privilegedactionexception privileged action exception privilegedactionexception current get exception getexception current sqlexception sqlexception current get next exception getnextexception java util logging log record logrecord get thrown getthrown current current replacement arrays as list aslist gacks returns list remove unsupported operation param array object convert list array list array as list arrayaslist object array array array length collections empty list array list arraylist list array list arraylist list add all addall arrays as list aslist array list check input packages elide string checker stringchecker string checker stringchecker test packages string checker stringchecker string org aspectj testing org eclipse jdt internal junit junit framework org apache tools ant taskdefs optional junit junit test runner junittestrunner string infixes param infixes string checker stringchecker string infixes infixes infixes input infixes accept string acceptstring string input result lang util langutil is empty isempty input result infixes length result input index of indexof infixes result gen classpath param bootclasspath param classpath param classes dir classesdir param output jar outputjar string combining classpath elements xxx dumb implementation string make classpath makeclasspath string bootclasspath string classpath string classes dir classesdir string output jar outputjar string buffer stringbuffer string buffer stringbuffer add if not empty addifnotempty bootclasspath file path separator pathseparator add if not empty addifnotempty classpath file path separator pathseparator add if not empty addifnotempty classes dir classesdir file path separator pathseparator add if not empty addifnotempty output jar outputjar file path separator pathseparator to string tostring param input param sink string buffer stringbuffer add input param delimiter string append input empty input delimiter sink add if not empty addifnotempty string input string buffer stringbuffer sink string delimiter lang util langutil is empty isempty input sink sink append input lang util langutil is empty isempty delimiter sink append delimiter create initialize process controller process asynchronously param controller process controller processcontroller initialize param classpath param main class mainclass param args initialized process controller processcontroller process controller processcontroller make process makeprocess process controller processcontroller controller string classpath string main class mainclass string args file java lang util langutil get java executable getjavaexecutable array list arraylist cmd array list arraylist cmd add java get absolute path getabsolutepath cmd add classpath cmd add classpath cmd add main class mainclass lang util langutil is empty isempty args cmd add all addall arrays as list aslist args string command string cmd to array toarray string controller controller process controller processcontroller controller init command main class mainclass controller create process asynchronously param controller initialize param command string command param controller process control processcontrol streams needed process controller processcontroller make process makeprocess process controller processcontroller controller string command string label controller controller process controller processcontroller controller init command label controller find java executable file path java system property file java command file get java executable getjavaexecutable string java home javahome file result java ext dirs java home javahome system get property getproperty java throwable java home javahome file bin dir bindir file java home javahome bin bin dir bindir is directory isdirectory bin dir bindir can read canread string execs string java java exe execs length result file bin dir bindir execs result can read canread result sleep period milliseconds param time time milliseconds sleep delay succeeded interrupted times sleep milliseconds milliseconds milliseconds illegal argument exception illegalargumentexception negative milliseconds sleep until sleepuntil milliseconds system current time millis currenttimemillis sleep time param time time milliseconds sleep delay succeeded interrupted times sleep until sleepuntil time time time illegal argument exception illegalargumentexception negative time thread thread thread current thread currentthread cur time curtime system current time millis currenttimemillis cur time curtime time thread sleep time cur time curtime interrupted exception interruptedexception cur time curtime system current time millis currenttimemillis cur time curtime time handle external process asynchrously code start code launches main thread wait process pipes streams child threads streams process system err system err complete exception demand client clients implement code do completing docompleting code notice process completes sample code creates process completion callback starts time retries process pre lang util langutil process controller processcontroller controller lang util langutil process controller processcontroller do completing docompleting lang util langutil process controller processcontroller thrown thrown result signal result controller init string java version java version controller start time retry controller completed controller controller reinit controller start pre warning close input output streams prevents process controller processcontroller xxx verified thread safe problems user stops completed exception thrown destroying process expects completed string command string envp string label init started completed stopped user completed user stopped userstopped process process file util fileutil pipe err stream errstream file util fileutil pipe out stream outstream file util fileutil pipe in stream instream byte array output stream bytearrayoutputstream err snoop errsnoop byte array output stream bytearrayoutputstream out snoop outsnoop result thrown thrown process controller processcontroller permit running command started completed call release references stack traces reinit init illegal state exception illegalstateexception init reinit started completed illegal state exception illegalstateexception completed init command label started completed result integer min thrown process err stream errstream out stream outstream in stream instream init string classpath string main class mainclass string args init lang util langutil get java executable getjavaexecutable classpath main class mainclass args init file java string classpath string main class mainclass string args lang util langutil throw iax if null throwiaxifnull java java lang util langutil throw iax if null throwiaxifnull main class mainclass main class mainclass lang util langutil throw iax if null throwiaxifnull args args array list arraylist cmd array list arraylist cmd add java get absolute path getabsolutepath cmd add classpath cmd add classpath cmd add main class mainclass lang util langutil is empty isempty args cmd add all addall arrays as list aslist args init string cmd to array toarray string main class mainclass init string command string label command string lang util langutil safe copy safecopy command string command length illegal argument exception illegalargumentexception empty command label lang util langutil is empty isempty label command label init reinit set envp setenvp string envp envp string lang util langutil safe copy safecopy envp string envp length illegal argument exception illegalargumentexception empty envp set err snoop seterrsnoop byte array output stream bytearrayoutputstream snoop err snoop errsnoop snoop err stream errstream err stream errstream set snoop setsnoop err snoop errsnoop set out snoop setoutsnoop byte array output stream bytearrayoutputstream snoop out snoop outsnoop snoop out stream outstream out stream outstream set snoop setsnoop out snoop outsnoop start running process pipes asynchronously thread started unable start thread code get thrown getthrown code thread start init illegal state exception illegalstateexception initialized started illegal state exception illegalstateexception started started process runtime get runtime getruntime exec command ioexception integer min err stream errstream file util fileutil pipe process get error stream geterrorstream system err err snoop errsnoop err stream errstream set snoop setsnoop err snoop errsnoop out stream outstream file util fileutil pipe process get input stream getinputstream system out snoop outsnoop out stream outstream set snoop setsnoop out snoop outsnoop in stream instream file util fileutil pipe system process get output stream getoutputstream start threads process pipes err runnable process runner processrunner runnable throwable thrown result integer min pipe threads children thread err stream errstream start thread out stream outstream start thread in stream instream start process wait for waitfor result process exit value exitvalue throwable thrown thrown result thread result thread process runner processrunner label result start result destroy process pipes waits pipes clear reading input wait input stream pipe close waiting file input stream completed user stopped userstopped integer min string get command getcommand string to copy tocopy command lang util langutil is empty isempty to copy tocopy string string result string to copy tocopy length system arraycopy to copy tocopy result result length result completed completed started started user stopped userstopped user stopped userstopped throwable thrown note process complete valid time pipes exceptions exceptions process complete complete thrown exceptions thrown process streams thrown get thrown getthrown cache make thrown makethrown get result getresult result subclasses implement synchronous notice completion pipes processes complete time exceptions thrown pipes code get thrown getthrown code exception process completed abruptly including side effects user halting process code user stopped userstopped code client asked process destroyed code code result code result returned process param thrown code get thrown getthrown from process fromprocess code param result code get result getresult code get thrown getthrown get result getresult do completing docompleting thrown thrown result handle termination demand abrupt normal destroying halting process pipes param thrown param result integer min throwable thrown result completed illegal state exception illegalstateexception completed thrown illegal state exception illegalstateexception thrown thrown thrown thrown make thrown makethrown thrown process process destroy in stream instream block waiting in stream instream halt in stream instream out stream outstream out stream outstream halt out stream outstream err stream errstream err stream errstream halt err stream errstream integer min result result result completed do completing docompleting thrown result create snapshot throwable thrown param thrown thrown thrown make thrown makethrown throwable process thrown processthrown thrown thrown thrown process thrown processthrown out stream outstream out stream outstream get thrown getthrown err stream errstream err stream errstream get thrown getthrown in stream instream in stream instream get thrown getthrown thrown throwable from process fromprocess throwable from err pipe fromerrpipe throwable from out pipe fromoutpipe throwable from in pipe frominpipe throwable thrown thrown throwable from process fromprocess throwable from out pipe fromoutpipe throwable from err pipe fromerrpipe throwable from in pipe frominpipe from process fromprocess from process fromprocess from err pipe fromerrpipe from err pipe fromerrpipe from out pipe fromoutpipe from out pipe fromoutpipe from in pipe frominpipe from in pipe frominpipe thrown from process fromprocess from in pipe frominpipe from out pipe fromoutpipe from err pipe fromerrpipe string to string tostring string buffer stringbuffer string buffer stringbuffer append from process fromprocess process append from out pipe fromoutpipe stdout append from err pipe fromerrpipe stderr append from in pipe frominpipe stdin length thrown to string tostring append string buffer stringbuffer throwable thrown string label thrown append label append lang util langutil render exception short renderexceptionshort thrown append lang util langutil eol thrown