copyright xerox corporation palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation mik kersten port aspect j aspectj code base org aspectj tools ajdoc java java util java file filter filefilter org aspectj bridge version org aspectj util file util fileutil implementation ajdoc style job serve evolve lightweight ajdoc implementation properly extended javadoc implementation author mik kersten main config string fail message compile failed exiting ajdoc command options vector options options pass ajc vector ajc options ajcoptions files processed ajdoc vector filenames list files pass javadoc vector file list filelist list packages pass javadoc vector package list packagelist visiblity string doc modifier docmodifier vector sourcepath verbose mode verbosemode package mode packagemode author standard doclet switch authorstandarddocletswitch version standard doclet switch versionstandarddocletswitch file root dir rootdir hashtable decl idtable declidtable hashtable string doc dir docdir delete temp files on exit deletetempfilesonexit aborted creating local variable enable create ajdocworkingdir local sandbox testing string output working dir outputworkingdir config working dir clear state clearstate options vector ajc options ajcoptions vector filenames vector file list filelist vector package list packagelist vector doc modifier docmodifier sourcepath vector verbose mode verbosemode package mode packagemode root dir rootdir decl idtable declidtable hashtable doc dir docdir aborted delete temp files on exit deletetempfilesonexit main string args clear state clearstate javadoc runner javadocrunner tools available toolsavailable system err println ajdoc requires jdk tools jar exiting aborted step parse command global setup add current directory classapth sourcepath add element addelement parse command line parsecommandline args root dir rootdir get root dir getrootdir file input files inputfiles file filenames size file signature files signaturefiles file filenames size create workingdir doesn exist file output working dir outputworkingdir is directory isdirectory file dir file output working dir outputworkingdir dir mkdir delete temp files on exit deletetempfilesonexit dir delete on exit deleteonexit filenames size input files inputfiles file string filenames element at elementat signature files signaturefiles create signature file createsignaturefile input files inputfiles phase call ajc ajc options ajcoptions add element addelement no exit noexit todo wrong option force model gen ajc options ajcoptions add element addelement xjavadocs in model xjavadocsinmodel ajc options ajcoptions add element addelement ajc options ajcoptions add element addelement root dir rootdir get absolute path getabsolutepath string args to compiler argstocompiler string ajc options ajcoptions size input files inputfiles length ajc options ajcoptions size args to compiler argstocompiler string ajc options ajcoptions element at elementat input files inputfiles length args to compiler argstocompiler input files inputfiles get absolute path getabsolutepath system println file ajc input files inputfiles get absolute path getabsolutepath system println arrays as list aslist args to compiler argstocompiler system println calling ajc compiler wrapper compilerwrapper main args to compiler argstocompiler compiler wrapper compilerwrapper has errors haserrors system println fail message aborted input files inputfiles length string temp fp tempfp input files inputfiles get absolute path getabsolutepath temp fp tempfp temp fp tempfp substring temp fp tempfp length temp fp tempfp ajsym system println checking temp fp tempfp file temp f tempf file temp fp tempfp temp f tempf exists system println doesn exist filenames size signature files signaturefiles create signature file createsignaturefile input files inputfiles phase generate signature files java decl ids declids bodies system println building signature files stub file generator stubfilegenerator do files dofiles decl idtable declidtable input files inputfiles signature files signaturefiles doc exception docexception system err println get message getmessage phase javadoc generate html decl ids declids system println calling javadoc string javadocargs package mode packagemode num extra args numextraargs author standard doclet switch authorstandarddocletswitch num extra args numextraargs version standard doclet switch versionstandarddocletswitch num extra args numextraargs javadocargs string num extra args numextraargs options size package list packagelist size file list filelist size javadocargs sourcepath javadocargs output working dir outputworkingdir arg index argindex author standard doclet switch authorstandarddocletswitch javadocargs arg index argindex author arg index argindex version standard doclet switch versionstandarddocletswitch javadocargs arg index argindex version javadocargs get sourcepath as string getsourcepathasstring options size javadocargs num extra args numextraargs string options element at elementat package list packagelist size javadocargs num extra args numextraargs options size string package list packagelist element at elementat file list filelist size javadocargs num extra args numextraargs options size package list packagelist size string file list filelist element at elementat javadocargs string options size signature files signaturefiles length options size javadocargs string options element at elementat signature files signaturefiles length javadocargs options size structure util structureutil translate aj path name translateajpathname signature files signaturefiles get canonical path getcanonicalpath javadoc runner javadocrunner call javadoc calljavadoc javadocargs input files inputfiles length system println file input files inputfiles phase add aspect doc aspectdoc specific stuff html remove decl ids declids start html files correspond input files learn javadoc split java file multiple html files handle classes local classes html file decorator picks system println decorating html files html decorator htmldecorator decorate htmlfrom input files decoratehtmlfrominputfiles decl idtable declidtable root dir rootdir input files inputfiles doc modifier docmodifier system println removing generated tags remove decl ids from file removedeclidsfromfile html remove decl ids from file removedeclidsfromfile serialized form html package list packagelist size package list packagelist size remove decl ids from file removedeclidsfromfile string package list packagelist element at elementat replace config dir sep summary html file files root dir rootdir list files listfiles files system err println destination directory directory root dir rootdir to string tostring files file util fileutil list files listfiles root dir rootdir file filter filefilter accept file get name getname equals summary html files length remove decl ids from file removedeclidsfromfile files get absolute path getabsolutepath system println finished throwable handle internal error handleinternalerror exit remove decl ids from file removedeclidsfromfile string filename relative path relativepath remove decl ids html file index file indexfile relative path relativepath index file indexfile file doc dir docdir config dir sep filename index file indexfile file filename index file indexfile exists buffered reader bufferedreader index file reader indexfilereader buffered reader bufferedreader file reader filereader index file indexfile string index file buffer indexfilebuffer string index file reader indexfilereader read line readline index start indexstart index of indexof config decl string index end indexend index of indexof config decl terminator index start indexstart index end indexend substring index start indexstart substring index end indexend config decl terminator length index file buffer indexfilebuffer index file reader indexfilereader read line readline file output stream fileoutputstream fos file output stream fileoutputstream index file indexfile fos write index file buffer indexfilebuffer get bytes getbytes index file reader indexfilereader close fos close ioexception ioe vector get source path getsourcepath vector source path sourcepath vector options size string curr option curroption string options element at elementat curr option curroption starts with startswith source path sourcepath add curr option curroption curr option curroption equals sourcepath source path sourcepath file get root dir getrootdir file root dir rootdir file options size string options element at elementat equals root dir rootdir file string options element at elementat root dir rootdir exists root dir rootdir mkdir system println destination directory string options element at elementat system exit root dir rootdir file create signature file createsignaturefile file input file inputfile ioexception string package name packagename structure util structureutil get package declaration from file getpackagedeclarationfromfile input file inputfile string filename package name packagename string path name pathname output working dir outputworkingdir package name packagename replace file package dir packagedir file path name pathname package dir packagedir exists package dir packagedir mkdirs delete temp files on exit deletetempfilesonexit package dir packagedir delete on exit deleteonexit verify package dir exists verifypackagedirexists package name packagename package name packagename package name packagename replace filename output working dir outputworkingdir config dir sep package name packagename config dir sep input file inputfile get name getname filename output working dir outputworkingdir config dir sep input file inputfile get name getname file signature file signaturefile file filename delete temp files on exit deletetempfilesonexit signature file signaturefile delete on exit deleteonexit signature file signaturefile verify package dir exists verifypackagedirexists string package name packagename string offset system err println package name packagename offset offset package name packagename index of indexof file temp file tempfile file aspectj test temp file tempfile mkdirs string curr pkg dir currpkgdir package name packagename substring package name packagename index of indexof string remaining pkg remainingpkg package name packagename substring package name packagename index of indexof string file path filepath offset file path filepath config working dir config dir sep offset config dir sep curr pkg dir currpkgdir file path filepath config working dir config dir sep curr pkg dir currpkgdir file package dir packagedir file file path filepath package dir packagedir exists package dir packagedir mkdir delete temp files on exit deletetempfilesonexit package dir packagedir delete on exit deleteonexit remaining pkg remainingpkg verify package dir exists verifypackagedirexists remaining pkg remainingpkg curr pkg dir currpkgdir string file path filepath offset file path filepath config working dir config dir sep offset config dir sep package name packagename file path filepath config working dir config dir sep package name packagename file package dir packagedir file file path filepath package dir packagedir exists package dir packagedir mkdir delete temp files on exit deletetempfilesonexit package dir packagedir delete on exit deleteonexit read eclipse generated single arg parse command line parsecommandline string args args length display help and exit displayhelpandexit args length args starts with startswith string arg file argfile args substring system println arg file arg file argfile buffered reader bufferedreader buffered reader bufferedreader file reader filereader arg file argfile string read line readline string tokenizer stringtokenizer string tokenizer stringtokenizer list arg list arglist array list arraylist has more elements hasmoreelements arg list arglist add string next element nextelement system err println arg list arglist args string arg list arglist size counter iterator arg list arglist iterator has next hasnext args counter string counter file not found exception filenotfoundexception system err println read arg file arg file argfile print stack trace printstacktrace ioexception ioe system err println read arg file arg file argfile ioe print stack trace printstacktrace list vargs linked list linkedlist arrays as list aslist args parse args parseargs vargs file filenames size display help and exit displayhelpandexit ajdoc packages classes set sourcepath setsourcepath string arg sourcepath clear easier arg arg file path separator pathseparator string tokenizer stringtokenizer tokenizer string tokenizer stringtokenizer arg file path separator pathseparator tokenizer has more elements hasmoreelements sourcepath add element addelement tokenizer next element nextelement string get sourcepath as string getsourcepathasstring string c path cpath sourcepath size c path cpath string sourcepath element at elementat config dir sep output working dir outputworkingdir sourcepath size c path cpath file path separator pathseparator c path cpath parse args parseargs list vargs file current working dir currentworkingdir add next as option addnextasoption add next as arg file addnextasargfile add next to ajcoptions addnexttoajcoptions add next as doc dir addnextasdocdir add next as classpath addnextasclasspath discrepancy betwen sourcepath ajc javadoc ignore arg ignorearg add next as source path addnextassourcepath vargs size display help and exit displayhelpandexit vargs size string arg string vargs ignore arg ignorearg add next to ajcoptions addnexttoajcoptions ajc options ajcoptions add element addelement arg add next to ajcoptions addnexttoajcoptions add next as doc dir addnextasdocdir doc dir docdir arg add next as doc dir addnextasdocdir add next as classpath addnextasclasspath add next as classpath addnextasclasspath add next as source path addnextassourcepath set sourcepath setsourcepath arg add next as source path addnextassourcepath ignore arg ignorearg arg starts with startswith expand at sign file expandatsignfile arg substring current working dir currentworkingdir arg equals argfile add next as arg file addnextasargfile add next as arg file addnextasargfile expand at sign file expandatsignfile arg current working dir currentworkingdir add next as arg file addnextasargfile arg equals add next as option addnextasoption options add element addelement arg add next as doc dir addnextasdocdir arg equals bootclasspath add next as option addnextasoption add next to ajcoptions addnexttoajcoptions options add element addelement arg ajc options ajcoptions add element addelement arg arg equals source add next as option addnextasoption add next to ajcoptions addnexttoajcoptions add next as classpath addnextasclasspath options add element addelement arg ajc options ajcoptions add element addelement arg arg equals classpath add next as option addnextasoption add next to ajcoptions addnexttoajcoptions add next as classpath addnextasclasspath options add element addelement arg ajc options ajcoptions add element addelement arg arg equals encoding add next as option addnextasoption add next to ajcoptions addnexttoajcoptions options add element addelement arg arg equals docencoding add next as option addnextasoption add next to ajcoptions addnexttoajcoptions options add element addelement arg arg equals charset add next as option addnextasoption add next to ajcoptions addnexttoajcoptions options add element addelement arg arg equals sourcepath add next as source path addnextassourcepath options add element addelement arg ajc options ajcoptions add element addelement arg arg equals xajdoc debug xajdocdebug delete temp files on exit deletetempfilesonexit arg equals system println ignoring unsupported option arg equals splitindex passed javadoc arg starts with startswith add next as option addnextasoption arg equals doc modifier docmodifier arg equals doc modifier docmodifier arg equals doc modifier docmodifier arg equals doc modifier docmodifier arg equals verbose verbose mode verbosemode arg equals author author standard doclet switch authorstandarddocletswitch arg equals version version standard doclet switch versionstandarddocletswitch arg equals system println get version getversion exit arg equals display help and exit displayhelpandexit arg equals doclet arg equals docletpath system println doclet docletpath options supported ajdoc assumptions behavior standard doclet find option email aspectj dev eclipse org exit arg equals nonavbar arg equals noindex pass system err println ignoring unsupported option arg add next as option addnextasoption pass system err println unrecognized argument arg display help and exit displayhelpandexit options add element addelement arg add next as option addnextasoption string entry name entryname arg substring arg last index of lastindexof file separator file util fileutil has source suffix hassourcesuffix arg arg ends with endswith lst arg file file arg is absolute isabsolute filenames add element addelement arg filenames add element addelement current working dir currentworkingdir config dir sep arg file list filelist add element addelement arg mode stuff ignore arg ignorearg package mode packagemode package list packagelist add element addelement arg arg arg replace item classpath sourcepath size string path string sourcepath element at elementat config dir sep arg file pkg file path pkg is directory isdirectory string files pkg list filename filter filenamefilter accept file dir string last index of lastindexof length substring equals java substring equals files length filenames add element addelement string sourcepath element at elementat config dir sep arg config dir sep files sourcepath size element classpath system println ajdoc source file named arg didn find element classpath visibility option javadoc option options options options options options add element addelement expand at sign file expandatsignfile string filename file current working dir currentworkingdir list result linked list linkedlist file at file atfile qualified file qualifiedfile filename current working dir currentworkingdir string at file parent atfileparent at file atfile get parent getparent file my working dir myworkingdir at file parent atfileparent my working dir myworkingdir file at file parent atfileparent buffered reader bufferedreader stream buffered reader bufferedreader file reader filereader at file atfile string stream read line readline strip comments form comment start commentstart index of indexof comment start commentstart substring comment start commentstart remove extra whitespace crept trim ignore blank lines length result add ioexception system err println error reading file at file atfile get path getpath system exit parse args parseargs result my working dir myworkingdir file qualified file qualifiedfile string file current working dir currentworkingdir replace file separator char separatorchar file file file file is absolute isabsolute current working dir currentworkingdir file file current working dir currentworkingdir file display help and exit displayhelpandexit string message message system err println message system err println system err println config usage system println config usage exit exit system flush system err flush system exit code handles errors occur compilation string internal error message internalerrormessage logged bug raised raise aspect j aspectj bug https bugs eclipse org bugs including text bug priority include test program reproduce problem handle internal error handleinternalerror throwable uncaught throwable uncaughtthrowable system err println internal error occured ajdoc system err println internal error message internalerrormessage system err println uncaught throwable uncaughtthrowable to string tostring uncaught throwable uncaughtthrowable print stack trace printstacktrace system err println string get version getversion ajdoc version version text has aborted hasaborted aborted sets output working dir fully qualified output dir fullyqualifiedoutputdir ajdocworkingdir testing redirect ajdocworkingdir sandbox set output working dir setoutputworkingdir string fully qulified output dir fullyqulifiedoutputdir fully qulified output dir fullyqulifiedoutputdir reset output working dir resetoutputworkingdir output working dir outputworkingdir fully qulified output dir fullyqulifiedoutputdir file separator char separatorchar config working dir resets output working dir current directory ajdocworkingdir reset output working dir resetoutputworkingdir output working dir outputworkingdir config working dir