copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors parc initial implementation alexandre vasseur per clause perclause support aspects org aspectj weaver bcel java byte array input stream bytearrayinputstream java file java ioexception java lang reflect modifier java util array list arraylist java util iterator java util list java util properties java util string tokenizer stringtokenizer org aspectj apache bcel classfile attribute org aspectj apache bcel classfile class parser classparser org aspectj apache bcel classfile java class javaclass org aspectj apache bcel classfile method org aspectj apache bcel classfile annotation annotation org aspectj apache bcel anewarray org aspectj apache bcel constant pool gen constantpoolgen org aspectj apache bcel field instruction fieldinstruction org aspectj apache bcel getstatic org aspectj apache bcel invokeinterface org aspectj apache bcel invokespecial org aspectj apache bcel invokestatic org aspectj apache bcel instruction org aspectj apache bcel instruction handle instructionhandle org aspectj apache bcel invoke instruction invokeinstruction org aspectj apache bcel multianewarray org aspectj apache bcel newarray org aspectj apache bcel object type objecttype org aspectj apache bcel putstatic org aspectj apache bcel type org aspectj apache bcel util class loader repository classloaderrepository org aspectj apache bcel util class path classpath org aspectj apache bcel util repository org aspectj bridge imessage handler imessagehandler org aspectj weaver advice org aspectj weaver advice kind advicekind org aspectj weaver aj attribute ajattribute org aspectj weaver bcexception org aspectj weaver concrete type munger concretetypemunger org aspectj weaver icross reference handler icrossreferencehandler org aspectj weaver member org aspectj weaver member impl memberimpl org aspectj weaver reference type referencetype org aspectj weaver reference type delegate referencetypedelegate org aspectj weaver resolved member resolvedmember org aspectj weaver resolved member impl resolvedmemberimpl org aspectj weaver resolved type resolvedtype org aspectj weaver resolved type munger resolvedtypemunger org aspectj weaver unresolved type unresolvedtype org aspectj weaver org aspectj weaver aj attribute ajattribute aspect org aspectj weaver asm asm delegate asmdelegate org aspectj weaver patterns formal binding formalbinding org aspectj weaver patterns per clause perclause org aspectj weaver patterns pointcut org aspectj weaver patterns simple scope simplescope bcel world bcelworld repository class path manager classpathmanager class path classpath repository delegate bcel world bcelworld bcel world bcelworld string make default classpath makedefaultclasspath imessage handler imessagehandler list make default classpath makedefaultclasspath string list class path classpath array list arraylist class path classpath add all addall get path entries getpathentries class path classpath add all addall get path entries getpathentries class path classpath get class path getclasspath system err println classpath class path classpath class path classpath list get path entries getpathentries string list ret array list arraylist string tokenizer stringtokenizer tok string tokenizer stringtokenizer file path separator pathseparator tok has more tokens hasmoretokens ret add tok next token nexttoken ret bcel world bcelworld list class path classpath imessage handler imessagehandler handler icross reference handler icrossreferencehandler xref handler xrefhandler aspect path aspectpath class path manager classpathmanager aspect path aspectpath handler class path classpath class path manager classpathmanager class path classpath handler set message handler setmessagehandler handler set cross reference handler setcrossreferencehandler xref handler xrefhandler bcel resolving classes delegate todo alex call org aspectj apache bcel repository set repository setrepository delegate safe stuff bcel bcel world bcelworld class path manager classpathmanager cpm imessage handler imessagehandler handler icross reference handler icrossreferencehandler xref handler xrefhandler class path classpath cpm set message handler setmessagehandler handler set cross reference handler setcrossreferencehandler xref handler xrefhandler bcel resolving classes delegate todo alex call org aspectj apache bcel repository set repository setrepository delegate safe stuff bcel build class loader classloader ltw support param loader param handler param xref handler xrefhandler bcel world bcelworld class loader classloader loader imessage handler imessagehandler handler icross reference handler icrossreferencehandler xref handler xrefhandler class path classpath set message handler setmessagehandler handler set cross reference handler setcrossreferencehandler xref handler xrefhandler bcel resolving classes delegate class loader repository classloaderrepository loader todo alex call org aspectj apache bcel repository set repository setrepository delegate safe stuff bcel add path addpath string class path classpath add path addpath get message handler getmessagehandler parse string advice blockquote pre kind pointcut method signature methodsignature pre blockquote advice shadow munger shadowmunger string str extra flag extraflag str str trim start str index of indexof advice kind advicekind kind advice kind advicekind string to kind stringtokind str substring start start str index of indexof string ids parse ids parseids str substring start trim start str index of indexof start str index of indexof pointcut pointcut pointcut from string fromstring str substring start trim member member impl memberimpl method from string methodfromstring str substring str length trim resolve unresolved type unresolvedtype types get parameter types getparametertypes formal binding formalbinding bindings formal binding formalbinding ids length len ids length len bindings formal binding formalbinding types ids from string fromstring pointcut pointcut resolve simple scope simplescope bindings bcel advice bceladvice kind extra flag extraflag string parse ids parseids string str str length strings list array list arraylist start str index of indexof start add str substring start trim add str substring start trim start string to array toarray string size interactions bcel type make bcel type makebceltype unresolved type unresolvedtype type type get type gettype type get erasure signature geterasuresignature type make bcel types makebceltypes unresolved type unresolvedtype types type ret type types length len types length len ret make bcel type makebceltype types ret string make bcel types as class names makebceltypesasclassnames unresolved type unresolvedtype types string ret string types length len types length len make bcel type makebceltype types ret types get class name getclassname ret unresolved type unresolvedtype from bcel frombcel type unresolved type unresolvedtype for signature forsignature get signature getsignature unresolved type unresolvedtype from bcel frombcel type unresolved type unresolvedtype ret unresolved type unresolvedtype length len length len ret from bcel frombcel ret resolved type resolvedtype resolve type resolve from bcel frombcel dontknow package restrictions for fast delegates packagerestrictionsforfastdelegates list package prefix restriction list packageprefixrestrictionlist is not on package restricted list isnotonpackagerestrictedlist string package restrictions for fast delegates packagerestrictionsforfastdelegates properties get extra configuration getextraconfiguration string possible package restrictions possiblepackagerestrictions get property getproperty fast delegate restrictions fastdelegaterestrictions possible package restrictions possiblepackagerestrictions package restrictions for fast delegates packagerestrictionsforfastdelegates package restrictions for fast delegates packagerestrictionsforfastdelegates package prefix restriction list packageprefixrestrictionlist array list arraylist string tokenizer stringtokenizer string tokenizer stringtokenizer possible package restrictions possiblepackagerestrictions has more tokens hasmoretokens package prefix restriction list packageprefixrestrictionlist add next token nexttoken package restrictions for fast delegates packagerestrictionsforfastdelegates package restrictions for fast delegates packagerestrictionsforfastdelegates iterator iter package prefix restriction list packageprefixrestrictionlist iterator iter has next hasnext string element string iter starts with startswith element system err println creating fast delegate reference type delegate referencetypedelegate resolve delegate resolvedelegate reference type referencetype string get name getname java class javaclass ensure advanced configuration processed ensureadvancedconfigurationprocessed class file classfile class file classfile get java class getjavaclass is fast delegate support enabled isfastdelegatesupportenabled class path classpath needs modifiable delegate needsmodifiabledelegate is not on package restricted list isnotonpackagerestrictedlist class path manager classpathmanager class file classfile class path classpath find build asm delegate buildasmdelegate lookup java class lookupjavaclass class path classpath build bcel delegate buildbceldelegate reference type delegate referencetypedelegate build asm delegate buildasmdelegate reference type referencetype type class path manager classpathmanager class file classfile asm delegate asmdelegate asm delegate asmdelegate asm delegate asmdelegate asm delegate asmdelegate type get input stream getinputstream ioexception print stack trace printstacktrace asm delegate asmdelegate bcel object type bcelobjecttype build bcel delegate buildbceldelegate reference type referencetype resolved type x resolvedtypex java class javaclass exposed to weaver exposedtoweaver bcel object type bcelobjecttype ret bcel object type bcelobjecttype resolved type x resolvedtypex exposed to weaver exposedtoweaver ret java class javaclass lookup java class lookupjavaclass class path manager classpathmanager class path classpath string class path classpath delegate load class loadclass class not found exception classnotfoundexception class path manager classpathmanager class file classfile file class path classpath find unresolved type unresolvedtype for name forname file class parser classparser parser class parser classparser file get input stream getinputstream file get path getpath java class javaclass parser parse file close ioexception ioe bcel object type bcelobjecttype add source object type addsourceobjecttype java class javaclass bcel object type bcelobjecttype ret string signature unresolved type unresolvedtype for name forname get class name getclassname get signature getsignature object from the map fromthemap type map typemap signature from the map fromthemap from the map fromthemap reference type referencetype earth string buffer stringbuffer exception text exceptiontext string buffer stringbuffer exception text exceptiontext append invalid reference type referencetype entry type map exception text exceptiontext append signature signature from the map fromthemap from the map fromthemap get class getclass bcexception exception text exceptiontext to string tostring reference type referencetype name type x nametypex reference type referencetype from the map fromthemap name type x nametypex is generic isgeneric is in java isinjava mode name type x nametypex reference type referencetype from type x fromtypex unresolved type unresolvedtype for raw type name forrawtypename get class name getclassname ret build bcel delegate buildbceldelegate name type x nametypex reference type referencetype generic ref type genericreftype reference type referencetype unresolved type unresolvedtype for generic type signature forgenerictypesignature signature ret get declared generic signature getdeclaredgenericsignature name type x nametypex set delegate setdelegate ret generic ref type genericreftype set delegate setdelegate ret name type x nametypex set generic type setgenerictype generic ref type genericreftype type map typemap signature name type x nametypex name type x nametypex reference type referencetype signature ret build bcel delegate buildbceldelegate name type x nametypex type map typemap signature name type x nametypex ret build bcel delegate buildbceldelegate name type x nametypex ret delete source object type deletesourceobjecttype unresolved type unresolvedtype type map typemap remove get signature getsignature member make field join point signature makefieldjoinpointsignature lazy class gen lazyclassgen field instruction fieldinstruction constant pool gen constantpoolgen cpg get constant pool gen getconstantpoolgen member impl memberimpl field get class name getclassname cpg getstatic putstatic modifier get name getname cpg get signature getsignature cpg member make field set signature makefieldsetsignature lazy class gen lazyclassgen field instruction fieldinstruction constant pool gen constantpoolgen cpg get constant pool gen getconstantpoolgen member impl memberimpl field get class name getclassname cpg getstatic putstatic modifier get name getname cpg get signature getsignature cpg get signature getsignature cpg member make join point signature makejoinpointsignature lazy method gen lazymethodgen make join point signature from method makejoinpointsignaturefrommethod member make join point signature from method makejoinpointsignaturefrommethod lazy method gen lazymethodgen member impl memberimpl kind kind member ret get member view getmemberview ret mods get access flags getaccessflags get enclosing class getenclosingclass is interface isinterface mods modifier kind get name getname equals init kind member constructor get name getname equals clinit kind member initialization kind member method resolved member impl resolvedmemberimpl kind unresolved type unresolvedtype for name forname get class name getclassname mods from bcel frombcel get return type getreturntype get name getname from bcel frombcel get argument types getargumenttypes ret member make join point signature for array construction makejoinpointsignatureforarrayconstruction lazy class gen lazyclassgen instruction handle instructionhandle handle instruction handle get instruction getinstruction constant pool gen constantpoolgen cpg get constant pool gen getconstantpoolgen member retval anewarray anewarray array instruction arrayinstruction anewarray object type objecttype array instruction arrayinstruction get load class type getloadclasstype cpg unresolved type unresolvedtype from bcel frombcel unresolved type unresolvedtype make array makearray retval member impl memberimpl method modifier resolved type resolvedtype init resolved type resolvedtype resolved type resolvedtype multianewarray multianewarray array instruction arrayinstruction multianewarray unresolved type unresolvedtype dimensions array instruction arrayinstruction get dimensions getdimensions object type objecttype array instruction arrayinstruction get load class type getloadclasstype cpg from bcel frombcel unresolved type unresolvedtype make array makearray dimensions type array instruction arrayinstruction get type gettype cpg from bcel frombcel resolved type resolvedtype parms resolved type resolvedtype dimensions dimensions parms resolved type resolvedtype retval member impl memberimpl method modifier resolved type resolvedtype init parms newarray newarray array instruction arrayinstruction newarray type array instruction arrayinstruction get type gettype unresolved type unresolvedtype from bcel frombcel retval member impl memberimpl method modifier resolved type resolvedtype init resolved type resolvedtype resolved type resolvedtype bcexception create array construction signature array instruction retval member make join point signature for method invocation makejoinpointsignatureformethodinvocation lazy class gen lazyclassgen invoke instruction invokeinstruction constant pool gen constantpoolgen cpg get constant pool gen getconstantpoolgen string get name getname cpg string declaring get class name getclassname cpg unresolved type unresolvedtype declaring type declaringtype string signature get signature getsignature cpg modifier invokeinterface modifier invokestatic modifier invokespecial equals init modifier invokestatic resolved type resolvedtype appears declared by appearsdeclaredby resolve declaring method iterator iterator appears declared by appearsdeclaredby get methods getmethods iterator has next hasnext resolved member resolvedmember method resolved member resolvedmember iterator method is static isstatic equals method get name getname signature equals method get signature getsignature declaring type declaringtype method get declaring type getdeclaringtype declaring type declaringtype declaring char at charat declaring type declaringtype unresolved type unresolvedtype for signature forsignature declaring declaring type declaringtype unresolved type unresolvedtype for name forname declaring member impl memberimpl method declaring type declaringtype modifier signature member make munger method signature makemungermethodsignature java class javaclass java class javaclass method method mods method is static isstatic mods modifier java class javaclass is interface isinterface mods modifier method is private isprivate mods modifier member impl memberimpl method unresolved type unresolvedtype for name forname java class javaclass get class name getclassname mods method get name getname method get signature getsignature string strings string string to string tostring string buffer stringbuffer buf string buffer stringbuffer buf append bcel world bcelworld buf append shadow munger map shadowmungermap buf append buf to string tostring advice create advice munger createadvicemunger aj attribute ajattribute advice attribute adviceattribute attribute pointcut pointcut member signature system err println concrete advice signature context source context sourcecontext bcel advice bceladvice attribute pointcut signature concrete type munger concretetypemunger concrete type munger concretetypemunger resolved type munger resolvedtypemunger munger resolved type resolvedtype aspect type aspecttype bcel type munger bceltypemunger munger aspect type aspecttype concrete type munger concretetypemunger make cflow stack field adder makecflowstackfieldadder resolved member resolvedmember cflow field cflowfield bcel cflow stack field adder bcelcflowstackfieldadder cflow field cflowfield concrete type munger concretetypemunger make cflow counter field adder makecflowcounterfieldadder resolved member resolvedmember cflow field cflowfield bcel cflow counter field adder bcelcflowcounterfieldadder cflow field cflowfield register munger perclause aspect add aspect of aspectof needed param aspect param kind munger concrete type munger concretetypemunger make per clause aspect makeperclauseaspect resolved type resolvedtype aspect per clause perclause kind kind bcel per clause aspect adder bcelperclauseaspectadder aspect kind retrieve bcel delegate aspect delegate eclipse source type eclipsesourcetype bcel object type bcelobjecttype incrementally compiling bcel object type bcelobjecttype get bcel object type getbcelobjecttype resolved type resolvedtype concrete aspect concreteaspect reference type delegate referencetypedelegate rt delegate rtdelegate reference type referencetype concrete aspect concreteaspect get delegate getdelegate rt delegate rtdelegate bcel object type bcelobjecttype bcel object type bcelobjecttype rt delegate rtdelegate tidy up tidyup compile close open files deletion archives class path classpath close archives closearchives type map typemap report resolved type resolvedtype reset primitives resetprimitives repository methods java class javaclass find class findclass string class name classname lookup java class lookupjavaclass class path classpath class name classname java class javaclass load class loadclass string class name classname class not found exception classnotfoundexception lookup java class lookupjavaclass class path classpath class name classname store class storeclass java class javaclass clazz runtime exception runtimeexception implemented remove class removeclass java class javaclass clazz runtime exception runtimeexception implemented java class javaclass load class loadclass clazz class not found exception classnotfoundexception runtime exception runtimeexception implemented clear runtime exception runtimeexception implemented override aim method type operations delegate type modify method intended undo validate type validatetype unresolved type unresolvedtype type resolved type resolvedtype result type map typemap type get signature getsignature haven heard result resetting result is exposed to weaver isexposedtoweaver reference type referencetype reference type referencetype result get delegate getdelegate ensure delegate consistent ensuredelegateconsistent rebuild scratch class parser classparser class parser classparser byte array input stream bytearrayinputstream newbytes string set delegate setdelegate make bcel object type makebcelobjecttype parse class format exception classformatexception print stack trace printstacktrace ioexception print stack trace printstacktrace checks bytecode aspect j aspectj aspect param param bytes is annotation style aspect isannotationstyleaspect string bytes class parser classparser class parser classparser byte array input stream bytearrayinputstream bytes java class javaclass parse is class isclass annotation anns get annotations getannotations anns length could be at aspect jstyle couldbeataspectjstyle anns length annotation ann anns lorg aspectj lang annotation aspect equals ann get type signature gettypesignature could be at aspect jstyle couldbeataspectjstyle could be at aspect jstyle couldbeataspectjstyle annotation code style aspect annotation visitor attribute attributes get attributes getattributes attributes length attributes get name getname equals aspect attribute name attributename ioexception