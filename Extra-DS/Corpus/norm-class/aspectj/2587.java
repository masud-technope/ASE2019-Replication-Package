copyright ibm corporation rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors adrian colyer org aspectj testing java file java file input stream fileinputstream java input stream reader inputstreamreader java util hash map hashmap java util map java util stack junit extensions test setup testsetup junit framework test junit framework test suite testsuite org apache commons digester digester org aspectj tools ajc ajc test case ajctestcase org aspectj tools ajc compilation result compilationresult org aspectj util file util fileutil root test suites based aspect j aspectj xml test suite file ajc test case ajctestcase allowing mix programmatic spec file driven testing org aspectj systemtest incremental incremental tests incrementaltests mixed style org aspectj testing make test class maketestclass generate subclass suite spec file input xmlbased ajc test case xmlbasedajctestcase ajc test case ajctestcase map test map testmap hash map hashmap suite loaded suiteloaded ajc test ajctest current test currenttest stack clear test after run cleartestafterrun stack xmlbased ajc test case xmlbasedajctestcase define suite method subclasses result calling method don hate methods programming models pre test suite xmlbased ajc test case xmlbasedajctestcase load suite loadsuite my test case class mytestcaseclass pre param test case class testcaseclass test load suite loadsuite test case class testcaseclass test suite testsuite suite test suite testsuite test case class testcaseclass get name getname suite add test suite addtestsuite test case class testcaseclass test setup testsetup wrapper test setup testsetup suite javadoc junit extensions test setup testsetup set up setup set up setup exception set up setup suite loaded suiteloaded javadoc junit extensions test setup testsetup tear down teardown tear down teardown exception tear down teardown suite loaded suiteloaded wrapper file xml specification tests file get spec file getspecfile map string test title ajc test ajctest map get suite tests getsuitetests test map testmap helper method runs test title suite spec file tests steps ajc test execute sandbox run test runtest string title current test currenttest ajc test ajctest test map testmap title clear test cleartest clear test after run cleartestafterrun current test currenttest clear test cleartest system err println test title fail test title suite ajc set should empty sandbox setshouldemptysandbox current test currenttest run test runtest clear test cleartest test map testmap remove title executing test access ajc test ajctest get title gettitle ajc test ajctest get current test getcurrenttest current test currenttest digester xml document parsed creates instances ajc test ajctest objects test case testcase digester calling method add test addtest ajc test ajctest test test map testmap test get title gettitle test push clear test after run pushcleartestafterrun val clear test after run cleartestafterrun push val pop clear test after run popcleartestafterrun clear test cleartest clear test after run cleartestafterrun clear test cleartest clear test cleartest pop clear test after run cleartestafterrun is empty isempty result clear test after run cleartestafterrun peek boolean value booleanvalue pop clear test after run cleartestafterrun pop result rules parsing suite spec file digester bean properties match attributes xml document properties classes simple implementation easy maintain extend digester get digester getdigester digester digester digester digester push digester add object create addobjectcreate suite ajc test ajc test ajctest digester add set properties addsetproperties suite ajc test digester add set next addsetnext suite ajc test add test addtest org aspectj testing ajc test ajctest digester add object create addobjectcreate suite ajc test compile compile spec compilespec digester add set properties addsetproperties suite ajc test compile digester add set next addsetnext suite ajc test compile add test step addteststep org aspectj testing itest step iteststep digester add object create addobjectcreate suite ajc test run spec runspec digester add set properties addsetproperties suite ajc test class to run classtorun digester add set properties addsetproperties suite ajc test ltw ltw file ltwfile digester add set properties addsetproperties suite ajc test xlintfile xlint file xlintfile digester add set next addsetnext suite ajc test add test step addteststep org aspectj testing itest step iteststep digester add object create addobjectcreate message expected message spec expectedmessagespec digester add set properties addsetproperties message digester add set next addsetnext message add expected message addexpectedmessage org aspectj testing expected message spec expectedmessagespec digester add object create addobjectcreate suite ajc test weave weave spec weavespec digester add set properties addsetproperties suite ajc test weave digester add set next addsetnext suite ajc test weave add test step addteststep org aspectj testing itest step iteststep digester add object create addobjectcreate suite ajc test ant ant spec antspec digester add set properties addsetproperties suite ajc test ant digester add set next addsetnext suite ajc test ant add test step addteststep org aspectj testing itest step iteststep digester add object create addobjectcreate suite ajc test ant stderr output spec outputspec digester add set properties addsetproperties suite ajc test ant stderr digester add set next addsetnext suite ajc test ant stderr add std err spec addstderrspec org aspectj testing output spec outputspec digester add object create addobjectcreate suite ajc test ant stdout output spec outputspec digester add set properties addsetproperties suite ajc test ant stdout digester add set next addsetnext suite ajc test ant stdout add std out spec addstdoutspec org aspectj testing output spec outputspec digester add object create addobjectcreate suite ajc test stderr output spec outputspec digester add set properties addsetproperties suite ajc test stderr digester add set next addsetnext suite ajc test stderr add std err spec addstderrspec org aspectj testing output spec outputspec digester add object create addobjectcreate suite ajc test stdout output spec outputspec digester add set properties addsetproperties suite ajc test stdout digester add set next addsetnext suite ajc test stdout add std out spec addstdoutspec org aspectj testing output spec outputspec digester add object create addobjectcreate output line outputline digester add set properties addsetproperties digester add set next addsetnext add line addline org aspectj testing output line outputline digester javadoc org aspectj tools ajc ajc test case ajctestcase set up setup set up setup exception set up setup suite loaded suiteloaded test map testmap hash map hashmap system println loading suite get spec file getspecfile get path getpath digester get digester getdigester input stream reader inputstreamreader isr input stream reader inputstreamreader file input stream fileinputstream get spec file getspecfile parse isr exception fail unable load suite get spec file getspecfile get path getpath suite loaded suiteloaded next increment nextincrement do wait dowait time system current time millis currenttimemillis do wait dowait thread sleep interrupted exception interruptedexception int ex intex time copy file copyfile string string exception string dir get current test getcurrenttest get dir getdir file util fileutil copy file copyfile file dir file separator file ajc get sandbox directory getsandboxdirectory copy file and do incremental build copyfileanddoincrementalbuild string string exception copy file copyfile compilation result compilationresult result ajc do incremental compile doincrementalcompile assert no messages assertnomessages result expected clean compile test get current test getcurrenttest get title gettitle copy file and do incremental build copyfileanddoincrementalbuild string string message spec messagespec expected results expectedresults exception string dir get current test getcurrenttest get dir getdir file util fileutil copy file copyfile file dir file separator file ajc get sandbox directory getsandboxdirectory compilation result compilationresult result ajc do incremental compile doincrementalcompile assert messages assertmessages result test get current test getcurrenttest get title gettitle produce expected messages expected results expectedresults delete file deletefile string file file ajc get sandbox directory getsandboxdirectory file delete delete file and do incremental build deletefileanddoincrementalbuild string file message spec messagespec expected result expectedresult exception delete file deletefile file compilation result compilationresult result ajc do incremental compile doincrementalcompile assert messages assertmessages result test get current test getcurrenttest get title gettitle produce expected messages expected result expectedresult delete file and do incremental build deletefileanddoincrementalbuild string file exception delete file and do incremental build deletefileanddoincrementalbuild file message spec messagespec empty message assert added assertadded string file assert true asserttrue file file file ajc get sandbox directory getsandboxdirectory file exists assert deleted assertdeleted string file assert false assertfalse file file deleted file ajc get sandbox directory getsandboxdirectory file exists assert updated assertupdated string file since time sincetime file file ajc get sandbox directory getsandboxdirectory file assert true asserttrue file file updated last modified lastmodified since time sincetime