copyright contributors rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors mik kersten initial implementation org aspectj ajde java java util java util jar jar input stream jarinputstream java util zip org aspectj util file util fileutil author websterm resource copy test case resourcecopytestcase ajde test case ajdetestcase string project dir bug string src dir srcdir project dir src string bin dir bindir bin string injar input jar string injar input jar string outjar name outjarname bin output jar constructor jar resource copy test case jarresourcecopytestcase param arg resource copy test case resourcecopytestcase string arg arg ensure output directpry clean set up setup exception set up setup project dir file util fileutil delete contents deletecontents open file openfile bin dir bindir test src to bin testsrctobin assert true asserttrue ajde get default getdefault get task list manager gettasklistmanager has warning haswarning assert true asserttrue build failed do synchronous build dosynchronousbuild config lst compare dirs comparedirs src bin test injars to outjar testinjarstooutjar injars hash set hashset file injar open file openfile injar injars add injar ide manager idemanager get project properties getprojectproperties set in jars setinjars injars file outjar open file openfile outjar name outjarname ide manager idemanager get project properties getprojectproperties set out jar setoutjar outjar get absolute path getabsolutepath assert true asserttrue build failed do synchronous build dosynchronousbuild config lst assert true asserttrue build warnings ide manager idemanager get compilation source line tasks getcompilationsourcelinetasks is empty isempty compare jars comparejars injar src outjar test duplicate resources testduplicateresources injars hash set hashset file injar open file openfile injar file injar open file openfile injar injars add injar injars add injar ide manager idemanager get project properties getprojectproperties set in jars setinjars injars file outjar open file openfile outjar name outjarname ide manager idemanager get project properties getprojectproperties set out jar setoutjar outjar get absolute path getabsolutepath assert true asserttrue build suceeded do synchronous build dosynchronousbuild config lst assert false assertfalse build warnings duplicate resource expected ide manager idemanager get compilation source line tasks getcompilationsourcelinetasks is empty isempty list msgs null ide manager nullidemanager get ide manager getidemanager get compilation source line tasks getcompilationsourcelinetasks assert true asserttrue wrong message null ide task list manager nullidetasklistmanager source line task sourcelinetask msgs message get message getmessage starts with startswith duplicate resource compare jars comparejars injar src outjar test src to outjar testsrctooutjar file outjar open file openfile outjar name outjarname ide manager idemanager get project properties getprojectproperties set out jar setoutjar outjar get absolute path getabsolutepath assert true asserttrue build failed do synchronous build dosynchronousbuild config lst compare source to outjar comparesourcetooutjar src outjar test injars to bin testinjarstobin injars hash set hashset file injar open file openfile injar injars add injar ide manager idemanager get project properties getprojectproperties set in jars setinjars injars assert true asserttrue build failed do synchronous build dosynchronousbuild config lst assert true asserttrue build warnings ide manager idemanager get compilation source line tasks getcompilationsourcelinetasks is empty isempty compare injars to bin compareinjarstobin injar src bin ensure bin java resouces source injars compare dirs comparedirs string indir name indirname string outdir name outdirname file bin base binbase open file openfile outdir name outdirname file to resources toresources file util fileutil list files listfiles bin base binbase aspectj resource file filter aspectjresourcefilefilter hash set hashset resources hash set hashset list source resources listsourceresources indir name indirname resources to resources toresources length string file name filename file util fileutil normalized path normalizedpath to resources toresources bin base binbase resources remove file name filename assert true asserttrue extraneous resources file name filename assert true asserttrue missing resources resources to string tostring resources is empty isempty ensure outjar java resouces injars compare jars comparejars file injar file injarfile string indir name indirname file outjar file outjarfile hash set hashset resources hash set hashset assert true asserttrue outjar older injar outjar file outjarfile last modified lastmodified injar file injarfile last modified lastmodified in manifest inmanifest list jar resources listjarresources injar file injarfile resources list source resources listsourceresources indir name indirname resources zip input stream zipinputstream outjar zip input stream zipinputstream java file input stream fileinputstream outjar file outjarfile zip entry zipentry entry entry outjar get next entry getnextentry string file name filename entry get name getname file name filename ends with endswith ensure copied jar manifest file name filename equals ignore case equalsignorecase meta inf manifest out manifest outmanifest file util fileutil read as byte array readasbytearray outjar assert true asserttrue wrong manifest copied arrays equals in manifest inmanifest out manifest outmanifest resources remove file name filename assert true asserttrue file name filename outjar close entry closeentry outjar close assert true asserttrue resources to string tostring resources is empty isempty ioexception fail to string tostring ensure outjar conatins java resouces source injars compare source to outjar comparesourcetooutjar string indir name indirname file outjar file outjarfile hash set hashset resources hash set hashset list source resources listsourceresources indir name indirname resources zip input stream zipinputstream outjar jar input stream jarinputstream java file input stream fileinputstream outjar file outjarfile zip entry zipentry entry entry outjar get next entry getnextentry string file name filename entry get name getname file name filename ends with endswith resources remove file name filename assert true asserttrue file name filename outjar close entry closeentry outjar close assert true asserttrue missing resources resources to string tostring resources is empty isempty ioexception fail to string tostring ensure bin java resouces source injars compare injars to bin compareinjarstobin file injar file injarfile string indir name indirname string outdir name outdirname hash set hashset resources hash set hashset in manifest inmanifest list jar resources listjarresources injar file injarfile resources list source resources listsourceresources indir name indirname resources file bin base binbase open file openfile outdir name outdirname file to resources toresources file util fileutil list files listfiles bin base binbase aspectj resource file filter aspectjresourcefilefilter to resources toresources length string file name filename file util fileutil normalized path normalizedpath to resources toresources bin base binbase ensure copied jar manifest file name filename equals ignore case equalsignorecase meta inf manifest out manifest outmanifest file util fileutil read as byte array readasbytearray to resources toresources assert true asserttrue wrong manifest copied arrays equals in manifest inmanifest out manifest outmanifest resources remove file name filename assert true asserttrue extraneous resources file name filename assert true asserttrue missing resources resources to string tostring resources is empty isempty ioexception fail to string tostring list source resources listsourceresources string indir name indirname resources file src base srcbase open file openfile indir name indirname file from resources fromresources file util fileutil list files listfiles src base srcbase aspectj resource file filter aspectjresourcefilefilter from resources fromresources length string file util fileutil normalized path normalizedpath from resources fromresources src base srcbase starts with startswith cvs index of indexof cvs ends with endswith cvs resources add list jar resources listjarresources file injar file injarfile resources manifest zip input stream zipinputstream injar zip input stream zipinputstream java file input stream fileinputstream injar file injarfile zip entry zipentry entry entry injar get next entry getnextentry string file name filename entry get name getname entry is directory isdirectory file name filename ends with endswith jar manifests shouldn copied file name filename equals ignore case equalsignorecase meta inf manifest manifest file util fileutil read as byte array readasbytearray injar resources add file name filename injar close entry closeentry injar close ioexception fail to string tostring manifest file filter filefilter aspectj resource file filter aspectjresourcefilefilter file filter filefilter accept file pathname string pathname get name getname to lower case tolowercase ends with endswith ends with endswith java ends with endswith