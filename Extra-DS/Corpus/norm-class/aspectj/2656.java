copyright ibm rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors andy clement initial implementation org aspectj apache bcel classfile tests java file java ioexception java util iterator org aspectj apache bcel classfile attribute org aspectj apache bcel classfile java class javaclass org aspectj apache bcel classfile method org aspectj apache bcel classfile annotation annotation org aspectj apache bcel classfile annotation element name value pair elementnamevaluepair org aspectj apache bcel classfile annotation runtime visible parameter annotations runtimevisibleparameterannotations org aspectj apache bcel util synthetic repository syntheticrepository runtime visible parameter annotation attribute test runtimevisibleparameterannotationattributetest bcel test case bceltestcase set up setup exception set up setup test accessing runtime visible parameter annotations testaccessingruntimevisibleparameterannotations class not found exception classnotfoundexception java class javaclass clazz get class from jar getclassfromjar annotated parameters annotatedparameters attribute rva attr rvaattr find attribute findattribute runtime visible parameter annotations runtimevisibleparameterannotations clazz method methods clazz get methods getmethods methods length method methods get name getname equals foo runtime visible parameter annotations runtimevisibleparameterannotations param anns paramanns runtime visible parameter annotations runtimevisibleparameterannotations find attribute findattribute runtime visible parameter annotations runtimevisibleparameterannotations get attributes getattributes assert true asserttrue foo takes parameters param anns paramanns get parameter annotations getparameterannotations size param anns paramanns get parameter annotations getparameterannotations size annotation first param annotations firstparamannotations param anns paramanns get annotations on parameter getannotationsonparameter check annotation checkannotation first param annotations firstparamannotations simple annotation simpleannotation annotation second param annotations secondparamannotations param anns paramanns get annotations on parameter getannotationsonparameter check annotation checkannotation second param annotations secondparamannotations simple annotation simpleannotation check annotation checkannotation second param annotations secondparamannotations annotation enum element annotationenumelement enumval red get name getname equals main runtime visible parameter annotations runtimevisibleparameterannotations param anns paramanns runtime visible parameter annotations runtimevisibleparameterannotations find attribute findattribute runtime visible parameter annotations runtimevisibleparameterannotations get attributes getattributes assert true asserttrue main takes parameter param anns paramanns get parameter annotations getparameterannotations size param anns paramanns get parameter annotations getparameterannotations size annotation first param annotations firstparamannotations param anns paramanns get annotations on parameter getannotationsonparameter check annotation checkannotation first param annotations firstparamannotations simple annotation simpleannotation test accessing parameter annotations through get annotations testaccessingparameterannotationsthroughgetannotations class not found exception classnotfoundexception java class javaclass clazz get class from jar getclassfromjar annotated parameters annotatedparameters attribute rva attr rvaattr find attribute findattribute runtime visible parameter annotations runtimevisibleparameterannotations clazz check foo method checkfoomethod clazz test parameter annotations read write testparameterannotationsreadwrite class not found exception classnotfoundexception ioexception java class javaclass clazz get class from jar getclassfromjar annotated parameters annotatedparameters check foo method checkfoomethod clazz write file tfile create testdata file createtestdatafile annotated parameters annotatedparameters clazz dump tfile synthetic repository syntheticrepository repos create repos createrepos java class javaclass clazz repos load class loadclass annotated parameters annotatedparameters check foo method checkfoomethod clazz assert true asserttrue tfile delete check foo method checkfoomethod java class javaclass clazz method methods clazz get methods getmethods methods length method methods get name getname equals foo annotation first param annotations firstparamannotations get annotations on parameter getannotationsonparameter check annotation checkannotation first param annotations firstparamannotations simple annotation simpleannotation annotation second param annotations secondparamannotations get annotations on parameter getannotationsonparameter check annotation checkannotation second param annotations secondparamannotations simple annotation simpleannotation check annotation checkannotation second param annotations secondparamannotations annotation enum element annotationenumelement enumval red check annotation checkannotation annotation string string elementname string elementvalue assert true asserttrue expected annotation get type name gettypename get type name gettypename equals assert true asserttrue expected annotation element get values getvalues size get values getvalues size element name value pair elementnamevaluepair envp element name value pair elementnamevaluepair get values getvalues assert true asserttrue expected element elementname envp get name string getnamestring elementname equals envp get name string getnamestring assert true asserttrue expected element elementvalue envp get value getvalue stringify value stringifyvalue elementvalue equals envp get value getvalue stringify value stringifyvalue helper methods check value checkvalue annotation string string tostring iterator get values getvalues iterator has next hasnext element name value pair elementnamevaluepair element element name value pair elementnamevaluepair element get name string getnamestring equals element get value getvalue stringify value stringifyvalue equals tostring fail expected element tostring element get value getvalue stringify value stringifyvalue fail didnt find named element tear down teardown exception tear down teardown