copyright ibm rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors andy clement initial implementation org aspectj apache bcel classfile tests java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java data input stream datainputstream java data output stream dataoutputstream java ioexception java util array list arraylist java util list java util vector org aspectj apache bcel constants org aspectj apache bcel classfile utility org aspectj apache bcel classfile attribute org aspectj apache bcel classfile annotation runtime visible annotations runtimevisibleannotations org aspectj apache bcel classfile annotation runtime invisible annotations runtimeinvisibleannotations org aspectj apache bcel classfile annotation runtime annotations runtimeannotations org aspectj apache bcel class gen classgen org aspectj apache bcel constant pool gen constantpoolgen org aspectj apache bcel object type objecttype org aspectj apache bcel annotation annotation gen annotationgen org aspectj apache bcel annotation element name value pair gen elementnamevaluepairgen org aspectj apache bcel annotation element value gen elementvaluegen org aspectj apache bcel annotation simple element value gen simpleelementvaluegen annotation gen test annotationgentest bcel test case bceltestcase set up setup exception set up setup class gen classgen create class gen createclassgen string classname class gen classgen classname java lang object generated constants acc constants acc programmatically construct mutable annotation annotation gen annotationgen object test construct mutable annotation testconstructmutableannotation create class gen classgen create class gen createclassgen hello world helloworld constant pool gen constantpoolgen get constant pool getconstantpool create simple primitive type simple element value gen simpleelementvaluegen evg simple element value gen simpleelementvaluegen element value gen elementvaluegen primitive call element name value pair gen elementnamevaluepairgen nv gen nvgen element name value pair gen elementnamevaluepairgen evg check assert true asserttrue include string nv gen nvgen to string tostring nv gen nvgen to string tostring index of indexof object type objecttype object type objecttype simple annotation simpleannotation list elements array list arraylist elements add nv gen nvgen build annotation type simple annotation simpleannotation annotation gen annotationgen annotation gen annotationgen elements check save load check serialize checkserialize test visible invisible annotation gen testvisibleinvisibleannotationgen create class gen classgen create class gen createclassgen hello world helloworld constant pool gen constantpoolgen get constant pool getconstantpool create simple primitive type simple element value gen simpleelementvaluegen evg simple element value gen simpleelementvaluegen element value gen elementvaluegen primitive call element name value pair gen elementnamevaluepairgen nv gen nvgen element name value pair gen elementnamevaluepairgen evg check assert true asserttrue include string nv gen nvgen to string tostring nv gen nvgen to string tostring index of indexof object type objecttype object type objecttype simple annotation simpleannotation list elements array list arraylist elements add nv gen nvgen build annotation type simple annotation simpleannotation annotation gen annotationgen annotation gen annotationgen elements vector vector add attribute attributes utility get annotation attributes getannotationattributes found rv foundrv attributes length attribute attribute attributes attribute runtime visible annotations runtimevisibleannotations assert true asserttrue runtime annotations runtimeannotations attribute are visible arevisible found rv foundrv assert true asserttrue runtime visible annotation runtimevisibleannotation found rv foundrv build riv annotation type simple annotation simpleannotation annotation gen annotationgen annotation gen annotationgen elements vector vector add attribute attributes utility get annotation attributes getannotationattributes found riv foundriv attributes length attribute attribute attributes attribute runtime invisible annotations runtimeinvisibleannotations assert false assertfalse runtime annotations runtimeannotations attribute are visible arevisible found riv foundriv assert true asserttrue runtime invisible annotation runtimeinvisibleannotation found riv foundriv helper methods check serialize checkserialize annotation gen annotationgen constant pool gen constantpoolgen cpg string before name beforename get type name gettypename list before values beforevalues get values getvalues byte array output stream bytearrayoutputstream baos byte array output stream bytearrayoutputstream data output stream dataoutputstream dos data output stream dataoutputstream baos dump dos dos flush dos close baos to byte array tobytearray byte array input stream bytearrayinputstream bais byte array input stream bytearrayinputstream data input stream datainputstream dis data input stream datainputstream bais annotation gen annotationgen ann after annafter annotation gen annotationgen read dis cpg is runtime visible isruntimevisible dis close string after name aftername ann after annafter get type name gettypename list after values aftervalues ann after annafter get values getvalues before name beforename equals after name aftername fail deserialization failed type before name beforename type after name aftername get values getvalues size ann after annafter get values getvalues size fail numbers element pairs get values getvalues size ann after annafter get values getvalues size get values getvalues size element name value pair gen elementnamevaluepairgen before element beforeelement element name value pair gen elementnamevaluepairgen get values getvalues element name value pair gen elementnamevaluepairgen after element afterelement element name value pair gen elementnamevaluepairgen ann after annafter get values getvalues before element beforeelement get name string getnamestring equals after element afterelement get name string getnamestring fail names before element beforeelement get name string getnamestring after element afterelement get name string getnamestring ioexception ioe fail unexpected exception checking serialization ioe tear down teardown exception tear down teardown