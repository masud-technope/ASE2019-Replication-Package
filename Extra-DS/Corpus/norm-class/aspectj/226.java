copyright xerox corporation rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj testing util java file java file filter filefilter java ioexception java print writer printwriter java string writer stringwriter java lang reflect field java lang reflect invocation target exception invocationtargetexception java lang reflect modifier java security access controller accesscontroller java security privileged action exception privilegedactionexception java security privileged exception action privilegedexceptionaction java util array list arraylist java util bit set bitset java util collections java util comparator java util iterator java util list java util properties java util string tokenizer stringtokenizer org aspectj bridge abort exception abortexception org aspectj bridge imessage misc lang utilities lang util langutil delimiter split string array list arraylist to string tostring string split delim prefix split string array list arraylist to string tostring string split start suffix split string array list arraylist to string tostring string split system dependent classpath separator string classpath sep string string bad hard wired unix windows mac path separators seps string system get property getproperty path separator string system get property getproperty java path index of indexof index of indexof throwable classpath sep string escape string input string target string escape is empty isempty input is empty isempty target is empty isempty escape input string buffer stringbuffer sink string buffer stringbuffer escape input target escape sink sink to string tostring escape string input string target string escape string buffer stringbuffer sink sink is empty isempty input is empty isempty target is empty isempty escape input index of indexof target sink append input error unimplemented flatten list list flatten spec flattenspec spec string buffer stringbuffer sink throw iax if null throwiaxifnull spec spec flatten spec flattenspec spec flatten list prefix null flattened nullflattened escape delim suffix sink flatten list list string prefix string null flattened nullflattened string escape string delim string suffix string buffer stringbuffer sink throw iax if null throwiaxifnull list list object list to array toarray string result string get class getclass get component type getcomponenttype result string result string length result length result to string tostring flatten result prefix null flattened nullflattened escape delim suffix sink flatten string input flatten spec flattenspec spec string buffer stringbuffer sink throw iax if null throwiaxifnull spec spec flatten spec flattenspec spec flatten input prefix null flattened nullflattened escape delim suffix sink flatten string strings string prefix string null flattened nullflattened string escape string delim string suffix string buffer stringbuffer sink throw iax if null throwiaxifnull strings strings sink have delim havedelim is empty isempty delim have null flattened havenullflattened null flattened nullflattened escaping have delim havedelim escape num strings numstrings strings strings length prefix sink append prefix num strings numstrings string strings have null flattened havenullflattened have delim havedelim sink append delim sink append null flattened nullflattened have delim havedelim sink append delim escaping escape delim escape sink sink append suffix sink append suffix string invalid components invalidcomponents object super type supertype input array length string buffer stringbuffer result string buffer stringbuffer string cname lang util langutil unqualified class name unqualifiedclassname super type supertype length result append super type supertype super type supertype is assignable from isassignablefrom get class getclass result append cname result length result to string tostring substring is empty isempty object length is empty isempty string length throw iax if components bad throwiaxifcomponentsbad object input string super type supertype string errs invalid components invalidcomponents input super type supertype errs string err invalid entries errs illegal argument exception illegalargumentexception err throw iax if false throwiaxiffalse test string message test illegal argument exception illegalargumentexception message throw iax if null throwiaxifnull object string string message input illegal argument exception illegalargumentexception message array list arraylist unflatten string input flatten spec flattenspec spec throw iax if null throwiaxifnull spec spec flatten spec flattenspec spec unflatten input prefix null flattened nullflattened escape delim suffix empty unflattened emptyunflattened array list arraylist unflatten string input string prefix string null flattened nullflattened string escape string delim string suffix string empty unflattened emptyunflattened throw iax if null throwiaxifnull input input have delim havedelim is empty isempty delim is empty isempty prefix input starts with startswith prefix input input substring prefix length string expecting prefix start input illegal argument exception illegalargumentexception is empty isempty suffix input ends with endswith suffix input input substring input length suffix length string expecting suffix input illegal argument exception illegalargumentexception array list arraylist result array list arraylist is empty isempty input result have delim havedelim input index of indexof delim result add input result string tokenizer stringtokenizer string tokenizer stringtokenizer input delim has more tokens hasmoretokens string token next token nexttoken system println reading token delim equals token result add token result string combine string string array list arraylist two list twolist array list arraylist two list twolist add all addall org aspectj util lang util langutil array as list arrayaslist array list arraylist result array list arraylist length two list twolist remove result add iterator iterator two list twolist iterator iterator has next hasnext string element string iterator element result add element string result to array toarray properties combine properties dest properties add respect existing respectexisting add dest dest add iterator iterator add key set keyset iterator iterator has next hasnext string key string iterator key string add get property getproperty key respect existing respectexisting dest get property getproperty key dest set property setproperty key dest list array as list arrayaslist object org aspectj util lang util langutil array as list arrayaslist string classes in classesin file dir always true alwaystrue file filter filefilter filter valid file filter validfilefilter file collector file filter collectorfilefilter collector collector file filter collectorfilefilter filter always true alwaystrue file util fileutil descend file tree descendfiletree dir collector list list collector get files getfiles string result string list size iterator list iterator string dir prefix dirprefix dir get path getpath result length has next hasnext error unexpected list result file to classname filetoclassname file dir prefix dirprefix result string unsplit string input string buffer stringbuffer errs string buffer stringbuffer string buffer stringbuffer append split start input length input index of indexof split delim errs errs append n lang util nlangutil unsplit item input split delim append input input length append split delim append split to string tostring string split string starts with startswith split start ends with endswith split string substring split start length length split length len length start array list arraylist result array list arraylist string delim loc index of indexof split delim start start len loc result add substring start loc start delim length loc loc index of indexof split delim start result add substring start string result to array toarray string string strip string src string to strip tostrip to strip tostrip strip src src strip to strip tostrip list slist org aspectj util lang util langutil array as list arrayaslist src list tlist org aspectj util lang util langutil array as list arrayaslist to strip tostrip slist remove all removeall tlist string slist to array toarray load classes loadclasses string args string buffer stringbuffer string buffer stringbuffer err args args length for name forname args append append args append append get name getname throwable err err append file util fileutil render err string file to classname filetoclassname file string prefix string path get path getpath path starts with startswith prefix string err path starts with startswith prefix illegal argument exception illegalargumentexception err length path length length path path substring prefix length length seps length path path replace seps path main string args string buffer stringbuffer err string buffer stringbuffer string buffer stringbuffer string buffer stringbuffer args length string names classes in classesin file args system err println args render names load classes loadclasses names err err length system err println err to string tostring length system println to string tostring string render string args args args length long format longformat args length string sep long format longformat string buffer stringbuffer string buffer stringbuffer long format longformat append args length append sep append args append long format longformat to string tostring string debug str debugstr throwable thrown thrown throwable thrown invocation target exception invocationtargetexception debug str debugstr invocation target exception invocationtargetexception thrown get target exception gettargetexception thrown abort exception abortexception imessage abort exception abortexception thrown get imessage getimessage string writer stringwriter buf string writer stringwriter print writer printwriter writer print writer printwriter buf writer println thrown get message getmessage thrown print stack trace printstacktrace writer buf close ioexception ioe buf to string tostring string debug str debugstr object debug str debugstr string debug str debugstr object recurse recurse array list arraylist rendering array list arraylist rendering add debug str debugstr rendering get class getclass field fields get declared fields getdeclaredfields object values object fields length string names string fields length fields length field field fields names field get name getname values field field get type gettype is array isarray list list org aspectj util lang util langutil array as list arrayaslist object values values list to string tostring illegal access exception illegalaccessexception values illegal access exception illegalaccessexception debug str debugstr names values string debug str debugstr object array list arraylist rendering rendering error rendering get class getclass is array isarray object object string buffer stringbuffer string buffer stringbuffer append length append rendering add append debug str debugstr rendering append to string tostring field fields non static fields nonstaticfields get fields getfields object values object fields length string names string fields length fields length field field fields names field get name getname object privileged get field privilegedgetfield field values rendering values recursion rendering add values debug str debugstr rendering debug str debugstr names values object privileged get field privilegedgetfield field field object access controller accesscontroller do privileged doprivileged privileged exception action privilegedexceptionaction object field illegal access exception illegalaccessexception illegal access exception illegalaccessexception privileged action exception privilegedactionexception illegal access exception illegalaccessexception field non static fields nonstaticfields field fields fields field fields length modifier is static isstatic fields get modifiers getmodifiers fields fields field result field system arraycopy fields result fields result fields string debug str debugstr source string names object items debug str debugstr source names items string debug str debugstr source string prefix string names string infix object items string delimiter string suffix delimiter delimiter split delim prefix prefix split start infix infix suffix suffix split string buffer stringbuffer string buffer stringbuffer source append org aspectj util lang util langutil unqualified class name unqualifiedclassname source append prefix names names items items max names length items length names length items length max append delimiter names length append names items length names length append infix append items append suffix to string tostring string unqualified class name unqualifiedclassname object unqualified class name unqualifiedclassname get class getclass string unqualified class name unqualifiedclassname string get name getname loc last index of lastindexof loc substring loc make diffs makediffs list expected list in expectedlistin list actual list in actuallistin list missing list out missinglistout list extra list out extralistout missing list out missinglistout extra list out extralistout expected list in expectedlistin expected list in expectedlistin collections empty list actual list in actuallistin actual list in actuallistin collections empty list actual list in actuallistin size expected list in expectedlistin size bit set bitset actual expected actualexpected bit set bitset expected list in expectedlistin size object expect expected list in expectedlistin loc actual list in actuallistin index of indexof expect loc missing list out missinglistout missing list out missinglistout add expect actual expected actualexpected loc extra list out extralistout actual list in actuallistin size actual expected actualexpected extra list out extralistout add actual list in actuallistin make soft diffs makesoftdiffs list expected list in expectedlistin list actual list in actuallistin list missing list out missinglistout list extra list out extralistout comparator comparator missing list out missinglistout extra list out extralistout comparator illegal argument exception illegalargumentexception comparator expected list in expectedlistin expected list in expectedlistin collections empty list actual list in actuallistin actual list in actuallistin collections empty list actual list in actuallistin size expected list in expectedlistin size array list arraylist expected array list arraylist expected add all addall expected list in expectedlistin collections sort expected comparator array list arraylist actual array list arraylist actual add all addall actual list in actuallistin collections sort actual comparator iterator actual iter actualiter actual iterator object missing list out missinglistout missing list out missinglistout add all addall expected list in expectedlistin extra list out extralistout extra list out extralistout add all addall actual list in actuallistin actual iter actualiter has next hasnext actual iter actualiter iterator expected iter expectediter expected iterator expected iter expectediter has next hasnext object exp expected iter expectediter diff comparator compare exp diff extra list out extralistout remove missing list out missinglistout remove exp diff flatten spec flattenspec string unflatten empty error empty items permitted unflattening string unflatten empty unflatten empty items string skip empty unflatten skip empty items unflattening flatten spec flattenspec comma flatten spec flattenspec string to string tostring flatten spec flattenspec comma flatten spec flattenspec list flatten spec flattenspec unflatten empty error string to string tostring flatten spec flattenspec list string string string string prefix string null flattened nullflattened string escape string delim string suffix string empty unflattened emptyunflattened string to string tostring flatten spec flattenspec string prefix string null rendering nullrendering string escape string delim string suffix string empty unflattened emptyunflattened prefix prefix null flattened nullflattened null rendering nullrendering escape escape delim delim suffix suffix empty unflattened emptyunflattened empty unflattened emptyunflattened throw iax if null throwiaxifnull empty unflattened emptyunflattened unflatten empty string to string tostring to string tostring to string tostring flatten spec flattenspec prefix prefix null rendering nullrendering null flattened nullflattened escape escape delim delim suffix suffix empty unflattened emptyunflattened empty unflattened emptyunflattened to string tostring