copyright ibm rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors andy clement initial implementation org aspectj apache bcel classfile tests java file java ioexception java util iterator java util list org aspectj apache bcel classfile attribute org aspectj apache bcel classfile constant pool constantpool org aspectj apache bcel classfile java class javaclass org aspectj apache bcel classfile utility org aspectj apache bcel classfile annotation annotation org aspectj apache bcel classfile annotation annotation element value annotationelementvalue org aspectj apache bcel classfile annotation array element value arrayelementvalue org aspectj apache bcel classfile annotation class element value classelementvalue org aspectj apache bcel classfile annotation element name value pair elementnamevaluepair org aspectj apache bcel classfile annotation element value elementvalue org aspectj apache bcel classfile annotation enum element value enumelementvalue org aspectj apache bcel classfile annotation simple element value simpleelementvalue org aspectj apache bcel classfile annotation runtime visible annotations runtimevisibleannotations org aspectj apache bcel class gen classgen org aspectj apache bcel annotation annotation gen annotationgen org aspectj apache bcel util synthetic repository syntheticrepository runtime visible annotation attribute test runtimevisibleannotationattributetest bcel test case bceltestcase set up setup exception set up setup test see annotations as attribute testseeannotationsasattribute class not found exception classnotfoundexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass simple annotated class simpleannotatedclass constant pool constantpool pool clazz get constant pool getconstantpool attribute rva attr rvaattr find attribute findattribute runtime visible annotations runtimevisibleannotations clazz assert true asserttrue expected runtime visible annotations runtimevisibleannotations attribute rva attr rvaattr length test annotations attribute contains right data testannotationsattributecontainsrightdata class not found exception classnotfoundexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass simple annotated class simpleannotatedclass constant pool constantpool pool clazz get constant pool getconstantpool attribute rva attr rvaattr find attribute findattribute runtime visible annotations runtimevisibleannotations clazz runtime visible annotations runtimevisibleannotations rva runtime visible annotations runtimevisibleannotations rva attr rvaattr list anns rva get annotations getannotations assert true asserttrue annotation anns size anns size annotation ann annotation anns assert true asserttrue called simple annotation simpleannotation called ann get type name gettypename ann get type name gettypename equals simple annotation simpleannotation list ann get values getvalues assert true asserttrue annotation simple annotation simpleannotation size size element name value pair elementnamevaluepair envp element name value pair elementnamevaluepair assert true asserttrue element simple annotation simpleannotation envp get name string getnamestring envp get name string getnamestring equals simple element value simpleelementvalue evalue simple element value simpleelementvalue envp get value getvalue assert true asserttrue type evalue get element value type getelementvaluetype evalue get element value type getelementvaluetype simple element value simpleelementvalue primitive assert true asserttrue evalue get value int getvalueint evalue get value int getvalueint test accessing annotations on clazz testaccessingannotationsonclazz class not found exception classnotfoundexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass simple annotated class simpleannotatedclass constant pool constantpool pool clazz get constant pool getconstantpool annotation anns clazz get annotations getannotations assert true asserttrue expected annotation simple annotated class simpleannotatedclass anns length anns length test reading writing annotations testreadingwritingannotations class not found exception classnotfoundexception ioexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass simple annotated class simpleannotatedclass constant pool constantpool pool clazz get constant pool getconstantpool annotation anns clazz get annotations getannotations assert true asserttrue expected annotation simple annotated class simpleannotatedclass anns length anns length write file tfile create testdata file createtestdatafile simple annotated class simpleannotatedclass clazz dump tfile synthetic repository syntheticrepository repos create repos createrepos java class javaclass clazz repos load class loadclass simple annotated class simpleannotatedclass constant pool constantpool pool clazz get constant pool getconstantpool annotation anns clazz get annotations getannotations assert true asserttrue expected annotation simple annotated class simpleannotatedclass anns length anns length assert true asserttrue tfile delete test annotations string elements test annotation string element testannotationstringelement class not found exception classnotfoundexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass annotated class annotatedclass verify annotation string element verifyannotationstringelement clazz test annotation string element read write testannotationstringelementreadwrite class not found exception classnotfoundexception ioexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass annotated class annotatedclass verify annotation string element verifyannotationstringelement clazz write file tfile create testdata file createtestdatafile annotated class annotatedclass clazz dump tfile synthetic repository syntheticrepository repos create repos createrepos java class javaclass clazz repos load class loadclass annotated class annotatedclass verify annotation string element verifyannotationstringelement clazz assert true asserttrue tfile delete verify annotation string element verifyannotationstringelement java class javaclass clazz annotation anns clazz get annotations getannotations assert true asserttrue annotation anns length anns length annotation ann anns assert true asserttrue called annotation string element annotationstringelement called ann get type name gettypename ann get type name gettypename equals annotation string element annotationstringelement list ann get values getvalues assert true asserttrue size size element name value pair elementnamevaluepair nvp element name value pair elementnamevaluepair assert true asserttrue element stringval nvp get name string getnamestring nvp get name string getnamestring equals stringval simple element value simpleelementvalue simple element value simpleelementvalue nvp get value getvalue assert true asserttrue string get value string getvaluestring get value string getvaluestring equals test complex annotation includes primitives test complex annotation testcomplexannotation class not found exception classnotfoundexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass complex annotated class complexannotatedclass verify complex annotation verifycomplexannotation clazz test complex annotations read write testcomplexannotationsreadwrite class not found exception classnotfoundexception ioexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass complex annotated class complexannotatedclass verify complex annotation verifycomplexannotation clazz write file tfile create testdata file createtestdatafile complex annotated class complexannotatedclass clazz dump tfile synthetic repository syntheticrepository repos create repos createrepos java class javaclass clazz repos load class loadclass complex annotated class complexannotatedclass verify complex annotation verifycomplexannotation clazz assert true asserttrue tfile delete verify complex annotation verifycomplexannotation java class javaclass clazz annotation anns clazz get annotations getannotations assert true asserttrue annotation anns length anns length annotation ann anns assert true asserttrue called complex annotation complexannotation called ann get type name gettypename ann get type name gettypename equals complex annotation complexannotation list ann get values getvalues assert true asserttrue values annotation complex annotation complexannotation size size list names utility get list of annotation names getlistofannotationnames ann assert true asserttrue find expected element names ival assert true asserttrue find expected element names dval assert true asserttrue find expected element names zval assert true asserttrue find expected element names fval assert true asserttrue find expected element names jval assert true asserttrue find expected element names sval assert true asserttrue find expected element names bval assert true asserttrue find expected element names cval check value checkvalue ann ival check value checkvalue ann jval check value checkvalue ann fval check value checkvalue ann dval check value checkvalue ann sval check value checkvalue ann bval check value checkvalue ann cval character to string tostring check value checkvalue ann zval check value checkvalue annotation string string tostring iterator get values getvalues iterator has next hasnext element name value pair elementnamevaluepair element element name value pair elementnamevaluepair element get name string getnamestring equals element get value getvalue stringify value stringifyvalue equals tostring fail expected element tostring element get value getvalue stringify value stringifyvalue fail didnt find named element test annotation element test annotation class element testannotationclasselement class not found exception classnotfoundexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass annotated with class class annotatedwithclassclass verify class annotation verifyclassannotation clazz test annotation class element copying testannotationclasselementcopying class not found exception classnotfoundexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass annotated with class class annotatedwithclassclass annotation anns clazz get annotations getannotations class gen classgen class gen classgen clazz checks copy values annotation annotation gen annotationgen anns get constant pool getconstantpool annotation gen annotationgen anns get constant pool getconstantpool test annotation class element read write testannotationclasselementreadwrite class not found exception classnotfoundexception ioexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass annotated with class class annotatedwithclassclass verify class annotation verifyclassannotation clazz write file tfile create testdata file createtestdatafile annotated with class class annotatedwithclassclass clazz dump tfile synthetic repository syntheticrepository repos create repos createrepos java class javaclass clazz repos load class loadclass annotated with class class annotatedwithclassclass verify class annotation verifyclassannotation clazz assert true asserttrue wipe annotated with class class annotatedwithclassclass verify class annotation verifyclassannotation java class javaclass clazz annotation anns clazz get annotations getannotations assert true asserttrue annotation anns length anns length annotation ann anns assert true asserttrue called annotation class element annotationclasselement called ann get type name gettypename ann get type name gettypename equals annotation class element annotationclasselement list ann get values getvalues assert true asserttrue size size element name value pair elementnamevaluepair nvp element name value pair elementnamevaluepair assert true asserttrue element clz nvp get name string getnamestring nvp get name string getnamestring equals clz class element value classelementvalue class element value classelementvalue nvp get value getvalue assert true asserttrue string ljava lang integer get class string getclassstring get class string getclassstring equals ljava lang integer test annotation enum element test annotation enum element testannotationenumelement class not found exception classnotfoundexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass annotated with enum class annotatedwithenumclass verify annotation enum element verifyannotationenumelement clazz test annotation enum element read write testannotationenumelementreadwrite class not found exception classnotfoundexception ioexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass annotated with enum class annotatedwithenumclass verify annotation enum element verifyannotationenumelement clazz write file tfile create testdata file createtestdatafile annotated with enum class annotatedwithenumclass clazz dump tfile synthetic repository syntheticrepository repos create repos createrepos java class javaclass clazz repos load class loadclass annotated with enum class annotatedwithenumclass verify annotation enum element verifyannotationenumelement clazz assert true asserttrue tfile delete verify annotation enum element verifyannotationenumelement java class javaclass clazz annotation anns clazz get annotations getannotations assert true asserttrue annotation anns length anns length annotation ann anns assert true asserttrue called annotation enum element annotationenumelement called ann get type name gettypename ann get type name gettypename equals annotation enum element annotationenumelement list ann get values getvalues assert true asserttrue size size element name value pair elementnamevaluepair nvp element name value pair elementnamevaluepair assert true asserttrue element enumval nvp get name string getnamestring nvp get name string getnamestring equals enumval element value elementvalue nvp get value getvalue assert true asserttrue type enum element value enumelementvalue enum element value enumelementvalue enum element value enumelementvalue eev enum element value enumelementvalue assert true asserttrue enum type eev get element value type getelementvaluetype eev get element value type getelementvaluetype simple element value simpleelementvalue enum constant assert true asserttrue enum type annotation simple enum simpleenum utility signature to string signaturetostring eev get enum type string getenumtypestring utility signature to string signaturetostring eev get enum type string getenumtypestring equals simple enum simpleenum assert true asserttrue string red eev get enum value string getenumvaluestring eev get enum value string getenumvaluestring equals red test annotation array element test annotation arrays of annotations testannotationarraysofannotations class not found exception classnotfoundexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass annotated with combined annotation annotatedwithcombinedannotation annotation anns clazz get annotations getannotations assert true asserttrue annotation anns length anns length check combined annotation checkcombinedannotation anns test annotation arrays of annotations read write testannotationarraysofannotationsreadwrite class not found exception classnotfoundexception ioexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass annotated with combined annotation annotatedwithcombinedannotation annotation anns clazz get annotations getannotations assert true asserttrue annotation anns length anns length check combined annotation checkcombinedannotation anns write file tfile create testdata file createtestdatafile annotated with combined annotation annotatedwithcombinedannotation clazz dump tfile synthetic repository syntheticrepository repos create repos createrepos java class javaclass clazz repos load class loadclass annotated with combined annotation annotatedwithcombinedannotation annotation anns clazz get annotations getannotations assert true asserttrue annotation anns length anns length check combined annotation checkcombinedannotation anns assert true asserttrue tfile delete check combined annotation checkcombinedannotation annotation ann assert true asserttrue called combined annotation combinedannotation called ann get type name gettypename ann get type name gettypename equals combined annotation combinedannotation list ann get values getvalues assert true asserttrue size size element name value pair elementnamevaluepair nvp element name value pair elementnamevaluepair assert true asserttrue element nvp get name string getnamestring nvp get name string getnamestring equals element value elementvalue nvp get value getvalue assert true asserttrue type array element value arrayelementvalue array element value arrayelementvalue array element value arrayelementvalue aev array element value arrayelementvalue assert true asserttrue array element size aev get element values array size getelementvaluesarraysize aev get element values array size getelementvaluesarraysize element value elementvalue evs aev get element values array getelementvaluesarray assert true asserttrue entry array annotation element value annotationelementvalue evs evs annotation element value annotationelementvalue annotation element value annotationelementvalue annotation element value annotationelementvalue evs annotation get annotation getannotation assert true asserttrue simple annotation simpleannotation get type name gettypename get type name gettypename equals simple annotation simpleannotation list envps get values getvalues assert true asserttrue pair envps size envps size element name value pair elementnamevaluepair envp element name value pair elementnamevaluepair envps assert true asserttrue envp get name string getnamestring envp get name string getnamestring equals assert true asserttrue envp get value getvalue stringify value stringifyvalue envp get value getvalue stringify value stringifyvalue equals tear down teardown exception tear down teardown