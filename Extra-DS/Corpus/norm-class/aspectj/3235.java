copyright palo alto center incorporated parc contributors rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors parc initial implementation org aspectj internal tools build java file java file filter filefilter java input stream inputstream java util array list arraylist java util arrays java util collections java util iterator java util list java util list iterator listiterator java util properties java util string tokenizer stringtokenizer org apache tools ant build exception buildexception org aspectj internal tools build result kind template build eclipse modules weakly products including required modules building modules assumes module base module directory module directories base workspace directory target module jar module name modulename jar module directory code classpath code file parseable entries eclipse xml conventions code builder resource pattern code identifies resources copy output safely trim test code source directories named testsrc libraries named junit jar required modules names start testing file code module dir moduledir module name modulename properties code property file entries defining requirements merged output jar deprecated mechanism assemble all assembleall products control compile assembly process clients harvest code module dir moduledir bin code directories eclipse compiles building products assumes installer resources directory peer products directory parent product directory dist jar product base module directory product distribution consists files dist directory product directory files dist directory empty jar represent modules build named aliases assembling distribution binary files filtered product installer aspectj product name productname version jar product name productname base product directory main string relevant ant libraries properties defined written compile standalone refactor utils bridge builder weak forms build instructions needed resource pattern compiler selection control assumed generated paths scattered xxxname literal xxxnameliteral xxxfile literal xxxfileliteral builder supposed thread safe caches build properties tunnel filters hmm string resource pattern string binary source pattern string pattern enable copy filter semantics filter disable copy filter semantics filter define libraries skip comma delimited values key string skip libraries key skip libraries list string names libraries skip assembly list skip libraries string error key error loading properties properties props props properties list skips collections empty list string resource pattern resourcepattern txt rsc gif properties string all pattern allpattern string binary source pattern binarysourcepattern rsc gif jar zip string builder get name getname replace properties input stream inputstream builder get class loader getclassloader get resource as stream getresourceasstream props load all pattern allpattern props get property getproperty pattern resource pattern resourcepattern props get property getproperty resource pattern binary source pattern binarysourcepattern props get property getproperty binary source binarysource pattern skips comma strings commastrings props get property getproperty skip libraries key throwable thread death threaddeath thread death threaddeath string error loading get class getclass props set property setproperty error key skip libraries skips pattern all pattern allpattern binary source pattern binary source pattern binarysourcepattern resource pattern resource pattern resourcepattern splits strings unmodifable code list code string comma delimiter trimming whitespace result param text code string code split unmodifiable list string string delimited comma text list comma strings commastrings string text text text length collections empty list list strings array list arraylist string tokenizer stringtokenizer tok string tokenizer stringtokenizer text tok has more tokens hasmoretokens string token tok next token nexttoken trim token length strings add token collections unmodifiable list unmodifiablelist strings map delivered jar created module param jar name jarname string lowercased jar zip map string module alias for modulealiasfor string jar name jarname string result props get property getproperty alias jar name jarname jar name jarname verbose result equals jar name jarname string expected alias jar name jarname handler error props get property getproperty error key result messager handler building enabled buildingenabled file temp dir tempdir array list arraylist temp files tempfiles use eclipse compiles useeclipsecompiles verbose builder file temp dir tempdir use eclipse compiles useeclipsecompiles messager handler util iax if null iaxifnull handler handler use eclipse compiles useeclipsecompiles use eclipse compiles useeclipsecompiles handler handler temp files tempfiles array list arraylist temp dir tempdir temp dir tempdir can write canwrite temp dir tempdir is directory isdirectory temp dir tempdir util make temp dir maketempdir builder temp dir tempdir temp dir tempdir building enabled buildingenabled builder set building enabled setbuildingenabled enabled building enabled buildingenabled enabled set verbose setverbose verbose verbose verbose verify build spec verifybuildspec build spec buildspec build spec buildspec build spec buildspec product dir productdir derive module dir moduledir base dir basedir module build spec buildspec module dir moduledir build spec buildspec base dir basedir build exception buildexception require base dir basedir module dir moduledir build spec buildspec module build exception buildexception require module base dir basedir build spec buildspec base dir basedir user build spec buildspec base dir basedir file build spec buildspec module dir moduledir file build spec buildspec base dir basedir build spec buildspec module build spec buildspec base dir basedir derive base dir basedir module dir moduledir parent build spec buildspec base dir basedir build spec buildspec module dir moduledir get parent file getparentfile rule base parent build spec buildspec base dir basedir user build spec buildspec base dir basedir file handler log builder derived base dir basedir build spec buildspec base dir basedir util iax if not can read dir iaxifnotcanreaddir build spec buildspec module dir moduledir module dir moduledir build spec buildspec module derive module directory build spec buildspec module build spec buildspec module dir moduledir get name getname build spec buildspec module build exception buildexception build spec buildspec module dir moduledir find result module modules build spec buildspec result specify result for specifyresultfor build spec buildspec build spec buildspec build spec buildspec trim testing trimtesting build spec buildspec module index of indexof testing xxxname literal xxxnameliteral string warning warning trim testing trimtesting testing modules handler log warning build spec buildspec module messager handler messager modules modules modules build spec buildspec base dir basedir build spec buildspec jar dir jardir handler module module to build moduletobuild modules get module getmodule build spec buildspec module kind kind result kind build spec buildspec trim testing trimtesting build spec buildspec assemble all assembleall module to build moduletobuild get result getresult kind build build spec buildspec build spec buildspec building enabled buildingenabled verify build spec verifybuildspec build spec buildspec build spec buildspec product dir productdir build product buildproduct build spec buildspec result result specify result for specifyresultfor build spec buildspec array list arraylist errors array list arraylist build all buildall result errors errors size string label error building build spec buildspec iterator iter errors iterator iter has next hasnext string label iter handler error clean temporary files build completes cleanup no err noerr list iterator listiterator iter temp files tempfiles list iterator listiterator iter has next hasnext file file file iter util delete contents deletecontents file file delete no err noerr no err noerr handler log unable clean file no err noerr is logging islogging verbose handler result skip uptodate skipuptodate result result result result length length out of date outofdate length result newdone result system arraycopy newdone newdone length newdone build result antecedants param result result build param errors list sink errors successful build module jar exist build all buildall result result list errors result build list buildlist skip uptodate skipuptodate get antecedant results getantecedantresults result array list arraylist done list donelist array list arraylist build list buildlist build list buildlist length is logging islogging handler log modules build arrays as list aslist build list buildlist build list buildlist length result required build list buildlist building enabled buildingenabled string required name requiredname required get name getname done list donelist required name requiredname done list donelist add required name requiredname build only buildonly required errors build module antecedants param module module build param errors list sink errors successful build module jar exist build only buildonly result result list errors result out of date outofdate is logging islogging handler log building result building enabled buildingenabled result get kind getkind assemble assemble all assembleall result handler module module result get module getmodule file classes dir classesdir use eclipse compiles useeclipsecompiles file literal fileliteral classes dir classesdir file module module dir moduledir bin string classes system current time millis currenttimemillis classes dir classesdir file temp dir tempdir verbose handler log build only buildonly module compile result classes dir classesdir use eclipse compiles useeclipsecompiles errors assemble result classes dir classesdir errors use eclipse compiles useeclipsecompiles util delete classes dir classesdir errors add build only buildonly unable delete classes dir classesdir register temporary file directory deleted build complete exception thrown add temp file addtempfile file temp file tempfile temp file tempfile temp files tempfiles add temp file tempfile build product discovering modules build building assembling product distribution optionally creating installer success build product buildproduct build spec buildspec build spec buildspec build exception buildexception util iax if null iaxifnull build spec buildspec build spec buildspec build spec buildspec trim testing trimtesting build spec buildspec trim testing trimtesting handler log testing trimmed build spec buildspec util iax if not can read dir iaxifnotcanreaddir build spec buildspec product dir productdir product dir productdir util iax if not can read dir iaxifnotcanreaddir build spec buildspec base dir basedir base dir basedir util iax if not can write dir iaxifnotcanwritedir build spec buildspec dist dir distdir dist dir distdir discover modules build build modules modules modules build spec buildspec base dir basedir build spec buildspec jar dir jardir handler product module productmodule product modules productmodules discover modules discovermodules build spec buildspec product dir productdir modules product modules productmodules length build spec buildspec verbose handler log building product module product modules productmodules build product module buildproductmodule product modules productmodules build spec buildspec verbose handler log assembling product module build spec buildspec assemble product distribution string product name productname build spec buildspec product dir productdir get name getname file targ dir targdir file build spec buildspec dist dir distdir product name productname string targ dir path targdirpath targ dir targdir get path getpath targ dir targdir can write canwrite util delete contents deletecontents targ dir targdir targ dir targdir can write canwrite targ dir targdir mkdirs build spec buildspec verbose handler log build product buildproduct unable create targ dir targdir copy binaries filter file dist dir distdir file build spec buildspec product dir productdir dist copy non binaries copynonbinaries build spec buildspec dist dir distdir targ dir targdir copy binaries module flag files string excludes string buffer stringbuffer buf string buffer stringbuffer product modules productmodules length buf length buf append buf append product modules productmodules relative path relativepath buf length excludes buf to string tostring copy binaries copybinaries build spec buildspec dist dir distdir targ dir targdir excludes copy binaries module flag files product modules productmodules length product module productmodule product product modules productmodules kind kind result kind result normal product assemble all assembleall result result product module get result getresult kind string targ path targpath util path targ dir path targdirpath product relative path relativepath file jar file jarfile result get output file getoutputfile copy file copyfile jar file jarfile file targ path targpath filter handler log created product targ dir targdir create installer build spec buildspec create installer createinstaller build installer buildinstaller build spec buildspec targ dir path targdirpath copy binaries copybinaries build spec buildspec build spec buildspec file dist dir distdir file targ dir targdir string excludes string includes builder binary source pattern copy files copyfiles dist dir distdir targ dir targdir includes excludes filter filter copy binaries copy non binaries copynonbinaries build spec buildspec build spec buildspec file dist dir distdir file targ dir targdir string excludes builder binary source pattern string includes builder pattern copy files copyfiles dist dir distdir targ dir targdir includes excludes filter build product module buildproductmodule product module productmodule module no rebuild norebuild array list arraylist errors array list arraylist kind product kind productkind result kind result normal result assemble result result module module get result getresult product kind productkind build all buildall result errors iterator iter errors iterator iter has next hasnext handler error error building module iter discover modules built order assemble product distribution interprets empty jar files module deliverables product module productmodule discover modules discovermodules file product dir productdir modules modules array list arraylist array list arraylist file filter filefilter filter empty jar files file filter filefilter accept file file file file can read canread xxxfile literal xxxfileliteral file get path getpath ends with endswith jar file length add file util visit files visitfiles product dir productdir filter array list arraylist array list arraylist iterator iter iterator iter has next hasnext file file file iter string jar name jarname module alias for modulealiasfor file get name getname to lower case tolowercase jar name jarname ends with endswith jar jar name jarname ends with endswith zip xxxfile literal xxxfileliteral jar name jarname jar name jarname substring jar name jarname length handler log replace jar zip file xxx error assemble all assembleall jar name jarname ends with endswith xxxfile literal xxxfileliteral string assemble all assembleall jar name jarname jar name jarname substring jar name jarname length module module modules get module getmodule module handler log unable find module file add product module productmodule product dir productdir file module assemble all assembleall product module productmodule to array toarray product module productmodule subclasses query include library files assembly param module module built param libraries list file path jar assembling jar included remove library files to skip removelibraryfilestoskip module module list libraries list iterator listiterator liter libraries list iterator listiterator liter has next hasnext file library file liter string fname library get name getname fname iterator iter skip libraries iterator iter has next hasnext string string iter fname equals liter remove string names build module result get antecedant results getantecedantresults result to build tobuild compile module classes classes dir classesdir saving string errors param module module compile param classes dir classesdir file directory compile param use existing classes useexistingclasses don recompile ensure classes param errors list add error messages compile result result file classes dir classesdir use existing classes useexistingclasses list errors assemble module distribution classes dir classesdir saving string errors remove library files to skip removelibraryfilestoskip module file assemble result result file classes dir classesdir list errors assemble module distribution classes dir classesdir antecendants saving string errors remove library files to skip removelibraryfilestoskip module file assemble all assembleall result result messager handler generate installer product targ dir path targdirpath build installer buildinstaller build spec buildspec build spec buildspec string targ dir path targdirpath copy from file fromfile to file tofile optionally filtering contents copy file copyfile file from file fromfile file to file tofile filter copy to dir todir from dir fromdir included files exluded files optionally filtering contents param from dir fromdir file dir read error readable param to dir todir file dir write error writable param included string ant pattern included files include param excluded string ant pattern excluded files exclude param filter filter filter file contents global token pairs copy files copyfiles file from dir fromdir file to dir todir string included string excluded filter