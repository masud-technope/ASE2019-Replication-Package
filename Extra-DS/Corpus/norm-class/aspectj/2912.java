copyright xerox corporation palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj util java byte array input stream bytearrayinputstream java byte array output stream bytearrayoutputstream java file java filename filter filenamefilter java ioexception java input stream inputstream java output stream outputstream java print stream printstream java string buffer input stream stringbufferinputstream java net url java util array list arraylist java util arrays java util collections java util iterator java util list java util list iterator listiterator junit framework test case testcase junit textui test runner testrunner file util test fileutiltest test case testcase string string log main string args test runner testrunner main string org aspectj util file util test fileutiltest assert same assertsame string prefix string lhs string rhs xxx cheap diff string src paths srcpaths lang util langutil array as list arrayaslist lhs to string tostring string dest paths destpaths lang util langutil array as list arrayaslist rhs to string tostring src paths srcpaths equals dest paths destpaths log expected src paths srcpaths log actual dest paths destpaths assert true asserttrue prefix expected src paths srcpaths actual dest paths destpaths verify dir files names names files dir contents dir excluding files assertion failed error assertionfailederror names dir string dir contains dircontains file dir string filenames array list arraylist sought array list arraylist lang util langutil array as list arrayaslist filenames filename filter filenamefilter filter filename filter filenamefilter accept file string sought remove remove sought remainder string dir list filter sought size assert true asserttrue lang util langutil array as list arrayaslist dir list to string tostring expected sought length sorted string paths files dirs dir string dir paths dirpaths file dir dir paths dirpaths dir string sorted string paths files dirs dir files names starting directory paths cvs directory prefix path stripped directory pre path cvsignore cvs root repository base java parc messages properties org aspectj version java pre call pre dir paths dirpaths file path string pre returns pre base java parc messages properties org aspectj version java pre call pre dir paths dirpaths file path string java pre returns pre base java org aspectj version java pre param dir file path directory inspect param suffixes empty require files returned suffix sorted string paths files dir listed suffixes starting string dir paths dirpaths file dir string suffixes array list arraylist result array list arraylist do dir paths dodirpaths dir result suffixes required remove suffixes lang util langutil is empty isempty suffixes list iterator listiterator iter result list iterator listiterator iter has next hasnext string path iter to string tostring has suffix hassuffix has suffix hassuffix suffixes length has suffix hassuffix path ends with endswith suffixes has suffix hassuffix iter remove collections sort result trim prefix string prefix dir get path getpath directory separator len prefix length string string result to array toarray string length assert true asserttrue starts with startswith prefix assert true asserttrue length len substring len param dir file read directory cvs path param use suffix usesuffix dir suffix path do dir paths dodirpaths file dir array list arraylist paths dir dir can read canread dir get path getpath index of indexof cvs file files dir list files listfiles files length string path files get path getpath files get name getname starts with startswith files is file isfile paths add path files is directory isdirectory do dir paths dodirpaths files paths log file dir dir path print logging enabled log string log system err println list file files directories delete exiting array list arraylist temp files tempfiles file util test fileutiltest string temp files tempfiles array list arraylist tear down teardown list iterator listiterator iter temp files tempfiles list iterator listiterator iter has next hasnext file dir file iter log removing dir file util fileutil delete contents deletecontents dir dir delete iter remove test not is file is directory testnotisfileisdirectory file no such file nosuchfile file foo assert true asserttrue no such file nosuchfile is file isfile assert true asserttrue no such file nosuchfile is directory isdirectory test get best file testgetbestfile assert null assertnull file util fileutil get best file getbestfile string assert null assertnull file util fileutil get best file getbestfile string assert null assertnull file util fileutil get best file getbestfile string file file util fileutil get best file getbestfile string assert not null assertnotnull file util fileutil get best file getbestfile string assert not null assertnotnull assert true asserttrue can read canread set property setproperty system set property setproperty bestfile set property setproperty throwable set property setproperty file util fileutil get best file getbestfile string bestfile assert not null assertnotnull assert true asserttrue can read canread test copy files testcopyfiles bad input iax class iaxclass illegal argument exception illegalargumentexception check copy files checkcopyfiles iax class iaxclass file no such file nosuchfile file foo check copy files checkcopyfiles no such file nosuchfile iax class iaxclass check copy files checkcopyfiles no such file nosuchfile no such file nosuchfile iax class iaxclass file temp dir tempdir file util fileutil get temp dir gettempdir test copy files testcopyfiles temp files tempfiles add temp dir tempdir file from file fromfile file temp dir tempdir from file fromfile string err file util fileutil write as string writeasstring from file fromfile contents file assert true asserttrue err err check copy files checkcopyfiles from file fromfile iax class iaxclass check copy files checkcopyfiles from file fromfile from file fromfile iax class iaxclass file file file to file tofile file temp dir tempdir to file tofile check copy files checkcopyfiles from file fromfile to file tofile file dir file to dir todir file temp dir tempdir to dir todir assert true asserttrue to dir todir mkdirs check copy files checkcopyfiles from file fromfile to dir todir dir dir file from dir fromdir file temp dir tempdir from dir fromdir assert true asserttrue from dir fromdir mkdirs check copy files checkcopyfiles from file fromfile from dir fromdir file to file tofile file from dir fromdir to file tofile check copy files checkcopyfiles from file fromfile to file tofile check copy files checkcopyfiles from dir fromdir to dir todir check copy files checkcopyfiles file file exception class exceptionclass clean file util fileutil copy file copyfile assert true asserttrue exception class exceptionclass is file isfile xxx cheap test assert true asserttrue length length is directory isdirectory file to file tofile file get name getname assert true asserttrue length to file tofile length dir dir to dir todir created contents from dir fromdir assert true asserttrue exists assert true asserttrue list files listfiles length list files listfiles length throwable assert true asserttrue exception class exceptionclass assert true asserttrue exception class exceptionclass is assignable from isassignablefrom get class getclass clean exists is directory isdirectory file util fileutil delete contents deletecontents delete test dir copy subdirs testdircopysubdirs ioexception file src dir srcdir file src file dest dir destdir file util fileutil get temp dir gettempdir test dir copy subdirs testdircopysubdirs temp files tempfiles add dest dir destdir file util fileutil copy dir copydir src dir srcdir dest dir destdir assert same assertsame test dir copy subdirs testdircopysubdirs dir paths dirpaths src dir srcdir dir paths dirpaths dest dir destdir test dir copy subdirs suffix testdircopysubdirssuffix ioexception file src dir srcdir file src file dest dir destdir file util fileutil get temp dir gettempdir test dir copy subdirs suffix testdircopysubdirssuffix temp files tempfiles add dest dir destdir file util fileutil copy dir copydir src dir srcdir dest dir destdir java string sources dir paths dirpaths src dir srcdir string java sources length sources sources substring sources length string sinks dir paths dirpaths dest dir destdir string sinks length sinks sinks substring sinks length assert same assertsame test dir copy subdirs testdircopysubdirs sources sinks test get url testgeturl string args string util testdata lib test aspectjrt jar args length check get url checkgeturl args method check get url checkgeturl param string param u rl url check get url checkgeturl string arg assert true asserttrue arg file file arg assert true asserttrue url url file util fileutil get file url getfileurl assert true asserttrue url log url url exists log exist is directory isdirectory log directory log file input stream inputstream url open stream openstream ioexception assert true asserttrue ioexception close ioexception test get temp dir testgettempdir pass delete check get temp dir checkgettempdir parent pass delete check get temp dir checkgettempdir child pass delete temp files tempfiles add check get temp dir checkgettempdir parent child pass delete get parent file getparentfile temp files tempfiles add check get temp dir checkgettempdir parent child pass delete get parent file getparentfile temp files tempfiles add check get temp dir checkgettempdir parent child pass delete get parent file getparentfile file check get temp dir checkgettempdir string parent string child delete file parent dir parentdir file util fileutil get temp dir gettempdir parent assert true asserttrue unable create parent parent dir parentdir file dir file util fileutil make new child dir makenewchilddir parent dir parentdir child log parent parent child child dir assert true asserttrue dir dir dir can write canwrite dir is directory isdirectory delete dir delete parent dir parentdir delete dir test random file string testrandomfilestring array list arraylist array list arraylist string file util fileutil random file string randomfilestring log warning duplicate iteration add system err print system err println test normalized path testnormalizedpath file temp file tempfile temp file tempfile file create temp file createtempfile file util test fileutiltest test normalized path testnormalizedpath tmp temp files tempfiles add temp file tempfile ioexception log aborting test unable create temp file file parent dir parentdir temp file tempfile get parent file getparentfile string temp file path tempfilepath file util fileutil normalized path normalizedpath temp file tempfile parent dir parentdir assert equals assertequals temp file tempfile get name getname temp file path tempfilepath test file to class name testfiletoclassname created file basedir file base dir file class file classfile file basedir foo bar assert equals assertequals foo bar file util fileutil file to class name filetoclassname basedir class file classfile class file classfile file basedir foo bar assert equals assertequals foo bar file util fileutil file to class name filetoclassname basedir class file classfile assert equals assertequals bar file util fileutil file to class name filetoclassname class file classfile class file classfile file classes org aspectj lang join point joinpoint assert equals assertequals org aspectj lang join point joinpoint file util fileutil file to class name filetoclassname class file classfile class file classfile file classes sun tools javac assert equals assertequals sun tools javac file util fileutil file to class name filetoclassname class file classfile test delete contents testdeletecontents file temp dir tempdir file util fileutil get temp dir gettempdir test delete contents testdeletecontents temp files tempfiles add temp dir tempdir file file temp dir tempdir foo mkdirs file file bar mkdirs file file bash mkdirs file util fileutil delete contents deletecontents assert true asserttrue assert true asserttrue list length delete assert true asserttrue exists test line seek testlineseek file temp dir tempdir file util fileutil get temp dir gettempdir test line seek testlineseek temp files tempfiles add temp dir tempdir file file file temp dir tempdir test line seek testlineseek string path file get path getpath string contents lang util langutil eol contents contents file util fileutil write as string writeasstring file contents temp files tempfiles add file list source list sourcelist array list arraylist source list sourcelist add file get path getpath array list arraylist errors array list arraylist print stream printstream error sink errorsink print stream printstream system err println string error errors add error list result file util fileutil line seek lineseek source list sourcelist error sink errorsink assert equals assertequals result size assert equals assertequals path result assert equals assertequals path result lang util langutil is empty isempty errors xxx prefer fast fail assert true asserttrue errors errors test line seek more testlineseekmore max file temp dir tempdir file util fileutil get temp dir gettempdir test line seek more testlineseekmore temp files tempfiles add temp dir tempdir string prefix file temp dir tempdir test line seek testlineseek get path getpath setup files max max lines string sources string max string buffer stringbuffer string buffer stringbuffer sources length sources file prefix get path getpath append matched append lang util langutil eol append append lang util langutil eol string contents to string tostring sources length file file file sources file util fileutil write as string writeasstring file contents temp files tempfiles add file test array list arraylist errors array list arraylist print stream printstream error sink errorsink print stream printstream system err println string error errors add error list source list sourcelist array list arraylist source list sourcelist add all addall arrays as list aslist sources source list sourcelist collections unmodifiable list unmodifiablelist source list sourcelist sources length list result file util fileutil line seek lineseek source list sourcelist error sink errorsink number file iterator iter result iterator max file max assert true asserttrue iter has next hasnext assert equals assertequals prefix iter lang util langutil is empty isempty errors xxx prefer fast fail assert true asserttrue errors errors test dir copy no subdirs testdircopynosubdirs ioexception string src files srcfiles string java java java string dest files destfiles string java java java string all files allfiles string java java java java java file src dir srcdir make temp dir maketempdir file util ut fileutilut src dir srcdir src files srcfiles file dest dir destdir make temp dir maketempdir file util ut fileutilut dest dir destdir dest files destfiles assert true asserttrue src dir srcdir assert true asserttrue dest dir destdir assert true asserttrue dir contains dircontains src dir srcdir src files srcfiles assert true asserttrue dir contains dircontains dest dir destdir dest files destfiles file util fileutil copy dir copydir src dir srcdir dest dir destdir string result one resultone dir contains dircontains dest dir destdir all files allfiles file util fileutil copy dir copydir src dir srcdir dest dir destdir string result two resulttwo dir contains dircontains dest dir destdir all files allfiles assert true asserttrue result one resultone assert true asserttrue result two resulttwo test dir copy no subdirs with suffixes testdircopynosubdirswithsuffixes ioexception string src files srcfiles string java java java string dest files destfiles string java java java string all files allfiles string java java java file src dir srcdir make temp dir maketempdir file util ut fileutilut src dir srcdir src files srcfiles file dest dir destdir make temp dir maketempdir file util ut fileutilut dest dir destdir dest files destfiles assert true asserttrue src dir srcdir assert true asserttrue dest dir destdir assert true asserttrue dir contains dircontains src dir srcdir src files srcfiles assert true asserttrue dir contains dircontains dest dir destdir dest files destfiles file util fileutil copy dir copydir src dir srcdir dest dir destdir java file util fileutil copy dir copydir src dir srcdir dest dir destdir java assert true asserttrue dir contains dircontains dest dir destdir all files allfiles assert true asserttrue dir contains dircontains dest dir destdir all files allfiles test dir copy subdirs suffix round trip testdircopysubdirssuffixroundtrip ioexception file src dir srcdir file src file file util fileutil get temp dir gettempdir test dir copy subdirs suffix round trip testdircopysubdirssuffixroundtrip file file util fileutil get temp dir gettempdir test dir copy subdirs suffix round trip testdircopysubdirssuffixroundtrip selection file util fileutil copy dir copydir src dir srcdir java files file util fileutil copy dir copydir java file util fileutil copy dir copydir java file util fileutil delete contents deletecontents delete file util fileutil delete contents deletecontents delete create temp dir loc temp files files result registered deletion cleanup file make temp dir maketempdir string loc string filenames ioexception file file loc mkdirs assert true asserttrue exists temp files tempfiles add assert true asserttrue can write canwrite filenames length file file filenames assert true asserttrue filenames create new file createnewfile test pipe empty testpipeempty check pipe checkpipe test pipe min testpipemin check pipe checkpipe test pipe testpipe string str quick brown fox jumped lazy dog string buffer stringbuffer string buffer stringbuffer append str check pipe checkpipe to string tostring check pipe checkpipe string data string buffer input stream stringbufferinputstream string buffer input stream stringbufferinputstream data byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream file util fileutil pipe pipe file util fileutil pipe pipe assert true asserttrue data equals to string tostring assert true asserttrue pipe get thrown getthrown assert equals assertequals total written totalwritten data length pipe total written totalwritten test pipe thrown testpipethrown string data quick brown fox jumped lazy dog ioexception thrown ioexception test string buffer input stream stringbufferinputstream string buffer input stream stringbufferinputstream data output stream outputstream output stream outputstream write ioexception thrown file util fileutil pipe pipe file util fileutil pipe pipe assert equals assertequals total written totalwritten pipe total written totalwritten assert true asserttrue thrown pipe get thrown getthrown xtest pipe halt xtestpipehalt test periodically fails build machine disabling time figure max input stream inputstream input stream inputstream max read ioexception max max ioexception test failed min written minwritten flag hit flag flag flag output stream outputstream output stream outputstream max write ioexception max max ioexception test failed max min written minwritten flag hit flag hit result total written totalwritten throwable thrown result result result file util fileutil pipe pipe file util fileutil pipe completing total written totalwritten throwable thrown result total written totalwritten total written totalwritten result thrown thrown result start thread pipe start wait min written minwritten input flag hit thread sleep interrupted exception interruptedexception halt assert true asserttrue pipe halt assert true asserttrue result assert true asserttrue expected result thrown result thrown result thrown assert true asserttrue pipe get thrown getthrown assert equals assertequals total written result total written totalwritten pipe total written totalwritten min written minwritten pipe total written totalwritten assert true asserttrue written pipe total written totalwritten