copyright contributors rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors alexandre vasseur initial implementation ataspectj junit framework test case testcase java lang reflect proxy java lang reflect invocation handler invocationhandler java lang reflect method java lang annotation retention java lang annotation retention policy retentionpolicy java security protection domain protectiondomain java serializable org aspectj lang annotation aspect org aspectj lang annotation org objectweb asm class writer classwriter org objectweb asm opcodes org objectweb asm method visitor methodvisitor org objectweb asm annotation visitor annotationvisitor author href mailto alex gnilux dot alexandre vasseur unweavable test unweavabletest test case testcase test unweavable proxy testunweavableproxy test aspect testaspect isome get proxy getproxy give one giveone assert equals assertequals test aspect testaspect isome give one giveone isome get proxy getproxy isome proxy new proxy instance newproxyinstance isome get class loader getclassloader isome invocation handler invocationhandler object invoke object proxy method method object args throwable integer aspect test aspect testaspect execution ataspectj unweavable test unweavabletest isome give one giveone test jit testjit test aspect testaspect test aspect testaspect isome get jit getjit assert not null assertnotnull get class getclass get annotation getannotation asome assert equals assertequals give one giveone assert equals assertequals test aspect testaspect assert equals assertequals test aspect testaspect test jit not matched testjitnotmatched load jit weaver complains classes coming serializable serial get jit no match getjitnomatch assert equals assertequals serial get class getclass get declared methods getdeclaredmethods length retention retention policy retentionpolicy runtime asome isome get jit getjit class writer classwriter class writer classwriter visit opcodes opcodes acc ataspectj isome gen isomegen java lang object string ataspectj unweavable test unweavabletest isome annotation visitor annotationvisitor visit annotation visitannotation lataspectj unweavable test unweavabletest asome visit end visitend method visitor methodvisitor visit method visitmethod opcodes acc init string visit var insn visitvarinsn opcodes aload visit method insn visitmethodinsn opcodes invokespecial java lang object init visit insn visitinsn opcodes visit maxs visitmaxs visit method visitmethod opcodes acc give one giveone string visit insn visitinsn opcodes iconst visit insn visitinsn opcodes ireturn visit maxs visitmaxs visit end visitend class loader classloader loader get class getclass get class loader getclassloader method def class loader classloader get declared method getdeclaredmethod define class defineclass string def set accessible setaccessible gen def invoke loader ataspectj isome gen isomegen to byte array tobytearray to byte array tobytearray length isome gen new instance newinstance throwable fail to string tostring serializable get jit no match getjitnomatch class writer classwriter class writer classwriter visit opcodes opcodes acc ataspectj unmatched gen java lang object string java serializable method visitor methodvisitor visit method visitmethod opcodes acc init string visit var insn visitvarinsn opcodes aload visit method insn visitmethodinsn opcodes invokespecial java lang object init visit insn visitinsn opcodes visit maxs visitmaxs visit end visitend class loader classloader loader get class getclass get class loader getclassloader method def class loader classloader get declared method getdeclaredmethod define class defineclass string def set accessible setaccessible gen def invoke loader ataspectj unmatched gen to byte array tobytearray to byte array tobytearray length serializable gen new instance newinstance throwable fail to string tostring aspect test aspect testaspect execution ataspectj unweavable test unweavabletest asome ataspectj give one giveone main string args throwable test helper testhelper run and throw on failure runandthrowonfailure suite junit framework test suite junit framework test suite testsuite unweavable test unweavabletest