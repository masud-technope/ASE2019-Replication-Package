copyright xerox corporation palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors parc initial implementation org aspectj ajdt internal compiler batch org aspectj bridge icommand org aspectj bridge imessage org aspectj bridge imessage handler imessagehandler org aspectj bridge imessage holder imessageholder org aspectj bridge isource location isourcelocation org aspectj bridge message org aspectj bridge message handler messagehandler org aspectj bridge reflection factory reflectionfactory org aspectj util file util fileutil org aspectj util lang util langutil java file java file filter filefilter java file input stream fileinputstream java ioexception java util array list arraylist java util arrays java util bit set bitset java util collections java util enumeration java util iterator java util list java util properties stateless incremental test subclass junit incremental case incrementalcase xxx bound junit bridge tests xxx string string string verbose ignore warnings ignorewarnings main string args ioexception incremental case incrementalcase incremental case incrementalcase message handler messagehandler message handler messagehandler result string buffer stringbuffer string buffer stringbuffer args length append args append file args system err flush system flush system err println to string tostring incremental compile copy files src dir srcdir java sandbox compile expects changed files recompiled calls verify compile verifycompile param handler functional feedback exceptions logged abort messages file src base srcbase imessage handler imessagehandler handler ioexception string cname reflection factory reflectionfactory eclipse file target base targetbase make dir makedir get sandbox dir getsandboxdir incremental case sandbox incrementalcasesandbox handler target base targetbase file target src targetsrc make dir makedir target base targetbase src handler target src targetsrc file target classes targetclasses make dir makedir target base targetbase classes handler target classes targetclasses array list arraylist files array list arraylist file filter filefilter collector file filter filefilter accept file file files add file icommand compiler reflection factory reflectionfactory make command makecommand cname handler array list arraylist recompiled result string to suffix tosuffix java string canonical from canonicalfrom src base srcbase get canonical path getcanonicalpath definition defs get definitions getdefinitions src base srcbase defs defs length error definitions message handler messagehandler compiler messages compilermessages message handler messagehandler string buffer stringbuffer command line commandline string buffer stringbuffer result string from suffix fromsuffix java copy files collecting files clear file util fileutil copy dir copydir src base srcbase target src targetsrc from suffix fromsuffix to suffix tosuffix collector xxx detect incomplete files size list safe files safefiles collections unmodifiable list unmodifiablelist files log compiling safe files safefiles handler array list arraylist arg list arglist array list arraylist arg list arglist add all addall get base args getbaseargs target src targetsrc target classes targetclasses file fra file safe files safefiles to array toarray file sigh arg list arglist add all addall arrays as list aslist file util fileutil get absolute paths getabsolutepaths fra string args string arg list arglist to array toarray string command line commandline append arg list arglist result compiler run command runcommand args compiler messages compilermessages recompiled recompiled array list arraylist recompiled clear compiler messages compilermessages init command line commandline append recompiled result compiler repeat command repeatcommand compiler messages compilermessages result verify compile verifycompile result src base srcbase target src targetsrc target classes targetclasses defs compiler messages compilermessages command line commandline handler result test verification verify incremental compile step worked param recompiled list files compiler recompiled pass param files unmodifiable list file passed sources compiler param recompiled list sink files recompiled xxx argh parent child relationship verify compile verifycompile iteration result file src dir srcdir file sandbox src dir sandboxsrcdir file sandbox classes dir sandboxclassesdir definition def imessage holder imessageholder compiler messages compilermessages string buffer stringbuffer command line commandline imessage handler imessagehandler handler log verify compile verifycompile iteration integer iteration handler log verify compile verifycompile def def handler log verify compile verifycompile command command line commandline to string tostring handler log verify compile verifycompile messages compiler messages compilermessages handler string buffer stringbuffer failures string buffer stringbuffer def expect fail expectfail result failures append iteration iteration expected def expect fail expectfail fail pass failures length fail handler n failures nfailures iteration iteration command command line commandline n messages nmessages compiler messages compilermessages def def n failures nfailures failures imessage messages compiler messages compilermessages get messages getmessages imessage error imessage holder imessageholder equal string expected def errors def errors def eclipse errors eclipseerrors have all haveall errors expected messages handler ignore warnings ignorewarnings messages compiler messages compilermessages get messages getmessages imessage warning imessage holder imessageholder equal expected def warnings def warnings def eclipse warnings eclipsewarnings have all haveall warnings expected messages handler test setup sandbox parent directory implementation temporary directory xxx util file get sandbox dir getsandboxdir xxx util ioexception file temp file tempfile file create temp file createtempfile incremental case incrementalcase txt file temp dir tempdir temp file tempfile get parent file getparentfile temp file tempfile delete temp dir tempdir xxx hack file output dir outputdir param src dir srcdir list get base args getbaseargs file src dir srcdir file classes dir classesdir output dir outputdir classes dir classesdir string input string verbose system get property getproperty sun boot path classes dir classesdir get absolute path getabsolutepath collections unmodifiable list unmodifiablelist array list arraylist arrays as list aslist input file make dir makedir file parent string xxx util imessage handler imessagehandler handler file result file parent result exists result mkdirs result exists fail handler unable create result result test verification list normalize filenames normalizefilenames string xxx util array list arraylist result array list arraylist length result add normalize filename normalizefilename length collections sort result result param list list file list normalize filenames normalizefilenames list list xxx util array list arraylist result array list arraylist iterator iter list iterator iter has next hasnext result add normalize filename normalizefilename file iter get path getpath collections sort result result string normalize filename normalizefilename string xxx error prone string suffix java loc last index of lastindexof suffix loc punt substring loc suffix length replace loc last index of lastindexof loc substring loc have all haveall string label string expected imessage messages imessage handler imessagehandler handler expected expected string result exp expected length string buffer stringbuffer string buffer stringbuffer append exp length string expected loc last index of lastindexof loc substring loc exp integer value of valueof int value intvalue append exp exp length number format exception numberformatexception info handler bad label expected append bad exp length append string context label context have all haveall expected arrays as list aslist expected exp actual arrays as list aslist messages info handler context bit set bitset found set foundset bit set bitset exp length exp line expline exp messages length isource location isourcelocation messages get source location getsourcelocation exp line expline get line getline info handler label exp found set foundset info handler duplicate label expected exp found set foundset string expected label exp context fail handler result result set length setlength messages length found set foundset append unexpected label messages length fail handler to string tostring context log string label object imessage handler imessagehandler handler verbose handler message imessage info label handler system err println nlog label info imessage handler imessagehandler handler string mssg message imessage info mssg handler fail imessage handler imessagehandler handler string mssg message imessage fail mssg handler message imessage kind kind string mssg imessage handler imessagehandler handler handler handler handle message handlemessage message mssg kind definition get definitions getdefinitions file src base srcbase file file file src base srcbase definition path properties props properties file input stream fileinputstream file input stream fileinputstream file props load ioexception print stack trace printstacktrace system err close ioexception definition result definition result definition props result definition string path expected txt expect fail expectfail string prefix string files string recompiled string errors string warnings string eclipse errors eclipseerrors string eclipse warnings eclipsewarnings definition string prefix properties props prefix prefix files props prefix files recompiled props prefix recompiled errors props prefix errors warnings props prefix warnings eclipse errors eclipseerrors props prefix eclipse errors eclipse warnings eclipsewarnings props prefix eclipse warnings expect fail expectfail errors errors length eclipse errors eclipseerrors eclipse errors eclipseerrors length string properties props string key string props get property getproperty key lang util langutil split string to string tostring definition expect fail expectfail expect fail expectfail prefix prefix files safe files recompiled safe recompiled errors safe errors warnings safe warnings eclipse errors eclipseerrors safe eclipse errors eclipseerrors eclipse warnings eclipsewarnings safe eclipse warnings eclipsewarnings string safe string arrays as list aslist