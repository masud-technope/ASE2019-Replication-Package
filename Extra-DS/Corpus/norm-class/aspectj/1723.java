copyright xerox corporation palo alto center incorporated parc contributors rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj internal build java file java ioexception java util array list arraylist java util arrays java util enumeration java util iterator java util zip zip entry zipentry java util zip zip exception zipexception java util zip zip file zipfile junit framework test case testcase org apache tools ant build exception buildexception org apache tools ant project org apache tools ant taskdefs java org apache tools ant types path org apache tools ant types commandline argument org aspectj internal tools ant taskdefs build module buildmodule org aspectj internal tools ant taskdefs checklics org aspectj internal tools build util test integrated taskdef build responds environment variables build tests defined tests build tree minutes build config takes form builder task use eclipse compiles useeclipsecompiles avoid recompiling javac adopt classes module bin directories build module test buildmoduletest test case testcase print info messages printinfomessages printed message printedmessage remove jars debugging build module verbosely string debugs skip requiring ajdoc requires tools jar skip requiring java manually skip big avoid slowing build string skips aspectjtools ajdoc aspectj junit tests ajbrowser testing testing drivers org aspectj ajdt core weaver string skip message build module test buildmoduletest define build tests system property tests build string build config use eclipse compiles useeclipsecompiles use eclipse useeclipse string config config system get property getproperty build config use eclipse useeclipse config config index of indexof use eclipse compiles useeclipsecompiles throwable use eclipse compiles useeclipsecompiles use eclipse useeclipse build config config print info messages printinfomessages system println build module test buildmoduletest build config config array list arraylist temp files tempfiles array list arraylist file jar dir jardir delete jars deletejars enabled tests building build module test buildmoduletest string building get boolean getboolean build tests set up setup change view prior output todo delete jars deletejars tear down teardown exception tear down teardown debugging remove jars debugging temp files tempfiles size system err println debugging files left temp files tempfiles delete temp files deletetempfiles delete temp files deletetempfiles iterator iter temp files tempfiles iterator iter has next hasnext file file file iter util delete file file list file list files listfiles util is empty isempty list string buffer stringbuffer string buffer stringbuffer append warning build module test buildmoduletest unable delete append file to string tostring xxx platform append list length append append list to string tostring xxx platform append system err println to string tostring test all junit tests testalljunittests check build checkbuild junit tests test build testbuild check build checkbuild build checklics get name getname message string ant needed test util testutil check build checkbuild util test asm testasm check build checkbuild asm test runtime testruntime check build checkbuild runtime test aspectj testaspectj check build checkbuild aspectj test local out of date testlocaloutofdate messager handler messager file jar dir jardir file head build jars file base dir basedir file head modules mods modules base dir basedir jar dir jardir handler module module mods get module getmodule ajbrowser result module get result getresult result kind out of date outofdate test aspectj testaspectj rt required rtrequired file base dir basedir file modules modules modules base dir basedir get jar dir getjardir messager module module modules get module getmodule aspectj result result module get result getresult result kind result result get required getrequired system println result to long string tolongstring system println arrays as list aslist delete temp files deletetempfiles test no duplicates testnoduplicates file weaver all jar weaveralljar weaver all jar weaveralljar do task dotask weaver throwable system err println get class getclass test no duplicates testnoduplicates incomplete print stack trace printstacktrace system err string dup error duperror duplicate entry error duplicateentryerror weaver all jar weaveralljar weaver all jar weaveralljar delete dup error duperror fail dup error duperror test ajbrowser testajbrowser check build checkbuild ajbrowser org aspectj tools ajbrowser main compiler version string no exit noexit version test testing utils testtestingutils check build checkbuild testing util test ajdt testajdt check build checkbuild org aspectj ajdt core org aspectj tools ajc main string no exit noexit version test testing testtesting check build checkbuild testing org aspectj testing util lang util test langutiltest string test testing drivers testtestingdrivers check build checkbuild testing drivers org aspectj testing drivers harness string test weaver testweaver check build checkbuild weaver ajdoc relies tools jar test aspectjtools testaspectjtools should build shouldbuild aspectjtools file base dir basedir file file temp build dir tempbuilddir file base dir basedir build file dist dir distdir file temp build dir tempbuilddir dist file jar dir jardir file temp build dir tempbuilddir jars assert true asserttrue dist dir distdir can write canwrite dist dir distdir mkdirs file product dir productdir file base dir basedir get path getpath build products tools assert true asserttrue product dir productdir product dir productdir can read canread check build product checkbuildproduct product dir productdir base dir basedir dist dir distdir jar dir jardir check build product checkbuildproduct file product dir productdir file base dir basedir file dist dir distdir file jar dir jardir should build shouldbuild product dir productdir get path getpath assert true asserttrue product dir productdir assert true asserttrue product dir productdir can read canread check javac checkjavac build module buildmodule task build module buildmodule project project project task set project setproject project assert true asserttrue jar dir jardir can write canwrite jar dir jardir mkdirs temp files tempfiles add jar dir jardir task set jardir setjardir path project jar dir jardir get absolute path getabsolutepath task set productdir setproductdir path project product dir productdir get absolute path getabsolutepath task set basedir setbasedir path project base dir basedir get absolute path getabsolutepath task set distdir setdistdir path project dist dir distdir get absolute path getabsolutepath task set failonerror setfailonerror build config task set build config setbuildconfig build config task set verbose setverbose task set createinstaller setcreateinstaller task execute installer product tests file get ant jar getantjar file lib ant lib ant jar file get junit jar getjunitjar file lib junit junit jar file get jar dir getjardir jar dir jardir file base dir basedir file build base dir basedir can write canwrite base dir basedir file jar dir jardir file base dir basedir build module test buildmoduletest jars temp files tempfiles add jar dir jardir jar dir jardir exists assert true asserttrue jar dir jardir mkdirs jar dir jardir build module buildmodule get task gettask string module build module buildmodule task build module buildmodule project project project task set project setproject project file jar dir jardir get jar dir getjardir assert true asserttrue jar dir jardir can write canwrite jar dir jardir mkdirs temp files tempfiles add jar dir jardir file module dir moduledir file util path module assert true asserttrue module dir moduledir can read canread task set moduledir setmoduledir path project module dir moduledir get absolute path getabsolutepath task set jardir setjardir path project jar dir jardir get absolute path getabsolutepath task set failonerror setfailonerror build config task set build config setbuildconfig build config task check build checkbuild string module check build checkbuild module check build checkbuild string module string classname string args check build checkbuild module classname args should build shouldbuild string target target building printed message printedmessage system err println skip message target warning printed message printedmessage debugging debugs length target equals debugs skips length skips equals target print info messages printinfomessages system err println target skipped build test get class getclass get name getname should build shouldbuild building debugging debugs debugs length string duplicate entry error duplicateentryerror file weaver all jar weaveralljar zip file zipfile zip file zipfile zip file zipfile zip file zipfile weaver all jar weaveralljar enumeration zip file zipfile entries array list arraylist entry names entrynames array list arraylist has more elements hasmoreelements zip entry zipentry entry zip entry zipentry next element nextelement string entry get name getname entry names entrynames duplicate entry entry names entrynames add zip exception zipexception zip exception zipexception ioexception ioexception zip file zipfile zip file zipfile close ioexception ioexception closing zip file zipfile string string module trim testing trimtesting assemble module trim testing trimtesting test assemble delete jar deletejar file jar delete jars deletejars jar exists jar delete jar exists thread sleep throwable jar exists assert true asserttrue delete jar jar delete check build checkbuild string module string classname string args add ant addant should build shouldbuild module assert true asserttrue module check javac checkjavac do task dotask module do task dotask module do task dotask module file jar do task dotask module verify classname java java java project project project java set project setproject project java set failonerror setfailonerror path path project assert true asserttrue jar can read canread append path project jar get absolute path getabsolutepath add ant addant append path project get ant jar getantjar get absolute path getabsolutepath append path project get junit jar getjunitjar get absolute path getabsolutepath java set classpath setclasspath java set classname setclassname classname args args length argument arg java create arg createarg arg set value setvalue args java execute build exception buildexception print stack trace printstacktrace system err assert true asserttrue build exception buildexception running classname delete jar deletejar jar do task dotask string module trim testing trimtesting assemble all assembleall do task dotask module trim testing trimtesting assemble all assembleall file do task dotask string module trim testing trimtesting assemble all assembleall keep jars keepjars build module buildmodule task get task gettask module string module trim testing trimtesting assemble all assembleall file jar file get jar dir getjardir jar task set assembleall setassembleall assemble all assembleall task set trimtesting settrimtesting trim testing trimtesting task execute jar can read canread file files get jar dir getjardir list files listfiles fail read jar arrays as list aslist files keep jars keepjars delete jars deletejars delete temp files deletetempfiles jar check javac checkjavac result result for name forname sun tools javac main throwable result assert true asserttrue add tools jar classpath ant javac