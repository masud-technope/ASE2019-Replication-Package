copyright contributors rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors isberg initial implementation org aspectj util java byte array output stream bytearrayoutputstream java file java file input stream fileinputstream java ioexception java input stream inputstream java net url java net urlclass loader urlclassloader java util array list arraylist java util arrays java util collections java util iterator java util list load classes file file dirs url jars util class loader utilclassloader urlclass loader urlclassloader seek classes dirs list file dirs save url to string tostring url urls for debug string urlsfordebugstring util class loader utilclassloader url urls file dirs urls lang util langutil throw iax if not assignable throwiaxifnotassignable dirs file dirs urls for debug string urlsfordebugstring urls array list arraylist dcopy array list arraylist lang util langutil is empty isempty dirs dcopy add all addall arrays as list aslist dirs dirs collections unmodifiable list unmodifiablelist dcopy url get resource getresource string class loader classloader get system resource getsystemresource input stream inputstream get resource as stream getresourceasstream string class loader classloader get system resource as stream getsystemresourceasstream load class loadclass string resolve class not found exception classnotfoundexception search cache dirs test system superclass url dirs test class not found exception classnotfoundexception thrown result find loaded class findloadedclass result resolve result find system class findsystemclass class not found exception classnotfoundexception thrown result result load class loadclass resolve class not found exception classnotfoundexception thrown result resolved superclass result result data read class readclass data result define class defineclass data data length handle class format error classformaterror result thrown thrown class not found exception classnotfoundexception resolve resolve class resolveclass result result read class readclass string class name classname class not found exception classnotfoundexception string file name filename class name classname replace iterator iter dirs iterator iter has next hasnext file file file file iter file name filename file can read canread get class data getclassdata file get class data getclassdata file file input stream fileinputstream stream file input stream fileinputstream byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream stream read write stream close close to byte array tobytearray ioexception string debug info urls classes string to string tostring util class loader utilclassloader urls arrays as list aslist urls for debug string urlsfordebugstring dirs dirs