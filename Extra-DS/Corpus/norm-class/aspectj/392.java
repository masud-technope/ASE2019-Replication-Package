copyright contributors rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors initial implementation alexandre vasseur org aspectj weaver bcel org aspectj apache bcel constants org aspectj apache bcel athrow org aspectj apache bcel branch instruction branchinstruction org aspectj apache bcel instruction constants instructionconstants org aspectj apache bcel instruction factory instructionfactory org aspectj apache bcel instruction handle instructionhandle org aspectj apache bcel instruction list instructionlist org aspectj apache bcel nop org aspectj apache bcel object type objecttype org aspectj apache bcel pop org aspectj apache bcel push org aspectj apache bcel reference type referencetype org aspectj apache bcel type org aspectj weaver aj attribute ajattribute org aspectj weaver ajc member maker ajcmembermaker org aspectj weaver member org aspectj weaver name mangler namemangler org aspectj weaver resolved member resolvedmember org aspectj weaver resolved type resolvedtype org aspectj weaver unresolved type unresolvedtype org aspectj weaver patterns per clause perclause adds aspect of aspectof has aspect hasaspect annotation defined aspects author href mailto alex gnilux dot alexandre vasseur bcel per clause aspect adder bcelperclauseaspectadder bcel type munger bceltypemunger per clause perclause kind kind has generated inner hasgeneratedinner bcel per clause aspect adder bcelperclauseaspectadder resolved type resolvedtype aspect per clause perclause kind kind aspect kind kind kind per clause perclause singleton kind per clause perclause pertypewithin kind per clause perclause percflow needed has generated inner hasgeneratedinner munge bcel class weaver bcelclassweaver weaver lazy class gen lazyclassgen gen weaver get lazy class gen getlazyclassgen do aggressive inner doaggressiveinner gen munge aspect type gen get type gettype equals aspect type aspecttype do munge domunge gen force munge forcemunge lazy class gen lazyclassgen gen check already there checkalreadythere do aggressive inner doaggressiveinner gen do munge domunge gen check already there checkalreadythere do aggressive inner doaggressiveinner lazy class gen lazyclassgen gen weaved impl defined has generated inner hasgeneratedinner kind per clause perclause perobject redundant test constructor safer unresolved type unresolvedtype interface type x interfacetypex ajc member maker ajcmembermaker per object interface type perobjectinterfacetype aspect type aspecttype lazy class gen lazyclassgen interface gen interfacegen lazy class gen lazyclassgen interface type x interfacetypex get name getname java lang object constants acc constants acc constants acc string get world getworld interface gen interfacegen add method gen addmethodgen make method gen makemethodgen interface gen interfacegen ajc member maker ajcmembermaker per object interface get perobjectinterfaceget aspect type aspecttype interface gen interfacegen add method gen addmethodgen make method gen makemethodgen interface gen interfacegen ajc member maker ajcmembermaker per object interface set perobjectinterfaceset aspect type aspecttype matter pass ltw gen add generated inner addgeneratedinner interface gen interfacegen has generated inner hasgeneratedinner do munge domunge lazy class gen lazyclassgen gen check already there checkalreadythere check already there checkalreadythere has per clause members already hasperclausemembersalready gen generate per clause members generateperclausemembers gen kind per clause perclause singleton generate per singleton aspect of method generatepersingletonaspectofmethod gen generate per singleton has aspect method generatepersingletonhasaspectmethod gen generate per singleton ajc clinit method generatepersingletonajcclinitmethod gen kind per clause perclause perobject generate per object aspect of method generateperobjectaspectofmethod gen generate per object has aspect method generateperobjecthasaspectmethod gen generate per object bind method generateperobjectbindmethod gen generate per object get set methods generateperobjectgetsetmethods gen kind per clause perclause percflow generate per cflow aspect of method generatepercflowaspectofmethod gen generate per cflow has aspect method generatepercflowhasaspectmethod gen generate per cflow push method generatepercflowpushmethod gen generate per cflow ajc clinit method generatepercflowajcclinitmethod gen kind per clause perclause pertypewithin generate per twaspect of method generatepertwaspectofmethod gen generate per twhas aspect method generatepertwhasaspectmethod gen generate per twget instance method generatepertwgetinstancemethod gen generate per twcreate aspect instance method generatepertwcreateaspectinstancemethod gen error happen kind kind get name getname resolved member resolvedmember get matching synthetic member getmatchingsyntheticmember member member resolved member resolvedmember get signature getsignature matches resolved type resolvedtype on type ontype eagerly create nested ajc migh have aspect ajcmighhaveaspect ltw aspect type aspecttype equals on type ontype has per clause members already hasperclausemembersalready lazy class gen lazyclassgen class gen classgen resolved member resolvedmember methods class gen classgen get bcel object type getbcelobjecttype get declared methods getdeclaredmethods methods length resolved member resolvedmember method methods aspect of aspectof equals method get name getname equals method get parameter signature getparametersignature kind per clause perclause singleton kind per clause perclause percflow ljava lang object equals method get parameter signature getparametersignature kind per clause perclause perobject ljava lang equals method get parameter signature getparametersignature kind per clause perclause pertypewithin generate per clause members generateperclausemembers lazy class gen lazyclassgen class gen classgen fixme alex handle field handle is annotation defined aspect isannotationdefinedaspect aspect type aspecttype iterate fields fixme alex percflow x percflowx code style generate resolved member resolvedmember failure field info failurefieldinfo ajc member maker ajcmembermaker init failure cause field initfailurecausefield aspect type aspecttype class gen classgen add field addfield make field gen makefieldgen class gen classgen failure field info failurefieldinfo get field getfield kind per clause perclause singleton resolved member resolvedmember per singleton field info persingletonfieldinfo ajc member maker ajcmembermaker per singleton field persingletonfield aspect type aspecttype class gen classgen add field addfield make field gen makefieldgen class gen classgen per singleton field info persingletonfieldinfo get field getfield kind per clause perclause perobject resolved member resolvedmember per object field info perobjectfieldinfo ajc member maker ajcmembermaker per object field perobjectfield aspect type aspecttype aspect type aspecttype class gen classgen add field addfield make field gen makefieldgen class gen classgen per object field info perobjectfieldinfo get field getfield lazy generation may have aspect mayhaveaspect works ltw previous note kind per clause perclause percflow resolved member resolvedmember per cflow field info percflowfieldinfo ajc member maker ajcmembermaker per cflow field percflowfield aspect type aspecttype class gen classgen add field addfield make field gen makefieldgen class gen classgen per cflow field info percflowfieldinfo get field getfield kind per clause perclause pertypewithin resolved member resolvedmember per type within for field pertypewithinforfield ajc member maker ajcmembermaker per type within within type field pertypewithinwithintypefield aspect type aspecttype aspect type aspecttype class gen classgen add field addfield make field gen makefieldgen class gen classgen per type within for field pertypewithinforfield get field getfield error happen kind kind to string tostring generate per singleton aspect of method generatepersingletonaspectofmethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per singleton aspect of method persingletonaspectofmethod aspect type aspecttype flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody append utility create get createget factory ajc member maker ajcmembermaker per singleton field persingletonfield aspect type aspecttype branch instruction branchinstruction if not null ifnotnull instruction factory instructionfactory create branch instruction createbranchinstruction constants ifnonnull append if not null ifnotnull append factory create new createnew ajc member maker ajcmembermaker aspect bound exception get name getname append instruction constants instructionconstants dup append push class gen classgen get constant pool gen getconstantpoolgen aspect type aspecttype get name getname append utility create get createget factory ajc member maker ajcmembermaker init failure cause field initfailurecausefield aspect type aspecttype append factory create invoke createinvoke ajc member maker ajcmembermaker aspect bound exception get name getname init type type type string object type objecttype java lang throwable constants invokespecial append instruction constants instructionconstants athrow instruction handle instructionhandle if else ifelse append utility create get createget factory ajc member maker ajcmembermaker per singleton field persingletonfield aspect type aspecttype append instruction factory instructionfactory create return createreturn type object if not null ifnotnull set target settarget if else ifelse generate per singleton has aspect method generatepersingletonhasaspectmethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per singleton has aspect method persingletonhasaspectmethod aspect type aspecttype flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody append utility create get createget factory ajc member maker ajcmembermaker per singleton field persingletonfield aspect type aspecttype branch instruction branchinstruction if null ifnull instruction factory instructionfactory create branch instruction createbranchinstruction constants ifnull append if null ifnull append push class gen classgen get constant pool gen getconstantpoolgen append instruction factory instructionfactory create return createreturn type instruction handle instructionhandle if else ifelse append push class gen classgen get constant pool gen getconstantpoolgen append instruction factory instructionfactory create return createreturn type if null ifnull set target settarget if else ifelse generate per singleton ajc clinit method generatepersingletonajcclinitmethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker ajc post clinit method ajcpostclinitmethod aspect type aspecttype flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody append factory create new createnew aspect type aspecttype get name getname append instruction constants instructionconstants dup append factory create invoke createinvoke aspect type aspecttype get name getname init type type args constants invokespecial append utility create set createset factory ajc member maker ajcmembermaker per singleton field persingletonfield aspect type aspecttype append instruction factory instructionfactory create return createreturn type patch clinit delegate ajc post clinit postclinit lazy method gen lazymethodgen clinit class gen classgen get static initializer getstaticinitializer instruction list instructionlist instruction handle instructionhandle try start trystart append factory create invoke createinvoke aspect type aspecttype get name getname name mangler namemangler ajc post clinit type type args constants invokestatic branch instruction branchinstruction try end tryend instruction factory instructionfactory create branch instruction createbranchinstruction constants append try end tryend instruction handle instructionhandle handler append instruction constants instructionconstants astore append instruction constants instructionconstants aload append utility create set createset factory ajc member maker ajcmembermaker init failure cause field initfailurecausefield aspect type aspecttype append instruction factory instructionfactory create return createreturn type try end tryend set target settarget get end getend todo bit odd bcel alters bytecode impdep representation clinit get body getbody get end getend get instruction getinstruction get opcode getopcode constants impdep clinit get body getbody get end getend get prev getprev set instruction setinstruction nop clinit get body getbody get end getend set instruction setinstruction nop clinit get body getbody append clinit add exception handler addexceptionhandler try start trystart handler handler object type objecttype java lang throwable generate per object aspect of method generateperobjectaspectofmethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory reference type referencetype interface type interfacetype reference type referencetype bcel world bcelworld make bcel type makebceltype ajc member maker ajcmembermaker per object interface type perobjectinterfacetype aspect type aspecttype lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per object aspect of method perobjectaspectofmethod aspect type aspecttype flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody append instruction constants instructionconstants aload append factory create instance of createinstanceof interface type interfacetype branch instruction branchinstruction if eq ifeq instruction factory instructionfactory create branch instruction createbranchinstruction constants ifeq append if eq ifeq append instruction constants instructionconstants aload append factory create check cast createcheckcast interface type interfacetype append utility create invoke createinvoke factory constants invokeinterface ajc member maker ajcmembermaker per object interface get perobjectinterfaceget aspect type aspecttype append instruction constants instructionconstants dup branch instruction branchinstruction if null ifnull instruction factory instructionfactory create branch instruction createbranchinstruction constants ifnull append if null ifnull append instruction factory instructionfactory create return createreturn bcel world bcelworld make bcel type makebceltype aspect type aspecttype instruction handle instructionhandle if null else ifnullelse append pop if null ifnull set target settarget if null else ifnullelse instruction handle instructionhandle if eq else ifeqelse append factory create new createnew ajc member maker ajcmembermaker aspect bound exception get name getname if eq ifeq set target settarget if eq else ifeqelse append instruction constants instructionconstants dup append factory create invoke createinvoke ajc member maker ajcmembermaker aspect bound exception get name getname init type type args constants invokespecial append athrow generate per object has aspect method generateperobjecthasaspectmethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory reference type referencetype interface type interfacetype reference type referencetype bcel world bcelworld make bcel type makebceltype ajc member maker ajcmembermaker per object interface type perobjectinterfacetype aspect type aspecttype lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per object has aspect method perobjecthasaspectmethod aspect type aspecttype flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody append instruction constants instructionconstants aload append factory create instance of createinstanceof interface type interfacetype branch instruction branchinstruction if eq ifeq instruction factory instructionfactory create branch instruction createbranchinstruction constants ifeq append if eq ifeq append instruction constants instructionconstants aload append factory create check cast createcheckcast interface type interfacetype append utility create invoke createinvoke factory constants invokeinterface ajc member maker ajcmembermaker per object interface get perobjectinterfaceget aspect type aspecttype branch instruction branchinstruction if null ifnull instruction factory instructionfactory create branch instruction createbranchinstruction constants ifnull append if null ifnull append instruction constants instructionconstants iconst append instruction factory instructionfactory create return createreturn type instruction handle instructionhandle if eq else ifeqelse append instruction constants instructionconstants iconst if eq ifeq set target settarget if eq else ifeqelse if null ifnull set target settarget if eq else ifeqelse append instruction factory instructionfactory create return createreturn type generate per object bind method generateperobjectbindmethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory reference type referencetype interface type interfacetype reference type referencetype bcel world bcelworld make bcel type makebceltype ajc member maker ajcmembermaker per object interface type perobjectinterfacetype aspect type aspecttype lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per object bind perobjectbind aspect type aspecttype flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody append instruction constants instructionconstants aload append factory create instance of createinstanceof interface type interfacetype branch instruction branchinstruction if eq ifeq instruction factory instructionfactory create branch instruction createbranchinstruction constants ifeq append if eq ifeq append instruction constants instructionconstants aload append factory create check cast createcheckcast interface type interfacetype append utility create invoke createinvoke factory constants invokeinterface ajc member maker ajcmembermaker per object interface get perobjectinterfaceget aspect type aspecttype branch instruction branchinstruction if non null ifnonnull instruction factory instructionfactory create branch instruction createbranchinstruction constants ifnonnull append if non null ifnonnull append instruction constants instructionconstants aload append factory create check cast createcheckcast interface type interfacetype append factory create new createnew aspect type aspecttype get name getname append instruction constants instructionconstants dup append factory create invoke createinvoke aspect type aspecttype get name getname init type type args constants invokespecial append utility create invoke createinvoke factory constants invokeinterface ajc member maker ajcmembermaker per object interface set perobjectinterfaceset aspect type aspecttype instruction handle instructionhandle append instruction factory instructionfactory create return createreturn type if eq ifeq set target settarget if non null ifnonnull set target settarget generate per object get set methods generateperobjectgetsetmethods lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory lazy method gen lazymethodgen method get methodget make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per object interface get perobjectinterfaceget aspect type aspecttype flag as synthetic flagassynthetic method get methodget class gen classgen add method gen addmethodgen method get methodget instruction list instructionlist il get ilget method get methodget get body getbody il get ilget instruction list instructionlist il get ilget append instruction constants instructionconstants aload il get ilget append utility create get createget factory ajc member maker ajcmembermaker per object field perobjectfield aspect type aspecttype aspect type aspecttype il get ilget append instruction factory instructionfactory create return createreturn type object lazy method gen lazymethodgen method set methodset make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per object interface set perobjectinterfaceset aspect type aspecttype flag as synthetic flagassynthetic method set methodset class gen classgen add method gen addmethodgen method set methodset instruction list instructionlist il set ilset method set methodset get body getbody il set ilset instruction list instructionlist il set ilset append instruction constants instructionconstants aload il set ilset append instruction constants instructionconstants aload il set ilset append utility create set createset factory ajc member maker ajcmembermaker per object field perobjectfield aspect type aspecttype aspect type aspecttype il set ilset append instruction factory instructionfactory create return createreturn type generate per cflow aspect of method generatepercflowaspectofmethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per cflow aspect of method percflowaspectofmethod aspect type aspecttype flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody append utility create get createget factory ajc member maker ajcmembermaker per cflow field percflowfield aspect type aspecttype append utility create invoke createinvoke factory constants invokevirtual ajc member maker ajcmembermaker cflow stack peek instance cflowstackpeekinstance append factory create check cast createcheckcast reference type referencetype bcel world bcelworld make bcel type makebceltype aspect type aspecttype append instruction factory instructionfactory create return createreturn type object generate per cflow has aspect method generatepercflowhasaspectmethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per cflow has aspect method percflowhasaspectmethod aspect type aspecttype flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody append utility create get createget factory ajc member maker ajcmembermaker per cflow field percflowfield aspect type aspecttype append utility create invoke createinvoke factory constants invokevirtual ajc member maker ajcmembermaker cflow stack is valid cflowstackisvalid append instruction factory instructionfactory create return createreturn type generate per cflow push method generatepercflowpushmethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per cflow push percflowpush aspect type aspecttype flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody append utility create get createget factory ajc member maker ajcmembermaker per cflow field percflowfield aspect type aspecttype append factory create new createnew aspect type aspecttype get name getname append instruction constants instructionconstants dup append factory create invoke createinvoke aspect type aspecttype get name getname init type type args constants invokespecial append utility create invoke createinvoke factory constants invokevirtual ajc member maker ajcmembermaker cflow stack push instance cflowstackpushinstance append instruction factory instructionfactory create return createreturn type generate per cflow ajc clinit method generatepercflowajcclinitmethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker ajc pre clinit method ajcpreclinitmethod aspect type aspecttype flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody append factory create new createnew ajc member maker ajcmembermaker cflow stack type get name getname append instruction constants instructionconstants dup append factory create invoke createinvoke ajc member maker ajcmembermaker cflow stack type get name getname init type type args constants invokespecial append utility create set createset factory ajc member maker ajcmembermaker per cflow field percflowfield aspect type aspecttype append instruction factory instructionfactory create return createreturn type patch clinit delegate ajc pre clinit preclinit lazy method gen lazymethodgen clinit class gen classgen get static initializer getstaticinitializer instruction list instructionlist append factory create invoke createinvoke aspect type aspecttype get name getname name mangler namemangler ajc pre clinit type type args constants invokestatic clinit get body getbody insert generate per twaspect of method generatepertwaspectofmethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per type within aspect of method pertypewithinaspectofmethod aspect type aspecttype class gen classgen get world getworld is in java isinjava mode flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody instruction handle instructionhandle try start trystart append instruction constants instructionconstants aload append utility create invoke createinvoke factory constants invokestatic ajc member maker ajcmembermaker per type within get instance pertypewithingetinstance aspect type aspecttype append instruction constants instructionconstants astore append instruction constants instructionconstants aload branch instruction branchinstruction if non null ifnonnull instruction factory instructionfactory create branch instruction createbranchinstruction constants ifnonnull append if non null ifnonnull append factory create new createnew ajc member maker ajcmembermaker aspect bound exception get name getname append instruction constants instructionconstants dup append push class gen classgen get constant pool gen getconstantpoolgen aspect type aspecttype get name getname append instruction constants instructionconstants aconst append factory create invoke createinvoke ajc member maker ajcmembermaker aspect bound exception get name getname init type type type string object type objecttype java lang throwable constants invokespecial append instruction constants instructionconstants athrow instruction handle instructionhandle if else ifelse append instruction constants instructionconstants aload if non null ifnonnull set target settarget if else ifelse append instruction factory instructionfactory create return createreturn type object instruction handle instructionhandle handler append instruction constants instructionconstants astore append factory create new createnew ajc member maker ajcmembermaker aspect bound exception get name getname append instruction constants instructionconstants dup append factory create invoke createinvoke ajc member maker ajcmembermaker aspect bound exception get name getname init type type args constants invokespecial append instruction constants instructionconstants athrow method add exception handler addexceptionhandler try start trystart handler get prev getprev handler object type objecttype java lang exception generate per twhas aspect method generatepertwhasaspectmethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per type within has aspect method pertypewithinhasaspectmethod aspect type aspecttype class gen classgen get world getworld is in java isinjava mode flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody instruction handle instructionhandle try start trystart append instruction constants instructionconstants aload append utility create invoke createinvoke factory constants invokestatic ajc member maker ajcmembermaker per type within get instance pertypewithingetinstance aspect type aspecttype branch instruction branchinstruction if null ifnull instruction factory instructionfactory create branch instruction createbranchinstruction constants ifnull append if null ifnull append instruction constants instructionconstants iconst append instruction constants instructionconstants ireturn instruction handle instructionhandle if else ifelse append instruction constants instructionconstants iconst if null ifnull set target settarget if else ifelse append instruction constants instructionconstants ireturn instruction handle instructionhandle handler append instruction constants instructionconstants astore append instruction constants instructionconstants iconst append instruction constants instructionconstants ireturn method add exception handler addexceptionhandler try start trystart handler get prev getprev handler object type objecttype java lang exception generate per twget instance method generatepertwgetinstancemethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per type within get instance pertypewithingetinstance aspect type aspecttype flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody instruction handle instructionhandle try start trystart append instruction constants instructionconstants aload append push factory get constant pool getconstantpool name mangler namemangler per type within local aspect of pertypewithinlocalaspectof aspect type aspecttype get declared method getdeclaredmethod append instruction constants instructionconstants aconst append factory create invoke createinvoke java lang get declared method getdeclaredmethod type get type gettype ljava lang reflect method type type get type gettype ljava lang string type get type gettype ljava lang constants invokevirtual object invoke method append instruction constants instructionconstants aconst object invoke arg append instruction constants instructionconstants aconst append factory create invoke createinvoke java lang reflect method invoke type object type type get type gettype ljava lang object type get type gettype ljava lang object constants invokevirtual append factory create check cast createcheckcast reference type referencetype bcel world bcelworld make bcel type makebceltype aspect type aspecttype append instruction constants instructionconstants areturn instruction handle instructionhandle handler append instruction constants instructionconstants astore append instruction constants instructionconstants aconst append instruction constants instructionconstants areturn method add exception handler addexceptionhandler try start trystart handler get prev getprev handler object type objecttype java lang exception generate per twcreate aspect instance method generatepertwcreateaspectinstancemethod lazy class gen lazyclassgen class gen classgen instruction factory instructionfactory factory class gen classgen get factory getfactory lazy method gen lazymethodgen method make method gen makemethodgen class gen classgen ajc member maker ajcmembermaker per type within create aspect instance pertypewithincreateaspectinstance aspect type aspecttype flag as synthetic flagassynthetic method class gen classgen add method gen addmethodgen method instruction list instructionlist method get body getbody append factory create new createnew aspect type aspecttype get name getname append instruction constants instructionconstants dup append factory create invoke createinvoke aspect type aspecttype get name getname init type type args constants invokespecial append instruction constants instructionconstants astore append instruction constants instructionconstants aload append instruction constants instructionconstants aload append utility create set createset factory ajc member maker ajcmembermaker per type within within type field pertypewithinwithintypefield aspect type aspecttype aspect type aspecttype append instruction constants instructionconstants aload append instruction constants instructionconstants areturn add standard synthetic wished aj synthetic ajsynthetic attributes param method gen methodgen param make java synthetic makejavasynthetic standard synthetic attribute invisible user flag as synthetic flagassynthetic lazy method gen lazymethodgen method gen methodgen make java synthetic makejavasynthetic make java synthetic makejavasynthetic method gen methodgen make synthetic makesynthetic method gen methodgen add attribute addattribute bcel attributes bcelattributes bcel attribute bcelattribute aj attribute ajattribute aj synthetic ajsynthetic method gen methodgen get enclosing class getenclosingclass get constant pool gen getconstantpoolgen