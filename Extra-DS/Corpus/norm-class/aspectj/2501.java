copyright contributors rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors alexandre vasseur initial implementation david knibb weaving context enhancments org aspectj weaver loadtime java file java ioexception java input stream inputstream java lang reflect invocation target exception invocationtargetexception java lang reflect method java net url java util array list arraylist java util enumeration java util hash map hashmap java util iterator java util list java util properties java util string tokenizer stringtokenizer org aspectj asm irelationship org aspectj bridge isource location isourcelocation org aspectj util lang util langutil org aspectj weaver icross reference handler icrossreferencehandler org aspectj weaver lint org aspectj weaver resolved type resolvedtype org aspectj weaver unresolved type unresolvedtype org aspectj weaver org aspectj weaver lint kind org aspectj weaver bcel bcel object type bcelobjecttype org aspectj weaver bcel bcel weaver bcelweaver org aspectj weaver bcel bcel world bcelworld org aspectj weaver bcel utility org aspectj weaver loadtime definition definition org aspectj weaver loadtime definition document parser documentparser org aspectj weaver patterns pattern parser patternparser org aspectj weaver patterns type pattern typepattern org aspectj weaver tools generated class handler generatedclasshandler org aspectj weaver tools weaving adaptor weavingadaptor author href mailto alex gnilux dot alexandre vasseur class loader weaving adaptor classloaderweavingadaptor weaving adaptor weavingadaptor string aop xml meta inf aop xml list dump type pattern dumptypepattern array list arraylist dump before dumpbefore list include type pattern includetypepattern array list arraylist list exclude type pattern excludetypepattern array list arraylist list include starts with includestartswith array list arraylist list exclude starts with excludestartswith array list arraylist list aspect exclude type pattern aspectexcludetypepattern array list arraylist list aspect exclude starts with aspectexcludestartswith array list arraylist list aspect include type pattern aspectincludetypepattern array list arraylist list aspect include starts with aspectincludestartswith array list arraylist string buffer stringbuffer namespace iweaving context iweavingcontext weaving context weavingcontext class loader weaving adaptor classloaderweavingadaptor class loader classloader loader iweaving context iweavingcontext w context wcontext weaving context weavingcontext w context wcontext initialize class loader classloader loader iweaving context iweavingcontext w context wcontext stage don generated class handler generatedclasshandler define closures generated class handler generatedclasshandler generated class handler generatedclasshandler callback define closure jvm param param bytes accept class acceptclass string bytes should dump shoulddump replace dump bytes throwable throwable throwable print stack trace printstacktrace lazily hook define class defineclass loader bytes w context wcontext weaving context weavingcontext default weaving context defaultweavingcontext loader weaving context weavingcontext w context wcontext list definitions parse definitions parsedefinitions loader enabled bcel world bcelworld bcel world bcelworld loader get message handler getmessagehandler icross reference handler icrossreferencehandler add cross reference addcrossreference isource location isourcelocation isource location isourcelocation irelationship kind kind runtime test runtimetest tools todo code call org aspectj apache bcel repository set repository setrepository bogus bcel expected org aspectj apache bcel repository set repository setrepository class loader repository classloaderrepository loader weaver bcel weaver bcelweaver bcel world bcelworld register definitions register definitions registerdefinitions weaver loader definitions bcel world bcelworld set resolution loader setresolutionloader loader get parent getparent class loader classloader adding aspects weaver prepare for weave prepareforweave load cache aop xml properties classloader visibility rules param weaver param loader list parse definitions parsedefinitions class loader classloader loader list definitions array list arraylist info register classloader get class loader name getclassloadername loader todo dev mode needed tbd daj def class loader classloader get system class loader getsystemclassloader equals loader string file system get property getproperty def file info daj def file definitions add document parser documentparser parse file file to url tourl string resource path resourcepath system get property getproperty org aspectj weaver loadtime configuration aop xml string tokenizer stringtokenizer string tokenizer stringtokenizer resource path resourcepath has more tokens hasmoretokens enumeration xmls weaving context weavingcontext get resources getresources next token nexttoken xmls has more elements hasmoreelements url xml url xmls next element nextelement info xml get file getfile definitions add document parser documentparser parse xml definitions is empty isempty fast skip should weave shouldweave enabled info configuration disabling weaver loader get class loader name getclassloadername loader exception enabled warn parse definitions failed definitions register definitions registerdefinitions bcel weaver bcelweaver weaver class loader classloader loader list definitions register options registeroptions weaver loader definitions register aspect exclude registeraspectexclude weaver loader definitions register aspect include registeraspectinclude weaver loader definitions register aspects registeraspects weaver loader definitions register include exclude registerincludeexclude weaver loader definitions register dump registerdump weaver loader definitions exception enabled warn register definition failed string get class loader name getclassloadername class loader classloader loader weaving context weavingcontext get class loader name getclassloadername configure weaver option directives todo don good reuse small subset options ltw param weaver param loader param definitions register options registeroptions bcel weaver bcelweaver weaver class loader classloader loader list definitions string buffer stringbuffer all options alloptions string buffer stringbuffer iterator iterator definitions iterator iterator has next hasnext definition definition definition iterator all options alloptions append definition get weaver options getweaveroptions append options weaver option weaveroption weaver option weaveroption options parse all options alloptions to string tostring loader get message handler getmessagehandler configure weaver code duplicates aspect jbuilder aspectjbuilder init world and weaver initworldandweaver weaver get world getworld set message handler setmessagehandler weaver option weaveroption message handler messagehandler set xlazy tjp setxlazytjp weaver option weaveroption lazy tjp lazytjp set xhas member support enabled setxhasmembersupportenabled weaver option weaveroption has member hasmember set optional joinpoints setoptionaljoinpoints weaver option weaveroption optional joinpoints optionaljoinpoints set pinpoint mode setpinpointmode weaver option weaveroption pinpoint weaver set reweavable mode setreweavablemode weaver option weaveroption not re weavable notreweavable set xno inline setxnoinline weaver option weaveroption no inline noinline amc autodetect needed at aj ltwtests atajltwtests test ltwunweavable testltwunweavable set behave in java setbehaveinjava lang util langutil vmor greater vmorgreater load defaults bcel world bcelworld get lint getlint load default properties loaddefaultproperties overlay ltw defaults bcel world bcelworld get lint getlint advice did not match advicedidnotmatch set kind setkind load user file xlintfile xlint wins weaver option weaveroption lint file lintfile input stream inputstream resource resource loader get resource as stream getresourceasstream weaver option weaveroption lint file lintfile exception failure resource properties properties properties properties load resource get lint getlint set from properties setfromproperties properties ioexception failure failure resource warn access resource xlintfile weaver option weaveroption lint file lintfile failure get message handler getmessagehandler handle message handlemessage message access resource xlintfile weaver option weaveroption lint file lintfile imessage warning failure resource close throwable fourth override xlint weaver option weaveroption lint weaver option weaveroption lint equals fixme aj build config ajbuildconfig ajlint yetanother deps bcel world bcelworld get lint getlint load default properties loaddefaultproperties bcel world bcelworld get lint getlint set all setall weaver option weaveroption lint todo proceed on error proceedonerror option register aspect exclude registeraspectexclude bcel weaver bcelweaver weaver class loader classloader loader list definitions string fast match info fastmatchinfo iterator iterator definitions iterator iterator has next hasnext definition definition definition iterator iterator iterator definition get aspect exclude patterns getaspectexcludepatterns iterator iterator has next hasnext string exclude string iterator type pattern typepattern exclude pattern excludepattern pattern parser patternparser exclude parse type pattern parsetypepattern aspect exclude type pattern aspectexcludetypepattern add exclude pattern excludepattern fast match info fastmatchinfo looks like starts with lookslikestartswith exclude fast match info fastmatchinfo aspect exclude starts with aspectexcludestartswith add fast match info fastmatchinfo register aspect include registeraspectinclude bcel weaver bcelweaver weaver class loader classloader loader list definitions string fast match info fastmatchinfo iterator iterator definitions iterator iterator has next hasnext definition definition definition iterator iterator iterator definition get aspect include patterns getaspectincludepatterns iterator iterator has next hasnext string include string iterator type pattern typepattern include pattern includepattern pattern parser patternparser include parse type pattern parsetypepattern aspect include type pattern aspectincludetypepattern add include pattern includepattern fast match info fastmatchinfo looks like starts with lookslikestartswith include fast match info fastmatchinfo aspect include starts with aspectincludestartswith add fast match info fastmatchinfo lint string string infos lint lint bcel world bcelworld get lint getlint kind kind lint get lint kind getlintkind kind signal infos register aspect include exclude rules param weaver param loader param definitions register aspects registeraspects bcel weaver bcelweaver weaver class loader classloader loader list definitions exclude exclude list iterator iterator definitions iterator iterator has next hasnext definition definition definition iterator iterator aspects definition get aspect class names getaspectclassnames iterator aspects has next hasnext string aspect class name aspectclassname string aspects accept aspect acceptaspect aspect class name aspectclassname info register aspect aspect class name aspectclassname resolved type resolvedtype aspect weaver add library aspect addlibraryaspect aspect class name aspectclassname generate key namespace namespace string buffer stringbuffer aspect class name aspectclassname namespace namespace append aspect class name aspectclassname warn aspect excluded aspect class name aspectclassname lint aspect excluded by configuration aspectexcludedbyconfiguration string aspect class name aspectclassname get class loader name getclassloadername loader exclude exclude list note user defined matters happen iterator iterator definitions iterator iterator has next hasnext definition definition definition iterator iterator aspects definition get concrete aspects getconcreteaspects iterator aspects has next hasnext definition concrete aspect concreteaspect concrete aspect concreteaspect definition concrete aspect concreteaspect aspects accept aspect acceptaspect concrete aspect concreteaspect concrete aspect code gen concreteaspectcodegen gen concrete aspect code gen concreteaspectcodegen concrete aspect concreteaspect weaver get world getworld gen validate error concrete aspect concrete aspect concreteaspect registered generated class handler generatedclasshandler accept class acceptclass concrete aspect concreteaspect gen get bytes getbytes resolved type resolvedtype aspect weaver add library aspect addlibraryaspect concrete aspect concreteaspect generate key namespace namespace string buffer stringbuffer concrete aspect concreteaspect namespace namespace append concrete aspect concreteaspect register include exclude filters duplicate simple patterns start with startwith filters faster matching resolved type resolvedtype param weaver param loader param definitions register include exclude registerincludeexclude bcel weaver bcelweaver weaver class loader classloader loader list definitions string fast match info fastmatchinfo iterator iterator definitions iterator iterator has next hasnext definition definition definition iterator iterator iterator definition get include patterns getincludepatterns iterator iterator has next hasnext string include string iterator type pattern typepattern include pattern includepattern pattern parser patternparser include parse type pattern parsetypepattern include type pattern includetypepattern add include pattern includepattern fast match info fastmatchinfo looks like starts with lookslikestartswith include fast match info fastmatchinfo include starts with includestartswith add fast match info fastmatchinfo iterator iterator definition get exclude patterns getexcludepatterns iterator iterator has next hasnext string exclude string iterator type pattern typepattern exclude pattern excludepattern pattern parser patternparser exclude parse type pattern parsetypepattern exclude type pattern excludetypepattern add exclude pattern excludepattern fast match info fastmatchinfo looks like starts with lookslikestartswith exclude fast match info fastmatchinfo exclude starts with excludestartswith add fast match info fastmatchinfo checks type pattern handled startswith check todo enhance support sss fqn direclty match iff equals add support charss ends with endswith style param type pattern typepattern start with startwith sequence test string looks like starts with lookslikestartswith string type pattern typepattern type pattern typepattern index of indexof type pattern typepattern index of indexof type pattern typepattern index of indexof type pattern typepattern char at charat type pattern typepattern length charsss cha rss note won fast matched charsss length type pattern typepattern length type pattern typepattern ends with endswith length sequence type pattern typepattern index of indexof length type pattern typepattern index of indexof length sequence type pattern typepattern substring length replace charsss rss register dump filter param weaver param loader param definitions register dump registerdump bcel weaver bcelweaver weaver class loader classloader loader list definitions iterator iterator definitions iterator iterator has next hasnext definition definition definition iterator iterator iterator definition get dump patterns getdumppatterns iterator iterator has next hasnext string dump string iterator type pattern typepattern pattern pattern parser patternparser dump parse type pattern parsetypepattern dump type pattern dumptypepattern add pattern definition should dump before shoulddumpbefore dump before dumpbefore accept string class name classname bytes avoid resolved type resolvedtype needed exclude type pattern excludetypepattern is empty isempty include type pattern includetypepattern is empty isempty avoid resolved type resolvedtype simple patterns string fast class name fastclassname class name classname replace replace exclude starts with excludestartswith size fast class name fastclassname starts with startswith string exclude starts with excludestartswith bug exclude pattern matched starts fast accept exclude type pattern excludetypepattern is empty isempty defaults fast include fast accept fastaccept include starts with includestartswith size fast accept fastaccept fast class name fastclassname starts with startswith string include starts with includestartswith fast accept fastaccept analysis todo refactoring ltw calling resolve stage bad bytecode classloader hook resolve get resources as stream getresourcesasstream disk problematic jit stub disk underlying infra returns info get resource as stream getresourceasstream wls parse bytecode parsed weaving class file provider weavingclassfileprovider weaving adaptor weavingadaptor get woven bytes getwovenbytes bcel object type bcelobjecttype bct bcel world bcelworld weaver get world getworld add source object type addsourceobjecttype utility make java class makejavaclass bytes bad weaver get world getworld resolve unresolved type unresolvedtype for name forname class name classname resolved type resolvedtype class info classinfo bct get resolved type x getresolvedtypex exclude iterator iterator exclude type pattern excludetypepattern iterator iterator has next hasnext type pattern typepattern type pattern typepattern type pattern typepattern iterator type pattern typepattern matches statically matchesstatically class info classinfo exclude match skip include defaults include accept iterator iterator include type pattern includetypepattern iterator iterator has next hasnext type pattern typepattern type pattern typepattern type pattern typepattern iterator accept type pattern typepattern matches statically matchesstatically class info classinfo accept include match accept fixme don include exclude aop xml nice dangerous change accept aspect acceptaspect string aspect class name aspectclassname avoid resolved type resolvedtype needed aspect exclude type pattern aspectexcludetypepattern is empty isempty aspect include type pattern aspectincludetypepattern is empty isempty avoid resolved type resolvedtype simple patterns exclude match reject string fast class name fastclassname aspect class name aspectclassname replace replace aspect exclude starts with aspectexcludestartswith size fast class name fastclassname starts with startswith string aspect exclude starts with aspectexcludestartswith include match accept aspect include starts with aspectincludestartswith size fast class name fastclassname starts with startswith string aspect include starts with aspectincludestartswith analysis resolved type resolvedtype class info classinfo weaver get world getworld resolve unresolved type unresolvedtype for name forname aspect class name aspectclassname exclude iterator iterator aspect exclude type pattern aspectexcludetypepattern iterator iterator has next hasnext type pattern typepattern type pattern typepattern type pattern typepattern iterator type pattern typepattern matches statically matchesstatically class info classinfo exclude match skip include defaults include accept iterator iterator aspect include type pattern aspectincludetypepattern iterator iterator has next hasnext type pattern typepattern type pattern typepattern type pattern typepattern iterator accept type pattern typepattern matches statically matchesstatically class info classinfo accept include match accept should dump shoulddump string class name classname don dump weaving asked dump before dumpbefore avoid resolved type resolvedtype needed dump type pattern dumptypepattern is empty isempty todo optimize class name classname start with startwith resolved type resolvedtype class info classinfo weaver get world getworld resolve unresolved type unresolvedtype for name forname class name classname dump iterator iterator dump type pattern dumptypepattern iterator iterator has next hasnext type pattern typepattern type pattern typepattern type pattern typepattern iterator type pattern typepattern matches statically matchesstatically class info classinfo dump match shared classes methods returns key string get namespace getnamespace namespace string namespace check classes stored generated classes cache flush cache empty generated stored cache generated classes exist generatedclassesexist generated classes generatedclasses size flush generated classes cache flush generated classes flushgeneratedclasses generated classes generatedclasses hash map hashmap define class defineclass class loader classloader loader string bytes info generating todo protection domain optimize method define class defineclass class loader classloader get declared method getdeclaredmethod define class defineclass string bytes get class getclass define class defineclass set accessible setaccessible define class defineclass invoke loader object bytes integer integer bytes length invocation target exception invocationtargetexception get target exception gettargetexception linkage error linkageerror warn define generated failed get target exception gettargetexception warn define generated failed get target exception gettargetexception exception warn define generated failed