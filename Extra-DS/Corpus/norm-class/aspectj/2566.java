copyright xerox corporation palo alto center incorporated parc contributors rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation wes isberg resolver org aspectj testing xml java org apache commons digester digester org aspectj bridge abort exception abortexception org aspectj bridge imessage org aspectj bridge isource location isourcelocation org aspectj bridge message util messageutil org aspectj bridge source location sourcelocation org aspectj testing harness bridge org aspectj testing util run utils runutils org aspectj util lang util langutil org xml sax org xml sax saxexception read ajc test specification xml form input files comply doctype ajc spec xml reader ajcspecxmlreader add elements attributes update doctype update setup digester setupdigester elements created attributes values bean properties mapping names elements parents parents add method add foo foo toadd add tests add compile time checks mapping apis setup digester comipile time check setupdigestercomipiletimecheck adding attribute bean introspection add list returned expected properties expectedproperties update client writers referring doctype parent ixml writer ixmlwriter delegate child component ixml writer ixmlwriter write subelement debugging log level loglevel tracing common mistakes dtd match input rule defined misdefined element property read string eol presumed relative path dtd file xml files written write suite to xml file writesuitetoxmlfile string dtd path tests ajc test suite ajctestsuite dtd expected doc type ajc spec ajcspec xml files string doctype doctype ajc test ajctest suite spec xmlname system dtd path ajc spec xml reader ajcspecxmlreader ajc spec xml reader ajcspecxmlreader shared instance ajc spec xml reader ajcspecxmlreader get reader getreader main string ioexception write dtd writedtd file tests ajc test suite ajctestsuite dtd write dtd dtd file dtdfile deprecated param dtd file dtdfile file write write dtd writedtd file dtd file dtdfile ioexception lang util langutil throw iax if null throwiaxifnull dtd file dtdfile dtd file dtdfile print writer printwriter print writer printwriter file writer filewriter dtd file dtdfile println document type ajc test suite ajc spec xml reader ajcspecxmlreader get name getname println get doc type getdoctype close string log string info debug trace xxx log level loglevel junit tests fail tracing log level loglevel ajc spec xml reader ajcspecxmlreader param level info trace set log level setloglevel level level level level level log level loglevel level print ixml writable ixmlwritable output file leader doctype param output file write overwritten param tests list ixml writable ixmlwritable write warnings detected warnings string write suite to xml file writesuitetoxmlfile file output ixml writable ixmlwritable top node topnode ioexception print writer printwriter writer print writer printwriter file output stream fileoutputstream output xmlwriter print sink printsink xmlwriter writer writer println writer println ajc spec xml reader ajcspecxmlreader doctype writer println top node topnode write xml writexml print sink printsink writer close string parent output get parent getparent parent parent string dtd path dtdpath parent dtd path file dtd file dtdfile file dtd path dtdpath dtd file dtdfile can read canread expecting dtd file dtd file dtdfile get path getpath read specifications suite ajc test ajctest xml file sets suite dir specification param file file readable comply doctype ajc test ajctest suite spec read file set log level setloglevel ajc test ajctest suite spec read ajc suite readajcsuite file file ioexception abort exception abortexception setup loggers digester beanutils xxx system set property setproperty org apache commons logging log org apache commons logging impl simple log simplelog trace debug xxx system set property setproperty org apache commons logging simplelog defaultlog log log level loglevel digester digester make digester makedigester file suite holder suiteholder holder suite holder suiteholder digester push holder file input stream fileinputstream input file input stream fileinputstream file digester parse input saxexception message util messageutil fail parsing file input input close input ajc test ajctest suite spec result holder spec result file file get absolute file getabsolutefile result set source location setsourcelocation source location sourcelocation file file suite dir suitedir file get parent file getparentfile suite dir suitedir absolute user dir suite dir suitedir file result set suite dir file setsuitedirfile suite dir suitedir result runtime is verbose isverbose xxx hack fixup run utils runutils enable verbose enableverbose result result digester make digester makedigester file suite file suitefile implement entity resolver entityresolver failing digester result digester suite resolver suiteresolver resolver suite resolver suiteresolver suite file suitefile input source inputsource resolve entity resolveentity string public id publicid string system id systemid saxexception resolver resolve entity resolveentity public id publicid system id systemid setup digester setupdigester result result mapping xml java setup digester setupdigester digester digester xxx supply sax parser ignore white space digester set validating setvalidating correct approach commons parser fails accept overriding registration http lists xml org archives xml dev msg html digester get xmlreader getxmlreader set entity resolver setentityresolver suite resolver suiteresolver suite file suitefile saxexception system err println unable entity resolver print stack trace printstacktrace system err element names element components string suite x suitex ajc test ajctest suite spec xmlname string ajctest x ajctestx suite x suitex ajc test ajctest spec xmlname string compile x compilex ajctest x ajctestx compiler run compilerrun spec xmlname string inccompile x inccompilex ajctest x ajctestx inc compiler run inccompilerrun spec xmlname string run x runx ajctest x ajctestx java run javarun spec xmlname string dirchanges x dirchangesx dir changes dirchanges spec xmlname string message x messagex soft message softmessage xmlname string message src loc x messagesrclocx message x messagex soft source location softsourcelocation xmlname element created handle messages level digester add object create addobjectcreate suite x suitex ajc test ajctest suite spec get name getname digester add object create addobjectcreate ajctest x ajctestx ajc test ajctest spec get name getname digester add object create addobjectcreate compile x compilex compiler run compilerrun spec get name getname digester add object create addobjectcreate compile x compilex file abstract run spec abstractrunspec wrap file wrapfile get name getname digester add object create addobjectcreate inccompile x inccompilex inc compiler run inccompilerrun spec get name getname digester add object create addobjectcreate run x runx java run javarun spec get name getname digester add object create addobjectcreate message x messagex soft message softmessage get name getname digester add object create addobjectcreate message src loc x messagesrclocx soft source location softsourcelocation get name getname digester add object create addobjectcreate dirchanges x dirchangesx dir changes dirchanges spec get name getname bean properties elements created automatically remapped warnings property exists map suite messages global suite options digester add set properties addsetproperties suite x suitex digester add set properties addsetproperties ajctest x ajctestx string title dir string description test dir offset testdiroffset bug id bugid digester add set properties addsetproperties compile x compilex string files argfiles string paths argfiles digester add set properties addsetproperties compile x compilex file digester add set properties addsetproperties inccompile x inccompilex classes paths digester add set properties addsetproperties run x runx string skip tester skiptester fork vmargs aspectpath string class name classname java version javaversion skip tester skiptester fork vm args vmargs aspectpath digester add set properties addsetproperties dirchanges x dirchangesx digester add set properties addsetproperties message x messagex digester add set properties addsetproperties message src loc x messagesrclocx line as string lineasstring digester add set properties addsetproperties message x messagex kind kind as string kindasstring digester add set properties addsetproperties message x messagex line as string lineasstring digester add set properties addsetproperties message x messagex details details file subelement compile text path xxx vestigial digester add call method addcallmethod compile x compilex file set file setfile subelements created add parent add ajctest suite runs ajctest files compile messages parent method add suite addsuite parent suite holder suiteholder ajc test ajctest suite spec refers type object created digester add set next addsetnext suite x suitex add suite addsuite ajc test ajctest suite spec get name getname digester add set next addsetnext ajctest x ajctestx add child addchild ajc test ajctest spec get name getname digester add set next addsetnext compile x compilex add child addchild compiler run compilerrun spec get name getname digester add set next addsetnext inccompile x inccompilex add child addchild inc compiler run inccompilerrun spec get name getname digester add set next addsetnext run x runx add child addchild java run javarun spec get name getname digester add set next addsetnext compile x compilex file add wrap file addwrapfile abstract run spec abstractrunspec wrap file wrapfile get name getname digester add set next addsetnext message x messagex add message addmessage imessage get name getname set source location setsourcelocation inline variant add source location addsourcelocation extra digester add set next addsetnext message src loc x messagesrclocx add source location addsourcelocation isource location isourcelocation get name getname digester add set next addsetnext dirchanges x dirchangesx add dir changes adddirchanges dir changes dirchanges spec get name getname parent prefer flow testing code expected bean properties introspection tests expected property attribute doctype mapped names setup digester setupdigester bprops expected properties expectedproperties bprops bprops ajc test ajctest suite spec verbose removed string suite dir suitedir bprops ajc test ajctest spec string description test dir offset testdiroffset bug id bugid mapped title dir bprops compiler run compilerrun spec string files options staging bad input badinput reuse compiler reusecompiler include classes dir includeclassesdir argfiles aspectpath classpath extdirs sourceroots xlintfile outjar bprops inc compiler run inccompilerrun spec string tag bprops java run javarun spec string class name classname skip tester skiptester options java version javaversion err stream is error errstreamiserror out stream is error outstreamiserror fork vm args vmargs aspectpath mapped bprops dir changes dirchanges spec string removed updated unchanged dir token dirtoken default suffix defaultsuffix string path bprops soft message softmessage string kind as string kindasstring line as string lineasstring text details file compile time checking apis impliedly setup digester setupdigester property setter checks redundant tests based expected properties expectedproperties setup digester compile time check setupdigestercompiletimecheck error invoked ajc test ajctest suite spec suite ajc test ajctest suite spec ajc test ajctest spec test ajc test ajctest spec sandbox sandbox validator validator ajc test ajctest ajctest ajc test ajctest test sandbox validator ajctest add run spec addrunspec abstract run spec abstractrunspec test make inc compiler run makeinccompilerrun inc compiler run inccompilerrun spec test make java run makejavarun java run javarun spec ajctest set description setdescription string ajctest set test base dir offset settestbasediroffset string ajctest set bug id setbugid string ajctest set test source location settestsourcelocation isource location isourcelocation compiler run compilerrun spec crun spec crunspec compiler run compilerrun spec crun spec crunspec add message addmessage imessage xxx crun spec crunspec add source location addsourcelocation isource location isourcelocation crun spec crunspec add wrap file addwrapfile abstract run spec abstractrunspec wrap file wrapfile crun spec crunspec set options setoptions string crun spec crunspec set paths setpaths string crun spec crunspec set include classes dir setincludeclassesdir crun spec crunspec set reuse compiler setreusecompiler crun spec crunspec set xlintfile setxlintfile string crun spec crunspec set outjar setoutjar string inc compiler run inccompilerrun spec icrun spec icrunspec inc compiler run inccompilerrun spec icrun spec icrunspec add message addmessage imessage icrun spec icrunspec set tag settag string icrun spec icrunspec set fresh setfresh java run javarun spec jrunspec java run javarun spec jrunspec add message addmessage imessage jrunspec set class name setclassname string jrunspec add message addmessage imessage input interpretable value of valueof string jrunspec set skip tester setskiptester jrunspec set err stream is error seterrstreamiserror jrunspec set out stream is error setoutstreamiserror jrunspec set aspectpath setaspectpath jrunspec set classpath setclasspath jrunspec set fork setfork jrunspec set ltw setltw jrunspec set exception setexception error dir changes dirchanges spec dcspec dir changes dirchanges spec dcspec set added setadded string dcspec set removed setremoved string dcspec set updated setupdated string dcspec set default suffix setdefaultsuffix string dcspec set dir token setdirtoken string soft message softmessage soft message softmessage set source location setsourcelocation isource location isourcelocation set text settext string set kind as string setkindasstring string set details setdetails string soft source location softsourcelocation soft source location softsourcelocation set file setfile string set line setline string set column setcolumn string set end line setendline string add attribute setters validate top element digester stack holds test suite suite holder suiteholder ajc test ajctest suite spec spec add suite addsuite ajc test ajctest suite spec spec spec spec hold properties association testing bprops string props bprops string props props props find file ajc test suite ajctestsuite dtd local relative directories xxx bug commons parser doesn accept registration override digester implementation xxx junit test suite resolver suiteresolver local directory valid reference xxx jdk parser message unable resolve base uri xxx base uri baseuri suite resolver suiteresolver entity resolver entityresolver string ajc test suite ajctestsuite dtd is dir isdir file dir dir dir can read canread dir is directory isdirectory file suite file suitefile suite resolver suiteresolver file suite file suitefile suite file suitefile suite file suitefile string get path getpath string relative suite file file suite file dir suitefiledir suite file suitefile get parent file getparentfile is dir isdir suite file dir suitefiledir string path suite file dir suitefiledir get path getpath file result file path result can read canread result is file isfile result get path getpath misc paths relative suite file current dir file base dirs basedirs file suite file dir suitefiledir file string locations string tests tests tests tests modules tests file base dir basedir base dirs basedirs length base dir basedir base dirs basedirs is dir isdir base dir basedir locations length file dir file base dir basedir locations is dir isdir dir file temp file dir temp is file isfile temp can read canread temp get path getpath input source inputsource resolve entity resolveentity string public id publicid string system id systemid saxexception input source inputsource result system id systemid system id systemid ends with endswith string path get path getpath system id systemid path result input source inputsource path result set system id setsystemid path result set public id setpublicid path result string get doc type path getdoctypepath string result suite file suitefile file reader filereader file reader filereader suite file suitefile buffered reader bufferedreader reader buffered reader bufferedreader string reader read line readline string upper trim upper to lower case tolowercase starts with startswith starts with startswith doctype start index of indexof last index of lastindexof start start upper substring start length starts with startswith xml ioexception ignore close ioexception ignore