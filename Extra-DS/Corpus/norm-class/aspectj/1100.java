copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj testing util java buffered reader bufferedreader java byte array output stream bytearrayoutputstream java data input stream datainputstream java file java file input stream fileinputstream java ioexception java input stream inputstream java print stream printstream java print writer printwriter java string reader stringreader java string writer stringwriter java lang reflect invocation target exception invocationtargetexception java lang reflect method java lang reflect modifier java net malformed urlexception malformedurlexception java net url java util array list arraylist java util arrays java util collection java util collections java util enumeration java util hash map hashmap java util hash set hashset java util iterator java util list java util map java util properties java util jdiff text file line fileline jdiff util diff jdiff util diff normal output diffnormaloutput junit framework junit framework test junit framework test case testcase junit framework test result testresult junit framework test suite testsuite junit runner test case class loader testcaseclassloader org aspectj bridge imessage handler imessagehandler org aspectj bridge message util messageutil org aspectj util file util fileutil org aspectj util lang util langutil org aspectj util reflection junit doesn note file comparison methods require jdiff jdiff types required resolve bytecode weaver required compare files compare files test util testutil java string aspectjrt key aspectjrt string testing client key testing client url bad url file lib dir properties lib rpaths map lib entries file aspectjrt path string paths aspectjrt path aspectjrt jar lib test aspectjrt jar build jars aspectj jar build jars runtime jar runtime bin aspectjrt path file util fileutil get best file getbestfile paths for name forname java lang annotation annotation throwable java url url url url http eclipse org badurl malformed urlexception malformedurlexception bad url url file file file lib is lib dir islibdir file file cur file get absolute file getabsolutefile file parent cur get parent file getparentfile parent file file parent lib is lib dir islibdir file parent parent get parent file getparentfile parent file file aspectj tree lib dir file lib rpaths properties lib rpaths set property setproperty aspectjrt key tests aspectjrt jar lib rpaths set property setproperty testing client key tests testing client jar todo support loaded dynamically map map hash map hashmap iterator iter lib rpaths key set keyset iterator iter has next hasnext string key string iter string path lib rpaths get property getproperty key file file url url file lib file libfile path url lib url liburl path illegal argument exception illegalargumentexception file file path url bad url map key file file map key url url todo support changing entries lib entries collections unmodifiable map unmodifiablemap map is lib dir islibdir file lib file lib test file separator aspectjrt jar exists test util testutil vmor greater vmorgreater java file aspectjrt path aspectjrtpath aspectjrt path url file to url filetourl file file file to url tourl malformed urlexception malformedurlexception string files to path filestopath file entries to path topath entries string urls to path urlstopath url entries to path topath entries untyped mixed entries string files orurls to path filesorurlstopath object entries to path topath entries relies file to string tostring get path getpath url to string tostring to external form toexternalform param entries object file url elements string entries dlimited file path separator pathseparator string to path topath object entries entries entries length string buffer stringbuffer path string buffer stringbuffer started entries length entries started path append file path separator pathseparator started path append entries to string tostring path to string tostring param input string parse illegal argument exception illegalargumentexception input bad parse boolean parseboolean string input parse boolean parseboolean input param input string parse param iax on error iaxonerror input bad illegal argument exception illegalargumentexception input illegal argument exception illegalargumentexception iax on error iaxonerror input bad parse boolean parseboolean string input iax on error iaxonerror string syntax input string input trim to lower case tolowercase result valid length valid equals result valid equals valid equals result valid equals iax on error iaxonerror valid illegal argument exception illegalargumentexception input syntax result file aspectjrt jar file aspectjrtjarfile file lib entries aspectjrt key file url aspectjrt jar url aspectjrtjarurl url lib entries aspectjrt key url file testing client jar file testingclientjarfile file lib entries testing client key file url testing client jar url testingclientjarurl url lib entries testing client key url param rpath string relative path library directory resource exist directory slashes file separator file path illegal argument exception illegalargumentexception directory file file lib file libfile string rpath rpath rpath length illegal argument exception illegalargumentexception input rpath rpath replace file separator char separatorchar file result file lib dir rpath result exists result illegal argument exception illegalargumentexception lib dir rpath lib path libpath returns url url exist illegal argument exception illegalargumentexception directory file url lib url liburl string rpath file file lib file libfile rpath file to url tourl malformed urlexception malformedurlexception illegal argument exception illegalargumentexception bad url file arrays assert array equals assertarrayequals string msg object expected object test case testcase assert equals assertequals msg arrays as list aslist expected arrays as list aslist unordered assert set equals assertsetequals collection expected collection assert set equals assertsetequals expected assert set equals assertsetequals string msg object expected object assert set equals assertsetequals msg arrays as list aslist expected arrays as list aslist assert set equals assertsetequals string msg collection expected collection msg msg msg hash set hashset remove all removeall expected hash set hashset expected remove all removeall is empty isempty test case testcase assert true asserttrue msg expected didn find to string tostring is empty isempty is empty isempty test case testcase assert true asserttrue msg didn expect to string tostring is empty isempty test case testcase assert true asserttrue msg expected didn find to string tostring n didn ndidn expect to string tostring objects assert commutative equals assertcommutativeequals object object test case testcase assert equals assertequals equals equals test case testcase assert equals assertequals equals equals assert hash equals asserthashequals assert hash equals asserthashequals object object test case testcase assert true asserttrue hash hash code hashcode hash code hashcode hash code hashcode hash code hashcode system err println warning hash collision hash hash code hashcode system err println system err println reflective stuff run main runmain string class path classpath string class name classname run method runmethod class path classpath class name classname main object string object run method runmethod string class path classpath string class name classname string method name methodname object args class path classpath file path separator pathseparator system get property getproperty java path class loader classloader loader test case class loader testcaseclassloader class path classpath loader load class loadclass class name classname class not found exception classnotfoundexception assert true asserttrue unexpected exception reflection invokestatic n invokestaticn method name methodname args checks multi strings trimmed comparision produces error conflict assert multi line string equals assertmultilinestringequals string message string string buffered reader bufferedreader buffered reader bufferedreader string reader stringreader buffered reader bufferedreader buffered reader bufferedreader string reader stringreader list lines array list arraylist string read non blank line readnonblankline read non blank line readnonblankline equals lines add show context showcontext lines assert equals assertequals message show context showcontext lines assert true asserttrue message unexpected show context showcontext lines assert true asserttrue message unexpected ioexception ioe assert true asserttrue message caught ioe get message getmessage show context showcontext list lines lines size math max system err println lines string read non blank line readnonblankline buffered reader bufferedreader ioexception string read line readline trim comment include comments reading comment loc commentloc index of indexof comment loc commentloc substring comment loc commentloc trim equals read non blank line readnonblankline expected dir expect file subtree match actual file base directory check actual files expected files ignores directory paths cvs param handler imessage handler imessagehandler sink error messages param expected base dir expectedbasedir file path directory expected files compared actual files param actual base dir actualbasedir file path base directory find actual files expected files files expected base dir expectedbasedir directory tree matching files actual base dir actualbasedir directory tree same directory contents samedirectorycontents imessage handler imessagehandler handler file expected base dir expectedbasedir file actual base dir actualbasedir fast fail fastfail lang util langutil throw iax if null throwiaxifnull handler handler file util fileutil can read dir canreaddir expected base dir expectedbasedir message util messageutil fail handler expected dir expected base dir expectedbasedir file util fileutil can read dir canreaddir actual base dir actualbasedir message util messageutil fail handler actual dir actual base dir actualbasedir string paths file util fileutil list files listfiles expected base dir expectedbasedir result paths length paths index of indexof cvs same files samefiles handler expected base dir expectedbasedir actual base dir actualbasedir paths result result fast fail fastfail result file comparison utilities xxx test compare files report differences fail message handler supplied preprocesses files disassembling param handler imessage handler imessagehandler fail messages ignore param expected file expectedfile file path canonical file param actual file actualfile file path actual file input files based comparisons same files samefiles imessage handler imessagehandler handler file expected file expectedfile file actual file actualfile do same file dosamefile handler expected file expectedfile actual file actualfile test compare files report differences fail message handler supplied preprocesses files disassembling method assumes files offset respective base directories param handler imessage handler imessagehandler fail messages ignore param expected base dir expectedbasedir file path canonical file base directory param actual base dir actualbasedir file path actual file base directory param path string path offset base directories input files based comparisons same files samefiles imessage handler imessagehandler handler file expected base dir expectedbasedir file actual base dir actualbasedir string path file actual file actualfile file actual base dir actualbasedir path file expected file expectedfile file expected base dir expectedbasedir path do same file dosamefile handler expected base dir expectedbasedir actual base dir actualbasedir expected file expectedfile actual file actualfile work selecting lineator subclass converting api jdiff apis comparison jdiff interfaces method local load avoid duplication do same file dosamefile imessage handler imessagehandler handler file expected base dir expectedbasedir file actual base dir actualbasedir file expected file expectedfile file actual file actualfile string path expected file expectedfile get path getpath xxx permit user lineator ilineator lineator lineator text path ends with endswith class lineator classlineator have disassembler havedisassembler lineator lineator message util messageutil abort handler skipping dissassembler canonical line canonicalline actual lines actuallines canonical line canonicalline expected lines expectedlines actual lines actuallines lineator get lines getlines handler actual file actualfile actual base dir actualbasedir expected lines expectedlines lineator get lines getlines handler expected file expectedfile expected base dir expectedbasedir ioexception message util messageutil fail handler rendering lines lang util langutil is empty isempty actual lines actuallines lang util langutil is empty isempty expected lines expectedlines transmutation jdiff extract publishing jdiff canonical line canonicalline clines canonical line canonicalline expected lines expectedlines actual lines actuallines file line fileline flines file line fileline clines length canonical line canonicalline cline clines file line fileline fline file line fileline cline length fline length fline file line fileline cline canonical cline flines fline diff change edits diff flines flines diff edits edits inserted edits deleted xxx confirm jdiff edits string render handler edits flines flines string writer stringwriter writer string writer stringwriter diff normal output diffnormaloutput diff normal output diffnormaloutput flines flines set out setout writer set line separator setlineseparator lang util langutil eol write script writescript edits ioexception message util messageutil fail handler rendering edits writer writer close ioexception message util messageutil fail handler closing rendering edits string message diff path expected dir expected base dir expectedbasedir actual dir actual base dir actualbasedir lang util langutil eol writer to string tostring message util messageutil fail handler message string clean test name cleantestname string replace test skip test skiptest string tests print stack trace printstacktrace context needed system err println skipping tests tests test named testnamed skipping tests tests test test named testnamed string named string clean test name cleantestname named test count test cases counttestcases test result testresult start test starttest end test endtest string to string tostring param sink test suite testsuite sink add result param source name sourcename string fully qualified suite method load load tests reflectively loadtestsreflectively test suite testsuite sink string source name sourcename ignore error ignoreerror throwable thrown class loader classloader loader sink get class getclass get class loader getclassloader source class sourceclass loader load class loadclass source name sourcename modifier is public ispublic source class sourceclass get modifiers getmodifiers error suite errorsuite sink source name sourcename method suite method suitemethod source class sourceclass get method getmethod suite mods suite method suitemethod get modifiers getmodifiers modifier is static isstatic mods modifier is public ispublic mods error suite errorsuite sink source name sourcename method modifier is public ispublic mods error suite errorsuite sink source name sourcename method test is assignable from isassignablefrom suite method suitemethod get return type getreturntype error suite errorsuite sink source name sourcename suite test object result suite method suitemethod invoke object test test test result test test suite testsuite sink add test addtest test test suite testsuite source test suite testsuite test enumeration tests source tests tests has more elements hasmoreelements sink add test addtest test tests next element nextelement class not found exception classnotfoundexception thrown security exception securityexception thrown no such method exception nosuchmethodexception thrown illegal argument exception illegalargumentexception thrown illegal access exception illegalaccessexception thrown invocation target exception invocationtargetexception thrown thrown ignore error ignoreerror system err println error loading source name sourcename thrown print stack trace printstacktrace system err error suite errorsuite sink source name sourcename thrown error suite errorsuite test suite testsuite sink string source name sourcename throwable thrown sink add test addtest error test errortest source name sourcename thrown error suite errorsuite test suite testsuite sink string source name sourcename string err string message bad source name sourcename err sink add test addtest error test errortest message junit test failure report suite initialization errors test time error test errortest test throwable thrown error test errortest throwable thrown thrown thrown error test errortest string message thrown error message error test errortest string message throwable thrown test error testerror message thrown count test cases counttestcases test result testresult result result start test starttest result add error adderror thrown nested exception remove test error testerror error throwable thrown test error testerror string message message test error testerror string message throwable thrown message thrown thrown throwable get cause getcause thrown print stack trace printstacktrace print stack trace printstacktrace system err print stack trace printstacktrace print stream printstream print stack trace printstacktrace print writer printwriter print stack trace printstacktrace print writer printwriter print stack trace printstacktrace thrown print caused thrown print stack trace printstacktrace component reduces file canonical line canonicalline ilineator lineator suitable text files ilineator text text lineator textlineator lineator suitable files disassembles ilineator class lineator classlineator reduce file canonical line canonicalline param handler imessage handler imessagehandler errors param file file render param basedir file base directory canonical line canonicalline lines empty canonical line canonicalline get lines getlines imessage handler imessagehandler handler file file file basedir ioexception alias jdiff file line fileline avoid client binding canonical line canonicalline canonical line canonicalline lines canonical line canonicalline canonical variant comparison string canonical actual logging string canonical line canonicalline string canonical string canonical canonical string to string tostring lineator ilineator reduce file canonical line canonicalline param handler imessage handler imessagehandler errors param file file render param basedir file base directory canonical line canonicalline get lines getlines imessage handler imessagehandler handler file file file basedir ioexception file can read canread file is file isfile message util messageutil error handler readable file basedir file capture file file line fileline input stream inputstream string path file util fileutil normalized path normalizedpath file basedir line stream linestream capture line stream linestream lineate capture handler basedir file ioexception message util messageutil fail handler normalized compare files normalizedcomparefiles ioexception reading file close ioexception ignore capture flush capture close string missed capture get missed getmissed lang util langutil is empty isempty missed message util messageutil warn handler normalized compare files normalizedcomparefiles missed input missed string lines capture get lines getlines canonical line canonicalline result canonical line canonicalline lines length lines length result canonical line canonicalline lines lines result lineate print stream printstream sink imessage handler imessagehandler handler file basedir file file ioexception text lineator textlineator lineator lineate print stream printstream sink imessage handler imessagehandler handler file basedir file file ioexception input stream inputstream file input stream fileinputstream file file util fileutil copy stream copystream data input stream datainputstream sink close ioexception ignore class lineator classlineator lineator lineate print stream printstream sink imessage handler imessagehandler handler file basedir file file ioexception string file util fileutil file to class name filetoclassname basedir file xxx enable preflight basedir path length length message util messageutil error handler unexpected path path disassemble handler basedir sink have disassembler havedisassembler for name forname org aspectj weaver bcel lazy class gen lazyclassgen class not found exception classnotfoundexception xxx dependency bcweaver bcel disassemble imessage handler imessagehandler handler file basedir string print stream printstream ioexception lazy class gen lazyclassgen disassemble file util fileutil normalized path normalizedpath basedir capture throwable thrown string basedir path basedirpath file util fileutil normalized path normalizedpath basedir xxx reflection utilities invoke dissassembler xxx test detect refactored for name forname org aspectj weaver bcel lazy class gen lazyclassgen method get method getmethod disassemble string string print stream printstream invoke object basedir path basedirpath class not found exception classnotfoundexception thrown no such method exception nosuchmethodexception thrown illegal access exception illegalaccessexception thrown invocation target exception invocationtargetexception throwable get target exception gettargetexception ioexception ioexception thrown thrown message util messageutil fail handler disassembling path basedir path basedirpath thrown capture print stream printstream output string delimiting component string println showing missed text line stream linestream print stream printstream string buffer stringbuffer string buffer stringbuffer byte array output stream bytearrayoutputstream missed array list arraylist sink line stream linestream byte array output stream bytearrayoutputstream sink array list arraylist missed byte array output stream bytearrayoutputstream text captured overrides string get missed getmissed missed to string tostring clear captured lines missed text clear sink clear string lines printed delimited println calls lines printed exclusive terminated newline string get lines getlines string sink to array toarray string print stream printstream overrides println object println to string tostring print object obj print obj to string tostring println append println println append println print append print append println string print println print string append println string to string tostring sink add set length setlength