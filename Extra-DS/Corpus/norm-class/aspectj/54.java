copyright ibm rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors andy clement initial implementation org aspectj apache bcel classfile tests java file java ioexception org aspectj apache bcel classfile attribute org aspectj apache bcel classfile constant pool constantpool org aspectj apache bcel classfile enclosing method enclosingmethod org aspectj apache bcel classfile java class javaclass org aspectj apache bcel util synthetic repository syntheticrepository enclosing method attribute test enclosingmethodattributetest bcel test case bceltestcase set up setup exception set up setup verify declared main method enclosing method attribute correctly test check method level named inner class testcheckmethodlevelnamedinnerclass class not found exception classnotfoundexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass attribute test class em attributetestclassem constant pool constantpool pool clazz get constant pool getconstantpool attribute enc method attrs encmethodattrs find attribute findattribute enclosing method enclosingmethod clazz assert true asserttrue expected enclosing method enclosingmethod attribute enc method attrs encmethodattrs length enc method attrs encmethodattrs length enclosing method enclosingmethod enclosing method enclosingmethod enc method attrs encmethodattrs string enclosing class name enclosingclassname get enclosing class getenclosingclass get bytes getbytes pool string enclosing method name enclosingmethodname get enclosing method getenclosingmethod get name getname pool assert true asserttrue expected attribute test class em attributetestclassem enclosing class name enclosingclassname enclosing class name enclosingclassname equals attribute test class em attributetestclassem assert true asserttrue expected method main enclosing method name enclosingmethodname enclosing method name enclosingmethodname equals main verify declared type level enclosing method enclosingmethod attribute correctly test check class level named inner class testcheckclasslevelnamedinnerclass class not found exception classnotfoundexception synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass attribute test class em attributetestclassem constant pool constantpool pool clazz get constant pool getconstantpool attribute enc method attrs encmethodattrs find attribute findattribute enclosing method enclosingmethod clazz assert true asserttrue expected enclosing method enclosingmethod attribute enc method attrs encmethodattrs length enc method attrs encmethodattrs length enclosing method enclosingmethod enclosing method enclosingmethod enc method attrs encmethodattrs string enclosing class name enclosingclassname get enclosing class getenclosingclass get bytes getbytes pool assert true asserttrue method method get enclosing method index getenclosingmethodindex get enclosing method index getenclosingmethodindex assert true asserttrue expected attribute test class em attributetestclassem enclosing class name enclosingclassname enclosing class name enclosingclassname equals attribute test class em attributetestclassem check save load attribute correctly test attribute serializtion testattributeserializtion class not found exception classnotfoundexception ioexception read synthetic repository syntheticrepository repos create repos createrepos testcode jar java class javaclass clazz repos load class loadclass attribute test class em attributetestclassem constant pool constantpool pool clazz get constant pool getconstantpool attribute enc method attrs encmethodattrs find attribute findattribute enclosing method enclosingmethod clazz assert true asserttrue expected enclosing method enclosingmethod attribute enc method attrs encmethodattrs length enc method attrs encmethodattrs length write file tfile create testdata file createtestdatafile attribute test class em attributetestclassem clazz dump tfile read version check synthetic repository syntheticrepository repos create repos createrepos java class javaclass clazz repos load class loadclass attribute test class em attributetestclassem enclosing method enclosingmethod enclosing method enclosingmethod enc method attrs encmethodattrs string enclosing class name enclosingclassname get enclosing class getenclosingclass get bytes getbytes pool assert true asserttrue method method get enclosing method index getenclosingmethodindex get enclosing method index getenclosingmethodindex assert true asserttrue expected attribute test class em attributetestclassem enclosing class name enclosingclassname enclosing class name enclosingclassname equals attribute test class em attributetestclassem assert true asserttrue tfile delete tear down teardown exception tear down teardown