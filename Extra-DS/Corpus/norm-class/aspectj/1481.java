copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj testing harness bridge org aspectj bridge abort exception abortexception org aspectj bridge imessage handler imessagehandler org aspectj bridge message util messageutil org aspectj testing tester org aspectj testing irun iterator iruniterator org aspectj testing irun status irunstatus org aspectj testing wrapped run iterator wrappedruniterator org aspectj testing util test class loader testclassloader org aspectj testing util test util testutil org aspectj testing xml soft message softmessage org aspectj testing xml xmlwriter org aspectj util file util fileutil org aspectj util lang util langutil org aspectj weaver loadtime weaving urlclass loader weavingurlclassloader java java lang reflect java net java security permission java util reflection forked mode supported system properties javarun fork enable forking javarun java path java executable optional javarun java java java optional requires javarun java javarun classpath prefix classpath optional java run javarun iajc run iajcrun append classpath appendclasspath string buffer stringbuffer object entries lang util langutil is empty isempty entries entries length object entry entries entry string append string entry append file path separator pathseparator entry file string file util fileutil get best path getbestpath file entry append append file path separator pathseparator spec spec sandbox sandbox programmatic initialization spec java run javarun spec spec spec spec xxx init spec checks spec checks sandbox readable test source directory writable dir empty lists readable classpath dirs jars fork enabled java read checks pass org aspectj testing harness bridge ajc test ajctest iajc run iajcrun setup file file setup ajc run setupajcrun sandbox sandbox validator validator sandbox sandbox sandbox java run init javaruninit validator nullcheck spec class name classname validator nullcheck sandbox sandbox validator can read dir canreaddir sandbox get test base src dir gettestbasesrcdir test base src testbasesrc dir validator can write dir canwritedir sandbox run dir rundir dir validator can read files canreadfiles sandbox get classpath jars getclasspathjars classpath jars validator can read dirs canreaddirs sandbox get classpath directories getclasspathdirectories classpath dirs spec fork spec forkspec fork validator can read canread spec fork spec forkspec java java caller record exceptions irun status irunstatus status illegal access exception illegalaccessexception invocation target exception invocationtargetexception class not found exception classnotfoundexception no such method exception nosuchmethodexception completed normally completednormally passed lang util langutil is empty isempty spec dir changes dirchanges message util messageutil info status xxx dir changes dirchanges implemented java run javarun readable file libs sandbox get classpath jars getclasspathjars readable include classes dir includeclassesdir file dirs sandbox get classpath directories getclasspathdirectories readable include classes dir includeclassesdir completed normally completednormally spec fork spec forkspec fork run in other vm runinothervm status libs dirs run in same vm runinsamevm status libs dirs passed completed normally completednormally passed status run result runresult message util messageutil info status spec to long string tolongstring message util messageutil info status sandbox sandbox passed run in same vm runinsamevm irun status irunstatus status file libs file dirs security exception securityexception no such method exception nosuchmethodexception illegal argument exception illegalargumentexception illegal access exception illegalaccessexception invocation target exception invocationtargetexception class loader classloader loader completed normally completednormally passed byte array output stream bytearrayoutputstream out snoop outsnoop print stream printstream old out oldout byte array output stream bytearrayoutputstream err snoop errsnoop print stream printstream old err olderr spec out stream is error outstreamiserror out snoop outsnoop byte array output stream bytearrayoutputstream old out oldout system system set out setout print stream printstream out snoop outsnoop spec err stream is error errstreamiserror err snoop errsnoop byte array output stream bytearrayoutputstream old err olderr system err system set err seterr print stream printstream err snoop errsnoop target class targetclass url cl and libs clandlibs file files sandbox find files findfiles spec classpath url cl urls clurls file util fileutil get file urls getfileurls files url lib urls liburls file util fileutil get file urls getfileurls libs cl and libs clandlibs url cl urls clurls length lib urls liburls length system arraycopy cl urls clurls cl and libs clandlibs cl urls clurls length system arraycopy lib urls liburls cl and libs clandlibs cl urls clurls length lib urls liburls length spec is ltw isltw loader test class loader testclassloader cl and libs clandlibs dirs url aspect urls aspecturls file files sandbox find files findfiles spec aspectpath aspect urls aspecturls file util fileutil get file urls getfileurls files array list arraylist classpath array list arraylist classpath add all addall arrays as list aslist aspect urls aspecturls url class urls classurls classpath add all addall arrays as list aslist cl and libs clandlibs url urls file util fileutil get file urls getfileurls dirs classpath add all addall arrays as list aslist urls classpath add file util fileutil get file url getfileurl globals aspectjrt jar classpath add file util fileutil get file url getfileurl globals testingclient jar class urls classurls url classpath to array toarray url class loader classloader parent java run javarun get class loader getclassloader loader weaving urlclass loader weavingurlclassloader class urls classurls aspect urls aspecturls parent load test optional test aspect testaspect loader load class loadclass org aspectj lang join point joinpoint target class targetclass loader load class loadclass spec class name classname method main target class targetclass get method getmethod main globals main parm types setup tester setuptester sandbox get test base src dir gettestbasesrcdir loader status run security manager runsecuritymanager set java run thread setjavarunthread main invoke object spec get options array getoptionsarray completed normally completednormally snoop failure snoopfailure err snoop errsnoop err snoop errsnoop size out snoop outsnoop out snoop outsnoop size passed snoop failure snoopfailure spec expected exception expectedexception abort exception abortexception expected exception expectedexception passed invocation target exception invocationtargetexception throwable thrown lang util langutil unwrap exception unwrapexception thrown thrown run security manager runsecuritymanager exit called exception exitcalledexception run security manager runsecuritymanager exit called exception exitcalledexception thrown exit code exitcode status finish integer thrown run security manager runsecuritymanager awt used exception awtusedexception message util messageutil fail status test code awt event queue run security manager runsecuritymanager awt used exception awtusedexception thrown expected exception expectedexception thrown passed thrown runtime exception runtimeexception runtime exception runtimeexception thrown thrown error error thrown run security manager runsecuritymanager exit called exception exitcalledexception status finish integer exit code exitcode class not found exception classnotfoundexception string classes file util fileutil list files listfiles sandbox classes dir classesdir message util messageutil info status sandbox classes arrays as list aslist classes message util messageutil fail status old out oldout system set out setout old out oldout old err olderr system set err seterr old err olderr run security manager runsecuritymanager release java run thread releasejavarunthread completed normally completednormally message util messageutil info status target class targetclass target class targetclass message util messageutil info status loader loader passed grabbing java bootclasspath classpath assumes exception output system err failure normal completion pass param status param libs param dirs run in other vm runinothervm irun status irunstatus status file libs file dirs spec fork lang util langutil is empty isempty spec aspectpath array list arraylist cmd array list arraylist cmd add file util fileutil get best path getbestpath spec fork spec forkspec java lang util langutil is empty isempty spec fork spec forkspec vmargs cmd add all addall arrays as list aslist spec fork spec forkspec vmargs string classpath string buffer stringbuffer string buffer stringbuffer append classpath appendclasspath spec fork spec forkspec bootclasspath append classpath appendclasspath dirs append classpath appendclasspath libs file classpath files classpathfiles sandbox find files findfiles spec classpath cp length cplength classpath files classpathfiles classpath files classpathfiles length sp length splength spec classpath spec classpath length cp length cplength sp length splength error unable find arrays as list aslist spec classpath arrays as list aslist classpath files classpathfiles append classpath appendclasspath classpath files classpathfiles file stdlibs globals aspectjrt jar globals testingclient jar append classpath appendclasspath stdlibs classpath to string tostring spec is ltw isltw cmd add classpath cmd add classpath verify assuming running lang util langutil supports java supportsjava error load time weaving test requires java cmd add djava system loader org aspectj weaver weaving urlclass loader weavingurlclassloader assume harness classpath weaving urlclass loader weavingurlclassloader cmd add classpath cmd add system get property getproperty java path file aspect jars aspectjars sandbox find files findfiles spec aspectpath aspect jars aspectjars length spec aspectpath length error unable find arrays as list aslist spec aspectpath string buffer stringbuffer string buffer stringbuffer append classpath appendclasspath aspect jars aspectjars cmd add daj aspect path to string tostring append classpath appendclasspath writes trailing delimiter append classpath cmd add daj path to string tostring cmd add spec class name classname cmd add all addall spec options string command string cmd to array toarray string imessage handler imessagehandler handler status setup asynchronously pipe streams report errors done flag doneflag failed code string buffer stringbuffer command label commandlabel string buffer stringbuffer done flag doneflag done flag doneflag done flag doneflag lang util langutil process controller processcontroller controller lang util langutil process controller processcontroller do completing docompleting thrown result thrown result done flag doneflag errors handle errors string context spec class name classname command command label commandlabel from process fromprocess expected exception expectedexception from process fromprocess string exception running context message util messageutil abort handler from process fromprocess done flag doneflag failed result done flag doneflag code result from in pipe frominpipe string error processing input pipe context message util messageutil abort handler from in pipe frominpipe done flag doneflag failed from out pipe fromoutpipe string error processing output pipe context message util messageutil abort handler from out pipe fromoutpipe done flag doneflag failed from err pipe fromerrpipe string error processing error pipe context message util messageutil abort handler from err pipe fromerrpipe done flag doneflag failed done flag doneflag controller init command spec class name classname spec fork spec forkspec java home javahome controller set envp setenvp string java spec fork spec forkspec java home javahome command label commandlabel append arrays as list aslist controller get command getcommand to string tostring byte array output stream bytearrayoutputstream err snoop errsnoop byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream out snoop outsnoop byte array output stream bytearrayoutputstream controller set err snoop seterrsnoop err snoop errsnoop controller set out snoop setoutsnoop out snoop outsnoop controller start minutes max time maxtime system current time millis currenttimemillis waiting for stop waitingforstop done flag doneflag max time maxtime system current time millis currenttimemillis waiting for stop waitingforstop hit timeout bail message util messageutil fail status timeout waiting process done flag doneflag failed controller wait minute evaluate stopping waiting for stop waitingforstop max time maxtime system current time millis currenttimemillis thread sleep interrupted exception interruptedexception found exception foundexception err snoop errsnoop size expected exception expectedexception err snoop errsnoop found exception foundexception spec err stream is error errstreamiserror message util messageutil error handler err snoop errsnoop to string tostring done flag doneflag failed done flag doneflag failed message util messageutil info handler error stream err snoop errsnoop to string tostring out snoop outsnoop size expected exception expectedexception out snoop outsnoop found exception foundexception spec out stream is error outstreamiserror message util messageutil error handler out snoop outsnoop to string tostring done flag doneflag failed done flag doneflag failed message util messageutil info handler output stream out snoop outsnoop to string tostring found exception foundexception spec expected exception expectedexception string expected exception spec expected exception expectedexception message util messageutil fail handler done flag doneflag failed done flag doneflag code string done flag doneflag code result command label commandlabel message util messageutil fail handler done flag doneflag failed done flag doneflag failed message util messageutil info handler command command label commandlabel done flag doneflag failed expected exception expectedexception throwable thrown spec expected exception expectedexception string cname thrown get class getclass get name getname cname index of indexof spec expected exception expectedexception caller sets returns expected exception expectedexception byte array output stream bytearrayoutputstream bout spec expected exception expectedexception bout to string tostring index of indexof spec expected exception expectedexception clear testing setup base directory spec skip testing skiptesting successful error message setup tester setuptester file base dir basedir class loader classloader loader imessage handler imessagehandler handler loader setup tester setuptester base dir basedir handler file base dir set basedirset spec skip tester skiptester loader load class loadclass org aspectj testing tester tester clear method get method getmethod clear invoke object tester set message handler setmessagehandler handler get method getmethod set message handler setmessagehandler imessage handler imessagehandler invoke object handler tester set basedir setbasedir base dir basedir get method getmethod set basedir setbasedir file invoke object base dir basedir base dir set basedirset tester get basedir getbasedir get method getmethod get basedir getbasedir base dir set basedirset file invoke object base dir set basedirset equals base dir basedir string ajc script ajcscript setup tester setuptester setting base dir basedir returned base dir set basedirset message util messageutil debug handler throwable message util messageutil abort handler base dir basedir base dir basedir clear testing setup base directory spec skip testing skiptesting implementation assumes tester defined loader successful error message setup tester setuptester file base dir basedir imessage handler imessagehandler handler file base dir set basedirset spec skip tester skiptester tester clear tester set message handler setmessagehandler handler tester set basedir setbasedir base dir basedir base dir set basedirset tester get basedir getbasedir base dir set basedirset equals base dir basedir string ajc script ajcscript setup tester setuptester setting base dir basedir returned base dir set basedirset message util messageutil debug handler throwable message util messageutil abort handler base dir basedir base dir basedir string to string tostring java run javarun spec struct fork attributes initialization supports defaults forking system properties overridden specification differs compiler run compilerrun supports option overriding passing values harness arguments fork spec forkspec key system property forking string fork key javarun fork string java key javarun java string args key javarun vmargs string java key javarun java string bootclasspath key javarun bootclasspath fork spec forkspec fork fork spec forkspec fork fork spec forkspec fork fork get boolean getboolean fork key fork java get file getfile java key fork java fork java lang util langutil get java executable getjavaexecutable fork java home javahome get file getfile java key fork bootclasspath xmlwriter unflatten list unflattenlist get property getproperty bootclasspath key fork vmargs xmlwriter unflatten list unflattenlist get property getproperty args key fork fork file get file getfile string key string path get property getproperty key path file result file path result exists result string get property getproperty string key system get property getproperty key throwable fork string bootclasspath file java file java home javahome string vmargs fork spec forkspec copy fork copy fork spec forkspec fork spec forkspec fork spec forkspec fork fork spec forkspec fork bootclasspath fork spec forkspec bootclasspath java fork spec forkspec java java home javahome fork spec forkspec java home javahome vmargs fork spec forkspec vmargs bootclasspath file path separator pathseparator internal delimiters string get bootclasspath getbootclasspath lang util langutil is empty isempty bootclasspath file util fileutil flatten bootclasspath initializer factory java run javarun classpath precalculated sandbox spec abstract run spec abstractrunspec system set security manager setsecuritymanager run security manager runsecuritymanager throwable system err println java run javarun security manager system exit protection string xmlname skip description skip source location sourcelocation keywords options skip paths comment skip staging skip bad input badinput dir changes dirchanges messages skip children xmlnames names xmlnames xmlnames fully qualified string class name classname minimum required version java string java version javaversion skip tester setup tester skip tester skiptester report text output stream error out stream is error outstreamiserror report text error stream error err stream is error errstreamiserror fork spec forkspec fork spec forkspec string aspectpath use ltw useltw string classpath string expected exception expectedexception spec xmlname set xmlnames setxmlnames names fork spec forkspec fork spec forkspec init clone initclone spec spec clone not supported exception clonenotsupportedexception init clone initclone spec spec class name classname class name classname spec err stream is error errstreamiserror err stream is error errstreamiserror spec java version javaversion java version javaversion spec out stream is error outstreamiserror out stream is error outstreamiserror spec skip tester skiptester skip tester skiptester spec fork spec forkspec copy fork spec forkspec object clone clone not supported exception clonenotsupportedexception spec result spec init clone initclone result result is ltw isltw use ltw useltw aspectpath param version illegal argument exception illegalargumentexception version recognized set java version setjavaversion string version lang util langutil supports java supportsjava version java version javaversion version class name classname fully qualified set class name setclassname string class name classname class name classname class name classname set ltw setltw string ltw use ltw useltw test util testutil parse boolean parseboolean ltw set aspectpath setaspectpath string path aspectpath xmlwriter unflatten list unflattenlist path set exception setexception string exception expected exception expectedexception exception set classpath setclasspath string path classpath xmlwriter unflatten list unflattenlist path set err stream is error seterrstreamiserror string err stream is error errstreamiserror err stream is error errstreamiserror test util testutil parse boolean parseboolean err stream is error errstreamiserror set out stream is error setoutstreamiserror string out stream is error outstreamiserror out stream is error outstreamiserror test util testutil parse boolean parseboolean out stream is error outstreamiserror param skip tester set skip tester setskiptester skip skip tester skiptester skip set fork setfork fork fork spec forkspec fork fork param vmargs comma delimited list arguments java typically dname danother name danothername set vm args setvmargs string vmargs fork spec forkspec vmargs xmlwriter unflatten list unflattenlist vmargs override dir token dirtoken sandbox dir add dir changes adddirchanges dir changes dirchanges spec spec spec spec set dir token setdirtoken sandbox dir add dir changes adddirchanges spec java run javarun spec setup completes irun iterator iruniterator make run iterator makeruniterator sandbox sandbox validator validator java run javarun java run javarun setup ajc run setupajcrun sandbox validator xxx java run javarun wrapped run iterator wrappedruniterator write element defined ajc spec xml reader ajcspecxmlreader doctype ajc spec xml reader ajcspecxmlreader doctype ixml writable ixmlwritable write xml writexml xmlwriter write xml writexml xmlwriter string attr xmlwriter make attribute makeattribute class name classname start element startelement xml element name xmlelementname attr skip tester skiptester print attribute printattribute skip tester skiptester java version javaversion print attribute printattribute java version javaversion out stream is error outstreamiserror print attribute printattribute out stream is error outstreamiserror err stream is error errstreamiserror defaults print attribute printattribute err stream is error errstreamiserror write attributes writeattributes end attributes endattributes lang util langutil is empty isempty dir changes dirchanges dir changes dirchanges spec write xml writexml dir changes dirchanges soft message softmessage write xml writexml get messages getmessages end element endelement xml element name xmlelementname string to long string tolongstring to string tostring to long string tolongstring string to string tostring skip tester skiptester java run javarun class name classname skip tester skiptester java run javarun class name classname implementation skips current java version javaversion skipped do adopt parent values doadoptparentvalues parent runtime parentruntime imessage handler imessagehandler handler do adopt parent values doadoptparentvalues parent runtime parentruntime handler java version javaversion lang util langutil supports java supportsjava java version javaversion skip message skipmessage handler requires java version java version javaversion permits system exit context thread java run javarun xxx update thread spawned thread xxx update awt thread ajde wrapper doesn run security manager runsecuritymanager security manager securitymanager run security manager runsecuritymanager run security manager runsecuritymanager thread run thread runthread run security manager runsecuritymanager set java run thread setjavarunthread java run javarun lang util langutil throw iax if null throwiaxifnull run thread runthread thread current thread currentthread release java run thread releasejavarunthread java run javarun lang util langutil throw iax if null throwiaxifnull run thread runthread exit called exception exitcalledexception called java run javarun thread check exit checkexit exit code exitcode exit called exception exitcalledexception run thread runthread run thread runthread equals thread current thread currentthread exit called exception exitcalledexception exit code exitcode check awt event queue access checkawteventqueueaccess run thread runthread run thread runthread equals thread current thread currentthread awt used exception awtusedexception check system clipboard access checksystemclipboardaccess permit constrained calls exit called exception exitcalledexception security exception securityexception exit code exitcode exit called exception exitcalledexception exit code exitcode exit code exitcode exit code exitcode awt used exception awtusedexception security exception securityexception awt used exception awtusedexception permit check accept checkaccept string arg arg check access checkaccess thread arg check access checkaccess thread group threadgroup arg check connect checkconnect string arg arg check connect checkconnect string arg arg object arg check create class loader checkcreateclassloader check delete checkdelete string arg check exec checkexec string arg check link checklink string arg check listen checklisten arg check member access checkmemberaccess arg arg check multicast checkmulticast inet address inetaddress arg check multicast checkmulticast inet address inetaddress arg arg check package access checkpackageaccess string arg check package definition checkpackagedefinition string arg check permission checkpermission permission arg check permission checkpermission permission arg object arg check print job access checkprintjobaccess check properties access checkpropertiesaccess check property access checkpropertyaccess string arg check read checkread file descriptor filedescriptor arg check read checkread string arg check read checkread string arg object arg check security access checksecurityaccess string arg check set factory checksetfactory check top level window checktoplevelwindow object arg check write checkwrite file descriptor filedescriptor arg check write checkwrite string arg