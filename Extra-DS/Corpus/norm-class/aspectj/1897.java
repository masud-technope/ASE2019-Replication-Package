copyright ibm corporation rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors matthew webster adrian colyer martin lippert initial implementation org aspectj weaver tools java file java file output stream fileoutputstream java ioexception java print writer printwriter java net url java net urlclass loader urlclassloader java util array list arraylist java util hash map hashmap java util hash set hashset java util iterator java util linked list linkedlist java util list java util map java util java util string tokenizer stringtokenizer org aspectj bridge abort exception abortexception org aspectj bridge imessage org aspectj bridge imessage handler imessagehandler org aspectj bridge message org aspectj bridge message util messageutil org aspectj bridge message writer messagewriter org aspectj bridge version org aspectj bridge imessage kind org aspectj util file util fileutil org aspectj util lang util langutil org aspectj weaver iclass file provider iclassfileprovider org aspectj weaver iweave requestor iweaverequestor org aspectj weaver resolved type resolvedtype org aspectj weaver bcel bcel object type bcelobjecttype org aspectj weaver bcel bcel weaver bcelweaver org aspectj weaver bcel bcel world bcelworld org aspectj weaver bcel unwoven class file unwovenclassfile adaptor aspect j aspectj compiler embedded existing system facilitate load time weaving weaving loader provide classpath woven aspects callback supplied loader define classes generated compiler weaving process weaving loader create code weaving adaptor weavingadaptor code classes defined typically construction aspects passed adaptor fixed lifetime adaptor classpath augmented system property verbose weaving messages written console weaving adaptor weavingadaptor system property turn verbose weaving messages string weaving adaptor verbose weaving verbose string weave info property org aspectj weaver show weave info showweaveinfo enabled verbose get verbose getverbose bcel world bcelworld bcel world bcelworld bcel weaver bcelweaver weaver imessage handler imessagehandler message handler messagehandler weaving adaptor message handler weavingadaptormessagehandler message holder messageholder generated class handler generatedclasshandler generated class handler generatedclasshandler map generated classes generatedclasses hash map hashmap weaving adaptor weavingadaptor create message handler createmessagehandler construct weaving adaptor weavingadaptor reference weaving loader adaptor automatically search loader hierarchy resolve classes adaptor search hierarchy weaving class loader weavingclassloader instances determine aspects ofr weaving param loader instance code class loader classloader code weaving adaptor weavingadaptor weaving class loader weavingclassloader loader system err println weaving adaptor weavingadaptor init loader aspect urls aspecturls length generated class handler generatedclasshandler loader init get full class path getfullclasspath class loader classloader loader get full aspect path getfullaspectpath class loader classloader loader construct weaving adator weavingadator reference code generated class handler generatedclasshandler code full search path resolving classes complete aspects search path include classes loaded loader constructing weaving adaptor weavingadaptor parents hierarchy param handler code generated class handler generatedclasshandler code param class urls classurls urls resolve classes param aspect urls aspecturls aspects weave classes defined loader weaving adaptor weavingadaptor generated class handler generatedclasshandler handler url class urls classurls url aspect urls aspecturls system err println weaving adaptor weavingadaptor init generated class handler generatedclasshandler handler init file util fileutil make classpath makeclasspath class urls classurls file util fileutil make classpath makeclasspath aspect urls aspecturls list get full class path getfullclasspath class loader classloader loader list list linked list linkedlist loader loader loader get parent getparent loader urlclass loader urlclassloader url urls urlclass loader urlclassloader loader get urls geturls list add all addall file util fileutil make classpath makeclasspath urls warn determine classpath list add all addall make classpath makeclasspath system get property getproperty sun boot path list list get full aspect path getfullaspectpath class loader classloader loader list list linked list linkedlist loader loader loader get parent getparent loader weaving class loader weavingclassloader url urls weaving class loader weavingclassloader loader get aspect urls getaspecturls list add all addall file util fileutil make classpath makeclasspath urls list get verbose getverbose get boolean getboolean weaving adaptor verbose init list class path classpath list aspect path aspectpath create message handler createmessagehandler info classpath class path classpath info aspectpath aspect path aspectpath bcel world bcelworld bcel world bcelworld class path classpath message handler messagehandler bcel world bcelworld set xno inline setxnoinline bcel world bcelworld get lint getlint load default properties loaddefaultproperties lang util langutil vmor greater vmorgreater bcel world bcelworld set behave in java setbehaveinjava weaver bcel weaver bcelweaver bcel world bcelworld register aspect libraries registeraspectlibraries aspect path aspectpath create message handler createmessagehandler message holder messageholder weaving adaptor message handler weavingadaptormessagehandler print writer printwriter system err message handler messagehandler message holder messageholder verbose message handler messagehandler dont ignore dontignore imessage info get boolean getboolean weave info property message handler messagehandler dont ignore dontignore imessage weaveinfo nls info aspect j aspectj weaver version version text built version time text imessage handler imessagehandler get message handler getmessagehandler message handler messagehandler set message handler setmessagehandler imessage handler imessagehandler message holder messageholder message holder messageholder flush messages flushmessages message holder messageholder message handler messagehandler bcel world bcelworld set message handler setmessagehandler appends url path weaving adptor weavingadptor resolve classes param url appended search path add url addurl url url file lib file libfile file url get path getpath weaver add library jar file addlibraryjarfile lib file libfile ioexception warn bad library lib file libfile weave aspects supplied adaptor param param bytes bytes woven bytes exception ioexception weave failed weave class weaveclass string bytes ioexception enabled should weave shouldweave bytes info weaving bytes get woven bytes getwovenbytes bytes should weave annotation style aspect shouldweaveannotationstyleaspect bytes aspect j aspectj aspect munged aspect of aspectof munger info weaving bytes get at aspect jaspect bytes getataspectjaspectbytes bytes bytes param weave munge aspect j aspectj aspectof support should weave shouldweave string bytes replace generated classes generatedclasses contains key containskey should weave name shouldweavename accept bytes should weave annotation style aspect shouldweaveannotationstyleaspect recall should weave annotation style aspect shouldweaveannotationstyleaspect add aspect of aspectof methods aspect fixme aspect weaved theory aspect excluded include exclude config weave late type mungers aspectof accept should weave annotation style aspect shouldweaveannotationstyleaspect ataj accept string bytes should dump shoulddump string should weave name shouldweavename string starts with startswith org apache bcel fixme bcel wrapped org aspectj starts with startswith org aspectj starts with startswith java starts with startswith javax starts with startswith proxy jdk proxies fixme proxy ataspect proxy java proxy starts with startswith jdk reflect sun reflect aspect weaving add aspect of aspectof weaving source compilation param param bytes bytecode classloader lookup stuff disk resolve aspect should weave annotation style aspect shouldweaveannotationstyleaspect string bytes reuse bytes fast lookup aspect annotation bcel world bcelworld is annotation style aspect isannotationstyleaspect bytes weave bytes defining param woven param bytes bytes define woven bytes ioexception get woven bytes getwovenbytes string bytes ioexception weaving class file provider weavingclassfileprovider wcp weaving class file provider weavingclassfileprovider bytes weaver weave wcp wcp get bytes getbytes weave bytes defining needed turn aspect j aspectj aspect usefull form aspect of aspectof method param woven param bytes bytes define woven bytes ioexception get at aspect jaspect bytes getataspectjaspectbytes string bytes ioexception weaving class file provider weavingclassfileprovider wcp weaving class file provider weavingclassfileprovider bytes wcp set apply at aspect jmungers only setapplyataspectjmungersonly weaver weave wcp wcp get bytes getbytes register aspect libraries registeraspectlibraries list aspect path aspectpath system err println weaving adaptor weavingadaptor register aspect libraries registeraspectlibraries aspect path aspectpath iterator aspect path aspectpath iterator has next hasnext string lib name libname string add aspect library addaspectlibrary lib name libname weaver prepare for weave prepareforweave register aspect library classloader weaving loader unmodified classes library response code find class findclass code request library required weaving classpath weavingclasspath classloader constructed param aspect library jar file aspectlibraryjarfile jar file representing aspect library ioexception add aspect library addaspectlibrary string aspect library name aspectlibraryname file aspect library aspectlibrary file aspect library name aspectlibraryname aspect library aspectlibrary is directory isdirectory aspect library aspectlibrary is file isfile file util fileutil has zip suffix haszipsuffix aspect library name aspectlibraryname info adding aspect library aspect library aspectlibrary weaver add library jar file addlibraryjarfile aspect library aspectlibrary ioexception error exception adding aspect library error bad aspect library aspect library aspectlibrary list make classpath makeclasspath string list ret array list arraylist string tokenizer stringtokenizer tok string tokenizer stringtokenizer file path separator pathseparator tok has more tokens hasmoretokens ret add tok next token nexttoken ret info string message message util messageutil info message handler messagehandler message warn string message message util messageutil warn message handler messagehandler message warn string message throwable message handler messagehandler handle message handlemessage message message imessage warning error string message message util messageutil error message handler messagehandler message dump bytcode dump dev mode param param param dumping weaving throwable dump string string dir name dirname ajdump dir name dirname dir name dirname file separator string class name classname replace file dir class name classname index of indexof dir file dir name dirname file separator class name classname substring class name classname last index of lastindexof dir file dir name dirname dir mkdirs string file name filename dir name dirname file separator class name classname system println weaving adaptor weavingadaptor dump file name filename file file name filename get absolute path getabsolutepath file output stream fileoutputstream file output stream fileoutputstream file name filename write close ioexception warn unable dump directory dir name dirname processes messages arising weaver operations weaver abort message severe warning weaving adaptor message handler weavingadaptormessagehandler message writer messagewriter ignoring hash set hashset imessage kind fail kind failkind accumulating list messages array list arraylist weaving adaptor message handler weavingadaptormessagehandler print writer printwriter writer writer ignore imessage weaveinfo ignore imessage info fail kind failkind imessage error handle message handlemessage imessage message abort exception abortexception add message addmessage message result handle message handlemessage message message get kind getkind compare to compareto fail kind failkind abort exception abortexception message is ignoring isignoring kind kind kind ignoring kind message kind ignore imessage kind kind kind ignoring kind ignoring add kind remove message kind list dont ignore dontignore imessage kind kind kind ignoring remove kind kind equals imessage info accumulating add message addmessage imessage message accumulating is ignoring isignoring message get kind getkind messages add message flush messages flushmessages iterator iter messages iterator iter has next hasnext imessage message imessage iter handle message handlemessage message accumulating messages clear weaving class file provider weavingclassfileprovider iclass file provider iclassfileprovider unwoven class file unwovenclassfile unwoven class unwovenclass list unwoven classes unwovenclasses array list arraylist list unoven class file unovenclassfile unwoven class file unwovenclassfile woven class wovenclass is apply at aspect jmungers only isapplyataspectjmungersonly bcel object type bcelobjecttype delegate weaving class file provider weavingclassfileprovider string bytes unwoven class unwovenclass unwoven class file unwovenclassfile bytes unwoven classes unwovenclasses add unwoven class unwovenclass should dump shoulddump replace dump bytes delegate bcel world bcelworld add source object type addsourceobjecttype unwoven class unwovenclass get java class getjavaclass set apply at aspect jmungers only setapplyataspectjmungersonly is apply at aspect jmungers only isapplyataspectjmungersonly is apply at aspect jmungers only isapplyataspectjmungersonly is apply at aspect jmungers only isapplyataspectjmungersonly get bytes getbytes woven class wovenclass woven class wovenclass get bytes getbytes unwoven class unwovenclass get bytes getbytes iterator get class file iterator getclassfileiterator unwoven classes unwovenclasses iterator iweave requestor iweaverequestor get requestor getrequestor iweave requestor iweaverequestor accept result acceptresult unwoven class file unwovenclassfile result woven class wovenclass woven class wovenclass result string result get class name getclassname should dump shoulddump replace dump result get bytes getbytes classes generated weaver closure advice string class name classname result get class name getclassname generated classes generatedclasses class name classname result generated class handler generatedclasshandler accept class acceptclass class name classname result get bytes getbytes processing reweavable state processingreweavablestate adding type mungers addingtypemungers weaving aspects weavingaspects weaving classes weavingclasses weave completed weavecompleted delegate delegate weaving completed weavingcompleted resolved type resolvedtype reset primitives resetprimitives