copyright xerox corporation palo alto center incorporated parc contributors contributors rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation ibm ongoing maintenance org aspectj tools ant taskdefs java buffered reader bufferedreader java file java file filter filefilter java file reader filereader java ioexception java print stream printstream java util arrays java util jar jar entry jarentry java util jar jar file jarfile junit framework test case testcase org apache tools ant build exception buildexception org apache tools ant location org apache tools ant project org apache tools ant types path org apache tools ant types selectors filename selector filenameselector org aspectj bridge imessage org aspectj bridge imessage holder imessageholder org aspectj bridge message handler messagehandler org aspectj bridge message util messageutil org aspectj util file util fileutil org aspectj util lang util langutil ajc task ajctask test cases comments api tests functional tests driving task execute data taskdefs testdata forked mode nonfailing compile aspectjtools dist built build dist tools lib aspectjtools jar ajc task test ajctasktest test case testcase exception string nofile nofile file temp dir tempdir string aspectjtools jar aspectjtoolsjar string testdata dir testdatadir string buffer stringbuffer messages string buffer stringbuffer accept writable files file filter filefilter pick files temp dir tempdir file incremental ajc task test incrementalajctasktest temp string tools path toolspath build dist tools lib aspectjtools jar file toolsjar file tools path toolspath toolsjar can read canread aspectjtools jar aspectjtoolsjar toolsjar get absolute path getabsolutepath aspectjtools jar aspectjtoolsjar string ajc task test ajctasktest forking build aspectjtools dist tools path toolspath system println file dir file taskdefs testdata dir can read canread dir is directory isdirectory testdata dir testdatadir dir get absolute path getabsolutepath testdata dir testdatadir pick files file filter filefilter accept file file file file is file isfile file can write canwrite file get path getpath ends with endswith check aspectjtools classpath reporting errors system err multiple times classpaths find variants aspectjtools jar aspectj tools jar aspectj tools jar aspectjtools jar aspectjrt jar aspectj tools jar xxx testing aspect stub code system get property getproperty java path code param args string expected path main string args java file toolsjar ajc task ajctask find aspectjtools jar findaspectjtoolsjar args args length toolsjar system err println fail expected toolsjar equals args system println java ajc task test ajctasktest get name getname expected path to aspectjtools jar expectedpathtoaspectjtoolsjar toolsjar system err println fail expected args string path toolsjar get absolute path getabsolutepath path equals args system err println fail expected args actual path collect message collectmessage string messages append delete temp dir deletetempdir temp dir tempdir temp dir tempdir exists file util fileutil delete contents deletecontents temp dir tempdir temp dir tempdir delete temp dir tempdir testdata dir testdatadir file data dir datadir file testdata dir testdatadir data dir datadir can read canread file util fileutil delete contents deletecontents data dir datadir pick files file get temp dir gettempdir temp dir tempdir ajc task test ajctasktest string tear down teardown delete temp dir deletetempdir messages set length setlength check run checkrun ajc task ajctask task string exception string exceptionstring task execute assert true asserttrue exception string exceptionstring build exception buildexception exception string exceptionstring assert true asserttrue unexpected get message getmessage string get message getmessage assert true asserttrue exception string exceptionstring index of indexof exception string exceptionstring assert equals assertequals exception string exceptionstring get message getmessage check contains checkcontains string cmd string option cmd length option equals cmd assert true asserttrue expecting option arrays as list aslist cmd assert true asserttrue expecting option arrays as list aslist cmd ajc task ajctask get task gettask string input get task gettask input get temp dir gettempdir ajc task ajctask get task gettask string input file dest dir destdir ajc task ajctask task ajc task ajctask project project task set project setproject dest dir destdir task set destdir setdestdir dest dir destdir nofile equals input add input ends with endswith lst input index of indexof illegal argument exception illegalargumentexception lists supported input testdata dir testdatadir error testdata taskdefs string path testdata dir testdatadir file separator input task set argfiles setargfiles path task get project getproject path input ends with endswith java input ends with endswith filename selector filenameselector fns filename selector filenameselector fns set name setname input task add filename addfilename fns string path testdata dir testdatadir file separator input task set source roots setsourceroots path task get project getproject path task set classpath setclasspath path lib test aspectjrt jar task test message holder class name testmessageholderclassname info holder infoholder message handler messagehandler info holder infoholder handle message handlemessage imessage message imessage info compare to compareto message get kind getkind ajc task test ajctasktest collect message collectmessage message get message getmessage test message holder class name testmessageholderclassname holder message handler messagehandler holder handle message handlemessage imessage message imessage kind kind message get kind getkind imessage error is same or less than issameorlessthan kind string kind to string tostring ajc task test ajctasktest collect message collectmessage substring start test cases test null dest dir testnulldestdir ajc task ajctask task get task gettask nofile string cmd task make command makecommand cmd length assert true asserttrue equals cmd test output requirement testoutputrequirement ajc task ajctask task get task gettask lst check run checkrun task copy in jars copyinjars emits warning unused task get task gettask lst task set copy injars setcopyinjars check run checkrun task source root copy filter sourcerootcopyfilter requires dest dir destdir task get task gettask lst task set source root copy filter setsourcerootcopyfilter java check run checkrun task source root sourceroot test source root copy filter testsourcerootcopyfilter source root copy filter sourcerootcopyfilter works file dest dir destdir get temp dir gettempdir assert true asserttrue unable create dest dir destdir dest dir destdir can read canread dest dir destdir mkdirs ajc task ajctask task get task gettask sourceroot dest dir destdir task set source root copy filter setsourcerootcopyfilter do not copy donotcopy txt file file file dest dir destdir java get absolute file getabsolutefile assert true asserttrue file can read canread prematurely file can read canread check run checkrun task expected resources assert true asserttrue file can read canread failed file can read canread file pack file dest dir destdir pack file file pack pack java get absolute file getabsolutefile assert true asserttrue file can read canread failed file can read canread file file pack includeme get absolute file getabsolutefile assert true asserttrue file can read canread failed file can read canread didn unexpected resources file file pack txt assert true asserttrue file can read canread passed file can read canread file file dest dir destdir do not copy donotcopy assert true asserttrue file can read canread passed file can read canread file file dest dir destdir skip txt files skiptxtfiles txt assert true asserttrue file can read canread passed file can read canread test inpath dir copy filter testinpathdircopyfilter inpath dir copy filter inpathdircopyfilter works output directory file dest dir destdir get temp dir gettempdir assert true asserttrue unable create dest dir destdir dest dir destdir can read canread dest dir destdir mkdirs ajc task ajctask task get task gettask nofile dest dir destdir project task get project getproject path indirs path file dir file testdata dir testdatadir inpath dirs inpathdirs get absolute file getabsolutefile indirs add existing addexisting path file dir inpath dir one inpathdirone get absolute path getabsolutepath indirs add existing addexisting path file dir inpath dir two inpathdirtwo get absolute path getabsolutepath task set inpath setinpath indirs task set inpath dir copy filter setinpathdircopyfilter do not copy donotcopy txt file file file dest dir destdir java get absolute file getabsolutefile assert true asserttrue file can read canread prematurely file can read canread check run checkrun task expected resources file pack file dest dir destdir pack file file pack includeme get absolute file getabsolutefile assert true asserttrue file can read canread failed file can read canread file file pack pack get absolute file getabsolutefile assert true asserttrue file can read canread failed file can read canread file file dest dir destdir copy me copyme htm get absolute file getabsolutefile assert true asserttrue file can read canread failed file can read canread file file dest dir destdir get absolute file getabsolutefile assert true asserttrue file can read canread failed file can read canread didn unexpected resources file file pack txt assert true asserttrue file can read canread passed file can read canread file file dest dir destdir do not copy donotcopy assert true asserttrue file can read canread passed file can read canread file file dest dir destdir skip txt files skiptxtfiles txt assert true asserttrue file can read canread passed file can read canread test inpath dir copy filter with jar testinpathdircopyfilterwithjar ioexception inpath dir copy filter inpathdircopyfilter works output jar file dest dir destdir get temp dir gettempdir assert true asserttrue unable create dest dir destdir dest dir destdir can read canread dest dir destdir mkdirs ajc task ajctask task get task gettask nofile file dest jar destjar file dest dir destdir test inpath dir copy filter with jar testinpathdircopyfilterwithjar jar task set outjar setoutjar dest jar destjar project task get project getproject path indirs path file dir file testdata dir testdatadir inpath dirs inpathdirs get absolute file getabsolutefile indirs add existing addexisting path file dir inpath dir one inpathdirone get absolute path getabsolutepath indirs add existing addexisting path file dir inpath dir two inpathdirtwo get absolute path getabsolutepath task set inpath setinpath indirs task set inpath dir copy filter setinpathdircopyfilter do not copy donotcopy txt check run checkrun task jar file jarfile jar file jarfile jar file jarfile dest jar destjar string expected copy me copyme htm pack includeme pack pack string unexpected do not copy donotcopy skip txt files skiptxtfiles txt pack txt expected length jar entry jarentry entry jar file jarfile get jar entry getjarentry expected assert true asserttrue expected entry unexpected length jar entry jarentry entry jar file jarfile get jar entry getjarentry unexpected assert true asserttrue unexpected entry test inpath dir copy filter error testinpathdircopyfiltererror inpath dir copy filter inpathdircopyfilter fails output directory jar iff ajc task ajctask task get task gettask nofile project task get project getproject path indirs path file dir file testdata dir testdatadir inpath dirs inpathdirs get absolute file getabsolutefile indirs add existing addexisting path file dir inpath dir one inpathdirone get absolute path getabsolutepath indirs add existing addexisting path file dir inpath dir two inpathdirtwo get absolute path getabsolutepath task set inpath setinpath indirs task set inpath dir copy filter setinpathdircopyfilter do not copy donotcopy txt expecting error check run checkrun task inpath dir copy filter inpathdircopyfilter test method submitted patch andrew huff ibm verifies log attribute ajc task ajctask writes output log file test logging mode testloggingmode ajc task ajctask task get task gettask lst task set failonerror setfailonerror file log file logfile file test log file testlogfile txt string log file logfile get absolute path getabsolutepath log file logfile delete initial length initiallength log file logfile length task set log setlog log file logfile run test runtest task new length newlength log file logfile length assert true asserttrue new length newlength initial length initiallength log file logfile delete test command editor testcommandeditor string class name classname verbose command editor verbosecommandeditor get name getname system set property setproperty ajc task ajctask command editor class name classname assert equals assertequals class name classname system get property getproperty ajc task ajctask command editor ajc task ajctask task get task gettask nofile task set command editor setcommandeditor verbose command editor verbosecommandeditor string cmd task make command makecommand assert equals assertequals verbose command editor verbosecommandeditor verbose cmd task get task gettask nofile task set command editor class setcommandeditorclass verbose command editor verbosecommandeditor get name getname cmd task make command makecommand assert equals assertequals verbose command editor verbosecommandeditor verbose cmd test static command editor teststaticcommandeditor xxx test command editor require property test limit to testlimitto num args numargs string arg string args string num args numargs args length args arg limit max num args numargs arg length location location location ajc task test ajctasktest java string new args newargs ajc task ajctask guarded command guardedcommand limit to limitto args max location assert true asserttrue args new args newargs limited read file verify arguments max new args newargs ajc task ajctask guarded command guardedcommand limit to limitto args max location assert true asserttrue args new args newargs assert true asserttrue new args newargs string label new args newargs arrays as list aslist new args newargs assert true asserttrue size label new args newargs length assert equals assertequals argfile new args newargs file file file new args newargs assert true asserttrue readable new args newargs label file can read canread file reader filereader fin fin file reader filereader file buffered reader bufferedreader reader buffered reader bufferedreader fin string reader read line readline assert equals assertequals args assert equals assertequals num entries args length ioexception assert true asserttrue ioexception get message getmessage fin fin close ioexception file delete test find aspectjtools jar testfindaspectjtoolsjar file tools jar toolsjar ajc task ajctask find aspectjtools jar findaspectjtoolsjar tools jar toolsjar assert null assertnull tools jar tools jar toolsjar tools jar toolsjar unit testing system classpath checking exceptions xxx aspect stub system get property getproperty test message holder class name testmessageholderclassname ajc task ajctask task get task gettask compile error compileerror lst task set failonerror setfailonerror messages set length setlength run test runtest task message holder checker messageholderchecker error holder get name getname string result messages to string tostring messages set length setlength assert equals assertequals messages result todo skipped test works locally build machine skip test message holder class with done signal testmessageholderclasswithdonesignal ajc task ajctask task get task gettask lst task set failonerror setfailonerror string unique message confused task set xdone signal setxdonesignal messages set length setlength run test runtest task message holder checker messageholderchecker infos info holder infoholder get name getname string result messages to string tostring string temp string result messages set length setlength temp ends with endswith temp length temp temp substring temp length temp length assert true asserttrue suffix temp message temp string result temp temp substring temp length length temp ends with endswith temp string result temp length temp temp substring temp length temp length assert true asserttrue signalled temp test default list forked no tools testdefaultlistforkednotools ajc task ajctask task get task gettask lst task set fork setfork passed run test runtest task build exception buildexception message holder checker messageholderchecker passed passed string ajc task test ajctasktest test default list forked no tools testdefaultlistforkednotools fails aspectjtools jar classpath system err println test default list forked incremental testdefaultlistforkedincremental ajc task ajctask task get task gettask lst task set fork setfork task set incremental setincremental run test runtest task build exception buildexception message holder checker messageholderchecker failonerror booleans test compile error fail on error default testcompileerrorfailonerrordefault ajc task ajctask task get task gettask compile error compileerror lst print stream printstream serr system err system set err seterr print stream printstream java byte array output stream bytearrayoutputstream run test runtest task build exception buildexception message holder checker messageholderchecker error system set err seterr serr test compile error list default holder testcompileerrorlistdefaultholder ajc task ajctask task get task gettask compile error compileerror lst print stream printstream serr system err system set err seterr print stream printstream java byte array output stream bytearrayoutputstream task execute fail expected build exception buildexception failed compile build exception buildexception system set err seterr serr delete temp dir deletetempdir test default list testdefaultlist ajc task ajctask task get task gettask lst run test runtest task exception message holder checker messageholderchecker infos test compile error list testcompileerrorlist ajc task ajctask task get task gettask compile error compileerror lst task set failonerror setfailonerror run test runtest task exception message holder checker messageholderchecker error test show weave info testshowweaveinfo ajc task ajctask task get task gettask showweaveinfo lst task set show weave info setshowweaveinfo message handler messagehandler message handler messagehandler dont ignore dontignore imessage weaveinfo message holder checker messageholderchecker mhc message holder checker messageholderchecker message holder checker messageholderchecker ignore expect weaving messages mhc weaveinfos run test runtest task exception mhc mhc weaveinfos message holder checker messageholderchecker ignore test compile warning list testcompilewarninglist ajc task ajctask task get task gettask compile warning compilewarning lst run test runtest task exception message holder checker messageholderchecker warning test no such file list testnosuchfilelist ajc task ajctask task get task gettask no such file nosuchfile lst task set failonerror setfailonerror run test runtest task exception message holder checker messageholderchecker error abort test versions testversions string inputs ajc task ajctask target inputs inputs length ajc task ajctask task get task gettask nofile task set target settarget inputs string cmd task make command makecommand check contains checkcontains cmd target check contains checkcontains cmd inputs inputs ajc task ajctask source inputs inputs length ajc task ajctask task get task gettask nofile task set source setsource inputs string cmd task make command makecommand check contains checkcontains cmd source check contains checkcontains cmd inputs inputs ajc task ajctask compliance inputs inputs length ajc task ajctask task get task gettask nofile task set compliance setcompliance inputs string cmd task make command makecommand check contains checkcontains cmd inputs test classpath testclasspath ajc task ajctask task get task gettask nofile string cmd task make command makecommand check contains checkcontains cmd bootclasspath string classpath cmd length classpath equals cmd classpath cmd assert true asserttrue expecting aspectj classpath classpath index of indexof aspectjrt jar sourcefile xxx figure files programmatically test default file testdefaultfile ajc task ajctask task get task gettask testdata java run test runtest task exception message holder checker messageholderchecker infos test no file testnofile ajc task ajctask task get task gettask nofile task set failonerror setfailonerror run test runtest task exception message holder checker messageholderchecker error abort test compile error file testcompileerrorfile ajc task ajctask task get task gettask compile error compileerror lst task set failonerror setfailonerror run test runtest task exception message holder checker messageholderchecker error test compile warning file testcompilewarningfile ajc task ajctask task get task gettask compile warning compilewarning lst task set failonerror setfailonerror run test runtest task exception message holder checker messageholderchecker warning test no such file testnosuchfile ajc task ajctask task get task gettask no such file nosuchfile lst task set failonerror setfailonerror run test runtest task exception message holder checker messageholderchecker error abort test default file complete testdefaultfilecomplete ajc task ajctask task get task gettask lst task set debug level setdebuglevel task set deprecation setdeprecation task set failonerror setfailonerror override ant task set no exit setnoexit task set no import error setnoimporterror task set nowarn setnowarn task set xterminate after compilation setxterminateaftercompilation task set preserve all locals setpreservealllocals task set proceed on error setproceedonerror task set reference info setreferenceinfo task set source setsource task set target settarget task set time settime task set verbose setverbose task set xlint setxlint info run test runtest task exception message holder checker messageholderchecker infos test xoptions testxoptions string xopts string serializable aspects serializableaspects lazy tjp lazytjp reweavable reweavable compress no inline noinline xopts length ajc task ajctask task get task gettask nofile task set x setx xopts string cmd task make command makecommand check contains checkcontains cmd xopts test outxml testoutxml file dest dir destdir get temp dir gettempdir assert true asserttrue unable create dest dir destdir dest dir destdir can read canread dest dir destdir mkdirs ajc task ajctask task get task gettask showweaveinfo lst dest dir destdir task set outxml setoutxml check run checkrun task file outxml file outxmlfile file dest dir destdir meta inf aop xml assert true asserttrue meta inf aop xml missing outxml file outxmlfile exists test outxml file testoutxmlfile string custom name customname custom aop xml file dest dir destdir get temp dir gettempdir assert true asserttrue unable create dest dir destdir dest dir destdir can read canread dest dir destdir mkdirs ajc task ajctask task get task gettask showweaveinfo lst dest dir destdir task set outxmlfile setoutxmlfile custom name customname check run checkrun task file outxml file outxmlfile file dest dir destdir custom name customname assert true asserttrue custom name customname missing outxml file outxmlfile exists test cases run test runtest ajc task ajctask task exception type exceptiontype message holder checker messageholderchecker checker string message holder class messageholderclass task set message holder class setmessageholderclass message holder class messageholderclass run test runtest task exception type exceptiontype checker message handler messagehandler run test runtest ajc task ajctask task exception type exceptiontype message holder checker messageholderchecker checker message handler messagehandler holder message handler messagehandler task set message holder setmessageholder holder run test runtest task exception type exceptiontype checker holder run test runtest ajc task ajctask task exception type exceptiontype message holder checker messageholderchecker checker message handler messagehandler holder throwable thrown forked iff tools jar expect pass rerun forked rerunforked aspectjtools jar aspectjtoolsjar exception type exceptiontype checker checker expect fail expectfail string label forked task execute throwable thrown delete temp dir deletetempdir exception type exceptiontype thrown assert true asserttrue label thrown render thrown thrown assert true asserttrue label expected exception type exceptiontype get name getname exception type exceptiontype is assignable from isassignablefrom thrown get class getclass assert true asserttrue label expected exception type exceptiontype get name getname render thrown holder checker checker message holder checker messageholderchecker checker check holder label rerun forked rerunforked label rerun forked rerunforked reset losing values task set fork setfork task set failonerror setfailonerror task set forkclasspath setforkclasspath path task get project getproject aspectjtools jar aspectjtoolsjar string render throwable thrown lang util langutil render exception renderexception thrown message holder checker messageholderchecker xxx export testing utils ignore ignore integer min message holder checker messageholderchecker message holder checker messageholderchecker number info messages message holder checker messageholderchecker infos message holder checker messageholderchecker ignore error number info messages message holder checker messageholderchecker error message holder checker messageholderchecker ignore message holder checker messageholderchecker error abort message holder checker messageholderchecker ignore warning number info messages message holder checker messageholderchecker warning message holder checker messageholderchecker ignore aborts fails errors warnings infos weaveinfos message holder checker messageholderchecker aborts fails errors warnings infos aborts aborts fails fails errors errors warnings warnings infos infos weaveinfos ignore expect fail expectfail aborts fails errors check imessage holder imessageholder holder string label failed check holder aborts imessage abort check holder fails imessage fail check holder errors imessage error check holder warnings imessage warning check holder infos imessage info check holder weaveinfos imessage weaveinfo failed failed message util messageutil print system err holder label failed check imessage holder imessageholder holder num imessage kind kind num ignore actual holder num messages nummessages kind num actual actual message util messageutil print system err holder kind expected num actual assert equals assertequals kind to string tostring num actual snooping command editor snoopingcommandeditor icommand editor icommandeditor string string string last command lastcommand string edit command editcommand string command last command lastcommand string lang util langutil safe copy safecopy command command string last command lastcommand string lang util langutil safe copy safecopy last command lastcommand verbose command editor verbosecommandeditor icommand editor icommandeditor string verbose verbose string edit command editcommand string command command length verbose equals command command string result string command length result verbose system arraycopy result command command length result appending command editor appendingcommandeditor icommand editor icommandeditor string string icommand editor icommandeditor verbose appending command editor appendingcommandeditor string verbose icommand editor icommandeditor invalid appending command editor appendingcommandeditor string invalid option invalidoption string prefix string suffix appending command editor appendingcommandeditor string prefix string suffix prefix prefix suffix suffix string edit command editcommand string command len command length prefix length suffix length string result string len system arraycopy result prefix prefix length system arraycopy result prefix length command command length system arraycopy result prefix length command length suffix suffix length result