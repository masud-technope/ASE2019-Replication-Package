copyright xerox corporation palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj testing util java byte array output stream bytearrayoutputstream java file java file input stream fileinputstream java ioexception java input stream inputstream java net url java net urlclass loader urlclassloader java util array list arraylist java util arrays java util collections java util iterator java util list load classes file file dirs url jars test class loader testclassloader urlclass loader urlclassloader seek classes dirs list file dirs save url to string tostring url urls for debug string urlsfordebugstring test class loader testclassloader url urls file dirs urls urls for debug string urlsfordebugstring urls lang util langutil throw iax if components bad throwiaxifcomponentsbad dirs dirs array list arraylist dcopy array list arraylist lang util langutil is empty isempty dirs dcopy add all addall arrays as list aslist dirs dirs collections unmodifiable list unmodifiablelist dcopy url get resource getresource string class loader classloader get system resource getsystemresource input stream inputstream get resource as stream getresourceasstream string class loader classloader get system resource as stream getsystemresourceasstream don expect test classes prefixes java org maybe test class name maybetestclassname string starts with startswith java starts with startswith org starts with startswith load class loadclass string resolve class not found exception classnotfoundexception search cache dirs test system superclass url dirs test class not found exception classnotfoundexception thrown maybe test class maybetestclass maybe test class name maybetestclassname result find loaded class findloadedclass result resolve maybe test class maybetestclass subvert dominant paradigm data read class readclass data result define class defineclass data data length handle class format error classformaterror result result find system class findsystemclass class not found exception classnotfoundexception thrown result result load class loadclass resolve class not found exception classnotfoundexception thrown result resolved superclass result result maybe test class maybetestclass data read class readclass data result define class defineclass data data length handle class format error classformaterror result thrown thrown class not found exception classnotfoundexception resolve resolve class resolveclass result result read class readclass string class name classname class not found exception classnotfoundexception string file name filename class name classname replace iterator iter dirs iterator iter has next hasnext file file file file iter file name filename file can read canread get class data getclassdata file get class data getclassdata file file input stream fileinputstream stream file input stream fileinputstream byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream stream read write stream close close to byte array tobytearray ioexception string debug info urls classes string to string tostring test class loader testclassloader urls arrays as list aslist urls for debug string urlsfordebugstring dirs dirs