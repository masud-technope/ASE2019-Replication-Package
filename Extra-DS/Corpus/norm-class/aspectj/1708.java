copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors parc initial implementation alexandre vasseur support aspects org aspectj weaver bcel java util array list arraylist java util collection java util collections java util map org aspectj apache bcel instruction constants instructionconstants org aspectj apache bcel instruction factory instructionfactory org aspectj apache bcel instruction handle instructionhandle org aspectj apache bcel instruction list instructionlist org aspectj bridge isource location isourcelocation org aspectj bridge message org aspectj weaver advice org aspectj weaver advice kind advicekind org aspectj weaver aj attribute ajattribute org aspectj weaver bcexception org aspectj weaver isource context isourcecontext org aspectj weaver member org aspectj weaver resolved member resolvedmember org aspectj weaver resolved type resolvedtype org aspectj weaver shadow org aspectj weaver shadow munger shadowmunger org aspectj weaver unresolved type unresolvedtype org aspectj weaver weaver messages weavermessages org aspectj weaver org aspectj weaver ast literal org aspectj weaver ast test org aspectj weaver patterns exact type pattern exacttypepattern org aspectj weaver patterns exposed state exposedstate org aspectj weaver patterns per clause perclause org aspectj weaver patterns pointcut advice implemented bcel author erik hilsdale author jim hugunin bcel advice bceladvice advice test pointcut test pointcuttest exposed state exposedstate exposed state exposedstate has matched at least once hasmatchedatleastonce bcel advice bceladvice aj attribute ajattribute advice attribute adviceattribute attribute pointcut pointcut member signature resolved type resolvedtype concrete aspect concreteaspect attribute pointcut signature concrete aspect concreteaspect concrete aspect concreteaspect testing bcel advice bceladvice advice kind advicekind kind pointcut pointcut member signature extra argument flags extraargumentflags start isource context isourcecontext source context sourcecontext resolved type resolvedtype concrete aspect concreteaspect aj attribute ajattribute advice attribute adviceattribute kind pointcut extra argument flags extraargumentflags start source context sourcecontext pointcut signature concrete aspect concreteaspect interaction unit tests thrown exceptions thrownexceptions collections empty list implementations shadow munger shadowmunger methods shadow munger shadowmunger concretize resolved type resolvedtype from type fromtype per clause perclause clause suppress lint warnings suppresslintwarnings shadow munger shadowmunger ret concretize from type fromtype clause clear lint suppressions clearlintsuppressions suppressed lint kinds suppressedlintkinds ret shadow munger shadowmunger parameterize with parameterizewith resolved type resolvedtype declaring type declaringtype map type variable map typevariablemap pointcut get pointcut getpointcut parameterize with parameterizewith type variable map typevariablemap bcel advice bceladvice ret member advice signature advicesignature signature advice type variable signature resolved member resolvedmember signature get declaring type getdeclaringtype is generic type isgenerictype advice signature advicesignature resolved member resolvedmember signature parameterized with parameterizedwith declaring type declaringtype get type parameters gettypeparameters declaring type declaringtype declaring type declaringtype is parameterized type isparameterizedtype ret bcel advice bceladvice attribute advice signature advicesignature concrete aspect concreteaspect ret match shadow shadow suppress lint warnings suppresslintwarnings ret match shadow clear lint suppressions clearlintsuppressions suppressed lint kinds suppressedlintkinds ret specialize on specializeon shadow shadow get kind getkind advice kind advicekind bcel shadow bcelshadow shadow initialize for around closure initializeforaroundclosure xxx supporting lazy test code get kind getkind exposed state exposedstate exposed state exposedstate get kind getkind is per entry isperentry exposed state exposedstate exposed state exposedstate get kind getkind is cflow iscflow exposed state exposedstate exposed state exposedstate n free vars nfreevars get signature getsignature exposed state exposedstate exposed state exposedstate get signature getsignature exposed state exposedstate exposed state exposedstate xxx supporting lazy test code shadow get iworld getiworld suppress lint warnings suppresslintwarnings pointcut test pointcuttest get pointcut getpointcut find residue findresidue shadow exposed state exposedstate clear lint suppressions clearlintsuppressions suppressed lint kinds suppressedlintkinds joinpoint primed weaving get kind getkind advice kind advicekind per this entry perthisentry shadow get this var getthisvar get kind getkind advice kind advicekind per target entry pertargetentry shadow get target var gettargetvar this join point thisjoinpoint parameters initialized get extra parameter flags getextraparameterflags this join point static part thisjoinpointstaticpart bcel shadow bcelshadow shadow get this join point static part var getthisjoinpointstaticpartvar bcel shadow bcelshadow shadow get enclosing class getenclosingclass warn on added static initializer warnonaddedstaticinitializer shadow get source location getsourcelocation get extra parameter flags getextraparameterflags this join point thisjoinpoint has guard test hasguardtest pointcut test pointcuttest literal get kind getkind advice kind advicekind is around isaround get kind getkind advice kind advicekind bcel shadow bcelshadow shadow require this join point requirethisjoinpoint has guard test hasguardtest is around isaround bcel shadow bcelshadow shadow get enclosing class getenclosingclass warn on added static initializer warnonaddedstaticinitializer shadow get source location getsourcelocation has guard test hasguardtest get lint getlint multiple advice stopping lazy tjp multipleadvicestoppinglazytjp is enabled isenabled collect problematic advice bcel shadow bcelshadow shadow add advice preventing lazy tjp addadvicepreventinglazytjp is around isaround has guard test hasguardtest get lint getlint no guard for lazy tjp noguardforlazytjp is enabled isenabled build tjp lazily suitable test get lint getlint no guard for lazy tjp noguardforlazytjp signal string shadow to string tostring get source location getsourcelocation isource location isourcelocation bcel shadow bcelshadow shadow get source location getsourcelocation get extra parameter flags getextraparameterflags this enclosing join point static part thisenclosingjoinpointstaticpart bcel shadow bcelshadow shadow get this enclosing join point static part var getthisenclosingjoinpointstaticpartvar bcel shadow bcelshadow shadow get enclosing class getenclosingclass warn on added static initializer warnonaddedstaticinitializer shadow get source location getsourcelocation can inline caninline shadow attribute is proceed in inners isproceedininners xxx guard needed bad test cases concrete aspect concreteaspect concrete aspect concreteaspect is missing ismissing concrete aspect concreteaspect get world getworld is xno inline isxnoinline system err println is woven iswoven bcel object type bcelobjecttype concrete aspect concreteaspect get lazy class gen getlazyclassgen get weaver state getweaverstate bcel world bcelworld get bcel object type getbcelobjecttype concrete aspect concreteaspect get lazy class gen getlazyclassgen is woven iswoven implement on implementon shadow has matched at least once hasmatchedatleastonce bcel shadow bcelshadow shadow bcel shadow bcelshadow get kind getkind advice kind advicekind shadow weave before weavebefore get kind getkind advice kind advicekind after returning afterreturning shadow weave after returning weaveafterreturning get kind getkind advice kind advicekind after throwing afterthrowing unresolved type unresolvedtype catch type catchtype has extra parameter hasextraparameter get extra parameter type getextraparametertype unresolved type unresolvedtype throwable shadow weave after throwing weaveafterthrowing catch type catchtype get kind getkind advice kind advicekind shadow weave after weaveafter get kind getkind advice kind advicekind solution flag aspect annotation prepared query can inline caninline shadow weave around closure weavearoundclosure has dynamic tests hasdynamictests shadow weave around inline weavearoundinline has dynamic tests hasdynamictests get kind getkind advice kind advicekind inter initializer interinitializer shadow weave after returning weaveafterreturning get kind getkind is cflow iscflow shadow weave cflow entry weavecflowentry get signature getsignature get kind getkind advice kind advicekind per this entry perthisentry shadow weave per object entry weaveperobjectentry bcel var bcelvar shadow get this var getthisvar get kind getkind advice kind advicekind per target entry pertargetentry shadow weave per object entry weaveperobjectentry bcel var bcelvar shadow get target var gettargetvar get kind getkind advice kind advicekind softener shadow weave softener weavesoftener exact type pattern exacttypepattern exception type exceptiontype get type gettype get kind getkind advice kind advicekind per type within entry pertypewithinentry ptwimpl entry ptw initialization type matched ptw type pattern shadow weave per type within aspect initialization weavepertypewithinaspectinitialization shadow get enclosing type getenclosingtype bcexception unimplemented kind get kind getkind implementations collection collect checked exceptions collectcheckedexceptions unresolved type unresolvedtype excs excs excs length collections empty list collection ret array list arraylist concrete aspect concreteaspect get world getworld resolved type resolvedtype runtime exception runtimeexception get core type getcoretype unresolved type unresolvedtype runtime exception resolved type resolvedtype error get core type getcoretype unresolved type unresolvedtype error len excs length len resolved type resolvedtype resolve excs is missing ismissing get lint getlint cant find type cantfindtype signal weaver messages weavermessages format weaver messages weavermessages find type exception type excs get name getname get source location getsourcelocation imessage msg message weaver messages weavermessages format weaver messages weavermessages find type exception type excs get name getname imessage error get source location getsourcelocation get message handler getmessagehandler handle message handlemessage msg runtime exception runtimeexception is assignable from isassignablefrom error is assignable from isassignablefrom ret add ret collection thrown exceptions thrownexceptions collection get thrown exceptions getthrownexceptions thrown exceptions thrownexceptions lump interact throwable tests test harness concrete aspect concreteaspect concrete aspect concreteaspect get world getworld get kind getkind is after isafter get kind getkind advice kind advicekind get kind getkind advice kind advicekind concrete aspect concreteaspect get world getworld resolved member resolvedmember resolve signature thrown exceptions thrownexceptions collections empty list thrown exceptions thrownexceptions collect checked exceptions collectcheckedexceptions get exceptions getexceptions thrown exceptions thrownexceptions collections empty list thrown exceptions thrownexceptions munger check advice exceptions declared shadow aspects throwable must check exceptions mustcheckexceptions get concrete aspect getconcreteaspect get concrete aspect getconcreteaspect is annotation style aspect isannotationstyleaspect call prepare called has dynamic tests hasdynamictests pointcut test pointcuttest pointcut test pointcuttest literal test pointcut test pointcuttest literal instruction list simple version advice broken advice block method call param shadow instructions eventually live param extra arg var extraargvar hold thrown exception after x afterx advice param if no advice ifnoadvice instruction handle instructionhandle jump dynamic tests munger fails instruction list instructionlist get advice instructions getadviceinstructions bcel shadow bcelshadow bcel var bcelvar extra arg var extraargvar instruction handle instructionhandle if no advice ifnoadvice bcel shadow bcelshadow shadow bcel shadow bcelshadow instruction factory instructionfactory fact shadow get factory getfactory bcel world bcelworld shadow get world getworld instruction list instructionlist instruction list instructionlist throwing exception mechanism has extra parameter hasextraparameter get kind getkind advice kind advicekind after returning afterreturning unresolved type unresolvedtype extra parameter type extraparametertype get extra parameter type getextraparametertype extra parameter type extraparametertype equals unresolved type unresolvedtype object extra parameter type extraparametertype is primitive type isprimitivetype append bcel renderer bcelrenderer render test rendertest fact test make instanceof makeinstanceof extra arg var extraargvar get extra parameter type getextraparametertype resolve if no advice ifnoadvice append get advice arg setup getadviceargsetup shadow extra arg var extraargvar append get non test advice instructions getnontestadviceinstructions shadow instruction handle instructionhandle if yes advice ifyesadvice get start getstart insert get test instructions gettestinstructions shadow if yes advice ifyesadvice if no advice ifnoadvice if yes advice ifyesadvice instruction list instructionlist get advice arg setup getadviceargsetup bcel shadow bcelshadow shadow bcel var bcelvar extra var extravar instruction list instructionlist closure instantiation closureinstantiation instruction factory instructionfactory fact shadow get factory getfactory bcel world bcelworld shadow get world getworld instruction list instructionlist instruction list instructionlist exposed state exposedstate get aspect instance getaspectinstance append bcel renderer bcelrenderer render expr renderexpr fact exposed state exposedstate get aspect instance getaspectinstance get declaring aspect getdeclaringaspect resolve is annotation style aspect isannotationstyleaspect is annotation style aspect isannotationstyleaspect get concrete aspect getconcreteaspect get concrete aspect getconcreteaspect is annotation style aspect isannotationstyleaspect previous is closure previousisclosure len exposed state exposedstate size len erroneous vars error msgs reported exposed state exposedstate is erroneous var iserroneousvar bcel var bcelvar bcel var bcelvar exposed state exposedstate aspect regular binding handling is annotation style aspect isannotationstyleaspect append closure instantiation closureinstantiation lorg aspectj lang proceeding join point proceedingjoinpoint equals get signature getsignature get parameter types getparametertypes get signature getsignature deal closure arg get kind getkind advice kind advicekind previous is closure previousisclosure get concrete aspect getconcreteaspect get world getworld get message handler getmessagehandler handle message handlemessage message proceeding join point proceedingjoinpoint allowed advice arg to string tostring get source location getsourcelocation avoid verify error pass append instruction constants instructionconstants aconst previous is closure previousisclosure append instruction constants instructionconstants dup previous is closure previousisclosure append closure instantiation closureinstantiation copy lorg aspectj lang join point joinpoint static part staticpart equals get signature getsignature get parameter types getparametertypes get signature getsignature previous is closure previousisclosure get extra parameter flags getextraparameterflags this join point static part thisjoinpointstaticpart shadow get this join point static part bcel var getthisjoinpointstaticpartbcelvar append load appendload fact lorg aspectj lang join point joinpoint equals get signature getsignature get parameter types getparametertypes get signature getsignature previous is closure previousisclosure get extra parameter flags getextraparameterflags this join point thisjoinpoint append shadow load this join point loadthisjoinpoint lorg aspectj lang join point joinpoint enclosing static part enclosingstaticpart equals get signature getsignature get parameter types getparametertypes get signature getsignature previous is closure previousisclosure get extra parameter flags getextraparameterflags this enclosing join point static part thisenclosingjoinpointstaticpart shadow get this enclosing join point static part bcel var getthisenclosingjoinpointstaticpartbcelvar append load appendload fact has extra parameter hasextraparameter previous is closure previousisclosure extra var extravar append load and convert appendloadandconvert fact get extra parameter type getextraparametertype resolve previous is closure previousisclosure get concrete aspect getconcreteaspect get world getworld get message handler getmessagehandler handle message handlemessage message proceeding join point proceedingjoinpoint allowed advice arg to string tostring get source location getsourcelocation avoid verify error pass append instruction constants instructionconstants aconst unresolved type unresolvedtype desired ty desiredty get binding parameter types getbindingparametertypes append load and convert appendloadandconvert fact desired ty desiredty resolve middle formal bindings rock solid ordering is annotation style aspect isannotationstyleaspect get kind getkind advice kind advicekind append closure instantiation closureinstantiation has extra parameter hasextraparameter extra var extravar append load and convert appendloadandconvert fact get extra parameter type getextraparametertype resolve org aspectj ajdt internal compiler ast advice declaration advicedeclaration get extra parameter flags getextraparameterflags this join point static part thisjoinpointstaticpart shadow get this join point static part bcel var getthisjoinpointstaticpartbcelvar append load appendload fact get extra parameter flags getextraparameterflags this join point thisjoinpoint append shadow load this join point loadthisjoinpoint get extra parameter flags getextraparameterflags this enclosing join point static part thisenclosingjoinpointstaticpart shadow get this enclosing join point static part bcel var getthisenclosingjoinpointstaticpartbcelvar append load appendload fact instruction list instructionlist get non test advice instructions getnontestadviceinstructions bcel shadow bcelshadow shadow instruction list instructionlist utility create invoke createinvoke shadow get factory getfactory shadow get world getworld get original signature getoriginalsignature member get original signature getoriginalsignature member sig get signature getsignature sig resolved member resolvedmember resolved member resolvedmember rsig resolved member resolvedmember sig rsig has backing generic member hasbackinggenericmember rsig get backing generic member getbackinggenericmember sig instruction list instructionlist get test instructions gettestinstructions bcel shadow bcelshadow shadow instruction handle instructionhandle instruction handle instructionhandle instruction handle instructionhandle system err println test pointcut test pointcuttest bcel renderer bcelrenderer render test rendertest shadow get factory getfactory shadow get world getworld pointcut test pointcuttest compare to compareto object bcel advice bceladvice bcel advice bceladvice bcel advice bceladvice system err println compare to compareto kind get precedence getprecedence kind get precedence getprecedence kind get precedence getprecedence kind get precedence getprecedence kind is cflow iscflow system err println sort inner cflow entries innercflowentries inner cflow entries innercflowentries system err println inner cflow entries innercflowentries inner cflow entries innercflowentries is below isbelow kind advice kind advicekind cflow below entry cflowbelowentry inner cflow entries innercflowentries is below isbelow inner cflow entries innercflowentries is below isbelow kind is per entry isperentry kind advice kind advicekind softener system println compare concrete aspect concreteaspect get world getworld ret concrete aspect concreteaspect get world getworld compare by precedence comparebyprecedence concrete aspect concreteaspect concrete aspect concreteaspect ret ret resolved type resolvedtype declaring aspect declaringaspect get declaring aspect getdeclaringaspect resolve resolved type resolvedtype declaring aspect declaringaspect get declaring aspect getdeclaringaspect resolve declaring aspect declaringaspect declaring aspect declaringaspect kind is after isafter kind is after isafter get start getstart get start getstart get start getstart get start getstart declaring aspect declaringaspect is assignable from isassignablefrom declaring aspect declaringaspect declaring aspect declaringaspect is assignable from isassignablefrom declaring aspect declaringaspect bcel var bcelvar get exposed state as bcel vars getexposedstateasbcelvars is around isaround ataj aspect is around isaround closure instantiation mapping extracted method wich called get concrete aspect getconcreteaspect get concrete aspect getconcreteaspect is annotation style aspect isannotationstyleaspect bcel var bcelvar system println vars arrays as list aslist exposed state exposedstate vars exposed state exposedstate bcel var bcelvar len exposed state exposedstate vars length bcel var bcelvar ret bcel var bcelvar len len ret bcel var bcelvar exposed state exposedstate vars bcel var bcelvar exposed state exposedstate vars ret has matched something hasmatchedsomething has matched at least once hasmatchedatleastonce suppress lint warnings suppresslintwarnings in world inworld suppressed lint kinds suppressedlintkinds signature bcel method bcelmethod suppressed lint kinds suppressedlintkinds utility get suppressed warnings getsuppressedwarnings signature get annotations getannotations in world inworld get lint getlint suppressed lint kinds suppressedlintkinds collections empty list in world inworld get lint getlint suppress kinds suppresskinds suppressed lint kinds suppressedlintkinds clear lint suppressions clearlintsuppressions in world inworld collection to clear toclear in world inworld get lint getlint clear suppressions clearsuppressions to clear toclear