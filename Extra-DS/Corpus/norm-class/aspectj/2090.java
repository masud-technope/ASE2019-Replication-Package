copyright contributors rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors andy clement initial version org aspectj ajde java buffered reader bufferedreader java file java file reader filereader java file writer filewriter java util array list arraylist java util hash set hashset java util iterator java util list java util org aspectj ajde internal compiler adapter compileradapter org aspectj bridge imessage org aspectj util file util fileutil org aspectj util lang util langutil weaving messages complicated multiple places weaving takes place places vary depending binary weave source places output weaving messages tagged tag weaving message weavingmessage easily find advice simplest deal advice weaving weaver intertype declarations weaver binary weave don originating source declares declare parents source attempted binary weave error message compiler limitation produced declare parents compile time weave time source message produced code compiler binary message produced weaver declare soft advice special kind advice softener advice messages turned bit messy build arg parser buildargparser gen build config genbuildconfig basically method time parse option weaving messages stored build config parser options determined weave messages grab top level message handler ignore weave info weaveinfo messages todo forms declare messages declare precedence show weave messages test case showweavemessagestestcase ajde test case ajdetestcase regenerate debug tests debugtests single iteration reconstruct expected weaving messages files regenerate compiler adapter compileradapter compiler adapter compileradapter string project dir weave info messages test weaveinfomessagestest string bin dir bindir bin string expected results dir expectedresultsdir expected show weave messages test case showweavemessagestestcase string arg arg ensure output directory clean set up setup exception set up setup project dir file util fileutil delete contents deletecontents open file openfile bin dir bindir tear down teardown exception tear down teardown file util fileutil delete contents deletecontents open file openfile bin dir bindir open file openfile bin dir bindir delete file rogue sym file roguesymfile file curr test data path currtestdatapath file separator char separatorchar empty ajsym rogue sym file roguesymfile exists rogue sym file roguesymfile delete weave kinds advice verify messages test weave messages advice testweavemessagesadvice debug tests debugtests system println test weave messages advice testweavemessagesadvice building lst compiler adapter compileradapter compiler adapter compileradapter compiler adapter compileradapter show info messages showinfomessages compiler adapter compileradapter compile string open file openfile lst get absolute path getabsolutepath bpm verify weaving messages verifyweavingmessages advice weave field method itds check weave messages test weave messages itd testweavemessagesitd debug tests debugtests system println ntest weave messages itd ntestweavemessagesitd building lst compiler adapter compileradapter compiler adapter compileradapter compiler adapter compileradapter show info messages showinfomessages compiler adapter compileradapter compile string open file openfile lst get absolute path getabsolutepath bpm verify weaving messages verifyweavingmessages weave declare parents check weave messages test weave messages declare testweavemessagesdeclare debug tests debugtests system println ntest weave messages declare ntestweavemessagesdeclare building lst compiler adapter compileradapter compiler adapter compileradapter compiler adapter compileradapter show info messages showinfomessages compiler adapter compileradapter compile string open file openfile lst get absolute path getabsolutepath bpm verify weaving messages verifyweavingmessages declare weave declare parents check weave messages equivalent binary test binary test weave messages declare extends testweavemessagesdeclareextends debug tests debugtests system println ntest weave messages declare extends ntestweavemessagesdeclareextends building lst compiler adapter compileradapter compiler adapter compileradapter compiler adapter compileradapter show info messages showinfomessages compiler adapter compileradapter compile string open file openfile lst get absolute path getabsolutepath bpm verify weaving messages verifyweavingmessages declare weave declare soft type pointcut check weave messages test weave messages declare soft testweavemessagesdeclaresoft debug tests debugtests system println ntest weave messages declare soft ntestweavemessagesdeclaresoft building lst compiler adapter compileradapter compiler adapter compileradapter compiler adapter compileradapter show info messages showinfomessages compiler adapter compileradapter compile string open file openfile lst get absolute path getabsolutepath bpm verify weaving messages verifyweavingmessages declare soft weave declare type constructor method field check weave messages test weave messages declare annotation testweavemessagesdeclareannotation annotation classes won pre lang util langutil vmor greater vmorgreater debug tests debugtests system println ntest weave messages declare annotation ntestweavemessagesdeclareannotation building lst compiler adapter compileradapter compiler adapter compileradapter compiler adapter compileradapter show info messages showinfomessages compiler adapter compileradapter compile string open file openfile lst get absolute path getabsolutepath bpm verify weaving messages verifyweavingmessages declare annotation weave declare type constructor method field check weave messages don show weave info showweaveinfo arg test weave messages declare annotation weave info off testweavemessagesdeclareannotationweaveinfooff debug tests debugtests system println ntest weave messages declare annotation ntestweavemessagesdeclareannotation building lst compiler adapter compileradapter compiler adapter compileradapter compiler adapter compileradapter show info messages showinfomessages compiler adapter compileradapter compile string open file openfile lst get absolute path getabsolutepath bpm verify weaving messages verifyweavingmessages declare annotation no weave info annotationnoweaveinfo binary weaving tests binary weave variant advice weaving test check messages binary weave source level weave test aspect aspectpath parts woven list weaving messages expect test weave messages binary advice testweavemessagesbinaryadvice debug tests debugtests system println ntest weave messages binary advice ntestweavemessagesbinaryadvice simple jar aspect advice aspectadvice jar inpath hash set hashset inpath add open file openfile simple jar ide manager idemanager get project properties getprojectproperties set inpath setinpath inpath aspectpath hash set hashset aspectpath add open file openfile aspect advice aspectadvice jar ide manager idemanager get project properties getprojectproperties set aspect path setaspectpath aspectpath assert true asserttrue build failed do synchronous build dosynchronousbuild empty lst list ide manager idemanager get compilation source line tasks getcompilationsourcelinetasks verify weaving messages verifyweavingmessages advice binary test weave messages binary itd testweavemessagesbinaryitd debug tests debugtests system println ntest weave messages binary itd ntestweavemessagesbinaryitd simple jar aspect itd aspectitd jar inpath hash set hashset inpath add open file openfile simple jar ide manager idemanager get project properties getprojectproperties set inpath setinpath inpath aspectpath hash set hashset aspectpath add open file openfile aspect itd aspectitd jar ide manager idemanager get project properties getprojectproperties set aspect path setaspectpath aspectpath assert true asserttrue build failed do synchronous build dosynchronousbuild empty lst list ide manager idemanager get compilation source line tasks getcompilationsourcelinetasks verify weaving messages verifyweavingmessages test weave messages binary declare testweavemessagesbinarydeclare debug tests debugtests system println ntest weave messages binary declare ntestweavemessagesbinarydeclare simple jar aspect declare aspectdeclare jar inpath hash set hashset inpath add open file openfile simple jar ide manager idemanager get project properties getprojectproperties set inpath setinpath inpath aspectpath hash set hashset aspectpath add open file openfile aspect declare aspectdeclare jar ide manager idemanager get project properties getprojectproperties set aspect path setaspectpath aspectpath assert true asserttrue build failed do synchronous build dosynchronousbuild empty lst verify weaving messages verifyweavingmessages declare weave declare soft type pointcut check weave messages test weave messages binary declare soft testweavemessagesbinarydeclaresoft debug tests debugtests system println ntest weave messages binary declare soft ntestweavemessagesbinarydeclaresoft simple jar aspect declare soft aspectdeclaresoft jar inpath hash set hashset inpath add open file openfile simple jar ide manager idemanager get project properties getprojectproperties set inpath setinpath inpath aspectpath hash set hashset aspectpath add open file openfile aspect declare soft aspectdeclaresoft jar ide manager idemanager get project properties getprojectproperties set aspect path setaspectpath aspectpath assert true asserttrue build failed do synchronous build dosynchronousbuild empty lst verify weaving messages verifyweavingmessages declare soft binary weaving lost source pointers test weave messages binary advice no debug info testweavemessagesbinaryadvicenodebuginfo debug tests debugtests system println ntest weave messages binary advice ntestweavemessagesbinaryadvice simple jar aspect advice aspectadvice jar inpath hash set hashset inpath add open file openfile simple nodebug jar ide manager idemanager get project properties getprojectproperties set inpath setinpath inpath aspectpath hash set hashset aspectpath add open file openfile aspect advice aspectadvice nodebug jar ide manager idemanager get project properties getprojectproperties set aspect path setaspectpath aspectpath assert true asserttrue build failed do synchronous build dosynchronousbuild empty lst list ide manager idemanager get compilation source line tasks getcompilationsourcelinetasks verify weaving messages verifyweavingmessages advice binary nodebug test weave messages binary itdno debug info testweavemessagesbinaryitdnodebuginfo debug tests debugtests system println ntest weave messages binary itd ntestweavemessagesbinaryitd simple jar aspect itd aspectitd jar inpath hash set hashset inpath add open file openfile simple nodebug jar ide manager idemanager get project properties getprojectproperties set inpath setinpath inpath aspectpath hash set hashset aspectpath add open file openfile aspect itd aspectitd nodebug jar ide manager idemanager get project properties getprojectproperties set aspect path setaspectpath aspectpath assert true asserttrue build failed do synchronous build dosynchronousbuild empty lst list ide manager idemanager get compilation source line tasks getcompilationsourcelinetasks verify weaving messages verifyweavingmessages nodebug test weave messages binary declare no debug info testweavemessagesbinarydeclarenodebuginfo debug tests debugtests system println ntest weave messages binary declare no debug info ntestweavemessagesbinarydeclarenodebuginfo simple jar aspect declare aspectdeclare jar inpath hash set hashset inpath add open file openfile simple nodebug jar ide manager idemanager get project properties getprojectproperties set inpath setinpath inpath aspectpath hash set hashset aspectpath add open file openfile aspect declare aspectdeclare nodebug jar ide manager idemanager get project properties getprojectproperties set aspect path setaspectpath aspectpath assert true asserttrue build failed do synchronous build dosynchronousbuild empty lst verify weaving messages verifyweavingmessages declare nodebug weave declare soft type pointcut check weave messages test weave messages binary declare soft no debug info testweavemessagesbinarydeclaresoftnodebuginfo debug tests debugtests system println ntest weave messages binary declare soft no debug info ntestweavemessagesbinarydeclaresoftnodebuginfo simple jar aspect declare soft aspectdeclaresoft jar inpath hash set hashset inpath add open file openfile simple nodebug jar ide manager idemanager get project properties getprojectproperties set inpath setinpath inpath aspectpath hash set hashset aspectpath add open file openfile aspect declare soft aspectdeclaresoft nodebug jar ide manager idemanager get project properties getprojectproperties set aspect path setaspectpath aspectpath assert true asserttrue build failed do synchronous build dosynchronousbuild empty lst verify weaving messages verifyweavingmessages declare soft nodebug bpm build progress monitor buildprogressmonitor start string config file configfile set progress text setprogresstext string text set progress bar val setprogressbarval new val newval increment progress bar val incrementprogressbarval set progress bar max setprogressbarmax max val maxval get progress bar max getprogressbarmax finish verify weaving messages verifyweavingmessages string testid source file expected f expectedf open file openfile expected results dir expectedresultsdir file separator testid txt regenerate source create file save weave messages saveweavemessages expected f expectedf verify file matches compare weave messages compareweavemessages expected f expectedf compare weaving messages file compare weave messages compareweavemessages file list file contents filecontents array list arraylist buffered reader bufferedreader load file buffered reader bufferedreader file reader filereader string read line readline file contents filecontents add list original file contents originalfilecontents array list arraylist original file contents originalfilecontents add all addall file contents filecontents messages match msg count msgcount list ide manager idemanager get compilation source line tasks getcompilationsourcelinetasks iterator iter iterator iter has next hasnext imessage msg null ide task list manager nullidetasklistmanager source line task sourcelinetask iter message debug tests debugtests system println msg msg get kind getkind equals imessage weaveinfo file contents filecontents msg get message getmessage fail find message msg get message getmessage expected expected stringify original file contents originalfilecontents file contents filecontents remove msg get message getmessage msg count msgcount assert true asserttrue didn expected messages file contents filecontents file contents filecontents size debug tests debugtests system println verified msg count msgcount weaving messages exception fail unexpected exception saving weaving messages string stringify list string buffer stringbuffer result string buffer stringbuffer iterator iter iterator iter has next hasnext string str string iter result append str result append result to string tostring store weaving messages file save weave messages saveweavemessages file system println saving weave messages get name getname file writer filewriter file writer filewriter list ide manager idemanager get compilation source line tasks getcompilationsourcelinetasks iterator iter iterator iter has next hasnext imessage msg null ide task list manager nullidetasklistmanager source line task sourcelinetask iter message msg get kind getkind equals imessage weaveinfo write msg get message getmessage close exception fail unexpected exception saving weaving messages