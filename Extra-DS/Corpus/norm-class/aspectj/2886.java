copyright xerox corporation palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors xerox parc initial implementation org aspectj testing xml java print writer printwriter java util list java util stack org aspectj util lang util langutil manage print stream xml document tracks start elements signals error optionally lineates buffer accumulating maximum width including indent utilities flattening lists rendering buffer xmlwriter string string tab maximum max width maxwidth flowing buffer max width max width maxwidth flowing buffer width extremely inefficient string attribute value attributevalue string input input index of indexof amp string saved input input lang util langutil replace input amp ampamp input index of indexof input saved input lang util langutil replace input amp input lang util langutil replace input ampamp amp input index of indexof input lang util langutil replace input amp input input replace input input replace input attribute value attributevalue string make attribute makeattribute string string attribute value attributevalue flatten list flattenlist normalize string flatten files flattenfiles string strings flatten list flattenlist strings replace string flatten files flattenfiles list paths flatten list flattenlist paths replace string unflatten list unflattenlist string input string lang util langutil comma split commasplit input to array toarray string add flattened items addflatteneditems list list string input lang util langutil throw iax if null throwiaxifnull list list input string items xmlwriter unflatten list unflattenlist input lang util langutil is empty isempty items items length lang util langutil is empty isempty items list add items string flatten list flattenlist list list list list size flatten list flattenlist list to array toarray string flatten list flattenlist object list string buffer stringbuffer string buffer stringbuffer list printed list length object list printed append printed string to string tostring index of indexof illegal argument exception illegalargumentexception comma append to string tostring print writer printwriter stack stack stack attributes done attributesdone string indent max width maxwidth string buffer stringbuffer buffer xmlwriter print writer printwriter lang util langutil throw iax if null throwiaxifnull buffer string buffer stringbuffer max width maxwidth width set max width setmaxwidth max width maxwidth max width maxwidth max width maxwidth max width max width maxwidth max width maxwidth max width max width maxwidth max width maxwidth print element printelement string string attributes attributes done attributesdone illegal state exception illegalstateexception finish attributes buffer length out println outprintln buffer buffer set length setlength string old indent oldindent indent stack size indent tab stack element stackelement stack peek num children numchildren out println outprintln indent attributes indent old indent oldindent start element startelement string close tag closetag start element startelement close tag closetag start element startelement string string attr close tag closetag attributes done attributesdone illegal state exception illegalstateexception finish attributes lang util langutil throw iax if false throwiaxiffalse lang util langutil is empty isempty empty buffer length out println outprintln buffer buffer set length setlength stack size indent tab string buffer stringbuffer string buffer stringbuffer append indent append append lang util langutil is empty isempty attr append append attr trim attributes done attributesdone close tag closetag close tag closetag append out println outprintln to string tostring max width maxwidth length out println outprintln to string tostring buffer length illegal state exception illegalstateexception expected empty attributes starting buffer append to string tostring stack size stack element stackelement stack peek num children numchildren stack push stack element stackelement end element endelement string string err stack element stackelement element stack size err empty stack element stack element stackelement stack pop element equals err expecting element element err err end element endelement stack err illegal state exception illegalstateexception err element num children numchildren out println outprintln indent buffer length out println outprintln buffer buffer set length setlength out println outprintln indent attributes done attributesdone attributes done attributesdone stack size indent indent substring indent length tab length print attribute printattribute string string attributes done attributesdone illegal state exception illegalstateexception attributes trim length illegal argument exception illegalargumentexception string new attr newattr attribute value attributevalue indent len indentlen indent length buffer len bufferlen buffer length new attr len newattrlen buffer len bufferlen indent len indentlen new attr newattr length max width maxwidth buffer len bufferlen new attr len newattrlen buffer append buffer append new attr newattr buffer len bufferlen out println outprintln buffer to string tostring buffer set length setlength buffer append indent new attr newattr end attributes endattributes attributes done attributesdone illegal state exception illegalstateexception attributes attributes done attributesdone print comment printcomment string comment attributes done attributesdone illegal state exception illegalstateexception attributes out println outprintln indent comment close close println string string out println outprintln string out println outprintln string illegal state exception illegalstateexception close println stack element stackelement string num children numchildren stack element stackelement string