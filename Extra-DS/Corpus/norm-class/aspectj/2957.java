copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors parc initial implementation org aspectj ajdt ajc java java util junit framework test case testcase org aspectj ajdt internal core builder org aspectj bridge counting message handler countingmessagehandler org aspectj bridge imessage org aspectj bridge imessage handler imessagehandler org aspectj bridge imessage holder imessageholder org aspectj bridge message handler messagehandler org aspectj bridge message writer messagewriter org aspectj testing util test util testutil org aspectj org eclipse jdt core compiler invalid input exception invalidinputexception org aspectj org eclipse jdt internal compiler impl compiler options compileroptions black box test happening build arg parser test case buildargparsertestcase test case testcase string test dir ajdt ajc tests ajdtajctests testdata path file separator ajc file separator message writer messagewriter message writer messagewriter message writer messagewriter print writer printwriter system build arg parser test case buildargparsertestcase string aj build config ajbuildconfig gen build config genbuildconfig string args imessage handler imessagehandler handler build arg parser buildargparser handler gen build config genbuildconfig args test default classpath and target combo testdefaultclasspathandtargetcombo exception string entry jar file path separator pathseparator jar string classpath system get property getproperty java path system set property setproperty java path entry build arg parser buildargparser parser build arg parser buildargparser message writer messagewriter aj build config ajbuildconfig config parser gen build config genbuildconfig string string err parser get other messages getothermessages assert true asserttrue err err assert true asserttrue config get classpath getclasspath to string tostring config get classpath getclasspath jar assert true asserttrue config get classpath getclasspath to string tostring config get classpath getclasspath jar config gen build config genbuildconfig string message writer messagewriter errors deffered compiler err parser get other messages getothermessages assert true asserttrue err err assert true asserttrue config get classpath getclasspath to string tostring config get classpath getclasspath jar assert true asserttrue config get classpath getclasspath to string tostring config get classpath getclasspath jar parser build arg parser buildargparser message writer messagewriter config parser gen build config genbuildconfig string err parser get other messages getothermessages assert true asserttrue err err assert true asserttrue config get classpath getclasspath to string tostring config get classpath getclasspath jar assert true asserttrue config get classpath getclasspath to string tostring config get classpath getclasspath jar config gen build config genbuildconfig string classpath entry message writer messagewriter errors deffered compiler err parser get other messages getothermessages assert true asserttrue expected errors missing jars err list config get classpath getclasspath jar jar iterator iter iterator iter has next hasnext string element string iter element index of indexof jar jar element index of indexof jar jar assert true asserttrue config get classpath getclasspath to string tostring jar assert true asserttrue config get classpath getclasspath to string tostring jar avoid messing classpath tests system set property setproperty java path classpath string set path setpath system get property getproperty java path string tests fail classpath reset assert equals assertequals classpath set path setpath test path resolution from config args testpathresolutionfromconfigargs string file path test dir config with classpath extdirs boot cpargs configwithclasspathextdirsbootcpargs lst aj build config ajbuildconfig config gen build config genbuildconfig string file path message writer messagewriter list classpath config get full classpath getfullclasspath entries resolved relative location lst file assert equals assertequals entries classpath classpath size iterator cp iter cpiter classpath iterator assert equals assertequals relative testdir file test dir file separator xyz get canonical path getcanonicalpath cp iter cpiter assert equals assertequals relative testdir file test dir file separator myextdir file separator dummy jar get canonical path getcanonicalpath cp iter cpiter assert equals assertequals relative testdir file test dir file separator abc jar get canonical path getcanonicalpath cp iter cpiter list files config get files getfiles assert equals assertequals source files files size iterator f iter fiter files iterator assert equals assertequals relative testdir file test dir file separator abc java get canonical file getcanonicalfile f iter fiter assert equals assertequals relative testdir file test dir file separator xyz file separator def get canonical file getcanonicalfile f iter fiter ioexception fail test failure attempting create canonical path test aj options testajoptions invalid input exception invalidinputexception aj build config ajbuildconfig config gen build config genbuildconfig string xlint message writer messagewriter assert true asserttrue options config get lint mode getlintmode equals aj build config ajbuildconfig ajlint test aspectpath testaspectpath invalid input exception invalidinputexception string source jar ajdt ajc tests ajdtajctests testdata path testclasses jar string source jars ajdt ajc tests ajdtajctests testdata path testclasses jar file path separator pathseparator weaver testdata tracing jar file path separator pathseparator weaver testdata dummy aspect dummyaspect jar aj build config ajbuildconfig config gen build config genbuildconfig string aspectpath source jar message writer messagewriter assert true asserttrue file config get aspectpath getaspectpath get name getname file config get aspectpath getaspectpath get name getname equals testclasses jar config gen build config genbuildconfig string aspectpath source jars message writer messagewriter assert true asserttrue size config get aspectpath getaspectpath size test in jars testinjars invalid input exception invalidinputexception string source jar ajdt ajc tests ajdtajctests testdata path testclasses jar string source jars ajdt ajc tests ajdtajctests testdata path testclasses jar file path separator pathseparator weaver testdata tracing jar file path separator pathseparator weaver testdata dummy aspect dummyaspect jar aj build config ajbuildconfig config gen build config genbuildconfig string injars source jar message writer messagewriter xxx don remain places beta assert true asserttrue config get aj options getajoptions aj compiler options ajcompileroptions option in jars injars config get aj options getajoptions aj compiler options ajcompileroptions option in jars injars equals compiler options compileroptions preserve assert true asserttrue file config get in jars getinjars get name getname file config get in jars getinjars get name getname equals testclasses jar config gen build config genbuildconfig string injars source jars message writer messagewriter assert true asserttrue size config get in jars getinjars size test bad in jars testbadinjars invalid input exception invalidinputexception string source jars ajdt ajc tests ajdtajctests testdata path testclasses jar file path separator pathseparator file path separator pathseparator jar aj build config ajbuildconfig config gen build config genbuildconfig string injars source jars message writer messagewriter assert true asserttrue size config get in jars getinjars size config get in jars getinjars size test bad path to source files testbadpathtosourcefiles counting message handler countingmessagehandler counting handler countinghandler counting message handler countingmessagehandler message writer messagewriter aj build config ajbuildconfig config gen build config genbuildconfig string invented dir inventeddir doesntexist java counting handler countinghandler assert true asserttrue expected error invalid path counting handler countinghandler num messages nummessages imessage error test multiple source roots testmultiplesourceroots invalid input exception invalidinputexception ioexception string srcroot ajdt ajc tests ajdtajctests testdata path src string srcroot ajdt ajc tests ajdtajctests testdata path ajc aj build config ajbuildconfig config gen build config genbuildconfig string sourceroots srcroot file path separator pathseparator srcroot message writer messagewriter assert equals assertequals get canonical path getcanonicalpath file srcroot file config get source roots getsourceroots get absolute path getabsolutepath collection expected files expectedfiles arrays as list aslist file file srcroot file separator java get canonical file getcanonicalfile file srcroot file separator foo java get canonical file getcanonicalfile file srcroot file separator java get canonical file getcanonicalfile file srcroot file separator java get canonical file getcanonicalfile file srcroot file separator get canonical file getcanonicalfile file srcroot file separator get canonical file getcanonicalfile file srcroot file separator pkg file separator java get canonical file getcanonicalfile system println config get files getfiles test util testutil assert set equals assertsetequals expected files expectedfiles config get files getfiles param file string string get canonical path getcanonicalpath file file string ret ret file get canonical path getcanonicalpath ioexception io ex ioex fail unable canonicalize file io ex ioex ret test source root dir testsourcerootdir invalid input exception invalidinputexception ioexception string srcroot ajdt ajc tests ajdtajctests testdata path ajc aj build config ajbuildconfig config gen build config genbuildconfig string sourceroots srcroot message writer messagewriter assert equals assertequals get canonical path getcanonicalpath file srcroot file config get source roots getsourceroots get absolute path getabsolutepath collection expected files expectedfiles arrays as list aslist file file srcroot file separator java get canonical file getcanonicalfile file srcroot file separator java get canonical file getcanonicalfile file srcroot file separator get canonical file getcanonicalfile file srcroot file separator get canonical file getcanonicalfile file srcroot file separator pkg file separator java get canonical file getcanonicalfile system println config get files getfiles test util testutil assert set equals assertsetequals expected files expectedfiles config get files getfiles test bad source root dir testbadsourcerootdir invalid input exception invalidinputexception aj build config ajbuildconfig config gen build config genbuildconfig string sourceroots ajdt ajc tests ajdtajctests testdata path mumble does not exist mumbledoesnotexist file path separator pathseparator ajdt ajc tests ajdtajctests testdata path ajc message writer messagewriter assert true asserttrue config get source roots getsourceroots to string tostring config get source roots getsourceroots size config gen build config genbuildconfig string sourceroots message writer messagewriter assert true asserttrue config get source roots getsourceroots config get source roots getsourceroots size decided error test source root dir with files testsourcerootdirwithfiles invalid input exception invalidinputexception ioexception string srcroot ajdt ajc tests ajdtajctests testdata path ajc pkg aj build config ajbuildconfig config gen build config genbuildconfig string sourceroots srcroot ajdt ajc tests ajdtajctests testdata path src java message writer messagewriter assert equals assertequals get canonical path getcanonicalpath file srcroot file config get source roots getsourceroots get absolute path getabsolutepath collection expected files expectedfiles arrays as list aslist file file srcroot file separator java get canonical file getcanonicalfile file ajdt ajc tests ajdtajctests testdata path file separator src file separator java get canonical file getcanonicalfile test util testutil assert set equals assertsetequals expected files expectedfiles config get files getfiles test ext dirs testextdirs exception string dir ajdt ajc tests ajdtajctests testdata path aj build config ajbuildconfig config gen build config genbuildconfig string extdirs dir message writer messagewriter assert true asserttrue config get classpath getclasspath to string tostring config get classpath getclasspath file dir file separator testclasses jar get canonical path getcanonicalpath test bootclasspath testbootclasspath invalid input exception invalidinputexception string path mumble file separator jar aj build config ajbuildconfig config gen build config genbuildconfig string bootclasspath path message writer messagewriter assert true asserttrue find path contained entry config get bootclasspath getbootclasspath to string tostring string config get bootclasspath getbootclasspath index of indexof path config gen build config genbuildconfig string message writer messagewriter assert true asserttrue config get bootclasspath getbootclasspath to string tostring config get bootclasspath getbootclasspath equals path test output jar testoutputjar invalid input exception invalidinputexception string jar ajdt ajc tests ajdtajctests testdata path testclasses jar aj build config ajbuildconfig config gen build config genbuildconfig string outjar jar message writer messagewriter xxx don remain places beta assert true asserttrue generate config get aj options getajoptions aj compiler options ajcompileroptions option out jar outjar config get aj options getajoptions aj compiler options ajcompileroptions option out jar outjar equals compiler options compileroptions generate assert equals assertequals get canonical path getcanonicalpath file jar config get output jar getoutputjar get absolute path getabsolutepath file non existing jar nonexistingjar file ajdt ajc tests ajdtajctests testdata path mumble does not exist mumbledoesnotexist jar config gen build config genbuildconfig string outjar non existing jar nonexistingjar get absolute path getabsolutepath message writer messagewriter assert equals assertequals get canonical path getcanonicalpath non existing jar nonexistingjar config get output jar getoutputjar get absolute path getabsolutepath non existing jar nonexistingjar delete xxx shouldn pass test combined options testcombinedoptions invalid input exception invalidinputexception aj build config ajbuildconfig config gen build config genbuildconfig string xlint error target message writer messagewriter assert true asserttrue target config get options getoptions target jdk targetjdk compiler options compileroptions jdk assert true asserttrue xlint option config get lint mode getlintmode equals aj build config ajbuildconfig ajlint error test output directory setting testoutputdirectorysetting invalid input exception invalidinputexception aj build config ajbuildconfig config gen build config genbuildconfig string test dir message writer messagewriter assert true asserttrue file config get output dir getoutputdir get path getpath get absolute path getabsolutepath file test dir get absolute path getabsolutepath config get output dir getoutputdir get absolute path getabsolutepath equals file test dir get absolute path getabsolutepath test classpath setting testclasspathsetting invalid input exception invalidinputexception string entry jar file path separator pathseparator jar aj build config ajbuildconfig config gen build config genbuildconfig string classpath entry message writer messagewriter list config get classpath getclasspath jar jar iterator iter iterator iter has next hasnext string element string iter element index of indexof jar jar element index of indexof jar jar assert true asserttrue config get classpath getclasspath to string tostring jar assert true asserttrue config get classpath getclasspath to string tostring jar test arg in config file testarginconfigfile invalid input exception invalidinputexception string file path test dir config with args configwithargs lst string path bin aj build config ajbuildconfig config gen build config genbuildconfig string file path message writer messagewriter assert not null assertnotnull config file output dir outputdir config get output dir getoutputdir assert not null assertnotnull output dir outputdir assert equals assertequals output dir outputdir get path getpath path test non existent config file testnonexistentconfigfile ioexception string file path test dir bug test lst aj build config ajbuildconfig config gen build config genbuildconfig string file path message writer messagewriter string file test dir bug java get canonical path getcanonicalpath string file test dir bug java get canonical path getcanonicalpath string file test dir bug java get canonical path getcanonicalpath list path list pathlist array list arraylist iterator config get files getfiles iterator has next hasnext path list pathlist add file get canonical path getcanonicalpath assert true asserttrue path list pathlist assert true asserttrue path list pathlist assert true asserttrue path list pathlist test xlint testxlint invalid input exception invalidinputexception ajdt command ajdtcommand command ajdt command ajdtcommand aj build config ajbuildconfig config gen build config genbuildconfig string xlint message writer messagewriter assert true asserttrue config get lint mode getlintmode equals aj build config ajbuildconfig ajlint config gen build config genbuildconfig string xlint warn message writer messagewriter assert true asserttrue config get lint mode getlintmode equals aj build config ajbuildconfig ajlint warn config gen build config genbuildconfig string xlint error message writer messagewriter assert true asserttrue config get lint mode getlintmode equals aj build config ajbuildconfig ajlint error config gen build config genbuildconfig string xlint ignore message writer messagewriter assert true asserttrue config get lint mode getlintmode equals aj build config ajbuildconfig ajlint ignore test xlintfile testxlintfile invalid input exception invalidinputexception string lint file lintfile ajdt ajc tests ajdtajctests testdata path lintspec properties string bad lint file badlintfile lint props aj build config ajbuildconfig config gen build config genbuildconfig string xlintfile lint file lintfile message writer messagewriter assert true asserttrue file lint file lintfile exists assert equals assertequals get canonical path getcanonicalpath file lint file lintfile config get lint spec file getlintspecfile get absolute path getabsolutepath option eaten aspect j aspectj argument parser jdt compiler based doesn understand change compiler base determine weaver behave autoboxing behaves differently flag integer integer applies primitive types test source testsource invalid input exception invalidinputexception aj build config ajbuildconfig config gen build config genbuildconfig string source message writer messagewriter assert true asserttrue mode config get jave getjave behaviour aj build config ajbuildconfig config gen build config genbuildconfig string message writer messagewriter assert true asserttrue mode config get behave in java getbehaveinjava config gen build config genbuildconfig string source message writer messagewriter assert true asserttrue mode config get behave in java getbehaveinjava assert true asserttrue mode config get options getoptions source level sourcelevel compiler options compileroptions jdk config gen build config genbuildconfig string source message writer messagewriter assert true asserttrue mode config get behave in java getbehaveinjava assert true asserttrue mode config get options getoptions source level sourcelevel compiler options compileroptions jdk test options testoptions invalid input exception invalidinputexception ajdt command ajdtcommand command ajdt command ajdtcommand string target aj build config ajbuildconfig config gen build config genbuildconfig string target target source target message writer messagewriter assert true asserttrue target config get options getoptions target jdk targetjdk compiler options compileroptions jdk assert true asserttrue source config get options getoptions source level sourcelevel compiler options compileroptions jdk test lst file expansion testlstfileexpansion ioexception file not found exception filenotfoundexception invalid input exception invalidinputexception string file path test dir config lst string source path java string source path java file file file path aj build config ajbuildconfig config gen build config genbuildconfig string file path message writer messagewriter list result list resultlist config get files getfiles assert true asserttrue correct number files result list resultlist size assert true asserttrue result list resultlist to string tostring file test dir source path get canonical file getcanonicalfile result list resultlist file test dir source path get canonical file getcanonicalfile assert true asserttrue result list resultlist to string tostring source path result list resultlist file test dir source path get canonical file getcanonicalfile remove limitation test arg in config file and relativizing path param testarginconfigfileandrelativizingpathparam invalid input exception invalidinputexception string file path test dir config with args configwithargs lst string path test dir bin aj build config ajbuildconfig config gen build config genbuildconfig string file path assert true asserttrue config get output dir getoutputdir get path getpath path config get output dir getoutputdir get absolute path getabsolutepath equals file path get absolute path getabsolutepath test aj file inclusion testajfileinclusion invalid input exception invalidinputexception gen build config genbuildconfig string test dir test dir message writer messagewriter test outxml testoutxml imessage holder imessageholder message holder messageholder message handler messagehandler aj build config ajbuildconfig config gen build config genbuildconfig string outxml show weave info showweaveinfo message holder messageholder assert true asserttrue warnings message holder messageholder message holder messageholder has any message hasanymessage imessage warning assert equals assertequals wrong outxml meta inf aop xml config get outxml name getoutxmlname assert true asserttrue option currupted config get show weaving information getshowweavinginformation test outxmlfile testoutxmlfile imessage holder imessageholder message holder messageholder message handler messagehandler aj build config ajbuildconfig config gen build config genbuildconfig string outxmlfile custom aop xml show weave info showweaveinfo message holder messageholder assert true asserttrue warnings message holder messageholder message holder messageholder has any message hasanymessage imessage warning assert equals assertequals wrong outxml custom aop xml config get outxml name getoutxmlname assert true asserttrue option currupted config get show weaving information getshowweavinginformation set up setup exception set up setup tear down teardown exception tear down teardown