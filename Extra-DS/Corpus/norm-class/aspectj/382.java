copyright palo alto center incorporated parc rights reserved program accompanying materials terms common license accompanies distribution http eclipse org legal cpl html contributors parc initial implementation org aspectj ajdt internal compiler ast java lang reflect modifier java util array list arraylist java util list org aspectj ajdt internal compiler lookup aj type constants ajtypeconstants org aspectj ajdt internal compiler lookup eclipse factory eclipsefactory org aspectj ajdt internal compiler lookup privileged handler privilegedhandler org aspectj bridge context compilation and weaving context compilationandweavingcontext org aspectj bridge context context token contexttoken org aspectj org eclipse jdt core compiler char operation charoperation org aspectj org eclipse jdt internal compiler class file classfile org aspectj org eclipse jdt internal compiler compilation result compilationresult org aspectj org eclipse jdt internal compiler ast annotation org aspectj org eclipse jdt internal compiler ast argument org aspectj org eclipse jdt internal compiler ast type declaration typedeclaration org aspectj org eclipse jdt internal compiler ast type reference typereference org aspectj org eclipse jdt internal compiler codegen code stream codestream org aspectj org eclipse jdt internal compiler lookup array binding arraybinding org aspectj org eclipse jdt internal compiler lookup class scope classscope org aspectj org eclipse jdt internal compiler lookup method binding methodbinding org aspectj org eclipse jdt internal compiler lookup reference binding referencebinding org aspectj org eclipse jdt internal compiler lookup type binding typebinding org aspectj weaver advice org aspectj weaver advice kind advicekind org aspectj weaver aj attribute ajattribute org aspectj weaver name mangler namemangler org aspectj weaver resolved member resolvedmember org aspectj weaver unresolved type unresolvedtype represents advice aspect generate method body advice attribute including additional author jim hugunin advice declaration advicedeclaration aj method declaration ajmethoddeclaration parsing pointcut designator pointcutdesignator pointcut designator pointcutdesignator referenced if pseudo token ifpseudotoken make arguments makearguments base argument count baseargumentcount parsing referenced proceed argument extra argument extraargument parsing referenced proceed asm element formatter asmelementformatter advice kind advicekind kind extra argument flags extraargumentflags resolve staments resolvestaments referenced proceed method binding methodbinding proceed method binding proceedmethodbinding populated proceed find enclosing around findenclosingaround list proceed calls proceedcalls array list arraylist proceed in inners proceedininners resolved member resolvedmember proceed call signatures proceedcallsignatures formals unchanged to proceed formalsunchangedtoproceed unresolved type unresolvedtype declared exceptions declaredexceptions advice declaration advicedeclaration compilation result compilationresult result advice kind advicekind kind result return type returntype type reference typereference base type reference basetypereference kind kind override generate info attributes generateinfoattributes class file classfile class file classfile list array list arraylist add eclipse attribute adapter eclipseattributeadapter make attribute makeattribute add declaration start line attribute adddeclarationstartlineattribute class file classfile class file classfile generate method info attribute generatemethodinfoattribute binding aj attribute ajattribute make attribute makeattribute kind advice kind advicekind aj attribute ajattribute advice attribute adviceattribute kind pointcut designator pointcutdesignator get pointcut getpointcut extra argument flags extraargumentflags source start sourcestart source end sourceend proceed in inners proceedininners proceed call signatures proceedcallsignatures formals unchanged to proceed formalsunchangedtoproceed declared exceptions declaredexceptions aj attribute ajattribute advice attribute adviceattribute kind pointcut designator pointcutdesignator get pointcut getpointcut extra argument flags extraargumentflags source start sourcestart source end sourceend override resolve statements resolvestatements binding ignore further investigation ignorefurtherinvestigation safety class scope classscope upper scope upperscope class scope classscope scope parent modifiers check and set modifiers checkandsetmodifiers modifiers upper scope upperscope binding modifiers bindingmodifiers modifiers binding modifiers acc generic signature accgenericsignature binding modifiers binding modifiers bindingmodifiers kind advice kind advicekind after throwing afterthrowing extra argument extraargument type binding typebinding arg tb argtb extra argument extraargument binding type type binding typebinding expected tb expectedtb upper scope upperscope get java lang throwable getjavalangthrowable arg tb argtb is compatible with iscompatiblewith expected tb expectedtb scope problem reporter problemreporter type mismatch error typemismatcherror arg tb argtb expected tb expectedtb extra argument extraargument ignore further investigation ignorefurtherinvestigation pointcut designator pointcutdesignator finish resolve types finishresolvetypes binding base argument count baseargumentcount upper scope upperscope reference context referencecontext binding binding ignore further investigation ignorefurtherinvestigation kind advice kind advicekind reference binding referencebinding exceptions reference binding referencebinding upper scope upperscope get java lang throwable getjavalangthrowable proceed method binding proceedmethodbinding method binding methodbinding modifier proceed to char array tochararray binding return type returntype resize base argument count baseargumentcount binding parameters exceptions binding declaring class declaringclass proceed method binding proceedmethodbinding selector char operation charoperation concat selector proceed method binding proceedmethodbinding selector upper scope upperscope resolve statements resolvestatements binding determine extra argument flags determineextraargumentflags kind advice kind advicekind proceed calls proceedcalls size eclipse factory eclipsefactory eclipse factory eclipsefactory from scope lookup environment fromscopelookupenvironment upper scope upperscope system err println access arrays as list aslist handler get members getmembers xxx correctly formals unchanged to proceed formalsunchangedtoproceed base argument count baseargumentcount proceed call signatures proceedcallsignatures resolved member resolvedmember proceed in inners proceedininners declared exceptions declaredexceptions unresolved type unresolvedtype proceed call proceed proceed calls proceedcalls call in inner ininner system err println proceed call proceed in inners proceedininners xxx wrong proceed call signatures proceedcallsignatures make resolved member makeresolvedmember call binding proceed inners won inlined code unneeded proceed in inners proceedininners privileged handler privilegedhandler handler privileged handler privilegedhandler upper scope upperscope reference context referencecontext binding privileged handler privilegedhandler handler handler privileged handler privilegedhandler aspect declaration aspectdeclaration upper scope upperscope reference context referencecontext upper scope upperscope reference context referencecontext binding privileged handler privilegedhandler handler traverse make decls public visitor makedeclspublicvisitor class scope classscope access for inline visitor accessforinlinevisitor access for inline visitor accessforinlinevisitor aspect declaration aspectdeclaration upper scope upperscope reference context referencecontext handler context token contexttoken tok compilation and weaving context compilationandweavingcontext entering phase enteringphase compilation and weaving context compilationandweavingcontext access inline selector traverse class scope classscope compilation and weaving context compilationandweavingcontext leaving phase leavingphase tok proceed in inners proceedininners won inline body is inlinable isinlinable proceed in inners proceedininners called proceed resolve type resolvetype get declared parameter count getdeclaredparametercount works code generation arguments length extra argument extraargument advice count ones countones extra argument flags extraargumentflags generate proceed method generateproceedmethod class scope classscope class scope classscope class file classfile class file classfile method binding methodbinding binding method binding methodbinding proceed method binding proceedmethodbinding class file classfile generate method info header generatemethodinfoheader binding method attribute offset methodattributeoffset class file classfile contents offset contentsoffset attribute number attributenumber class file classfile generate method info attribute generatemethodinfoattribute binding ast util astutil get aj synthetic attribute getajsyntheticattribute code attribute offset codeattributeoffset class file classfile contents offset contentsoffset class file classfile generate code attribute header generatecodeattributeheader code stream codestream code stream codestream class file classfile code stream codestream code stream codestream reset class file classfile push closure nargs binding parameters length closure index closureindex nargs closure index closureindex ast util astutil slots needed slotsneeded binding parameters code stream codestream load object loadobject closure index closureindex build object code stream codestream generate inlined value generateinlinedvalue nargs code stream codestream new array newarray array binding arraybinding class scope classscope get type gettype type binding typebinding java lang object type binding typebinding java lang object length class scope classscope environment nargs type binding typebinding type binding parameters code stream codestream dup code stream codestream generate inlined value generateinlinedvalue code stream codestream load type ast util astutil slots needed slotsneeded type type is base type isbasetype code stream codestream invokestatic aj type constants ajtypeconstants get conversion method to object getconversionmethodtoobject class scope classscope type code stream codestream aastore call reference binding referencebinding closure type closuretype reference binding referencebinding binding parameters nargs method binding methodbinding run method runmethod closure type closuretype get methods getmethods to char array tochararray code stream codestream invokevirtual run method runmethod type binding typebinding return type returntype binding return type returntype return type returntype is base type isbasetype code stream codestream invokestatic aj type constants ajtypeconstants get conversion method from object getconversionmethodfromobject class scope classscope return type returntype code stream codestream checkcast return type returntype ast util astutil generate return generatereturn return type returntype code stream codestream class file classfile complete code attribute completecodeattribute code attribute offset codeattributeoffset attribute number attributenumber class file classfile complete method info completemethodinfo method attribute offset methodattributeoffset attribute number attributenumber override generate code generatecode class scope classscope class scope classscope class file classfile class file classfile ignore further investigation ignorefurtherinvestigation generate code generatecode class scope classscope class file classfile proceed method binding proceedmethodbinding generate proceed method generateproceedmethod class scope classscope class file classfile determine extra argument flags determineextraargumentflags extra argument extraargument extra argument flags extraargumentflags advice extra argument extraargument this join point visitor thisjoinpointvisitor tjp this join point visitor thisjoinpointvisitor extra argument flags extraargumentflags tjp remove unused extra arguments removeunusedextraarguments type binding typebinding resize new size newsize type binding typebinding bindings len bindings length type binding typebinding ret type binding typebinding new size newsize system arraycopy bindings ret math min new size newsize len ret add after returning afterreturning after throwing afterthrowing annotation add at aspect jannotations addataspectjannotations annotation advice annotation adviceannotation string pointcut expression pointcutexpression pointcut designator pointcutdesignator get pointcut getpointcut to string tostring string extra argument name extraargumentname extra argument extraargument extra argument name extraargumentname string extra argument extraargument string arg names argnames build arg name representation buildargnamerepresentation kind advice kind advicekind advice annotation adviceannotation at aspect jannotation factory ataspectjannotationfactory create before annotation createbeforeannotation pointcut expression pointcutexpression arg names argnames declaration source start declarationsourcestart kind advice kind advicekind advice annotation adviceannotation at aspect jannotation factory ataspectjannotationfactory create after annotation createafterannotation pointcut expression pointcutexpression arg names argnames declaration source start declarationsourcestart kind advice kind advicekind after returning afterreturning advice annotation adviceannotation at aspect jannotation factory ataspectjannotationfactory create after returning annotation createafterreturningannotation pointcut expression pointcutexpression arg names argnames extra argument name extraargumentname declaration source start declarationsourcestart kind advice kind advicekind after throwing afterthrowing advice annotation adviceannotation at aspect jannotation factory ataspectjannotationfactory create after throwing annotation createafterthrowingannotation pointcut expression pointcutexpression arg names argnames extra argument name extraargumentname declaration source start declarationsourcestart kind advice kind advicekind advice annotation adviceannotation at aspect jannotation factory ataspectjannotationfactory create around annotation createaroundannotation pointcut expression pointcutexpression arg names argnames declaration source start declarationsourcestart at aspect jannotation factory ataspectjannotationfactory add annotation addannotation advice annotation adviceannotation scope string build arg name representation buildargnamerepresentation string buffer stringbuffer args string buffer stringbuffer num args we care about numargswecareabout get declared parameter count getdeclaredparametercount arguments num args we care about numargswecareabout args append args append string arguments extra argument extraargument num args we care about numargswecareabout args append args append string extra argument extraargument args to string tostring override called class scope classscope post parse postparse post parse postparse type declaration typedeclaration type dec typedec aspect declaration aspectdeclaration aspect decl aspectdecl aspect declaration aspectdeclaration type dec typedec advice sequence number in type advicesequencenumberintype aspect decl aspectdecl advice counter advicecounter string buffer stringbuffer stringified pointcut stringifiedpointcut string buffer stringbuffer pointcut designator pointcutdesignator print stringified pointcut stringifiedpointcut selector name mangler namemangler advice name advicename eclipse factory eclipsefactory get name getname type dec typedec binding replace kind advice sequence number in type advicesequencenumberintype stringified pointcut stringifiedpointcut to string tostring hash code hashcode to char array tochararray arguments base argument count baseargumentcount arguments length kind advice kind advicekind extra argument extraargument make final argument makefinalargument ajc around closure aroundclosure aj type constants ajtypeconstants get around closure type getaroundclosuretype added arguments addedarguments extra argument extraargument added arguments addedarguments arguments extend arguments length extendargumentslength arguments added arguments addedarguments base argument count baseargumentcount extra argument extraargument arguments extra argument extraargument arguments make final argument makefinalargument this join point static part thisjoinpointstaticpart aj type constants ajtypeconstants get join point static part type getjoinpointstaticparttype arguments make final argument makefinalargument this join point thisjoinpoint aj type constants ajtypeconstants get join point type getjoinpointtype arguments make final argument makefinalargument this enclosing join point static part thisenclosingjoinpointstaticpart aj type constants ajtypeconstants get join point static part type getjoinpointstaticparttype pointcut designator pointcutdesignator is error iserror ignore further investigation ignorefurtherinvestigation pointcut designator pointcutdesignator post parse postparse type dec typedec check and set modifiers checkandsetmodifiers modifiers class scope classscope scope modifiers modifier modifiers modifier strict modifier modifier strict tag as having errors tagashavingerrors scope problem reporter problemreporter signal error signalerror declaration source start declarationsourcestart source start sourcestart illegal modifier advice allowed modifier called if pseudo token ifpseudotoken argument add tjp arguments addtjparguments argument arguments arguments length arguments extend arguments length extendargumentslength arguments arguments make final argument makefinalargument this join point static part thisjoinpointstaticpart aj type constants ajtypeconstants get join point static part type getjoinpointstaticparttype arguments make final argument makefinalargument this join point thisjoinpoint aj type constants ajtypeconstants get join point type getjoinpointtype arguments make final argument makefinalargument this enclosing join point static part thisenclosingjoinpointstaticpart aj type constants ajtypeconstants get join point static part type getjoinpointstaticparttype arguments argument make final argument makefinalargument string type reference typereference type ref typeref xxx encode start location pos argument to char array tochararray pos type ref typeref modifier argument extend arguments length extendargumentslength argument args added arguments addedarguments args argument added arguments addedarguments len args length argument ret argument len added arguments addedarguments system arraycopy args ret len ret string to string tostring tab string tab string tabstring tab modifiers acc default accdefault modifiers string modifiersstring modifiers kind advice kind advicekind return type to string returntypetostring string selector nls arguments arguments length arguments to string tostring arguments length nls nls extra argument extraargument extra argument extraargument to string tostring thrown exceptions thrownexceptions nls thrown exceptions thrownexceptions length thrown exceptions thrownexceptions to string tostring thrown exceptions thrownexceptions length nls pointcut designator pointcutdesignator pointcut designator pointcutdesignator to string tostring to string statements tostringstatements tab string buffer stringbuffer print body printbody indent string buffer stringbuffer output output append pointcut designator pointcutdesignator output append pointcut designator pointcutdesignator to string tostring print body printbody indent output string buffer stringbuffer print return type printreturntype indent string buffer stringbuffer output kind advice kind advicekind print return type printreturntype indent output output