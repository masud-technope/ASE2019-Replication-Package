copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse swt internal image org eclipse swt org eclipse swt graphics java jpegfile format jpegfileformat file format fileformat restart interval restartinterval jpegframe header jpegframeheader frame header frameheader image width imagewidth image height imageheight interleaved mcu cols interleavedmcucols interleaved mcu rows interleavedmcurows max v maxv max h maxh progressive sample precision sampleprecision n components ncomponents frame components framecomponents component ids componentids image components imagecomponents data unit dataunit data units dataunits preceding dcs precedingdcs jpegscan header jpegscanheader scan header scanheader data buffer databuffer current bit count currentbitcount buffer current position buffercurrentposition restarts to go restartstogo next restart number nextrestartnumber jpeghuffman table jpeghuffmantable ac huffman tables achuffmantables jpeghuffman table jpeghuffmantable dc huffman tables dchuffmantables quantization tables quantizationtables current byte currentbyte encoder qfactor encoderqfactor eobrun jpegconstants dctsize dctsizesqr jpegfixed point constants jpegfixedpointconstants jpegmarker codes jpegmarkercodes app x ffe xffe app x ffef xffef x fffe xfffe dac x ffcc xffcc dhp x ffde xffde dht x ffc xffc dnl x ffdc xffdc dri x ffdd xffdd dqt x ffdb xffdb eoi x ffd xffd exp x ffdf xffdf jpg x ffc xffc jpg x fff xfff jpg x fffd xfffd rst x ffd xffd rst x ffd xffd rst x ffd xffd rst x ffd xffd rst x ffd xffd rst x ffd xffd rst x ffd xffd rst x ffd xffd sof x ffc xffc sof x ffc xffc sof x ffc xffc sof x ffc xffc sof x ffc xffc sof x ffc xffc sof x ffc xffc sof x ffc xffc sof x ffca xffca sof x ffcb xffcb sof x ffcd xffcd sof x ffce xffce sof x ffcf xffcf soi x ffd xffd sos x ffda xffda tem x ff xff jpegframe component parameter constants jpegframecomponentparameterconstants tqi jpegscan component parameter constants jpegscancomponentparameterconstants jfif component constants extend test extendtest extend offset extendoffset zig zag zigzag cr rtable crrtable cb btable cbbtable cr gtable crgtable cb gtable cbgtable rytable gytable bytable rcb table rcbtable gcb table gcbtable bcb table bcbtable rcr table rcrtable gcr table gcrtable bcr table bcrtable nbits table nbitstable initialize compress image data imagedata image data ycomp dataycomp data cb comp datacbcomp data cr comp datacrcomp src width srcwidth image width src height srcheight image height vh factor vhfactor max v maxv max h maxh frame component framecomponent image components imagecomponents n components ncomponents n components ncomponents frame component framecomponent frame components framecomponents component ids componentids image components imagecomponents frame component framecomponent frame component framecomponent frame component framecomponent frame components framecomponents component ids componentids y pos ypos y pos ypos src height srcheight y pos ypos src ofs srcofs y pos ypos src width srcwidth dst ofs dstofs y pos ypos frame component framecomponent system arraycopy data ycomp dataycomp src ofs srcofs image components imagecomponents dst ofs dstofs src width srcwidth frame component framecomponent frame components framecomponents component ids componentids y pos ypos y pos ypos src height srcheight max v maxv y pos ypos dest row index destrowindex y pos ypos frame component framecomponent x pos xpos x pos xpos src width srcwidth max h maxh x pos xpos sum max v maxv src index srcindex y pos ypos max v maxv src width srcwidth x pos xpos max h maxh max h maxh sum data cb comp datacbcomp src index srcindex x ff xff image components imagecomponents dest row index destrowindex x pos xpos sum vh factor vhfactor frame component framecomponent frame components framecomponents component ids componentids y pos ypos y pos ypos src height srcheight max v maxv y pos ypos dest row index destrowindex y pos ypos frame component framecomponent x pos xpos x pos xpos src width srcwidth max h maxh x pos xpos sum max v maxv src index srcindex y pos ypos max v maxv src width srcwidth x pos xpos max h maxh max h maxh sum data cr comp datacrcomp src index srcindex x ff xff image components imagecomponents dest row index destrowindex x pos xpos sum vh factor vhfactor i comp icomp i comp icomp n components ncomponents i comp icomp image component imagecomponent image components imagecomponents i comp icomp frame component framecomponent frame components framecomponents component ids componentids i comp icomp h factor hfactor frame component framecomponent v factor vfactor frame component framecomponent component width componentwidth frame component framecomponent component height componentheight frame component framecomponent compressed width compressedwidth src width srcwidth max h maxh h factor hfactor compressed height compressedheight src height srcheight max v maxv v factor vfactor compressed width compressedwidth component width componentwidth delta component width componentwidth compressed width compressedwidth y pos ypos y pos ypos compressed height compressedheight y pos ypos dst ofs dstofs y pos ypos component width componentwidth delta data value datavalue image component imagecomponent dst ofs dstofs x ff xff delta image component imagecomponent dst ofs dstofs data value datavalue compressed height compressedheight component height componentheight src ofs srcofs compressed height compressedheight component width componentwidth y pos ypos compressed height compressedheight y pos ypos component height componentheight y pos ypos dst ofs dstofs y pos ypos component width componentwidth system arraycopy image component imagecomponent src ofs srcofs image component imagecomponent dst ofs dstofs component width componentwidth convert bit rgbto ycb cr bitrgbtoycbcr image data imagedata image rgb rgbs image get rgbs getrgbs palette size palettesize rgbs length y comp ycomp palette size palettesize cb comp cbcomp palette size palettesize cr comp crcomp palette size palettesize src width srcwidth image width src height srcheight image height palette size palettesize rgb color rgbs color red color green color blue rytable gytable bytable y comp ycomp y comp ycomp rcb table rcbtable gcb table gcbtable bcb table bcbtable cb comp cbcomp cb comp cbcomp rcr table rcrtable gcr table gcrtable bcr table bcrtable cr comp crcomp cr comp crcomp b size bsize src width srcwidth src height srcheight data ycomp dataycomp b size bsize data cb comp datacbcomp b size bsize data cr comp datacrcomp b size bsize orig data origdata image data bytes per line bytesperline image bytes per line bytesperline max scanline byte maxscanlinebyte src width srcwidth y pos ypos y pos ypos src height srcheight y pos ypos x pos xpos x pos xpos max scanline byte maxscanlinebyte x pos xpos src index srcindex y pos ypos bytes per line bytesperline x pos xpos dst index dstindex y pos ypos src width srcwidth x pos xpos orig data origdata src index srcindex x ff xff data ycomp dataycomp dst index dstindex y comp ycomp data cb comp datacbcomp dst index dstindex cb comp cbcomp data cr comp datacrcomp dst index dstindex cr comp crcomp data ycomp dataycomp dst index dstindex y comp ycomp data cb comp datacbcomp dst index dstindex cb comp cbcomp data cr comp datacrcomp dst index dstindex cr comp crcomp compress image data ycomp dataycomp data cb comp datacbcomp data cr comp datacrcomp convert bit rgbto ycb cr bitrgbtoycbcr image data imagedata image rgb rgbs image get rgbs getrgbs palette size palettesize rgbs length y comp ycomp palette size palettesize cb comp cbcomp palette size palettesize cr comp crcomp palette size palettesize src width srcwidth image width src height srcheight image height palette size palettesize rgb color rgbs color red color green color blue rytable gytable bytable y comp ycomp y comp ycomp rcb table rcbtable gcb table gcbtable bcb table bcbtable cb comp cbcomp cb comp cbcomp rcr table rcrtable gcr table gcrtable bcr table bcrtable cr comp crcomp cr comp crcomp dst width dstwidth image width dst height dstheight src height srcheight stride src width srcwidth b size bsize dst width dstwidth dst height dstheight data ycomp dataycomp b size bsize data cb comp datacbcomp b size bsize data cr comp datacrcomp b size bsize orig data origdata image data y pos ypos y pos ypos src height srcheight y pos ypos src row index srcrowindex y pos ypos stride dst row index dstrowindex y pos ypos dst width dstwidth x pos xpos x pos xpos src width srcwidth x pos xpos orig data origdata src row index srcrowindex x pos xpos x ff xff dst index dstindex dst row index dstrowindex x pos xpos data ycomp dataycomp dst index dstindex y comp ycomp data cb comp datacbcomp dst index dstindex cb comp cbcomp data cr comp datacrcomp dst index dstindex cr comp crcomp compress image data ycomp dataycomp data cb comp datacbcomp data cr comp datacrcomp convert cmykto rgb convertcmyktorgb unsupported cmyk format answer empty array convert image to ycb cr convertimagetoycbcr image data imagedata image image depth convert bit rgbto ycb cr bitrgbtoycbcr image convert bit rgbto ycb cr bitrgbtoycbcr image convert multi rgbto ycb cr convertmultirgbtoycbcr image swt error swt error unsupported depth convert multi rgbto ycb cr convertmultirgbtoycbcr image data imagedata image src width srcwidth image width src height srcheight image height b size bsize src width srcwidth src height srcheight data ycomp dataycomp b size bsize data cb comp datacbcomp b size bsize data cr comp datacrcomp b size bsize palette data palettedata palette image palette buffer src width srcwidth palette is direct isdirect red mask redmask palette red mask redmask green mask greenmask palette green mask greenmask blue mask bluemask palette blue mask bluemask red shift redshift palette red shift redshift green shift greenshift palette green shift greenshift blue shift blueshift palette blue shift blueshift y pos ypos y pos ypos src height srcheight y pos ypos image get pixels getpixels y pos ypos src width srcwidth buffer dst row index dstrowindex y pos ypos src width srcwidth x pos xpos x pos xpos src width srcwidth x pos xpos pixel buffer x pos xpos dst data index dstdataindex dst row index dstrowindex x pos xpos pixel red mask redmask red shift redshift red shift redshift red shift redshift pixel green mask greenmask green shift greenshift green shift greenshift green shift greenshift pixel blue mask bluemask blue shift blueshift blue shift blueshift blue shift blueshift data ycomp dataycomp dst data index dstdataindex rytable gytable bytable data cb comp datacbcomp dst data index dstdataindex rcb table rcbtable gcb table gcbtable bcb table bcbtable data cr comp datacrcomp dst data index dstdataindex rcr table rcrtable gcr table gcrtable bcr table bcrtable y pos ypos y pos ypos src height srcheight y pos ypos image get pixels getpixels y pos ypos src width srcwidth buffer dst row index dstrowindex y pos ypos src width srcwidth x pos xpos x pos xpos src width srcwidth x pos xpos pixel buffer x pos xpos dst data index dstdataindex dst row index dstrowindex x pos xpos rgb rgb palette get rgb getrgb pixel rgb red rgb green rgb blue data ycomp dataycomp dst data index dstdataindex rytable gytable bytable data cb comp datacbcomp dst data index dstdataindex rcb table rcbtable gcb table gcbtable bcb table bcbtable data cr comp datacrcomp dst data index dstdataindex rcr table rcrtable gcr table gcrtable bcr table bcrtable compress image data ycomp dataycomp data cb comp datacbcomp data cr comp datacrcomp convert yto rgb convertytorgb comp width compwidth frame components framecomponents component ids componentids bytes per line bytesperline image width imagewidth data bytes per line bytesperline image height imageheight y comp ycomp image components imagecomponents dest index destindex image height imageheight src index srcindex comp width compwidth bytes per line bytesperline y comp ycomp src index srcindex x ff xff image width imagewidth data dest index destindex src index srcindex dest index destindex data convert ycb cr to rgb convertycbcrtorgb convert existing image components rgb format ycb cr ycbcr defined ccir normalized range maxjsample conversion equations implemented represent incoming values maxjsample numbers derived tiff dated june avoid floating point arithmetic represent fractional constants integers scaled digits precision divide products rounding correct answer notice integral input contribute fraction participate rounding speed avoid multiplications loop precalculating constants times values bit jsamples reasonable entries table bit samples acceptable reasonable bit samples lossless storage shouldn changing colorspace values rounded integers advance values calculation left scaled add rounding b size bsize image width imagewidth image height imageheight n components ncomponents rgb data rgbdata b size bsize dest index destindex expand image components expandimagecomponents y comp ycomp image components imagecomponents cb comp cbcomp image components imagecomponents cr comp crcomp image components imagecomponents comp width compwidth frame components framecomponents component ids componentids image height imageheight src index srcindex comp width compwidth image width imagewidth y comp ycomp src index srcindex x ff xff cb comp cbcomp src index srcindex x ff xff cr comp crcomp src index srcindex x ff xff cr rtable crrtable cb gtable cbgtable cr gtable crgtable cb btable cbbtable rgb data rgbdata dest index destindex rgb data rgbdata dest index destindex rgb data rgbdata dest index destindex dest index destindex src index srcindex rgb data rgbdata convert yiqto rgb convertyiqtorgb unsupported cmyk format answer empty array decode accoefficients decodeaccoefficients data unit dataunit i comp icomp s params sparams scan header scanheader component parameters componentparameters component ids componentids i comp icomp jpeghuffman table jpeghuffmantable ac table actable ac huffman tables achuffmantables s params sparams decode using table decodeusingtable ac table actable bits receive data unit dataunit zig zag zigzag extend by extendby bits decode acfirst coefficients decodeacfirstcoefficients data unit dataunit i comp icomp start approx bit approxbit eobrun eobrun s params sparams scan header scanheader component parameters componentparameters component ids componentids i comp icomp jpeghuffman table jpeghuffmantable ac table actable ac huffman tables achuffmantables s params sparams start decode using table decodeusingtable ac table actable eobrun receive bits receive data unit dataunit zig zag zigzag extend by extendby bits approx bit approxbit decode acrefine coefficients decodeacrefinecoefficients data unit dataunit i comp icomp start approx bit approxbit s params sparams scan header scanheader component parameters componentparameters component ids componentids i comp icomp jpeghuffman table jpeghuffmantable ac table actable ac huffman tables achuffmantables s params sparams start eobrun zz index zzindex zig zag zigzag data unit dataunit zz index zzindex data unit dataunit zz index zzindex refine ac refineac data unit dataunit zz index zzindex approx bit approxbit eobrun decode using table decodeusingtable ac table actable zeros zeros zz index zzindex zig zag zigzag data unit dataunit zz index zzindex data unit dataunit zz index zzindex refine ac refineac data unit dataunit zz index zzindex approx bit approxbit zeros eobrun receive bit receive zeros zz index zzindex zig zag zigzag zeros data unit dataunit zz index zzindex data unit dataunit zz index zzindex data unit dataunit zz index zzindex refine ac refineac data unit dataunit zz index zzindex approx bit approxbit zeros zz index zzindex zig zag zigzag bit data unit dataunit zz index zzindex approx bit approxbit data unit dataunit zz index zzindex approx bit approxbit refine ac refineac approx bit approxbit bit next bit nextbit bit approx bit approxbit bit next bit nextbit bit approx bit approxbit decode dccoefficient decodedccoefficient data unit dataunit i comp icomp approx bit approxbit s params sparams scan header scanheader component parameters componentparameters component ids componentids i comp icomp jpeghuffman table jpeghuffmantable dc table dctable dc huffman tables dchuffmantables s params sparams last dc lastdc progressive bit next bit nextbit last dc lastdc data unit dataunit bit approx bit approxbit last dc lastdc preceding dcs precedingdcs i comp icomp n bits nbits decode using table decodeusingtable dc table dctable n bits nbits bits receive n bits nbits diff extend by extendby bits n bits nbits last dc lastdc last dc lastdc diff preceding dcs precedingdcs i comp icomp last dc lastdc progressive last dc lastdc last dc lastdc approx bit approxbit data unit dataunit last dc lastdc dequantize data unit dataunit i comp icomp q table qtable quantization tables quantizationtables frame components framecomponents component ids componentids i comp icomp tqi data unit dataunit length zz index zzindex zig zag zigzag data unit dataunit zz index zzindex data unit dataunit zz index zzindex q table qtable decode image components decodeimagecomponents comp ids compids n components ncomponents comp ids index compidsindex n components ncomponents comp ids compids comp ids index compidsindex comp ids index compidsindex comp ids compids length comp ids compids comp ids compids comp ids compids convert ycb cr to rgb convertycbcrtorgb comp ids compids length comp ids compids comp ids compids comp ids compids convert yiqto rgb convertyiqtorgb comp ids compids length convert cmykto rgb convertcmyktorgb convert yto rgb convertytorgb decode mcuat xand y decodemcuatxandy xmcu ymcu n components in scan ncomponentsinscan start approx bit approxbit i comp icomp i comp icomp n components in scan ncomponentsinscan i comp icomp scan component scancomponent i comp icomp scan header scanheader component parameters componentparameters component ids componentids scan component scancomponent scan component scancomponent frame component framecomponent frame components framecomponents component ids componentids scan component scancomponent frame component framecomponent frame component framecomponent n components in scan ncomponentsinscan comp width compwidth frame component framecomponent ivi ivi ivi ihi ihi ihi progressive progressive scan create data unit subsequent scans refine existing data unit ymcu ivi comp width compwidth xmcu ihi data unit dataunit data units dataunits scan component scancomponent data unit dataunit data unit dataunit data units dataunits scan component scancomponent data unit dataunit sequential clear reuse data unit buffer data unit dataunit length data unit dataunit progressive scan header scanheader is dcprogressive scan isdcprogressivescan decode dccoefficient decodedccoefficient data unit dataunit scan component scancomponent approx bit approxbit progressive decode accoefficients decodeaccoefficients data unit dataunit scan component scancomponent scan header scanheader is acprogressive scan isacprogressivescan decode acfirst coefficients decodeacfirstcoefficients data unit dataunit scan component scancomponent start approx bit approxbit decode acrefine coefficients decodeacrefinecoefficients data unit dataunit scan component scancomponent start approx bit approxbit loader has listeners haslisteners dequantization idct sampling color conversion copy coefficient data order display image incrementally temp data unit dataunit data unit dataunit system arraycopy temp data unit dataunit progressive progressive loader has listeners haslisteners dequantize data unit dataunit scan component scancomponent inverse dct inversedct data unit dataunit store data storedata data unit dataunit scan component scancomponent xmcu ymcu ihi ivi decode scan decodescan progressive scan header scanheader verify progressive scan verifyprogressivescan swt error swt error invalid image n components in scan ncomponentsinscan scan header scanheader get number of image components getnumberofimagecomponents mcu rows in scan mcurowsinscan interleaved mcu rows interleavedmcurows mcus per row mcusperrow interleaved mcu cols interleavedmcucols n components in scan ncomponentsinscan interleaved scan component scancomponent scan header scanheader component parameters componentparameters component ids componentids scan component scancomponent scan component scancomponent frame component framecomponent frame components framecomponents component ids componentids scan component scancomponent frame component framecomponent frame component framecomponent mcu width mcuwidth dctsize max h maxh mcu height mcuheight dctsize max v maxv mcus per row mcusperrow image width imagewidth mcu width mcuwidth mcu width mcuwidth mcu rows in scan mcurowsinscan image height imageheight mcu height mcuheight mcu height mcuheight scan header scanheader is first scan isfirstscan start scan header scanheader get start of spectral selection getstartofspectralselection scan header scanheader get end of spectral selection getendofspectralselection approx bit approxbit scan header scanheader get approx bit position low getapproxbitpositionlow restarts to go restartstogo restart interval restartinterval next restart number nextrestartnumber ymcu ymcu mcu rows in scan mcurowsinscan ymcu xmcu xmcu mcus per row mcusperrow xmcu restart interval restartinterval restarts to go restartstogo process restart interval processrestartinterval restarts to go restartstogo decode mcuat xand y decodemcuatxandy xmcu ymcu n components in scan ncomponentsinscan start approx bit approxbit decode using table decodeusingtable jpeghuffman table jpeghuffmantable huffman table huffmantable max codes maxcodes huffman table huffmantable get dh max codes getdhmaxcodes min codes mincodes huffman table huffmantable get dh min codes getdhmincodes val ptrs valptrs huffman table huffmantable get dh val ptrs getdhvalptrs huff vals huffvals huffman table huffmantable get dh values getdhvalues code next bit nextbit code max codes maxcodes code code next bit nextbit val ptrs valptrs code min codes mincodes huff vals huffvals emit huff code huffcode n bits nbits n bits nbits swt error swt error invalid image power code huff code huffcode power n bits nbits n bits nbits current bit count currentbitcount code buffer codebuffer code buffer codebuffer code code buffer codebuffer code code buffer codebuffer code code buffer codebuffer code abs n bits nbits current bit count currentbitcount abs abs abs abs current byte currentbyte code buffer codebuffer emit byte emitbyte current byte currentbyte emit byte emitbyte code buffer codebuffer current byte currentbyte code buffer codebuffer current bit count currentbitcount n bits nbits current bit count currentbitcount n bits nbits current bit count currentbitcount current byte currentbyte code buffer codebuffer emit byte emitbyte current byte currentbyte current byte currentbyte code buffer codebuffer current bit count currentbitcount current byte currentbyte code buffer codebuffer emit byte emitbyte byte value bytevalue buffer current position buffercurrentposition reset output buffer resetoutputbuffer data buffer databuffer buffer current position buffercurrentposition byte value bytevalue buffer current position buffercurrentposition byte value bytevalue emit byte emitbyte encode accoefficients encodeaccoefficients data unit dataunit i comp icomp s params sparams scan header scanheader component parameters componentparameters i comp icomp jpeghuffman table jpeghuffmantable ac table actable ac huffman tables achuffmantables s params sparams eh codes ehcodes ac table actable eh codes ehcodes eh sizes ehsizes ac table actable eh code lengths ehcodelengths ac value acvalue data unit dataunit zig zag zigzag ac value acvalue emit eh codes ehcodes eh sizes ehsizes x ff xff emit eh codes ehcodes eh sizes ehsizes x ff xff ac value acvalue abs acvalue absacvalue ac value acvalue abs acvalue absacvalue abs acvalue absacvalue abs acvalue absacvalue n bits nbits nbits table nbitstable abs acvalue absacvalue n bits nbits emit eh codes ehcodes eh sizes ehsizes x ff xff emit x ffffff xffffff abs acvalue absacvalue n bits nbits n bits nbits nbits table nbitstable ac value acvalue n bits nbits emit eh codes ehcodes eh sizes ehsizes x ff xff emit ac value acvalue n bits nbits encode dccoefficients encodedccoefficients data unit dataunit i comp icomp s params sparams scan header scanheader component parameters componentparameters i comp icomp jpeghuffman table jpeghuffmantable dc table dctable dc huffman tables dchuffmantables s params sparams last dc lastdc preceding dcs precedingdcs i comp icomp dc value dcvalue data unit dataunit diff dc value dcvalue last dc lastdc preceding dcs precedingdcs i comp icomp dc value dcvalue diff abs diff absdiff diff n bits nbits nbits table nbitstable abs diff absdiff emit dc table dctable eh codes ehcodes n bits nbits dc table dctable eh code lengths ehcodelengths n bits nbits emit x ffffff xffffff abs diff absdiff n bits nbits n bits nbits nbits table nbitstable diff emit dc table dctable eh codes ehcodes n bits nbits dc table dctable eh code lengths ehcodelengths n bits nbits n bits nbits emit diff n bits nbits encode mcuat xand y encodemcuatxandy xmcu ymcu n components in scan ncomponentsinscan scan header scanheader get number of image components getnumberofimagecomponents data unit dataunit i comp icomp i comp icomp n components in scan ncomponentsinscan i comp icomp frame component framecomponent frame components framecomponents component ids componentids i comp icomp frame component framecomponent frame component framecomponent ivi ivi ivi ihi ihi ihi extract data extractdata data unit dataunit i comp icomp xmcu ymcu ihi ivi forward dct forwarddct data unit dataunit quantize data quantizedata data unit dataunit i comp icomp encode dccoefficients encodedccoefficients data unit dataunit i comp icomp encode accoefficients encodeaccoefficients data unit dataunit i comp icomp encode scan encodescan ymcu ymcu interleaved mcu rows interleavedmcurows ymcu xmcu xmcu interleaved mcu cols interleavedmcucols xmcu encode mcuat xand y encodemcuatxandy xmcu ymcu current bit count currentbitcount emit byte emitbyte current byte currentbyte reset output buffer resetoutputbuffer expand image components expandimagecomponents i comp icomp i comp icomp n components ncomponents i comp icomp frame component framecomponent frame components framecomponents component ids componentids i comp icomp frame component framecomponent frame component framecomponent up h uph max h maxh up v upv max v maxv up h uph up v upv component image components imagecomponents i comp icomp comp width compwidth frame component framecomponent comp height compheight frame component framecomponent up comp width upcompwidth comp width compwidth up h uph up comp height upcompheight comp height compheight up v upv rgb rgbs rgb rgb rgb rgb rgb rgb rgb rgb rgb rgb rgb x ff xff rgb x ff xff rgb x ff xff x ff xff rgb x ff xff rgb x ff xff x ff xff rgb x ff xff x ff xff rgb x ff xff x ff xff x ff xff image data imagedata src image data imagedata comp width compwidth comp height compheight palette data palettedata rgbs component image data imagedata dest src scaled to scaledto up comp width upcompwidth up comp height upcompheight image components imagecomponents i comp icomp dest data extend by extendby diff diff extend test extendtest diff extend offset extendoffset diff extract data extractdata data unit dataunit i comp icomp xmcu ymcu ihi ivi comp image compimage image components imagecomponents i comp icomp frame component framecomponent frame components framecomponents component ids componentids i comp icomp frame component framecomponent frame component framecomponent comp width compwidth frame component framecomponent src index srcindex ymcu ivi comp width compwidth dctsize xmcu ihi dctsize dest index destindex dctsize col col dctsize col data unit dataunit dest index destindex comp image compimage src index srcindex col x ff xff dest index destindex src index srcindex comp width compwidth forward dct forwarddct data unit dataunit row row row r index rindex row dctsize tmp data unit dataunit r index rindex data unit dataunit r index rindex tmp data unit dataunit r index rindex data unit dataunit r index rindex tmp data unit dataunit r index rindex data unit dataunit r index rindex tmp data unit dataunit r index rindex data unit dataunit r index rindex tmp data unit dataunit r index rindex data unit dataunit r index rindex tmp data unit dataunit r index rindex data unit dataunit r index rindex tmp data unit dataunit r index rindex data unit dataunit r index rindex tmp data unit dataunit r index rindex data unit dataunit r index rindex figure note published figure faulty rotator sqrt sqrt tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp data unit dataunit r index rindex tmp tmp data unit dataunit r index rindex tmp tmp tmp tmp scale factor scalefactor extend test extendtest scale factor scalefactor extend test extendtest tmp scale factor scalefactor data unit dataunit r index rindex scale factor scalefactor scale factor scalefactor data unit dataunit r index rindex tmp scale factor scalefactor data unit dataunit r index rindex scale factor scalefactor scale factor scalefactor data unit dataunit r index rindex odd figure note paper omits factor sqrt represents cos paper tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp sqrt sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt sqrt sqrt sqrt tmp scale factor scalefactor data unit dataunit r index rindex scale factor scalefactor scale factor scalefactor data unit dataunit r index rindex tmp scale factor scalefactor data unit dataunit r index rindex scale factor scalefactor scale factor scalefactor data unit dataunit r index rindex tmp scale factor scalefactor data unit dataunit r index rindex scale factor scalefactor scale factor scalefactor data unit dataunit r index rindex tmp scale factor scalefactor data unit dataunit r index rindex scale factor scalefactor scale factor scalefactor data unit dataunit r index rindex pass process columns note descale factor undo pass bits scaling col col col col col col col col col col col tmp data unit dataunit data unit dataunit tmp data unit dataunit data unit dataunit tmp data unit dataunit data unit dataunit tmp data unit dataunit data unit dataunit tmp data unit dataunit data unit dataunit tmp data unit dataunit data unit dataunit tmp data unit dataunit data unit dataunit tmp data unit dataunit data unit dataunit tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp scale factor scalefactor extend test extendtest scale factor scalefactor extend test extendtest tmp tmp scale factor scalefactor data unit dataunit scale factor scalefactor scale factor scalefactor data unit dataunit tmp tmp scale factor scalefactor data unit dataunit scale factor scalefactor scale factor scalefactor data unit dataunit tmp tmp scale factor scalefactor extend test extendtest scale factor scalefactor extend test extendtest tmp scale factor scalefactor data unit dataunit scale factor scalefactor scale factor scalefactor data unit dataunit tmp scale factor scalefactor data unit dataunit scale factor scalefactor scale factor scalefactor data unit dataunit tmp tmp tmp tmp tmp tmp tmp tmp sqrt sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt sqrt sqrt sqrt tmp scale factor scalefactor data unit dataunit scale factor scalefactor scale factor scalefactor data unit dataunit tmp scale factor scalefactor data unit dataunit scale factor scalefactor scale factor scalefactor data unit dataunit tmp scale factor scalefactor data unit dataunit scale factor scalefactor scale factor scalefactor data unit dataunit tmp scale factor scalefactor data unit dataunit scale factor scalefactor scale factor scalefactor data unit dataunit get app getapp jpegappn appn jpegappn input stream inputstream appn verify swt error swt error invalid image get com getcom jpegcomment input stream inputstream get dac getdac jpegarithmetic conditioning table jpegarithmeticconditioningtable input stream inputstream get dht getdht jpeghuffman table jpeghuffmantable dht jpeghuffman table jpeghuffmantable input stream inputstream dht verify swt error swt error invalid image ac huffman tables achuffmantables ac huffman tables achuffmantables jpeghuffman table jpeghuffmantable dc huffman tables dchuffmantables dc huffman tables dchuffmantables jpeghuffman table jpeghuffmantable jpeghuffman table jpeghuffmantable dht tables dhttables dht get all tables getalltables dht tables dhttables length jpeghuffman table jpeghuffmantable dht table dhttable dht tables dhttables dht table dhttable get table class gettableclass dc huffman tables dchuffmantables dht table dhttable get table identifier gettableidentifier dht table dhttable ac huffman tables achuffmantables dht table dhttable get table identifier gettableidentifier dht table dhttable get dnl getdnl jpegrestart interval jpegrestartinterval input stream inputstream get dqt getdqt jpegquantization table jpegquantizationtable dqt jpegquantization table jpegquantizationtable input stream inputstream current tables currenttables quantization tables quantizationtables current tables currenttables current tables currenttables dqt tables keys dqttableskeys dqt get quantization tables keys getquantizationtableskeys dqt tables values dqttablesvalues dqt get quantization tables values getquantizationtablesvalues dqt tables keys dqttableskeys length dqt tables keys dqttableskeys current tables currenttables dqt tables values dqttablesvalues quantization tables quantizationtables current tables currenttables get dri getdri jpegrestart interval jpegrestartinterval dri jpegrestart interval jpegrestartinterval input stream inputstream dri verify swt error swt error invalid image restart interval restartinterval dri get restart interval getrestartinterval initialize initialize rgbycb cr tables initializergbycbcrtables initialize ycb cr rgbtables initializeycbcrrgbtables initialize bit count table initializebitcounttable initialize bit count table initializebitcounttable n bits nbits power nbits table nbitstable nbits table nbitstable nbits table nbitstable length power n bits nbits power nbits table nbitstable n bits nbits initialize rgbycb cr tables initializergbycbcrtables rytable gytable bytable rcb table rcbtable gcb table gcbtable bcb table bcbtable rcr table rcrtable bcb table bcbtable gcr table gcrtable bcr table bcrtable rytable gytable bytable rcb table rcbtable gcb table gcbtable bcb table bcbtable gcr table gcrtable bcr table bcrtable initialize ycb cr rgbtables initializeycbcrrgbtables cr rtable crrtable cb btable cbbtable cr gtable crgtable cb gtable cbgtable cr rtable crrtable cb btable cbbtable cr gtable crgtable cb gtable cbgtable inverse dct inversedct data unit dataunit row row row r index rindex row dctsize quantization find input coefficients terms exploit circuiting idct calculation row terms output equal coefficient scale factor needed typical images quantization tables row dct calculations simplified is zero in row iszeroinrow data unit dataunit r index rindex dc val dcval data unit dataunit r index rindex r index rindex r index rindex data unit dataunit dc val dcval reverse dct rotator sqrt data unit dataunit r index rindex data unit dataunit r index rindex tmp tmp tmp data unit dataunit r index rindex data unit dataunit r index rindex tmp data unit dataunit r index rindex data unit dataunit r index rindex tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp odd figure matrix unitary transpose inverse tmp data unit dataunit r index rindex tmp data unit dataunit r index rindex tmp data unit dataunit r index rindex tmp data unit dataunit r index rindex tmp tmp tmp tmp tmp tmp tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt sqrt sqrt sqrt sqrt tmp tmp tmp tmp tmp tmp tmp tmp descale factor descalefactor extend test extendtest descale factor descalefactor extend test extendtest data unit dataunit r index rindex tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit r index rindex tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit r index rindex tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit r index rindex tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit r index rindex tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit r index rindex tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit r index rindex tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit r index rindex tmp tmp descale factor descalefactor descale factor descalefactor col col col col col col col col col col col is zero in column iszeroincolumn data unit dataunit col dc val dcval data unit dataunit data unit dataunit dc val dcval data unit dataunit dc val dcval data unit dataunit dc val dcval data unit dataunit dc val dcval data unit dataunit dc val dcval data unit dataunit dc val dcval data unit dataunit dc val dcval data unit dataunit dc val dcval data unit dataunit data unit dataunit tmp tmp tmp data unit dataunit data unit dataunit tmp data unit dataunit data unit dataunit tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp tmp data unit dataunit tmp data unit dataunit tmp data unit dataunit tmp data unit dataunit tmp tmp tmp tmp tmp tmp tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt tmp tmp sqrt sqrt sqrt sqrt sqrt tmp tmp tmp tmp tmp tmp tmp tmp output stage inputs tmp tmp tmp tmp descale factor descalefactor extend test extendtest descale factor descalefactor extend test extendtest data unit dataunit tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit tmp tmp descale factor descalefactor descale factor descalefactor data unit dataunit tmp tmp descale factor descalefactor descale factor descalefactor is file format isfileformat ledata input stream ledatainputstream stream jpegstart of image jpegstartofimage soi jpegstart of image jpegstartofimage stream stream unread soi reference longer check app n appn soi verify exception is zero in column iszeroincolumn data unit dataunit col data unit dataunit col data unit dataunit col data unit dataunit col data unit dataunit col data unit dataunit col data unit dataunit col data unit dataunit col is zero in row iszeroinrow data unit dataunit r index rindex data unit dataunit r index rindex data unit dataunit r index rindex data unit dataunit r index rindex data unit dataunit r index rindex data unit dataunit r index rindex data unit dataunit r index rindex data unit dataunit r index rindex image data imagedata load from byte stream loadfrombytestream jpegstart of image jpegstartofimage soi jpegstart of image jpegstartofimage input stream inputstream soi verify swt error swt error invalid image restart interval restartinterval process tables preceding frame header process tables processtables start frame frame header frameheader jpegframe header jpegframeheader input stream inputstream frame header frameheader verify swt error swt error invalid image image width imagewidth frame header frameheader get samples per line getsamplesperline image height imageheight frame header frameheader get number of lines getnumberoflines max h maxh frame header frameheader get max hfactor getmaxhfactor max v maxv frame header frameheader get max vfactor getmaxvfactor mcu width mcuwidth max h maxh dctsize mcu height mcuheight max v maxv dctsize interleaved mcu cols interleavedmcucols image width imagewidth mcu width mcuwidth mcu width mcuwidth interleaved mcu rows interleavedmcurows image height imageheight mcu height mcuheight mcu height mcuheight progressive frame header frameheader is progressive isprogressive sample precision sampleprecision frame header frameheader get sample precision getsampleprecision n components ncomponents frame header frameheader get number of image components getnumberofimagecomponents frame components framecomponents frame header frameheader component parameters componentparameters component ids componentids frame header frameheader component identifiers componentidentifiers image components imagecomponents n components ncomponents progressive progressive jpeg data units data units dataunits n components ncomponents sequential jpeg data unit data unit dataunit n components ncomponents frame component framecomponent frame components framecomponents component ids componentids buffer size buffersize frame component framecomponent frame component framecomponent image components imagecomponents buffer size buffersize progressive data units dataunits buffer size buffersize process tables preceding scan header process tables processtables start scan scan header scanheader jpegscan header jpegscanheader input stream inputstream scan header scanheader verify swt error swt error invalid image process scan tables eoi progressive scan count progressivescancount reset input buffer resetinputbuffer preceding dcs precedingdcs decode scan decodescan progressive loader has listeners haslisteners image data imagedata image data imagedata create image data createimagedata loader notify listeners notifylisteners image loader event imageloaderevent loader image data imagedata progressive scan count progressivescancount progressive scan count progressivescancount unread buffered data tables delta buffer current position buffercurrentposition delta unread buffer unreadbuffer delta system arraycopy data buffer databuffer buffer current position buffercurrentposition unread buffer unreadbuffer delta input stream inputstream unread unread buffer unreadbuffer ioexception swt error swt error process tables preceding scan header jpegsegment jpeg segment jpegsegment process tables processtables jpeg segment jpegsegment jpeg segment jpegsegment get segment marker getsegmentmarker eoi scan header scanheader jpegscan header jpegscanheader input stream inputstream scan header scanheader verify swt error swt error invalid image progressive ymcu ymcu interleaved mcu rows interleavedmcurows ymcu xmcu xmcu interleaved mcu cols interleavedmcucols xmcu i comp icomp i comp icomp n components ncomponents i comp icomp frame component framecomponent frame components framecomponents component ids componentids i comp icomp frame component framecomponent frame component framecomponent comp width compwidth frame component framecomponent ivi ivi ivi ihi ihi ihi ymcu ivi comp width compwidth xmcu ihi data unit dataunit data units dataunits i comp icomp dequantize data unit dataunit i comp icomp inverse dct inversedct data unit dataunit store data storedata data unit dataunit i comp icomp xmcu ymcu ihi ivi image data imagedata image data imagedata create image data createimagedata progressive loader has listeners haslisteners loader notify listeners notifylisteners image loader event imageloaderevent loader image data imagedata progressive scan count progressivescancount image data imagedata image data imagedata image data imagedata create image data createimagedata image data imagedata internal image width imagewidth image height imageheight n components ncomponents sample precision sampleprecision set up palette setuppalette n components ncomponents decode image components decodeimagecomponents swt image jpeg next bit nextbit current bit count currentbitcount current bit count currentbitcount current byte currentbyte current byte currentbyte current byte currentbyte buffer current position buffercurrentposition buffer current position buffercurrentposition reset input buffer resetinputbuffer buffer current position buffercurrentposition current byte currentbyte data buffer databuffer buffer current position buffercurrentposition x ff xff current bit count currentbitcount next byte nextbyte buffer current position buffercurrentposition reset input buffer resetinputbuffer current bit count currentbitcount next byte nextbyte data buffer databuffer next byte nextbyte data buffer databuffer buffer current position buffercurrentposition current byte currentbyte x ff xff next byte nextbyte buffer current position buffercurrentposition current bit count currentbitcount current byte currentbyte current byte currentbyte current byte currentbyte next byte nextbyte x ff xff x ff xff dnl get dnl getdnl swt error swt error invalid image current bit count currentbitcount current byte currentbyte current byte currentbyte current byte currentbyte process restart interval processrestartinterval buffer current position buffercurrentposition buffer current position buffercurrentposition reset input buffer resetinputbuffer buffer current position buffercurrentposition current byte currentbyte data buffer databuffer buffer current position buffercurrentposition x ff xff current byte currentbyte x ff xff current byte currentbyte x ff xff buffer current position buffercurrentposition buffer current position buffercurrentposition reset input buffer resetinputbuffer buffer current position buffercurrentposition current byte currentbyte data buffer databuffer buffer current position buffercurrentposition x ff xff current byte currentbyte rst next restart number nextrestartnumber swt error swt error invalid image buffer current position buffercurrentposition buffer current position buffercurrentposition reset input buffer resetinputbuffer buffer current position buffercurrentposition current byte currentbyte data buffer databuffer buffer current position buffercurrentposition x ff xff current bit count currentbitcount restarts to go restartstogo restart interval restartinterval next restart number nextrestartnumber next restart number nextrestartnumber preceding dcs precedingdcs eobrun process markers frame header scan header eoi jpegsegment process tables processtables jpegsegment jpeg segment jpegsegment seek unspecified marker seekunspecifiedmarker input stream inputstream jpeg segment jpegsegment jpegframe header jpegframeheader sof jpegframe header jpegframeheader jpeg segment jpegsegment reference sof verify jpeg segment jpegsegment marker jpeg segment jpegsegment get segment marker getsegmentmarker marker soi file soi swt error swt error invalid image eoi sos jpeg segment jpegsegment dqt get dqt getdqt dht get dht getdht dac get dac getdac dri get dri getdri app get app getapp get com getcom skip segment from skipsegmentfrom input stream inputstream quantize data quantizedata data unit dataunit i comp icomp q table qtable quantization tables quantizationtables frame components framecomponents component ids componentids i comp icomp tqi data unit dataunit length zz index zzindex zig zag zigzag data data unit dataunit zz index zzindex abs data absdata data data data q value qvalue q table qtable q value qvalue abs data absdata abs data absdata q value qvalue data unit dataunit zz index zzindex abs data absdata q value qvalue data data unit dataunit zz index zzindex abs data absdata data unit dataunit zz index zzindex abs data absdata receive n bits nbits n bits nbits next bit nextbit reset input buffer resetinputbuffer data buffer databuffer data buffer databuffer input stream inputstream read data buffer databuffer ioexception swt error swt error current bit count currentbitcount buffer current position buffercurrentposition reset output buffer resetoutputbuffer data buffer databuffer data buffer databuffer output stream outputstream write data buffer databuffer buffer current position buffercurrentposition ioexception swt error swt error buffer current position buffercurrentposition jpegsegment seek unspecified marker seekunspecifiedmarker ledata input stream ledatainputstream byte stream bytestream byte array bytearray byte stream bytestream read byte array bytearray byte array bytearray x ff xff byte stream bytestream read byte array bytearray byte array bytearray x ff xff byte array bytearray byte stream bytestream unread byte array bytearray jpegsegment byte array bytearray ioexception swt error swt error palette data palettedata set up palette setuppalette n components ncomponents rgb entries rgb entries rgb palette data palettedata entries palette data palettedata x ff xff x ff xff x ff xff skip segment from skipsegmentfrom ledata input stream ledatainputstream byte stream bytestream byte array bytearray jpegsegment jpeg segment jpegsegment jpegsegment byte array bytearray byte stream bytestream read byte array bytearray byte array bytearray length swt error swt error invalid image byte array bytearray byte array bytearray byte array bytearray swt error swt error invalid image delta jpeg segment jpegsegment get segment length getsegmentlength byte stream bytestream skip delta exception swt error swt error store data storedata data unit dataunit i comp icomp xmcu ymcu ihi ivi comp image compimage image components imagecomponents i comp icomp frame component framecomponent frame components framecomponents component ids componentids i comp icomp comp width compwidth frame component framecomponent dest index destindex ymcu ivi comp width compwidth dctsize xmcu ihi dctsize src index srcindex dctsize col col dctsize col data unit dataunit src index srcindex comp image compimage dest index destindex col src index srcindex dest index destindex comp width compwidth unload into byte stream unloadintobytestream image data imagedata image jpegstart of image jpegstartofimage write to stream writetostream output stream outputstream swt error swt error jpegappn appn jpegappn x ff xff appn write to stream writetostream output stream outputstream swt error swt error quantization tables quantizationtables jpegquantization table jpegquantizationtable chrom dqt chromdqt jpegquantization table jpegquantizationtable default chrominance table defaultchrominancetable chrom dqt chromdqt scale by scaleby encoder qfactor encoderqfactor jpeg dqtkeys jpegdqtkeys chrom dqt chromdqt get quantization tables keys getquantizationtableskeys jpeg dqtvalues jpegdqtvalues chrom dqt chromdqt get quantization tables values getquantizationtablesvalues jpeg dqtkeys jpegdqtkeys length quantization tables quantizationtables jpeg dqtkeys jpegdqtkeys jpeg dqtvalues jpegdqtvalues jpegquantization table jpegquantizationtable lum dqt lumdqt jpegquantization table jpegquantizationtable default luminance table defaultluminancetable lum dqt lumdqt scale by scaleby encoder qfactor encoderqfactor jpeg dqtkeys jpegdqtkeys lum dqt lumdqt get quantization tables keys getquantizationtableskeys jpeg dqtvalues jpegdqtvalues lum dqt lumdqt get quantization tables values getquantizationtablesvalues jpeg dqtkeys jpegdqtkeys length quantization tables quantizationtables jpeg dqtkeys jpegdqtkeys jpeg dqtvalues jpegdqtvalues lum dqt lumdqt write to stream writetostream output stream outputstream swt error swt error chrom dqt chromdqt write to stream writetostream output stream outputstream swt error swt error frame length framelength scan length scanlength precision frame params frameparams scan params scanparams image depth frame length framelength frame params frameparams frame params frameparams scan params scanparams scan params scanparams scan length scanlength n components ncomponents precision frame length framelength frame params frameparams frame params frameparams frame params frameparams frame params frameparams scan params scanparams scan params scanparams scan params scanparams scan params scanparams scan length scanlength n components ncomponents precision image width imagewidth image width image height imageheight image height frame header frameheader jpegframe header jpegframeheader frame header frameheader set segment marker setsegmentmarker sof frame header frameheader set segment length setsegmentlength frame length framelength frame header frameheader set sample precision setsampleprecision precision frame header frameheader set samples per line setsamplesperline image width imagewidth frame header frameheader set number of lines setnumberoflines image height imageheight frame header frameheader set number of image components setnumberofimagecomponents n components ncomponents frame header frameheader component parameters componentparameters frame params frameparams frame header frameheader component identifiers componentidentifiers frame header frameheader initialize contents initializecontents frame header frameheader write to stream writetostream output stream outputstream swt error swt error frame components framecomponents frame params frameparams component ids componentids frame header frameheader component identifiers componentidentifiers max h maxh frame header frameheader get max hfactor getmaxhfactor max v maxv frame header frameheader get max vfactor getmaxvfactor mcu width mcuwidth max h maxh dctsize mcu height mcuheight max v maxv dctsize interleaved mcu cols interleavedmcucols image width imagewidth mcu width mcuwidth mcu width mcuwidth interleaved mcu rows interleavedmcurows image height imageheight mcu height mcuheight mcu height mcuheight ac huffman tables achuffmantables jpeghuffman table jpeghuffmantable dc huffman tables dchuffmantables jpeghuffman table jpeghuffmantable jpeghuffman table jpeghuffmantable dht tables dhttables jpeghuffman table jpeghuffmantable jpeghuffman table jpeghuffmantable get default dcluminance table getdefaultdcluminancetable jpeghuffman table jpeghuffmantable get default dcchrominance table getdefaultdcchrominancetable jpeghuffman table jpeghuffmantable get default acluminance table getdefaultacluminancetable jpeghuffman table jpeghuffmantable get default acchrominance table getdefaultacchrominancetable dht tables dhttables length jpeghuffman table jpeghuffmantable dht table dhttable dht tables dhttables dht table dhttable write to stream writetostream output stream outputstream swt error swt error jpeghuffman table jpeghuffmantable all tables alltables dht table dhttable get all tables getalltables all tables alltables length jpeghuffman table jpeghuffmantable huffman table huffmantable all tables alltables huffman table huffmantable get table class gettableclass dc huffman tables dchuffmantables huffman table huffmantable get table identifier gettableidentifier huffman table huffmantable ac huffman tables achuffmantables huffman table huffmantable get table identifier gettableidentifier huffman table huffmantable preceding dcs precedingdcs scan header scanheader jpegscan header jpegscanheader scan header scanheader set segment marker setsegmentmarker sos scan header scanheader set segment length setsegmentlength scan length scanlength scan header scanheader set number of image components setnumberofimagecomponents n components ncomponents scan header scanheader set start of spectral selection setstartofspectralselection scan header scanheader set end of spectral selection setendofspectralselection scan header scanheader component parameters componentparameters scan params scanparams scan header scanheader initialize contents initializecontents scan header scanheader write to stream writetostream output stream outputstream swt error swt error convert image to ycb cr convertimagetoycbcr image reset output buffer resetoutputbuffer current byte currentbyte current bit count currentbitcount encode scan encodescan jpegend of image jpegendofimage write to stream writetostream output stream outputstream swt error swt error