copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse swt internal image java org eclipse swt org eclipse swt graphics pngfile format pngfileformat file format fileformat signature length png decoding data stream pngdecodingdatastream decoding stream decodingstream png ihdr chunk pngihdrchunk header chunk headerchunk png plte chunk pngpltechunk palette chunk palettechunk image data imagedata image data imagedata data alpha palette alphapalette skip signature data verified is pngfile ispngfile read signature readsignature ioexception signature signature length input stream inputstream read signature load png image stream image data imagedata load from byte stream loadfrombytestream read signature readsignature png chunk reader pngchunkreader chunk reader chunkreader png chunk reader pngchunkreader input stream inputstream header chunk headerchunk chunk reader chunkreader get ihdr chunk getihdrchunk image size imagesize get aligned bytes per row getalignedbytesperrow header chunk headerchunk get height getheight data image size imagesize image data imagedata image data imagedata internal header chunk headerchunk get width getwidth header chunk headerchunk get height getheight header chunk headerchunk get swt bits per pixel getswtbitsperpixel palette data palettedata data swt image png header chunk headerchunk uses direct color usesdirectcolor image data imagedata palette header chunk headerchunk get palette data getpalettedata read process chunks iend chunk encountered chunk reader chunkreader has more chunks hasmorechunks read next chunk readnextchunk chunk reader chunkreader image data imagedata image data imagedata ioexception swt error swt error invalid image read handle chunk data png file read next chunk readnextchunk png chunk reader pngchunkreader chunk reader chunkreader png chunk pngchunk chunk chunk reader chunkreader read next chunk readnextchunk chunk get chunk type getchunktype png chunk pngchunk chunk iend png chunk pngchunk chunk plte header chunk headerchunk uses direct color usesdirectcolor palette chunk palettechunk png plte chunk pngpltechunk chunk image data imagedata palette palette chunk palettechunk get palette data getpalettedata png chunk pngchunk chunk t rns trns png trns chunk pngtrnschunk trns chunk trnschunk png trns chunk pngtrnschunk chunk trns chunk trnschunk get transparency type gettransparencytype header chunk headerchunk png trns chunk pngtrnschunk transparency type pixel image data imagedata transparent pixel transparentpixel trns chunk trnschunk get swt transparent pixel getswttransparentpixel header chunk headerchunk alpha palette alphapalette trns chunk trnschunk get alpha values getalphavalues header chunk headerchunk palette chunk palettechunk transparent count transparentcount transparent pixel transparentpixel alpha palette alphapalette length alpha palette alphapalette x ff xff transparent count transparentcount transparent pixel transparentpixel transparent count transparentcount alpha palette alphapalette transparent count transparentcount alpha palette alphapalette transparent pixel transparentpixel alpha palette alphapalette image data imagedata transparent pixel transparentpixel transparent pixel transparentpixel png chunk pngchunk chunk idat chunk reader chunkreader read pixel data readpixeldata idat chunks image file sequential pixel data read idat block encountered invalid image swt error swt error invalid image read pixel data image image idat chunks png idat chunk pngidatchunk data chunk datachunk png idat chunk pngidatchunk chunk read pixel data readpixeldata data chunk datachunk chunk reader chunkreader chunk is critical iscritical critical chunks supported swt error swt error implemented unload into byte stream unloadintobytestream image data imagedata swt error swt error unsupported format is file format isfileformat ledata input stream ledatainputstream stream signature signature length stream read signature stream unread signature signature x ff xff signature x ff xff signature x ff xff signature x ff xff signature x ff xff linefeed signature x ff xff ctrl signature x ff xff linefeed signature x ff xff exception swt support bit depths image bit depths convert data bit depth validate bit depth validatebitdepth data header chunk headerchunk get bit depth getbitdepth result data length compress bit depth to bitdepthto bit depth bitdepth data result result length result data swt support greyscale color type plain grayscale create palette grayscale alpha convert pixels rgb values note method assumes bit depth data restricted set pixel data setpixeldata data image data imagedata image data imagedata header chunk headerchunk get color type getcolortype png ihdr chunk pngihdrchunk color type grayscale alpha width image data imagedata width height image data imagedata height dest bytes per line destbytesperline image data imagedata bytes per line bytesperline image bit depth converted bit depth image src bytes per line srcbytesperline get aligned bytes per row getalignedbytesperrow header chunk headerchunk get bit depth getbitdepth src bytes per line srcbytesperline rgb data rgbdata dest bytes per line destbytesperline height alpha data alphadata width height height src index srcindex src bytes per line srcbytesperline dest index destindex dest bytes per line destbytesperline dest alpha index destalphaindex width width grey data src index srcindex alpha data src index srcindex rgb data rgbdata dest index destindex grey rgb data rgbdata dest index destindex grey rgb data rgbdata dest index destindex grey alpha data alphadata dest alpha index destalphaindex alpha src index srcindex dest index destindex dest alpha index destalphaindex image data imagedata data rgb data rgbdata image data imagedata alpha data alphadata alpha data alphadata png ihdr chunk pngihdrchunk color type rgb alpha width image data imagedata width height image data imagedata height dest bytes per line destbytesperline image data imagedata bytes per line bytesperline src bytes per line srcbytesperline get aligned bytes per row getalignedbytesperrow image bit depth converted bit depth image header chunk headerchunk get bit depth getbitdepth src bytes per line srcbytesperline rgb data rgbdata dest bytes per line destbytesperline height alpha data alphadata width height height src index srcindex src bytes per line srcbytesperline dest index destindex dest bytes per line destbytesperline dest alpha index destalphaindex width width rgb data rgbdata dest index destindex data src index srcindex rgb data rgbdata dest index destindex data src index srcindex rgb data rgbdata dest index destindex data src index srcindex alpha data alphadata dest alpha index destalphaindex data src index srcindex src index srcindex dest index destindex dest alpha index destalphaindex image data imagedata data rgb data rgbdata image data imagedata alpha data alphadata alpha data alphadata png ihdr chunk pngihdrchunk color type rgb image data imagedata data data png ihdr chunk pngihdrchunk color type palette image data imagedata data data alpha palette alphapalette size image data imagedata width image data imagedata height alpha data alphadata size pixel data pixeldata size image data imagedata get pixels getpixels size pixel data pixeldata pixel data pixeldata length alpha data alphadata alpha palette alphapalette pixel data pixeldata x ff xff image data imagedata alpha data alphadata alpha data alphadata image data imagedata data data png supports color types bit depths unsupported swt image unsupported color type gray scale types bit depth convert data swt supported format assign data image data imagedata set image data values setimagedatavalues data image data imagedata image data imagedata result validate bit depth validatebitdepth data set pixel data setpixeldata result image data imagedata read image data data stream handle decoding data filtering interlacing read pixel data readpixeldata png idat chunk pngidatchunk chunk png chunk reader pngchunkreader chunk reader chunkreader decoding stream decodingstream png decoding data stream pngdecodingdatastream chunk chunk reader chunkreader interlace method interlacemethod header chunk headerchunk get interlace method getinterlacemethod interlace method interlacemethod png ihdr chunk pngihdrchunk interlace method read non interlaced image readnoninterlacedimage read interlaced image readinterlacedimage decoding stream decodingstream assert image data at end assertimagedataatend decoding stream decodingstream check adler checkadler answer number bytes word aligned row pixel data get aligned bytes per row getalignedbytesperrow get bytes per row getbytesperrow header chunk headerchunk get width getwidth answer number bytes row image data png row aligned images bit depths unused bits row bits undefined get bytes per row getbytesperrow get bytes per row getbytesperrow header chunk headerchunk get width getwidth answer number bytes needed represent pixel depends image color type bit depth note method rounds image pixel size isn aligned get bytes per pixel getbytesperpixel bits per pixel bitsperpixel header chunk headerchunk get bits per pixel getbitsperpixel bits per pixel bitsperpixel answer number bytes row pixel width row aligned images bit depths unused bits row bits undefined get bytes per row getbytesperrow row width in pixels rowwidthinpixels bits per pixel bitsperpixel header chunk headerchunk get bits per pixel getbitsperpixel bits per row bitsperrow bits per pixel bitsperpixel row width in pixels rowwidthinpixels bits per byte bitsperbyte bits per row bitsperrow bits per byte bitsperbyte bits per byte bitsperbyte read frames interlaced data update image data imagedata notify image loader listeners frame load read interlace frame readinterlaceframe row interval rowinterval column interval columninterval start row startrow start column startcolumn frame count framecount width header chunk headerchunk get width getwidth aligned bytes per row alignedbytesperrow get aligned bytes per row getalignedbytesperrow height header chunk headerchunk get height getheight start row startrow height start column startcolumn width pixels per row pixelsperrow width start column startcolumn column interval columninterval column interval columninterval bytes per row bytesperrow get bytes per row getbytesperrow pixels per row pixelsperrow row bytes per row bytesperrow row bytes per row bytesperrow current row currentrow row last row lastrow row row start row startrow row height row row interval rowinterval filter type filtertype decoding stream decodingstream get next decoded byte getnextdecodedbyte col col bytes per row bytesperrow col current row currentrow col decoding stream decodingstream get next decoded byte getnextdecodedbyte filter row filterrow current row currentrow last row lastrow filter type filtertype header chunk headerchunk get bit depth getbitdepth bytes per pixel bytesperpixel get bytes per pixel getbytesperpixel data offset dataoffset row aligned bytes per row alignedbytesperrow start column startcolumn bytes per pixel bytesperpixel row offset rowoffset row offset rowoffset current row currentrow length row offset rowoffset bytes per pixel bytesperpixel byte offset byteoffset byte offset byteoffset bytes per pixel bytesperpixel byte offset byteoffset data data offset dataoffset byte offset byteoffset current row currentrow row offset rowoffset byte offset byteoffset data offset dataoffset column interval columninterval bytes per pixel bytesperpixel bits per pixel bitsperpixel header chunk headerchunk get bit depth getbitdepth pixels per byte pixelsperbyte bits per pixel bitsperpixel column start column startcolumn row base rowbase row aligned bytes per row alignedbytesperrow value mask valuemask bits per pixel bitsperpixel value mask valuemask value mask valuemask max shift maxshift bits per pixel bitsperpixel byte offset byteoffset byte offset byteoffset current row currentrow length byte offset byteoffset bit offset bitoffset max shift maxshift bit offset bitoffset bit offset bitoffset bits per pixel bitsperpixel column width data offset dataoffset row base rowbase column bits per pixel bitsperpixel current row currentrow byte offset byteoffset bit offset bitoffset value mask valuemask data shift datashift max shift maxshift bits per pixel bitsperpixel column pixels per byte pixelsperbyte data data offset dataoffset data shift datashift column column interval columninterval current row currentrow current row currentrow row row row last row lastrow last row lastrow row row row set image data values setimagedatavalues data image data imagedata fire interlaced frame event fireinterlacedframeevent frame count framecount read pixel data interlaced image data stream read interlaced image readinterlacedimage read interlace frame readinterlaceframe read interlace frame readinterlaceframe read interlace frame readinterlaceframe read interlace frame readinterlaceframe read interlace frame readinterlaceframe read interlace frame readinterlaceframe read interlace frame readinterlaceframe fire event listeners interlaced frame loaded final frame finalframe image finished loading frames fire interlaced frame event fireinterlacedframeevent frame count framecount loader has listeners haslisteners image data imagedata image image data imagedata image data imagedata clone final frame finalframe frame count framecount loader notify listeners notifylisteners image loader event imageloaderevent loader image frame count framecount final frame finalframe read pixel data interlaced image data stream update image data imagedata reflect data read non interlaced image readnoninterlacedimage data offset dataoffset aligned bytes per row alignedbytesperrow get aligned bytes per row getalignedbytesperrow bytes per row bytesperrow get bytes per row getbytesperrow row bytes per row bytesperrow row bytes per row bytesperrow current row currentrow row last row lastrow row row row header chunk headerchunk get height getheight row filter type filtertype decoding stream decodingstream get next decoded byte getnextdecodedbyte col col bytes per row bytesperrow col current row currentrow col decoding stream decodingstream get next decoded byte getnextdecodedbyte filter row filterrow current row currentrow last row lastrow filter type filtertype system arraycopy current row currentrow data data offset dataoffset bytes per row bytesperrow data offset dataoffset aligned bytes per row alignedbytesperrow current row currentrow current row currentrow row row row last row lastrow last row lastrow row row row set image data values setimagedatavalues data image data imagedata swt support bit depth color formats convert bit data bit data correct multiply bit fast drop bit compress bit depth to bitdepthto bit depth bitdepth source source offset sourceoffset destination destination offset destinationoffset number of values numberofvalues multiplier compatibility pow compatibility pow number of values numberofvalues source index sourceindex source offset sourceoffset destination index destinationindex destination offset destinationoffset source source index sourceindex source source index sourceindex compressed value compressedvalue multiplier compressed value compressedvalue source source index sourceindex destination destination index destinationindex compressed value compressedvalue swt support bit depth color formats convert bit data bit data correct multiply bit fast drop bit compress bit depth to bitdepthto bit depth bitdepth compressed value compressedvalue multiplier png supports filtering types types applied row image data method unfilters row based filter type filtertype filter row filterrow row previous row previousrow filter type filtertype byte offset byteoffset header chunk headerchunk get filter byte offset getfilterbyteoffset filter type filtertype png ihdr chunk pngihdrchunk filter png ihdr chunk pngihdrchunk filter byte offset byteoffset row length current row x ff xff left row byte offset byteoffset x ff xff row current left x ff xff png ihdr chunk pngihdrchunk filter row length current row x ff xff previous row previousrow x ff xff row current x ff xff png ihdr chunk pngihdrchunk filter average row length left byte offset byteoffset row byte offset byteoffset x ff xff previous row previousrow x ff xff current row x ff xff row current left x ff xff png ihdr chunk pngihdrchunk filter paeth row length left byte offset byteoffset row byte offset byteoffset x ff xff above left aboveleft byte offset byteoffset previous row previousrow byte offset byteoffset x ff xff previous row previousrow x ff xff math abs above left aboveleft math abs left above left aboveleft math abs left above left aboveleft above left aboveleft preductor preductor left preductor preductor above left aboveleft current value currentvalue row x ff xff row current value currentvalue preductor x ff xff