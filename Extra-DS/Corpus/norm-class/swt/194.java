copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse swt widgets org eclipse swt internal win org eclipse swt org eclipse swt graphics org eclipse swt events menu widget handle resource warning field platform dependent field swt api marked shared packages swt platforms accessed application code handle hwnd cb hwndcb has location haslocation menu item menuitem cascade decorations parent image list imagelist image list imagelist resource shmenubarinfo ppc smart phone smartphone soft key bar softkeybar resource ids spmm spbm spmb spbb spsoftkey spsoftkey constructs instance parent sets style instance instance popup menu parent shell param parent control parent instance exception illegal argument exception illegalargumentexception error argument parent exception swtexception error thread invalid access called thread created parent error invalid subclass allowed subclass swt pop widget check subclass checksubclass widget get style getstyle menu control parent check null checknull parent menu shell menushell swt pop constructs instance parent code decorations code style describing behavior appearance style style constants defined code swt code applicable instances built bitwise ing code code code swt code style constants description lists style constants applicable style bits inherited superclasses param parent decorations control parent instance param style style menu construct exception illegal argument exception illegalargumentexception error argument parent exception swtexception error thread invalid access called thread created parent error invalid subclass allowed subclass swt bar swt drop swt pop widget check subclass checksubclass widget get style getstyle menu decorations parent style parent check style checkstyle style constructs instance parent code menu code sets style instance instance drop menu parent parent param parent menu parentmenu menu parent instance exception illegal argument exception illegalargumentexception error argument parent exception swtexception error thread invalid access called thread created parent error invalid subclass allowed subclass swt drop widget check subclass checksubclass widget get style getstyle menu menu parent menu parentmenu check null checknull parent menu parentmenu parent swt drop constructs instance parent code menu item menuitem code sets style instance instance drop menu parent parent menu param parent item parentitem menu item parent instance exception illegal argument exception illegalargumentexception error argument parent exception swtexception error thread invalid access called thread created parent error invalid subclass allowed subclass swt drop widget check subclass checksubclass widget get style getstyle menu menu item menuitem parent item parentitem check null checknull parent item parentitem parent menu decorations parent style handle parent check style checkstyle style parent parent handle handle bug ibm jvm reason check orientation checkorientation called create widget createwidget jvm issues error jvm exception subcode occurred thread main tid addition windows dialog appears error message indicating problem jit app name appname java exe app ver appver mod name modname jitc dll mod ver modver offset call check orientation checkorientation check orientation checkorientation parent create widget createwidget set visible setvisible visible style swt bar swt drop hwnd parent hwndparent parent handle visible flags tpm leftbutton get key state getkeystate lbutton flags tpm rightbutton style swt left flags tpm rightalign parent style swt mirrored flags tpm rightalign style swt left flags tpm rightalign has location haslocation pos get message pos getmessagepos pos x ffff xffff pos feature windows legal track popup menu trackpopupmenu display empty menu menu items initpopupmenu items track popup menu trackpopupmenu fails send indication menu closed strictly bug leads unwanted behavior application code assumes initpopupmenu eventually result menuselect w param wparam x ffff xffff l param lparam menu closed detect track popup menu trackpopupmenu fails number items menu issue fake menuselect success track popup menu trackpopupmenu handle flags hwnd parent hwndparent success get menu item count getmenuitemcount handle send message sendmessage hwnd parent hwndparent menuselect x ffff xffff send message sendmessage hwnd parent hwndparent cancelmode adds listener collection listeners notified events generated control sending messages defined code help listener helplistener code param listener listener notified exception illegal argument exception illegalargumentexception error argument listener exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver help listener helplistener remove help listener removehelplistener add help listener addhelplistener help listener helplistener listener check widget checkwidget listener error swt error argument typed listener typedlistener typed listener typedlistener typed listener typedlistener listener add listener addlistener swt typed listener typedlistener adds listener collection listeners notified menus hidden sending messages defined code menu listener menulistener code param listener listener notified exception illegal argument exception illegalargumentexception error argument listener exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver menu listener menulistener remove menu listener removemenulistener add menu listener addmenulistener menu listener menulistener listener check widget checkwidget listener error swt error argument typed listener typedlistener typed listener typedlistener typed listener typedlistener listener add listener addlistener swt hide typed listener typedlistener add listener addlistener swt typed listener typedlistener control check null checknull control control control swt error swt error argument control menu check null checknull menu menu menu swt error swt error argument menu menu item menuitem check null checknull menu item menuitem item item swt error swt error argument item check style checkstyle style check bits checkbits style swt pop swt bar swt drop create handle createhandle handle style swt bar is ppc isppc hwnd shell hwndshell parent handle shmenubarinfo mbi shmenubarinfo mbi cb size cbsize shmenubarinfo sizeof mbi hwnd parent hwndparent hwnd shell hwndshell mbi dw flags dwflags shcmbf hidden mbi n tool bar id ntoolbarid ppc mbi h inst res hinstres get library handle getlibraryhandle success shcreate menu bar shcreatemenubar mbi hwnd cb hwndcb mbi hwnd mb hwndmb success error swt error handles remove item resource file send message sendmessage hwnd cb hwndcb deletebutton note win ce wince smart phone smartphone soft bar softbar items item menu button swt bar creates soft bar softbar menus swt bar swt button creates soft bar softbar button button menu button swt bar swt button swt button creates soft bar softbar buttons is sp issp determine type menubar n tool bar id ntoolbarid style swt button n tool bar id ntoolbarid style swt button spbb spbm n tool bar id ntoolbarid style swt button spmb spmm create shmenubar shmenubarinfo mbi shmenubarinfo mbi cb size cbsize shmenubarinfo sizeof mbi hwnd parent hwndparent parent handle mbi dw flags dwflags shcmbf hidden mbi n tool bar id ntoolbarid n tool bar id ntoolbarid defined file mbi h inst res hinstres get library handle getlibraryhandle shcreate menu bar shcreatemenubar mbi error swt error handles hwnd cb hwndcb mbi hwnd mb hwndmb feature win ce wince smart phone smartphone shcmbf hidden flag shmenubar drawn keyboard events workaround hide shmenubar show window showwindow show window showwindow hwnd cb hwndcb hide tbbuttoninfo info tbbuttoninfo info cb size cbsize tbbuttoninfo sizeof info dw mask dwmask tbif command menu item menuitem item item n tool bar id ntoolbarid spmm n tool bar id ntoolbarid spmb h menu hmenu send message sendmessage hwnd cb hwndcb shcmbm getsubmenu spsoftkey remove item resource file remove menu removemenu h menu hmenu byposition menu menu menu parent swt drop h menu hmenu item menu item menuitem menu swt cascade item menu item menuitem swt push info id command idcommand item send message sendmessage hwnd cb hwndcb setbuttoninfo spsoftkey info item n tool bar id ntoolbarid spmm n tool bar id ntoolbarid spbm h menu hmenu send message sendmessage hwnd cb hwndcb shcmbm getsubmenu spsoftkey remove menu removemenu h menu hmenu byposition menu menu menu parent swt drop h menu hmenu item menu item menuitem menu swt cascade item menu item menuitem swt push info id command idcommand item send message sendmessage hwnd cb hwndcb setbuttoninfo spsoftkey info override key reason owner menubar dialog won receive hotkey message result shell win ce wince dialog dw mask dwmask shmbof nodefault shmbof notify l param lparam dw mask dwmask dw mask dwmask send message sendmessage hwnd cb hwndcb shcmbm overridekey escape l param lparam handle create menu createmenu handle error swt error handles is hpc ishpc hwnd shell hwndshell parent handle hwnd cb hwndcb command bar commandbar create get module handle getmodulehandle hwnd shell hwndshell hwnd cb hwndcb error swt error handles command bar commandbar hwnd cb hwndcb command bar commandbar insert menubar ex insertmenubarex hwnd cb hwndcb handle command bar hosts close button window parent style swt close parent style swt title command bar commandbar add adornments addadornments hwnd cb hwndcb handle create popup menu createpopupmenu handle error swt error handles create item createitem menu item menuitem item count get menu item count getmenuitemcount handle count error swt error invalid range display add menu item addmenuitem item success is ppc isppc is sp issp hwnd cb hwndcb is sp issp tbbutton lp button lpbutton tbbutton lp button lpbutton id command idcommand item lp button lpbutton fs style fsstyle tbstyle autosize item style swt cascade lp button lpbutton fs style fsstyle tbstyle dropdown item style swt separator lp button lpbutton fs style fsstyle btns sep lp button lpbutton fs state fsstate tbstate enabled lp button lpbutton i bitmap ibitmap imagenone success send message sendmessage hwnd cb hwndcb insertbutton lp button lpbutton is win ce iswince u flags uflags byposition tchar lp new item lpnewitem item style swt separator u flags uflags separator lp new item lpnewitem tchar success insert menu insertmenu handle u flags uflags item lp new item lpnewitem success menuiteminfo info menuiteminfo info cb size cbsize menuiteminfo sizeof info f mask fmask miim data info dw item data dwitemdata item success set menu item info setmenuiteminfo handle info bug windows reason insert menu item insertmenuitem insert item text set menu item info setmenuiteminfo text time insert item text feature windows empty string space insert menu item insertmenuitem submenu setting text empty string menu item unexpectedly disabled insert space h heap hheap get process heap getprocessheap tchar buffer tchar byte count bytecount buffer length tchar sizeof psz text psztext heap alloc heapalloc h heap hheap heap memory byte count bytecount move memory movememory psz text psztext buffer byte count bytecount menuiteminfo info menuiteminfo info cb size cbsize menuiteminfo sizeof info f mask fmask miim miim type miim data info w id wid info dw item data dwitemdata item info f type ftype item widget style widgetstyle info dw type data dwtypedata psz text psztext success insert menu item insertmenuitem handle info psz text psztext heap free heapfree h heap hheap psz text psztext success display remove menu item removemenuitem item error swt error item redraw create widget createwidget bug ibm jvm reason code called method jvm issues error jvm exception subcode occurred thread main tid addition windows dialog appears error message indicating problem jit app name appname java exe app ver appver mod name modname jitc dll mod ver modver offset move code caller method check orientation checkorientation parent create handle createhandle parent add menu addmenu default background defaultbackground get sys color getsyscolor color menu default foreground defaultforeground get sys color getsyscolor color menutext destroy accelerators destroyaccelerators parent destroy accelerators destroyaccelerators destroy item destroyitem menu item menuitem item is win ce iswince is ppc isppc is sp issp hwnd cb hwndcb is sp issp redraw send message sendmessage hwnd cb hwndcb commandtoindex item send message sendmessage hwnd cb hwndcb deletebutton error swt error item removed count send message sendmessage hwnd cb hwndcb buttoncount count image list imagelist send message sendmessage handle setimagelist display release image list releaseimagelist image list imagelist image list imagelist menuiteminfo info menuiteminfo info cb size cbsize menuiteminfo sizeof info f mask fmask miim data get menu item info getmenuiteminfo handle info info dw item data dwitemdata item info dw item data dwitemdata item error swt error item removed remove menu removemenu handle byposition error swt error item removed remove menu removemenu handle item bycommand error swt error item removed redraw destroy widget destroywidget h menu hmenu handle h cb hcb hwnd cb hwndcb release handle releasehandle is win ce iswince h cb hcb command bar commandbar destroy h cb hcb h menu hmenu destroy menu destroymenu h menu hmenu fix menus fixmenus decorations new parent newparent menu item menuitem items get items getitems items length items fix menus fixmenus new parent newparent parent remove menu removemenu new parent newparent add menu addmenu parent new parent newparent returns rectangle describing receiver size location relative parent display parent receiver menu shell location relative display note bounds menu menu item undefined menu visible platforms compute bounds menu dynamically displayed receiver bounding rectangle exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver rectangle get bounds getbounds check widget checkwidget is win ce iswince rectangle style swt bar parent menu bar menubar rectangle hwnd shell hwndshell parent handle menubarinfo info menubarinfo info cb size cbsize menubarinfo sizeof get menu bar info getmenubarinfo hwnd shell hwndshell objid menu info width info info left height info bottom info top rectangle info left info top width height count get menu item count getmenuitemcount handle count rect rect rect get menu item rect getmenuitemrect handle rect rect rect rect get menu item rect getmenuitemrect handle count rect rect left rect top width rect rect left height rect bottom rect top rectangle width height rectangle returns menu item menu item exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver menu item menuitem get default item getdefaultitem check widget checkwidget is win ce iswince get menu default item getmenudefaultitem handle bycommand gmdi usedisabled menuiteminfo info menuiteminfo info cb size cbsize menuiteminfo sizeof info f mask fmask miim get menu item info getmenuiteminfo handle info display get menu item getmenuitem info w id wid returns code code receiver enabled code code disabled menu typically selectable user draws inactive grayed receiver enabled exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver is enabled isenabled get enabled getenabled check widget checkwidget disabled returns item relative receiver exception range param item item exception illegal argument exception illegalargumentexception error invalid range number elements list inclusive exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver menu item menuitem get item getitem check widget checkwidget is ppc isppc is sp issp hwnd cb hwndcb is ppc isppc tbbutton lp button lpbutton tbbutton result send message sendmessage hwnd cb hwndcb getbutton lp button lpbutton result error swt error item lp button lpbutton id command idcommand is sp issp error swt error item menuiteminfo info menuiteminfo info cb size cbsize menuiteminfo sizeof info f mask fmask miim data get menu item info getmenuiteminfo handle info error swt error invalid range info dw item data dwitemdata display get menu item getmenuitem returns number items contained receiver number items exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver get item count getitemcount check widget checkwidget get menu item count getmenuitemcount handle returns empty array code menu item menuitem code items receiver note actual structure receiver maintain list items modifying array affect receiver items receiver exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver menu item menuitem get items getitems check widget checkwidget is ppc isppc is sp issp hwnd cb hwndcb is sp issp menu item menuitem result menu item menuitem result display get menu item getmenuitem result display get menu item getmenuitem result count send message sendmessage hwnd cb hwndcb buttoncount tbbutton lp button lpbutton tbbutton menu item menuitem result menu item menuitem count count send message sendmessage hwnd cb hwndcb getbutton lp button lpbutton result display get menu item getmenuitem lp button lpbutton id command idcommand result count length is win ce iswince get menu item count getmenuitemcount handle menu item menuitem items menu item menuitem length menuiteminfo info menuiteminfo info cb size cbsize menuiteminfo sizeof info f mask fmask miim data get menu item info getmenuiteminfo handle count info count items length menu item menuitem new items newitems menu item menuitem count system arraycopy items new items newitems count items new items newitems items count display get menu item getmenuitem info dw item data dwitemdata count items length items menu item menuitem result menu item menuitem count system arraycopy items result count result get menu item count getmenuitemcount handle is win ce iswince is ppc isppc is sp issp hwnd cb hwndcb is sp issp send message sendmessage hwnd cb hwndcb buttoncount count menuiteminfo info menuiteminfo info cb size cbsize menuiteminfo sizeof get menu item info getmenuiteminfo handle count info count count get menu item count getmenuitemcount handle string get name text getnametext string result menu item menuitem items get items getitems length items length length length result result items get name text getnametext result result items length get name text getnametext result returns receiver parent code decorations code receiver parent exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver decorations get parent getparent check widget checkwidget parent returns receiver parent item code menu item menuitem code receiver root receiver parent item exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver menu item menuitem get parent item getparentitem check widget checkwidget cascade returns receiver parent item code menu code receiver root receiver parent item exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver menu get parent menu getparentmenu check widget checkwidget cascade cascade parent returns receiver shell controls shells simply returns control nearest ancestor shell shells children shells receiver shell exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver get parent getparent shell get shell getshell check widget checkwidget parent get shell getshell returns code code receiver visible code code receiver ancestors visible condition receiver visible method considered visible showing receiver visibility exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver get visible getvisible check widget checkwidget style swt bar parent menu shell menushell menu bar menubar style swt pop menu popups display popups popups popups length popups shell shell get shell getshell menu menu shell active menu activemenu menu menu menu menu get parent menu getparentmenu menu image index imageindex image image hwnd cb hwndcb image imagenone image list imagelist h old list holdlist send message sendmessage hwnd cb hwndcb getimagelist h old list holdlist image list imagelist destroy h old list holdlist rectangle bounds image get bounds getbounds image list imagelist display get image list getimagelist style swt left bounds width bounds height h image list himagelist image list imagelist get handle gethandle send message sendmessage hwnd cb hwndcb setimagelist h image list himagelist image list imagelist index of indexof image image list imagelist add image image list imagelist image searches receiver list starting item item equal argument returns item item returns param item search item item exception illegal argument exception illegalargumentexception error argument string exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver index of indexof menu item menuitem item check widget checkwidget item error swt error argument item is disposed isdisposed error swt error invalid argument item parent is ppc isppc is sp issp hwnd cb hwndcb is ppc isppc send message sendmessage hwnd cb hwndcb commandtoindex item is sp issp item item menuiteminfo info menuiteminfo info cb size cbsize menuiteminfo sizeof info f mask fmask miim data get menu item info getmenuiteminfo handle info info dw item data dwitemdata item returns code code receiver enabled receiver ancestors enabled code code disabled menu typically selectable user draws inactive grayed receiver enabled exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver get enabled getenabled is enabled isenabled check widget checkwidget menu parent menu parentmenu get parent menu getparentmenu parent menu parentmenu get enabled getenabled get enabled getenabled parent menu parentmenu is enabled isenabled returns code code receiver visible receiver ancestors visible code code receiver visibility exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver get visible getvisible is visible isvisible check widget checkwidget get visible getvisible redraw is visible isvisible style swt bar display add bar addbar update release child releasechild release child releasechild cascade cascade release menu releasemenu style swt bar display remove bar removebar parent menu bar menubar parent set menu bar setmenubar style swt pop display remove popup removepopup release handle releasehandle release handle releasehandle handle hwnd cb hwndcb release widget releasewidget menu item menuitem items get items getitems items length menu item menuitem item items item is disposed isdisposed is ppc isppc hwnd cb hwndcb item dispose item release resources releaseresources is ppc isppc hwnd cb hwndcb image list imagelist send message sendmessage hwnd cb hwndcb setimagelist display release tool image list releasetoolimagelist image list imagelist image list imagelist release widget releasewidget parent parent remove menu removemenu parent cascade removes listener collection listeners notified events generated control param listener listener longer notified exception illegal argument exception illegalargumentexception error argument listener exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver help listener helplistener add help listener addhelplistener remove help listener removehelplistener help listener helplistener listener check widget checkwidget listener error swt error argument event table eventtable event table eventtable unhook swt listener removes listener collection listeners notified menu events generated control param listener listener longer notified exception illegal argument exception illegalargumentexception error argument listener exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver menu listener menulistener add menu listener addmenulistener remove menu listener removemenulistener menu listener menulistener listener check widget checkwidget listener error swt error argument event table eventtable event table eventtable unhook swt hide listener event table eventtable unhook swt listener sets menu item argument removes emphasis argument code code param item menu item exception illegal argument exception illegalargumentexception error invalid argument menu item disposed exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver set default item setdefaultitem menu item menuitem item check widget checkwidget new id newid item item is disposed isdisposed error swt error invalid argument item parent new id newid item is win ce iswince old id oldid get menu default item getmenudefaultitem handle bycommand gmdi usedisabled new id newid old id oldid set menu default item setmenudefaultitem handle new id newid bycommand redraw enables receiver argument code code disables disabled menu typically selectable user draws inactive grayed param enabled enabled exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver set enabled setenabled enabled check widget checkwidget disabled enabled disabled sets location receiver popup point arguments relative display note widgets location widget relative parent note platform window manager ultimately control location popup menus param coordinate receiver param coordinate receiver exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver set location setlocation check widget checkwidget style swt bar swt drop has location haslocation sets location receiver popup point argument relative display note widgets location widget relative parent note platform window manager ultimately control location popup menus param location location receiver exception illegal argument exception illegalargumentexception error argument point exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver set location setlocation point location check widget checkwidget location swt error swt error argument set location setlocation location location marks receiver visible argument code code marks invisible receiver ancestors visible condition receiver visible marking visible displayed param visible visibility exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver set visible setvisible visible check widget checkwidget style swt bar swt drop visible display add popup addpopup display remove popup removepopup set visible setvisible update is ppc isppc is sp issp is hpc ishpc time menu modified command menu bar redrawn won update properly submenu drop menu menu bar menubar parent menu bar menubar menu bar menubar menu menu menu menu menu bar menubar menu menu get parent menu getparentmenu menu menu bar menubar command bar commandbar draw menu bar drawmenubar menu bar menubar hwnd cb hwndcb command bar commandbar menu bar menubar hwnd cb hwndcb is win ce iswince style swt bar parent menu bar menubar draw menu bar drawmenubar parent handle win version version has check hascheck has image hasimage menu item menuitem items get items getitems items length menu item menuitem item items item image has image hasimage has check hascheck item style swt check swt radio has check hascheck has image hasimage bug windows menu items images checked windows include width image width check computing width menu longest item image label accelerator text overlap set menu item info setmenuiteminfo items bitmap include width widest bitmap measurechild note work problems windows circumstances isolated menus huge blank code windows is win iswin menuiteminfo info menuiteminfo info cb size cbsize menuiteminfo sizeof info f mask fmask miim bitmap items length menu item menuitem item items style swt separator item image info hbmp item hbmpitem has image hasimage hbmmenu callback set menu item info setmenuiteminfo handle item info update menu hide space bitmaps menuinfo lpcmi menuinfo lpcmi cb size cbsize menuinfo sizeof lpcmi f mask fmask mim style get menu info getmenuinfo handle lpcmi has image hasimage has check hascheck lpcmi dw style dwstyle mns checkorbmp lpcmi dw style dwstyle mns checkorbmp set menu info setmenuinfo handle lpcmi