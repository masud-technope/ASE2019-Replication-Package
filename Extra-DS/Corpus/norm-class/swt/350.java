copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse swt internal image org eclipse swt org eclipse swt graphics java bmpfile format bmpfileformat file format fileformat bmpfile header size bmpfileheadersize bmpheader fixed size bmpheaderfixedsize width height bit count bitcount is file format isfileformat ledata input stream ledatainputstream stream header stream read header stream unread header info header size infoheadersize header x ff xff header x ff xff header x ff xff header x ff xff header header info header size infoheadersize bmpheader fixed size bmpheaderfixedsize exception load data loaddata info header infoheader stride width bit count bitcount multiple stride stride data load data loaddata info header infoheader stride flip scan lines flipscanlines data stride height data load data loaddata info header infoheader stride data size datasize height stride data data size datasize input stream inputstream read data data size datasize swt error swt error invalid image ioexception swt error swt error data load file header loadfileheader header header input stream inputstream read short readshort header input stream inputstream read int readint header input stream inputstream read short readshort header input stream inputstream read short readshort header input stream inputstream read int readint ioexception swt error swt error header swt error swt error invalid image header image data imagedata load from byte stream loadfrombytestream file header fileheader load file header loadfileheader info header infoheader bmpheader fixed size bmpheaderfixedsize input stream inputstream read info header infoheader exception swt error swt error width info header infoheader x ff xff info header infoheader x ff xff height info header infoheader x ff xff info header infoheader x ff xff bit count bitcount info header infoheader x ff xff info header infoheader x ff xff palette data palettedata palette load palette loadpalette info header infoheader input stream inputstream get position getposition file header fileheader seek offset input stream inputstream skip file header fileheader input stream inputstream get position getposition ioexception swt error swt error data load data loaddata info header infoheader type swt image bmp image data imagedata image data imagedata internal width height bit count bitcount palette data type palette data palettedata load palette loadpalette info header infoheader bit count bitcount num colors numcolors bit count bitcount buf num colors numcolors input stream inputstream read buf buf length swt error swt error invalid image ioexception swt error swt error palette from bytes palettefrombytes buf num colors numcolors bit count bitcount palette data palettedata bit count bitcount palette data palettedata x ff xff x ff xff x ff xff palette data palettedata x ff xff x ff xff x ff xff palette data palettedata palette from bytes palettefrombytes bytes num colors numcolors bytes offset bytesoffset rgb colors rgb num colors numcolors num colors numcolors colors rgb bytes bytes offset bytesoffset x ff xff bytes bytes offset bytesoffset x ff xff bytes bytes offset bytesoffset x ff xff bytes offset bytesoffset palette data palettedata colors answer array bmp representation device independent palette palette to bytes palettetobytes palette data palettedata pal pal colors pal colors length pal colors length bytes offset rgb col pal colors bytes offset col blue bytes offset col green bytes offset col red offset bytes unload image data stream answer number bytes written unload data unloaddata image data imagedata image output stream outputstream bmp bpl bmpbpl bpl image width image depth bmp pads scanlines multiples bytes bmp bpl bmpbpl bpl lines per buf linesperbuf bmp bpl bmpbpl buf lines per buf linesperbuf bmp bpl bmpbpl data image data image bpl imagebpl image bytes per line bytesperline start data index dataindex image bpl imagebpl image height image depth image height lines per buf linesperbuf count image height lines per buf linesperbuf count count lines per buf linesperbuf buf offset bufoffset count w index windex w index windex bpl w index windex buf buf offset bufoffset w index windex data data index dataindex w index windex buf buf offset bufoffset w index windex data data index dataindex w index windex buf offset bufoffset bmp bpl bmpbpl data index dataindex image bpl imagebpl write buf buf offset bufoffset image height lines per buf linesperbuf tmp image height count tmp lines per buf linesperbuf tmp lines per buf linesperbuf buf offset bufoffset count system arraycopy data data index dataindex buf buf offset bufoffset bpl buf offset bufoffset bmp bpl bmpbpl data index dataindex image bpl imagebpl write buf buf offset bufoffset ioexception swt error swt error bmp bpl bmpbpl image height unload device independent image deviceindependentimage windows bmp format stream unload into byte stream unloadintobytestream image data imagedata image rgbs num cols numcols image depth image depth image depth image depth image depth image depth swt error swt error unsupported depth palette data palettedata pal image palette image depth image depth image depth pal is direct isdirect swt error swt error invalid image num cols numcols rgbs pal is direct isdirect swt error swt error invalid image num cols numcols pal colors length rgbs palette to bytes palettetobytes pal fill file header bfsize headers size headerssize bmpfile header size bmpfileheadersize bmpheader fixed size bmpheaderfixedsize file header fileheader signature file header fileheader file size filled file header fileheader reserved file header fileheader reserved file header fileheader offset data file header fileheader headers size headerssize rgbs file header fileheader rgbs length prepare data don rewind stream fill details byte array output stream bytearrayoutputstream byte array output stream bytearrayoutputstream unload data unloaddata image data to byte array tobytearray calculate file size file header fileheader file header fileheader data length write headers output stream outputstream write short writeshort file header fileheader output stream outputstream write int writeint file header fileheader output stream outputstream write short writeshort file header fileheader output stream outputstream write short writeshort file header fileheader output stream outputstream write int writeint file header fileheader ioexception swt error swt error output stream outputstream write int writeint bmpheader fixed size bmpheaderfixedsize output stream outputstream write short writeshort image width output stream outputstream write short writeshort image height output stream outputstream write short writeshort output stream outputstream write short writeshort image depth ioexception swt error swt error unload palette num cols numcols output stream outputstream write rgbs ioexception swt error swt error unload data output stream outputstream write data ioexception swt error swt error flip scan lines flipscanlines data stride height height stride height stride data data data data stride stride