copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse swt dnd org eclipse swt org eclipse swt widgets org eclipse swt internal ole win org eclipse swt internal win code drag source dragsource code defines source object drag drop transfer intended subclassed drag source object originates drag drop operation widget defines type data dragging operations performed data operations bit wise combination dnd move dnd copy dnd link type data transferred subclasses transfer text transfer texttransfer file transfer filetransfer type data transferred predefined system type type defined application instructions define transfer type refer code byte array transfer bytearraytransfer code drag sources dragsources application drag source dragsource control data dragged drag source dragsource dropped site application dropped application external text editor application supplies content data transferred implementing code drag source listener dragsourcelistener code associating drag source dragsource drag source dragsource add drag listener adddraglistener successful move operation occurs application required action remove data display remove operating system resources internal references typically move operation drop target copy data drag source deletes original copying data time copying large file platforms drop target move data operating system copy file transfers drag source informed drag end dragend event drop target move performed responsibility drag source point clean displayed action operating system resources label widget text dragged code pre enable label drag source label label label shell swt text dragged transfer types transfer text transfer texttransfer get instance getinstance text copied moved drop target operations dnd drop move dnd drop copy drag source dragsource source drag source dragsource label operations source set transfer settransfer types source add drag listener adddraglistener drag source listener dragsourcelistener drag start dragstart drag source event dragsourceevent start drag text label text dropped target label get text gettext length event doit drag set data dragsetdata drag source event dragsourceevent event drop performed provide data requested type checking type requested data drag source supports data type text transfer texttransfer get instance getinstance is supported type issupportedtype event data type datatype event data label get text gettext drag finished dragfinished drag source event dragsourceevent event move operation performed remove data source event detail dnd drop move label set text settext pre code styles dnd drop dnd drop copy dnd drop move dnd drop link events dnd drag start dragstart dnd drag set data dragsetdata dnd drag end dragend drag source dragsource widget info registering drag source control control listener control listener controllistener transfer transfer agents transferagents transfer ole interfaces comobject i drop source idropsource comobject i data object idataobject ref count refcount workaround track operation performed drop target drag end dragend event data effect dataeffect dnd drop nls string dragsourceid drag source dragsource nls cfstr performeddropeffect transfer register type registertype performed drop effect dropeffect creates code drag source dragsource code handle dragging code control code creating instance drag source dragsource system resources allocated depending platform mandatory drag source dragsource instance disposed longer required param control code control code user clicks initiate drag param style bitwise ing allowed operations combination dnd drop dnd drop copy dnd drop move dnd drop link exception swtexception error thread invalid access called thread created parent error invalid subclass allowed subclass exception swterror error init drag unable initiate drag source occur drag source created control operating system creation drag source note error init drag swtexception recoverable error changed compatability widget dispose drag source dragsource check subclass checksubclass dnd drop dnd drop copy dnd drop move dnd drop link drag source dragsource control control style control check style checkstyle style control control control get data getdata dragsourceid dnd error dnd error init drag control set data setdata dragsourceid create cominterfaces createcominterfaces add ref addref control listener controllistener listener handle event handleevent event event event type swt dispose drag source dragsource is disposed isdisposed drag source dragsource dispose event type swt drag detect dragdetect drag source dragsource is disposed isdisposed drag source dragsource drag control add listener addlistener swt dispose control listener controllistener control add listener addlistener swt drag detect dragdetect control listener controllistener add listener addlistener swt dispose listener handle event handleevent event drag source dragsource on dispose ondispose check style checkstyle style style swt dnd drop move style adds listener collection listeners notified drag drop operation progress sending messages defined code drag source listener dragsourcelistener code code drag start dragstart code called user begun actions required drag widget event application chance decide drag started code drag set data dragsetdata code called data required drag source code drag finished dragfinished code called drop completed mouse valid target terminated hitting esc key perform cleanup removing data source side successful move operation param listener listener notified exception illegal argument exception illegalargumentexception error argument listener exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver drag source listener dragsourcelistener remove drag listener removedraglistener drag source event dragsourceevent add drag listener adddraglistener drag source listener dragsourcelistener listener listener dnd error swt error argument dndlistener typed listener typedlistener dndlistener listener add listener addlistener dnd drag start dragstart typed listener typedlistener add listener addlistener dnd drag set data dragsetdata typed listener typedlistener add listener addlistener dnd drag end dragend typed listener typedlistener add ref addref ref count refcount ref count refcount create cominterfaces createcominterfaces register interfaces object i drop source idropsource comobject method args query interface queryinterface args args method args add ref addref method args release method args query continue drag querycontinuedrag args args method args give feedback givefeedback args i data object idataobject comobject method args query interface queryinterface args args method args add ref addref method args release method args get data getdata args args method get data here getdatahere implemented method args query get data querygetdata args method get canonical format etc getcanonicalformatetc implemented method args set data setdata args args args method args enum format etc enumformatetc args args check subclass checksubclass string get class getclass get name getname string valid name validname drag source dragsource get name getname valid name validname equals dnd error swt error invalid subclass dispose cominterfaces disposecominterfaces i drop source idropsource i drop source idropsource dispose i drop source idropsource i data object idataobject i data object idataobject dispose i data object idataobject drag dndevent event dndevent event widget event time get message time getmessagetime event doit notify listeners notifylisteners dnd drag start dragstart event event doit transfer agents transferagents transfer agents transferagents length pdw effect pdweffect operations op to os optoos get style getstyle result do drag drop dodragdrop i data object idataobject get address getaddress i drop source idropsource get address getaddress operations pdw effect pdweffect operation os to op ostoop pdw effect pdweffect data effect dataeffect dnd drop move operation operation dnd drop operation dnd drop copy dnd drop target move dnd drop move data effect dataeffect dnd drop operation data effect dataeffect event dndevent event widget event time get message time getmessagetime event doit result dragdrop drop event detail operation notify listeners notifylisteners dnd drag end dragend event data effect dataeffect dnd drop enum format etc enumformatetc dw direction dwdirection ppenum formatetc ppenumformatetc data set data setdata supported dw direction dwdirection datadir notimpl types registered transfer data transferdata allowed data types alloweddatatypes transfer data transferdata transfer agents transferagents length transfer data transferdata formats transfer agents transferagents get supported types getsupportedtypes transfer data transferdata new allowed data types newalloweddatatypes transfer data transferdata allowed data types alloweddatatypes length formats length system arraycopy allowed data types alloweddatatypes new allowed data types newalloweddatatypes allowed data types alloweddatatypes length system arraycopy formats new allowed data types newalloweddatatypes allowed data types alloweddatatypes length formats length allowed data types alloweddatatypes new allowed data types newalloweddatatypes ole enum formatetc oleenumformatetc enum formatetc enumformatetc ole enum formatetc oleenumformatetc enum formatetc enumformatetc add ref addref formatetc formats formatetc allowed data types alloweddatatypes length formats length formats allowed data types alloweddatatypes formatetc enum formatetc enumformatetc set formats setformats formats move memory movememory ppenum formatetc ppenumformatetc enum formatetc enumformatetc get address getaddress returns control registered drag source dragsource control user clicks initiate dragging control registered drag source dragsource control get control getcontrol control get data getdata p formatetc pformatetc pmedium called data consumer data source data object get data getdata method renders data formatetc structure transfers stgmedium structure caller assumes responsibility releasing stgmedium structure p formatetc pformatetc pmedium invalidarg query get data querygetdata p formatetc pformatetc formatetc transfer data transferdata transfer data transferdata transfer data transferdata transfer data transferdata formatetc formatetc move memory movememory transfer data transferdata formatetc p formatetc pformatetc formatetc sizeof transfer data transferdata type transfer data transferdata formatetc cf format cfformat transfer data transferdata stgmedium stgmedium transfer data transferdata result fail dndevent event dndevent event widget event time get message time getmessagetime event data type datatype transfer data transferdata notify listeners notifylisteners dnd drag set data dragsetdata event matching transfer agent perform conversion transfer transfer transfer agents transferagents length transfer agents transferagents is supported type issupportedtype transfer data transferdata transfer transfer agents transferagents transfer formatetc transfer java to native javatonative event data transfer data transferdata transfer data transferdata result transfer data transferdata result move memory movememory pmedium transfer data transferdata stgmedium stgmedium sizeof transfer data transferdata result returns list data types transferred drag source dragsource list data types transferred drag source dragsource transfer get transfer gettransfer transfer agents transferagents give feedback givefeedback dw effect dweffect dragdrop usedefaultcursors query continue drag querycontinuedrag f escape pressed fescapepressed grf key state grfkeystate f escape pressed fescapepressed dragdrop cancel mask lbutton mbutton rbutton xbutton xbutton grf key state grfkeystate mask dragdrop drop on dispose ondispose control release control listener controllistener control remove listener removelistener swt dispose control listener controllistener control remove listener removelistener swt drag detect dragdetect control listener controllistener control listener controllistener control set data setdata dragsourceid control transfer agents transferagents op to os optoos operation os operation osoperation operation dnd drop copy os operation osoperation dropeffect copy operation dnd drop link os operation osoperation dropeffect link operation dnd drop move os operation osoperation dropeffect move os operation osoperation os to op ostoop os operation osoperation operation os operation osoperation dropeffect copy operation dnd drop copy os operation osoperation dropeffect link operation dnd drop link os operation osoperation dropeffect move operation dnd drop move operation query get data querygetdata p formatetc pformatetc transfer agents transferagents fail transfer data transferdata transfer data transferdata transfer data transferdata transfer data transferdata formatetc formatetc move memory movememory transfer data transferdata formatetc p formatetc pformatetc formatetc sizeof transfer data transferdata type transfer data transferdata formatetc cf format cfformat type supported transfer agent transfer agents transferagents length transfer agents transferagents is supported type issupportedtype transfer data transferdata formatetc query interface queryinterface riid ppv object ppvobject riid ppv object ppvobject invalidarg guid guid guid move memory movememory guid riid guid sizeof is equal guid isequalguid guid iidiunknown is equal guid isequalguid guid iididrop source iididropsource move memory movememory ppv object ppvobject i drop source idropsource get address getaddress add ref addref is equal guid isequalguid guid iididata object iididataobject move memory movememory ppv object ppvobject i data object idataobject get address getaddress add ref addref move memory movememory ppv object ppvobject nointerface release ref count refcount ref count refcount dispose cominterfaces disposecominterfaces co free unused libraries cofreeunusedlibraries ref count refcount removes listener collection listeners notified drag drop operation progress param listener listener notified exception illegal argument exception illegalargumentexception error argument listener exception swtexception error widget disposed receiver disposed error thread invalid access called thread created receiver drag source listener dragsourcelistener add drag listener adddraglistener remove drag listener removedraglistener drag source listener dragsourcelistener listener listener dnd error swt error argument remove listener removelistener dnd drag start dragstart listener remove listener removelistener dnd drag set data dragsetdata listener remove listener removelistener dnd drag end dragend listener set data setdata p formatetc pformatetc pmedium f release frelease p formatetc pformatetc pmedium invalidarg formatetc formatetc formatetc move memory movememory formatetc p formatetc pformatetc formatetc sizeof formatetc cf format cfformat cfstr performeddropeffect formatetc tymed tymed hglobal stgmedium stgmedium stgmedium move memory movememory stgmedium pmedium stgmedium sizeof ptr effect ptreffect move memory movememory ptr effect ptreffect stgmedium union field unionfield move memory movememory ptr effect ptreffect data effect dataeffect os to op ostoop f release frelease release stg medium releasestgmedium pmedium specifies list data types transferred drag source dragsource application provide data match types successful drop occurred param transfer agents transferagents list transfer objects define types data dragged source set transfer settransfer transfer transfer agents transferagents transfer agents transferagents transfer agents transferagents