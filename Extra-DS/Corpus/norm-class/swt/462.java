copyright ibm corporation rights reserved program accompanying materials terms eclipse license accompanies distribution http eclipse org legal epl html contributors ibm corporation initial api implementation org eclipse swt internal image org eclipse swt org eclipse swt graphics java tiffdirectory tiffrandom file access tiffrandomfileaccess file is little endian islittleendian image loader imageloader loader depth directory fields image width imagewidth image length imagelength bits per sample bitspersample compression photometric interpretation photometricinterpretation strip offsets stripoffsets samples per pixel samplesperpixel rows per strip rowsperstrip strip byte counts stripbytecounts options color map offset colormapoffset encoder fields image data imagedata image ledata output stream ledataoutputstream tag image width imagewidth tag image length imagelength tag bits per sample bitspersample tag compression tag photometric interpretation photometricinterpretation tag strip offsets stripoffsets tag samples per pixel samplesperpixel tag rows per strip rowsperstrip tag strip byte counts stripbytecounts tag xresolution tag yresolution tag options tag resolution unit resolutionunit tag color map colormap type type ascii type type type rational compression schemes compression compression ccitt compression packbits ifd entry size tiffdirectory tiffrandom file access tiffrandomfileaccess file is little endian islittleendian image loader imageloader loader file file is little endian islittleendian is little endian islittleendian loader loader tiffdirectory image data imagedata image image image pack bits packbits decoder decode pack bits decodepackbits src dest offset dest offsetdest dest index destindex offset dest offsetdest src index srcindex src index srcindex src length src src index srcindex copy bytes literally system arraycopy src src index srcindex dest dest index destindex src index srcindex dest index destindex copy times src src index srcindex dest dest index destindex src index srcindex noop src index srcindex number bytes copied dest index destindex offset dest offsetdest get entry value getentryvalue type buffer to int toint buffer type get entry value getentryvalue type buffer values ioexception start size offset to int toint buffer start type type type size type size type rational size type ascii type size swt error swt error unsupported format values length size buffer values length size file seek offset file read buffer start values length values to int toint buffer start size type decode pixels decodepixels image data imagedata image ioexception row aligned image data imagedata image width imagewidth depth image length imagelength image data image data imagedata dest index destindex length strip offsets stripoffsets length length read strip data strip byte counts stripbytecounts file seek strip offsets stripoffsets file read data compression compression system arraycopy data image data imagedata dest index destindex data length dest index destindex data length compression compression packbits dest index destindex decode pack bits decodepackbits data image data imagedata dest index destindex compression compression ccitt compression tiffmodified huffman codec tiffmodifiedhuffmancodec codec tiffmodified huffman codec tiffmodifiedhuffmancodec n rows nrows rows per strip rowsperstrip length image length imagelength rows per strip rowsperstrip n rows nrows dest index destindex codec decode data image data imagedata dest index destindex image width imagewidth n rows nrows loader has listeners haslisteners loader notify listeners notifylisteners image loader event imageloaderevent loader image length palette data palettedata get color map getcolormap ioexception num colors numcolors bits per sample bitspersample entries bit wide bytes num bytes numbytes num colors numcolors buffer num bytes numbytes file seek color map offset colormapoffset file read buffer rgb colors rgb num colors numcolors swt support bit depth color formats convert bit data bit data correct multiply bit fast drop bit offset is little endian islittleendian start g startg num colors numcolors start b startb start g startg num colors numcolors num colors numcolors buffer offset x ff xff buffer start g startg offset x ff xff buffer start b startb offset x ff xff colors rgb offset palette data palettedata colors palette data palettedata get gray palette getgraypalette num colors numcolors bits per sample bitspersample rgb rgbs rgb num colors numcolors num colors numcolors x ff xff num colors numcolors photometric interpretation photometricinterpretation x ff xff rgbs rgb palette data palettedata rgbs palette data palettedata get rgbpalette getrgbpalette bits r bitsr bits g bitsg bits b bitsb blue mask bluemask bits b bitsb blue mask bluemask green mask greenmask bits b bitsb bits b bitsb bits g bitsg green mask greenmask red mask redmask bits b bitsb bits g bitsg bits b bitsb bits g bitsg bits r bitsr red mask redmask palette data palettedata red mask redmask green mask greenmask blue mask bluemask format strips formatstrips row byte size rowbytesize nbr rows nbrrows data max strip byte size maxstripbytesize offset post ifd offsetpostifd extra bytes extrabytes strips calculate nbr required strips requirements strip greater max strip byte size maxstripbytesize strip entire rows format strip fields arrays image data stored contiguous block block stored ifd tag info ifd nbr rows per strip nbrrowsperstrip row byte size rowbytesize max strip byte size maxstripbytesize strip row data length row byte size rowbytesize nbr rows per strip nbrrowsperstrip nbr data length max strip byte size maxstripbytesize max strip byte size maxstripbytesize nbr rows per strip nbrrowsperstrip nbr rows nbrrows nbr nbr rows nbrrows nbr rows per strip nbrrowsperstrip nbr rows per strip nbrrowsperstrip strip byte size stripbytesize row byte size rowbytesize nbr rows per strip nbrrowsperstrip offsets counts nbr bytes ifd directory start image data space offsets counts data field type bytes tags require space ifd image block extra bytes extrabytes parameter strip offsets counts data stored ifd reserve space post ifddata postifddata start offset startoffset offset post ifd offsetpostifd extra bytes extrabytes post ifddata postifddata offset image data offset start offset startoffset store strips sequentially copy pixels contiguous area offsets offset counts strip byte size stripbytesize offset strip byte size stripbytesize strip rows mod data length strip byte size stripbytesize mod counts counts length mod strips offsets strips counts nbr rows per strip nbrrowsperstrip format color map formatcolormap rgb rgbs tiff color map colormap red green blue values converted bit bit color map colormap rgbs length offset green offsetgreen rgbs length offset blue offsetblue rgbs length rgbs length color map colormap rgbs red rgbs red color map colormap offset green offsetgreen rgbs green rgbs green color map colormap offset blue offsetblue rgbs blue rgbs blue color map colormap parse entries parseentries buffer ioexception offset offset buffer length offset ifd entry size tag to int toint buffer offset type type to int toint buffer offset type count to int toint buffer offset type tag tag image width imagewidth image width imagewidth get entry value getentryvalue type buffer offset tag image length imagelength image length imagelength get entry value getentryvalue type buffer offset tag bits per sample bitspersample type type swt error swt error invalid image bits per sample bitspersample count get entry value getentryvalue type buffer offset bits per sample bitspersample tag compression compression get entry value getentryvalue type buffer offset tag photometric interpretation photometricinterpretation photometric interpretation photometricinterpretation get entry value getentryvalue type buffer offset tag strip offsets stripoffsets type type type type swt error swt error invalid image strip offsets stripoffsets count get entry value getentryvalue type buffer offset strip offsets stripoffsets tag samples per pixel samplesperpixel type type swt error swt error invalid image samples per pixel samplesperpixel get entry value getentryvalue type buffer offset basic values supported samples per pixel samplesperpixel samples per pixel samplesperpixel swt error swt error unsupported depth tag rows per strip rowsperstrip rows per strip rowsperstrip get entry value getentryvalue type buffer offset tag strip byte counts stripbytecounts strip byte counts stripbytecounts count get entry value getentryvalue type buffer offset strip byte counts stripbytecounts tag xresolution tag yresolution tag options type type swt error swt error invalid image options get entry value getentryvalue type buffer offset options dimensional coding supported swt error swt error unsupported format tag resolution unit resolutionunit tag color map colormap type type swt error swt error invalid image offset color map colormap type color map offset colormapoffset get entry value getentryvalue type buffer offset image data imagedata read ioexception tiff values bits per sample bitspersample color map offset colormapoffset compression image length imagelength image width imagewidth photometric interpretation photometricinterpretation rows per strip rowsperstrip integer max samples per pixel samplesperpixel strip byte counts stripbytecounts strip offsets stripoffsets buffer file read buffer number entries numberentries to int toint buffer type buffer ifd entry size number entries numberentries file read buffer parse entries parseentries buffer palette data palettedata palette depth photometric interpretation photometricinterpretation bilevel grayscale image palette get gray palette getgraypalette depth bits per sample bitspersample rgb image color map offset colormapoffset swt error swt error invalid image samples per pixel samplesperpixel supported palette get rgbpalette getrgbpalette bits per sample bitspersample bits per sample bitspersample bits per sample bitspersample depth bits per sample bitspersample bits per sample bitspersample bits per sample bitspersample palette color image color map offset colormapoffset swt error swt error invalid image palette get color map getcolormap depth bits per sample bitspersample swt error swt error invalid image image data imagedata image image data imagedata internal image width imagewidth image length imagelength depth palette swt image tiff decode pixels decodepixels image image to int toint buffer type type type is little endian islittleendian buffer x ff xff buffer x ff xff buffer x ff xff buffer x ff xff buffer x ff xff buffer x ff xff buffer x ff xff buffer x ff xff type type is little endian islittleendian buffer x ff xff buffer x ff xff buffer x ff xff buffer x ff xff invalid type swt error swt error invalid image write photometric interpretation photometricinterpretation ioexception is rgb isrgb photometric interpretation photometricinterpretation is color map iscolormap photometric interpretation photometricinterpretation is bi level isbilevel photometric interpretation photometricinterpretation photometric interpretation photometricinterpretation image width imagewidth image width image length imagelength image height row byte size rowbytesize image bytes per line bytesperline number entries numberentries is bi level isbilevel length directory lengthdirectory number entries numberentries offset header directory next offset nextoffset length directory lengthdirectory extra space xresolution yresolution values extra bytes extrabytes color map colormap is color map iscolormap palette data palettedata palette image palette rgb rgbs palette get rgbs getrgbs color map colormap format color map formatcolormap rgbs number entries color map match bits per sample bitspersample field color map colormap length image depth swt error swt error unsupported format extra space color map colormap values extra bytes extrabytes color map colormap length is rgb isrgb extra space bits per sample bitspersample values extra bytes extrabytes tiff recommends storing data strips data image data strips nbr rows per strip nbrrowsperstrip format strips formatstrips row byte size rowbytesize image length imagelength data next offset nextoffset extra bytes extrabytes strips strip offsets stripoffsets strips strip byte counts stripbytecounts strips bits per sample offset bitspersampleoffset is rgb isrgb bits per sample offset bitspersampleoffset next offset nextoffset next offset nextoffset strip offsets offset stripoffsetsoffset strip byte counts offset stripbytecountsoffset x resolution offset xresolutionoffset y resolution offset yresolutionoffset color map offset colormapoffset cnt strip offsets stripoffsets length cnt strip offsets offset stripoffsetsoffset next offset nextoffset next offset nextoffset cnt strip byte counts offset stripbytecountsoffset next offset nextoffset next offset nextoffset cnt x resolution offset xresolutionoffset next offset nextoffset next offset nextoffset y resolution offset yresolutionoffset next offset nextoffset next offset nextoffset is color map iscolormap color map offset colormapoffset next offset nextoffset next offset nextoffset color map colormap length tiff header write header writeheader image file directory write short writeshort number entries numberentries write entry writeentry tag image width imagewidth type image width imagewidth write entry writeentry tag image length imagelength type image length imagelength is color map iscolormap write entry writeentry tag bits per sample bitspersample type image depth is rgb isrgb write entry writeentry tag bits per sample bitspersample type bits per sample offset bitspersampleoffset write entry writeentry tag compression type compression write entry writeentry tag photometric interpretation photometricinterpretation type photometric interpretation photometricinterpretation write entry writeentry tag strip offsets stripoffsets type cnt cnt strip offsets offset stripoffsetsoffset strip offsets stripoffsets is rgb isrgb write entry writeentry tag samples per pixel samplesperpixel type write entry writeentry tag rows per strip rowsperstrip type nbr rows per strip nbrrowsperstrip write entry writeentry tag strip byte counts stripbytecounts type cnt cnt strip byte counts offset stripbytecountsoffset strip byte counts stripbytecounts write entry writeentry tag xresolution type rational x resolution offset xresolutionoffset write entry writeentry tag yresolution type rational y resolution offset yresolutionoffset is color map iscolormap write entry writeentry tag color map colormap type color map colormap length color map offset colormapoffset offset ifd ifd write int writeint bits per sample bitspersample is rgb isrgb write short writeshort cnt cnt write int writeint strip offsets stripoffsets cnt write int writeint strip byte counts stripbytecounts xresolution yresolution dpi write int writeint write int writeint color map colormap is color map iscolormap color map colormap length write short writeshort color map colormap image data write data write entry writeentry tag type count ioexception write short writeshort tag write short writeshort type write int writeint count write int writeint write header writeheader ioexception endian write byte writebyte write byte writebyte tiff identifier write short writeshort offset ifd chosen word aligned header write int writeint write to stream writetostream ledata output stream ledataoutputstream byte stream bytestream ioexception byte stream bytestream photometric interpretation photometricinterpretation scanline pad image scanline pad scanlinepad swt error swt error unsupported format image depth palette black white white black palette data palettedata palette image palette rgb rgbs palette colors palette is direct isdirect rgbs rgbs length swt error swt error unsupported format rgb rgb rgbs rgb rgb rgbs rgb red rgb green rgb green rgb blue rgb red rgb green rgb green rgb blue rgb red rgb red x ff xff rgb red x ff xff rgb red swt error swt error unsupported format color imaged white photometric interpretation photometricinterpretation image palette colors red x ff xff photometric interpretation photometricinterpretation photometric interpretation photometricinterpretation swt error swt error unsupported format write photometric interpretation photometricinterpretation