copyright zxing authors licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license google zxing common google zxing binarizer google zxing luminance source luminancesource google zxing not found exception notfoundexception local thresholding algorithm slower global histogram binarizer globalhistogrambinarizer efficient designed high frequency images barcodes black data white backgrounds application job global blackpoint severe shadows gradients produce artifacts frequency images good general purpose binarizer zxing global histogram binarizer globalhistogrambinarizer older histogram approach readers newer local approach readers decoding row histogram inherently local fails horizontal gradients revisit problem win local blocks binarizer unit tests recommended library users author dswitkin google daniel switkin hybrid binarizer hybridbinarizer global histogram binarizer globalhistogrambinarizer blocks compute local luminance block pixels smallest dimension axis accept minimum dimension bit matrix bitmatrix matrix hybrid binarizer hybridbinarizer luminance source luminancesource source source bit matrix bitmatrix get black matrix getblackmatrix not found exception notfoundexception binarize entire image binarizeentireimage matrix binarizer create binarizer createbinarizer luminance source luminancesource source hybrid binarizer hybridbinarizer source calculates bit matrix bitmatrix requests called constructor advantages lazily making profiling easier heavy lifting callers don expect binarize entire image binarizeentireimage not found exception notfoundexception matrix luminance source luminancesource source get luminance source getluminancesource source get width getwidth minimum dimension source get height getheight minimum dimension luminances source get matrix getmatrix width source get width getwidth height source get height getheight sub width subwidth width width sub width subwidth sub height subheight height height sub height subheight black points blackpoints calculate black points calculateblackpoints luminances sub width subwidth sub height subheight width height matrix bit matrix bitmatrix width height calculate threshold for block calculatethresholdforblock luminances sub width subwidth sub height subheight width height black points blackpoints matrix image small fall global histogram approach matrix get black matrix getblackmatrix block image calculate average black point grid blocks handles corner cases fractional blocks computed based pixels row column previous block calculate threshold for block calculatethresholdforblock luminances sub width subwidth sub height subheight width height black points blackpoints bit matrix bitmatrix matrix sub height subheight yoffset yoffset height yoffset height sub width subwidth xoffset xoffset width xoffset width left left left sub width subwidth left sub width subwidth top top top sub height subheight top sub height subheight sum black row blackrow black points blackpoints top sum black row blackrow left sum black row blackrow left sum black row blackrow left sum black row blackrow left sum black row blackrow left average sum threshold block luminances xoffset yoffset average width matrix applies single threshold block pixels threshold block luminances xoffset yoffset threshold stride bit matrix bitmatrix matrix offset yoffset stride xoffset pixel luminances offset xff pixel threshold matrix xoffset yoffset calculates single black point block pixels saves calculate black points calculateblackpoints luminances sub width subwidth sub height subheight width height black points blackpoints sub height subheight sub width subwidth sub height subheight yoffset yoffset height yoffset height sub width subwidth xoffset xoffset width xoffset width sum min max offset yoffset width xoffset pixel luminances offset xff sum pixel pixel min min pixel pixel max max pixel contrast inadequate minimum block treated white background won drag neighboring blocks average max min average sum min max average black average max min black points blackpoints average black points blackpoints