copyright zxing authors licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license google zxing qrcode encoder author satorux google satoru takabayashi creator author dswitkin google daniel switkin ported mask util maskutil mask util maskutil apply mask penalty rule penalty find repetitive cells color penalty apply mask penalty rule applymaskpenaltyrule byte matrix bytematrix matrix apply mask penalty rule applymaskpenaltyrule internal matrix apply mask penalty rule applymaskpenaltyrule internal matrix apply mask penalty rule penalty find blocks color penalty apply mask penalty rule applymaskpenaltyrule byte matrix bytematrix matrix penalty array matrix get array getarray width matrix get width getwidth height matrix get height getheight height width array array array array penalty penalty apply mask penalty rule penalty find consecutive cells penalty find patterns penalties apply mask penalty rule applymaskpenaltyrule byte matrix bytematrix matrix penalty array matrix get array getarray width matrix get width getwidth height matrix get height getheight height width simplify conditions failed width array array array array array array array width array array array array array array array array penalty height array array array array array array array height array array array array array array array array penalty penalty apply mask penalty rule penalty calculate ratio dark cells penalty ratio penalty distance examples apply mask penalty rule applymaskpenaltyrule byte matrix bytematrix matrix num dark cells numdarkcells array matrix get array getarray width matrix get width getwidth height matrix get height getheight height width array num dark cells numdarkcells num total cells numtotalcells matrix get height getheight matrix get width getwidth dark ratio darkratio num dark cells numdarkcells num total cells numtotalcells math abs dark ratio darkratio mask bit get mask pattern getmaskpattern jisx mask pattern conditions get data mask bit getdatamaskbit mask pattern maskpattern qrcode is valid mask pattern isvalidmaskpattern mask pattern maskpattern illegal argument exception illegalargumentexception invalid mask pattern intermediate temp mask pattern maskpattern intermediate intermediate intermediate intermediate intermediate temp intermediate temp temp temp intermediate temp temp temp intermediate temp illegal argument exception illegalargumentexception invalid mask pattern mask pattern maskpattern intermediate helper function apply mask penalty rule applymaskpenaltyrule calculation vertical horizontal orders apply mask penalty rule applymaskpenaltyrule internal byte matrix bytematrix matrix is horizontal ishorizontal penalty num same bit cells numsamebitcells prev bit prevbit horizontal mode matrix height matrix width bit matrix vertical mode matrix width matrix height bit matrix i limit ilimit is horizontal ishorizontal matrix get height getheight matrix get width getwidth j limit jlimit is horizontal ishorizontal matrix get width getwidth matrix get height getheight array matrix get array getarray i limit ilimit j limit jlimit bit is horizontal ishorizontal array array bit prev bit prevbit num same bit cells numsamebitcells penalty num same bit cells numsamebitcells penalty num same bit cells numsamebitcells repetitive cells add penalty penalty include cell num same bit cells numsamebitcells prev bit prevbit bit clear row column num same bit cells numsamebitcells penalty