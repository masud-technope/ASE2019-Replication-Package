copyright zxing authors licensed apache license version license file compliance license copy license http apache org licenses license required applicable law agreed writing software distributed license distributed basis warranties conditions kind express implied license specific language governing permissions limitations license google zxing qrcode detector google zxing decode hint type decodehinttype google zxing format exception formatexception google zxing not found exception notfoundexception google zxing result point resultpoint google zxing result point callback resultpointcallback google zxing common bit matrix bitmatrix google zxing common detector result detectorresult google zxing common grid sampler gridsampler google zxing common perspective transform perspectivetransform google zxing qrcode decoder version java util hashtable encapsulates logic detect code image code rotated skewed partially obscured author sean owen detector bit matrix bitmatrix image result point callback resultpointcallback result point callback resultpointcallback detector bit matrix bitmatrix image image image bit matrix bitmatrix get image getimage image result point callback resultpointcallback get result point callback getresultpointcallback result point callback resultpointcallback detects code image simply link detector result detectorresult encapsulating detecting code not found exception notfoundexception code detector result detectorresult detect not found exception notfoundexception format exception formatexception detect detects code image simply param hints optional hints detector link not found exception notfoundexception encapsulating detecting code not found exception notfoundexception code format exception formatexception code decoded detector result detectorresult detect hashtable hints not found exception notfoundexception format exception formatexception result point callback resultpointcallback hints result point callback resultpointcallback hints decode hint type decodehinttype result point callback finder pattern finder finderpatternfinder finder finder pattern finder finderpatternfinder image result point callback resultpointcallback finder pattern info finderpatterninfo info finder find hints process finder pattern info processfinderpatterninfo info detector result detectorresult process finder pattern info processfinderpatterninfo finder pattern info finderpatterninfo info not found exception notfoundexception format exception formatexception finder pattern finderpattern top left topleft info get top left gettopleft finder pattern finderpattern top right topright info get top right gettopright finder pattern finderpattern bottom left bottomleft info get bottom left getbottomleft module size modulesize calculate module size calculatemodulesize top left topleft top right topright bottom left bottomleft module size modulesize not found exception notfoundexception get not found instance getnotfoundinstance dimension compute dimension computedimension top left topleft top right topright bottom left bottomleft module size modulesize version provisional version provisionalversion version get provisional version for dimension getprovisionalversionfordimension dimension modules between fpcenters modulesbetweenfpcenters provisional version provisionalversion get dimension for version getdimensionforversion alignment pattern alignmentpattern alignment pattern alignmentpattern version alignment pattern provisional version provisionalversion get alignment pattern centers getalignmentpatterncenters length guess bottom finder pattern bottom right x bottomrightx top right topright get x getx top left topleft get x getx bottom left bottomleft get x getx bottom right y bottomrighty top right topright get y gety top left topleft get y gety bottom left bottomleft get y gety estimate alignment pattern closer modules bottom top left location correction to top left correctiontotopleft modules between fpcenters modulesbetweenfpcenters est alignment x estalignmentx top left topleft get x getx correction to top left correctiontotopleft bottom right x bottomrightx top left topleft get x getx est alignment y estalignmenty top left topleft get y gety correction to top left correctiontotopleft bottom right y bottomrighty top left topleft get y gety kind arbitrary expand search radius alignment pattern alignmentpattern find alignment in region findalignmentinregion module size modulesize est alignment x estalignmentx est alignment y estalignmenty not found exception notfoundexception didn find alignment pattern perspective transform perspectivetransform transform create transform createtransform top left topleft top right topright bottom left bottomleft alignment pattern alignmentpattern dimension bit matrix bitmatrix bits sample grid samplegrid image transform dimension result point resultpoint points alignment pattern alignmentpattern points result point resultpoint bottom left bottomleft top left topleft top right topright points result point resultpoint bottom left bottomleft top left topleft top right topright alignment pattern alignmentpattern detector result detectorresult bits points perspective transform perspectivetransform create transform createtransform result point resultpoint top left topleft result point resultpoint top right topright result point resultpoint bottom left bottomleft result point resultpoint alignment pattern alignmentpattern dimension dim minus three dimminusthree dimension bottom right x bottomrightx bottom right y bottomrighty source bottom right x sourcebottomrightx source bottom right y sourcebottomrighty alignment pattern alignmentpattern bottom right x bottomrightx alignment pattern alignmentpattern get x getx bottom right y bottomrighty alignment pattern alignmentpattern get y gety source bottom right x sourcebottomrightx source bottom right y sourcebottomrighty dim minus three dimminusthree don alignment pattern bottom point bottom right x bottomrightx top right topright get x getx top left topleft get x getx bottom left bottomleft get x getx bottom right y bottomrighty top right topright get y gety top left topleft get y gety bottom left bottomleft get y gety source bottom right x sourcebottomrightx source bottom right y sourcebottomrighty dim minus three dimminusthree perspective transform perspectivetransform quadrilateral to quadrilateral quadrilateraltoquadrilateral dim minus three dimminusthree source bottom right x sourcebottomrightx source bottom right y sourcebottomrighty dim minus three dimminusthree top left topleft get x getx top left topleft get y gety top right topright get x getx top right topright get y gety bottom right x bottomrightx bottom right y bottomrighty bottom left bottomleft get x getx bottom left bottomleft get y gety bit matrix bitmatrix sample grid samplegrid bit matrix bitmatrix image perspective transform perspectivetransform transform dimension not found exception notfoundexception grid sampler gridsampler sampler grid sampler gridsampler get instance getinstance sampler sample grid samplegrid image dimension transform computes dimension number modules size code based position finder patterns estimated module size compute dimension computedimension result point resultpoint top left topleft result point resultpoint top right topright result point resultpoint bottom left bottomleft module size modulesize not found exception notfoundexception tltr centers dimension tltrcentersdimension result point resultpoint distance top left topleft top right topright module size modulesize tlbl centers dimension tlblcentersdimension result point resultpoint distance top left topleft bottom left bottomleft module size modulesize dimension tltr centers dimension tltrcentersdimension tlbl centers dimension tlblcentersdimension mod dimension dimension dimension not found exception notfoundexception get not found instance getnotfoundinstance dimension computes average estimated module size based estimated derived positions finder patterns calculate module size calculatemodulesize result point resultpoint top left topleft result point resultpoint top right topright result point resultpoint bottom left bottomleft average calculate module size one way calculatemodulesizeoneway top left topleft top right topright calculate module size one way calculatemodulesizeoneway top left topleft bottom left bottomleft estimates module size based finder patterns link size of black white black run both ways sizeofblackwhiteblackrunbothways figure width measuring axis centers calculate module size one way calculatemodulesizeoneway result point resultpoint pattern result point resultpoint other pattern otherpattern module size est modulesizeest size of black white black run both ways sizeofblackwhiteblackrunbothways pattern get x getx pattern get y gety other pattern otherpattern get x getx other pattern otherpattern get y gety module size est modulesizeest size of black white black run both ways sizeofblackwhiteblackrunbothways other pattern otherpattern get x getx other pattern otherpattern get y gety pattern get x getx pattern get y gety is na n isnan module size est modulesizeest module size est modulesizeest is na n isnan module size est modulesizeest module size est modulesizeest white black module side ergo divide sum module size est modulesizeest module size est modulesizeest link size of black white black run sizeofblackwhiteblackrun computes total width finder pattern black white black center direction point finder pattern center direction size of black white black run both ways sizeofblackwhiteblackrunbothways from x fromx from y fromy to x tox to y toy result size of black white black run sizeofblackwhiteblackrun from x fromx from y fromy to x tox to y toy count don image scale other to x othertox from x fromx to x tox from x fromx other to x othertox scale from x fromx from x fromx other to x othertox other to x othertox other to x othertox image get width getwidth scale image get width getwidth from x fromx other to x othertox from x fromx other to x othertox image get width getwidth other to y othertoy from y fromy to y toy from y fromy scale scale other to y othertoy scale from y fromy from y fromy other to y othertoy other to y othertoy other to y othertoy image get height getheight scale image get height getheight from y fromy other to y othertoy from y fromy other to y othertoy image get height getheight other to x othertox from x fromx other to x othertox from x fromx scale result size of black white black run sizeofblackwhiteblackrun from x fromx from y fromy other to x othertox other to y othertoy result method traces point image direction point black region finds white black white reports distance start point figuring wide finder pattern finder pattern skewed rotated size of black white black run sizeofblackwhiteblackrun from x fromx from y fromy to x tox to y toy mild variant bresenham algorithm http wikipedia org wiki bresenham algorithm steep math abs to y toy from y fromy math abs to x tox from x fromx steep temp from x fromx from x fromx from y fromy from y fromy temp temp to x tox to x tox to y toy to y toy temp math abs to x tox from x fromx math abs to y toy from y fromy error ystep from y fromy to y toy xstep from x fromx to x tox black pixels white time from x fromx from y fromy to x tox xstep real x realx steep real y realy steep white pixels black image real x realx real y realy image real x realx real y realy black white black stumbled white diff x diffx from x fromx diff y diffy from y fromy xstep diff x diffx math sqrt diff x diffx diff x diffx diff y diffy diff y diffy error error to y toy ystep error diff x diffx to x tox from x fromx diff y diffy to y toy from y fromy math sqrt diff x diffx diff x diffx diff y diffy diff y diffy attempts locate alignment pattern limited region image guessed method link alignment pattern alignmentpattern param overall est module size overallestmodulesize estimated module size param est alignment x estalignmentx coordinate center area alignment pattern param est alignment y estalignmenty coordinate param allowance factor allowancefactor number pixels directions search center link alignment pattern alignmentpattern not found exception notfoundexception unexpected error occurs detection alignment pattern alignmentpattern find alignment in region findalignmentinregion overall est module size overallestmodulesize est alignment x estalignmentx est alignment y estalignmenty allowance factor allowancefactor not found exception notfoundexception alignment pattern modules size allowance allowance factor allowancefactor overall est module size overallestmodulesize alignment area left x alignmentarealeftx math max est alignment x estalignmentx allowance alignment area right x alignmentarearightx math min image get width getwidth est alignment x estalignmentx allowance alignment area right x alignmentarearightx alignment area left x alignmentarealeftx overall est module size overallestmodulesize not found exception notfoundexception get not found instance getnotfoundinstance alignment area top y alignmentareatopy math max est alignment y estalignmenty allowance alignment area bottom y alignmentareabottomy math min image get height getheight est alignment y estalignmenty allowance alignment area bottom y alignmentareabottomy alignment area top y alignmentareatopy overall est module size overallestmodulesize not found exception notfoundexception get not found instance getnotfoundinstance alignment pattern finder alignmentpatternfinder alignment finder alignmentfinder alignment pattern finder alignmentpatternfinder image alignment area left x alignmentarealeftx alignment area top y alignmentareatopy alignment area right x alignmentarearightx alignment area left x alignmentarealeftx alignment area bottom y alignmentareabottomy alignment area top y alignmentareatopy overall est module size overallestmodulesize result point callback resultpointcallback alignment finder alignmentfinder find ends bit faster math rounds argument nearest rounds